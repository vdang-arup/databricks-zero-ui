import{a as Gr,b as Ot,c as Pt}from"./chunk-NRRACVCX.js";import{$ as yy,$a as Mi,A as JE,Aa as l1,Ab as Ho,B as Fl,Ba as c1,Bb as R1,C as f0,Ca as d1,Cb as A1,D as Vt,Da as u1,Db as D1,E as Ht,Eb as O1,F as gi,Fb as F1,G as gn,Gb as P1,H as e1,Hb as I1,I as sh,Ja as h1,K as re,Ka as m0,L as Xs,La as p1,M as ir,Ma as ch,N as t1,O as Ee,Oa as f1,P as ot,Pa as v0,Q as ie,Qa as C0,Qb as A0,R as J,Ra as y0,S as q,Sa as g1,T as xe,Ta as m1,Tb as Tt,U as mn,Ua as v1,Ub as Rt,V as vn,Va as Pl,W as ai,Wa as dh,X as Lr,Xa as x0,Xb as At,Y as Re,Ya as rr,Yb as Dt,Z as ve,Za as S0,Zb as Ie,_ as i1,_a as w0,a as $E,aa as gf,ab as C1,b as Dl,ba as mi,bb as kr,c as Qu,ca as pe,cb as b0,d as Cy,da as Ii,db as E0,e as fi,ea as Ui,eb as y1,ec as Me,f as hf,fa as g0,fb as Il,g as Ju,ga as Go,gb as uh,h as eh,ha as r1,hb as Ml,i as YE,ia as jn,ib as nr,ic as Kt,j as th,ja as mf,jb as _0,jc as ph,k as pf,ka as ze,kb as T0,kc as Wo,l as XE,la as tt,lb as hh,lc as M1,m as ih,ma as oh,mb as x1,mc as ye,n as p0,na as n1,nb as S1,nc as Le,o as qE,oa as ue,ob as w1,p as en,pa as s1,pb as b1,q as ZE,qa as Nt,qb as R0,r as ff,ra as ah,rb as Ll,s as Ga,sa as Nr,sb as xs,t as Ol,ta as o1,tb as E1,tc as Ft,u as Wi,ua as Bo,ub as Nl,v as rh,va as Qt,vb as _1,w as QE,wa as Vo,wb as Cn,x as ce,xa as Jt,xb as yn,y as Ve,ya as lh,yb as T1,z as nh,za as a1,zb as kl}from"./chunk-3VSD6X44.js";import"./chunk-66URT45J.js";import"./chunk-QGX4UOGU.js";import"./chunk-X6YHEMIY.js";import{a as Te,b as Ue,f as tr,g as jE,j as KE}from"./chunk-DNA43DVC.js";var xy={};tr(xy,{attrToBoolean:()=>Kn,attrToNumber:()=>Vr,attrToString:()=>IP,defaultComparator:()=>NP,exists:()=>V,jsonEquals:()=>LP,makeNull:()=>Br,missing:()=>Ce,missingOrEmpty:()=>sr,referenceCompare:()=>MP,toStringOrNull:()=>Gl,values:()=>qs});function Br(r){return r==null||r===""?null:r}function V(r,e=!1){return r!=null&&(r!==""||e)}function Ce(r){return!V(r)}function sr(r){return r==null||r.length===0}function Gl(r){return r!=null&&typeof r.toString=="function"?r.toString():null}function Vr(r){if(r===void 0)return;if(r===null||r==="")return null;if(typeof r=="number")return isNaN(r)?void 0:r;let e=parseInt(r,10);return isNaN(e)?void 0:e}function Kn(r){if(r!==void 0)return r===null||r===""?!1:typeof r=="boolean"?r:/true/i.test(r)}function IP(r){if(!(r==null||r===""))return r}function MP(r,e){return r==null&&e==null?!0:r==null&&e!=null||r!=null&&e==null?!1:r===e}function LP(r,e){let t=r?JSON.stringify(r):null,i=e?JSON.stringify(e):null;return t===i}function NP(r,e,t=!1){let i=r==null,n=e==null;if(r&&r.toNumber&&(r=r.toNumber()),e&&e.toNumber&&(e=e.toNumber()),i&&n)return 0;if(i)return-1;if(n)return 1;function s(o,a){return o>a?1:o<a?-1:0}if(typeof r!="string"||!t)return s(r,e);try{return r.localeCompare(e)}catch{return s(r,e)}}function qs(r){if(r instanceof Set||r instanceof Map){let e=[];return r.forEach(t=>e.push(t)),e}return Object.values(r)}var vf=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Gl(e);let i=0;for(;;){let n;if(e?(n=e,i!==0&&(n+="_"+i)):t?(n=t,i!==0&&(n+="_"+i)):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}}};var by={};tr(by,{cloneObject:()=>Cf,copyPropertiesIfPresent:()=>GP,copyPropertyIfPresent:()=>k1,deepCloneDefinition:()=>yf,deepCloneObject:()=>kP,get:()=>VP,getAllKeysInObjects:()=>Sy,getAllValuesInObject:()=>Hr,getProperty:()=>L1,getValueUsingField:()=>Ba,isNonNullObject:()=>D0,iterateObject:()=>ft,mergeDeep:()=>or,missingOrEmptyObject:()=>BP,removeAllReferences:()=>wy,set:()=>HP,setProperty:()=>N1});function ft(r,e){if(r!=null){if(Array.isArray(r)){for(let t=0;t<r.length;t++)e(t.toString(),r[t]);return}for(let[t,i]of Object.entries(r))e(t,i)}}function Cf(r){let e={},t=Object.keys(r);for(let i=0;i<t.length;i++){let n=t[i],s=r[n];e[n]=s}return e}function kP(r){return JSON.parse(JSON.stringify(r))}function yf(r,e){if(!r)return;let t=r,i={};return Object.keys(t).forEach(n=>{if(e&&e.indexOf(n)>=0)return;let s=t[n];D0(s)&&s.constructor===Object?i[n]=yf(s):i[n]=s}),i}function L1(r,e){return r[e]}function N1(r,e,t){r[e]=t}function GP(r,e,...t){t.forEach(i=>k1(r,e,i))}function k1(r,e,t,i){let n=L1(r,t);n!==void 0&&N1(e,t,i?i(n):n)}function Sy(r){let e={};return r.filter(t=>t!=null).forEach(t=>{Object.keys(t).forEach(i=>e[i]=null)}),Object.keys(e)}function Hr(r){if(!r)return[];let e=Object;if(typeof e.values=="function")return e.values(r);let t=[];for(let i in r)r.hasOwnProperty(i)&&r.propertyIsEnumerable(i)&&t.push(r[i]);return t}function or(r,e,t=!0,i=!1){V(e)&&ft(e,(n,s)=>{let o=r[n];o!==s&&(i&&o==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(o={},r[n]=o),D0(s)&&D0(o)&&!Array.isArray(o)?or(o,s,t,i):(t||s!==void 0)&&(r[n]=s))})}function BP(r){return Ce(r)||Object.keys(r).length===0}function VP(r,e,t){if(r==null)return t;let i=e.split("."),n=r;for(;i.length>1;)if(n=n[i.shift()],n==null)return t;let s=n[i[0]];return s??t}function HP(r,e,t){if(r==null)return;let i=e.split("."),n=r;i.forEach((s,o)=>{n[s]||(n[s]={}),o<i.length-1&&(n=n[s])}),n[i[i.length-1]]=t}function Ba(r,e,t){if(!e||!r)return;if(!t)return r[e];let i=e.split("."),n=r;for(let s=0;s<i.length;s++){if(n==null)return;n=n[i[s]]}return n}function wy(r,e){Object.keys(r).forEach(n=>{typeof r[n]=="object"&&(r[n]=void 0)});let t=Object.getPrototypeOf(r),i={};Object.keys(t).forEach(n=>{if(typeof t[n]=="function"){let o=()=>{console.warn(`AG Grid: ${e} function ${n}() cannot be called as the grid has been destroyed.
                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't
                     be keeping the API reference, your application has a memory leak! Remove the API reference
                     when the grid is destroyed.`)};i[n]={value:o,writable:!0}}}),Object.defineProperties(r,i)}function D0(r){return typeof r=="object"&&r!==null}var Ay={};tr(Ay,{callIfPresent:()=>Ry,compose:()=>WP,debounce:()=>ar,doOnce:()=>Ne,executeAfter:()=>B1,executeInAWhile:()=>Ty,executeNextVMTurn:()=>O0,getFunctionName:()=>gd,isFunction:()=>md,noop:()=>UP,throttle:()=>F0,waitUntil:()=>xf});var G1={};function Ne(r,e){G1[e]||(r(),G1[e]=!0)}function gd(r){if(r.name)return r.name;let e=/function\s+([^\(]+)/.exec(r.toString());return e&&e.length===2?e[1].trim():null}function md(r){return!!(r&&r.constructor&&r.call&&r.apply)}function Ty(r){B1(r,400)}var Ey=[],_y=!1;function O0(r){Ey.push(r),!_y&&(_y=!0,window.setTimeout(()=>{let e=Ey.slice();Ey.length=0,_y=!1,e.forEach(t=>t())},0))}function B1(r,e=0){r.length>0&&window.setTimeout(()=>r.forEach(t=>t()),e)}function ar(r,e){let t;return function(...i){let n=this;window.clearTimeout(t),t=window.setTimeout(function(){r.apply(n,i)},e)}}function F0(r,e){let t=0;return function(...i){let n=this,s=new Date().getTime();s-t<e||(t=s,r.apply(n,i))}}function xf(r,e,t=100,i){let n=new Date().getTime(),s=null,o=!1,a=()=>{let l=new Date().getTime()-n>t;(r()||l)&&(e(),o=!0,s!=null&&(window.clearInterval(s),s=null),l&&i&&console.warn(i))};a(),o||(s=window.setInterval(a,10))}function WP(...r){return e=>r.reduce((t,i)=>i(t),e)}function Ry(r){r&&r()}var UP=()=>{};var he=function(r){return r.CommunityCoreModule="@ag-grid-community/core",r.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",r.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",r.CsvExportModule="@ag-grid-community/csv-export",r.EnterpriseCoreModule="@ag-grid-enterprise/core",r.RowGroupingModule="@ag-grid-enterprise/row-grouping",r.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",r.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",r.MenuModule="@ag-grid-enterprise/menu",r.SetFilterModule="@ag-grid-enterprise/set-filter",r.MultiFilterModule="@ag-grid-enterprise/multi-filter",r.StatusBarModule="@ag-grid-enterprise/status-bar",r.SideBarModule="@ag-grid-enterprise/side-bar",r.RangeSelectionModule="@ag-grid-enterprise/range-selection",r.MasterDetailModule="@ag-grid-enterprise/master-detail",r.RichSelectModule="@ag-grid-enterprise/rich-select",r.GridChartsModule="@ag-grid-enterprise/charts",r.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",r.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",r.ExcelExportModule="@ag-grid-enterprise/excel-export",r.ClipboardModule="@ag-grid-enterprise/clipboard",r.SparklinesModule="@ag-grid-enterprise/sparklines",r.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",r.AngularModule="@ag-grid-community/angular",r.ReactModule="@ag-grid-community/react",r.VueModule="@ag-grid-community/vue",r}(he||{});var De=(()=>{class r{static register(t){r.__register(t,!0,void 0)}static registerModules(t){r.__registerModules(t,!0,void 0)}static __register(t,i,n){r.runVersionChecks(t),n!==void 0?(r.areGridScopedModules=!0,r.gridModulesMap[n]===void 0&&(r.gridModulesMap[n]={}),r.gridModulesMap[n][t.moduleName]=t):r.globalModulesMap[t.moduleName]=t,r.setModuleBased(i)}static __unRegisterGridModules(t){delete r.gridModulesMap[t]}static __registerModules(t,i,n){r.setModuleBased(i),t&&t.forEach(s=>r.__register(s,i,n))}static isValidModuleVersion(t){let[i,n]=t.version.split(".")||[],[s,o]=r.currentModuleVersion.split(".")||[];return i===s&&n===o}static runVersionChecks(t){if(r.currentModuleVersion||(r.currentModuleVersion=t.version),t.version?r.isValidModuleVersion(t)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is version ${t.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is incompatible. Please update all modules to the same version.`),t.validate){let i=t.validate();i.isValid||console.error(`AG Grid: ${i.message}`)}}static setModuleBased(t){r.moduleBased===void 0?r.moduleBased=t:r.moduleBased!==t&&Ne(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){r.isBundled=!0}static __assertRegistered(t,i,n){var s;if(this.__isRegistered(t,n))return!0;let o=i+t,a;if(r.isBundled)a=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(r.moduleBased||r.moduleBased===void 0){let l=(s=Object.entries(he).find(([c,d])=>d===t))===null||s===void 0?void 0:s[0];a=`AG Grid: unable to use ${i} as the ${l} is not registered${r.areGridScopedModules?` for gridId: ${n}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${l} } from '${t}';
    
    ModuleRegistry.registerModules([ ${l} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else a=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`;return Ne(()=>{console.warn(a)},o),!1}static __isRegistered(t,i){var n;return!!r.globalModulesMap[t]||!!(!((n=r.gridModulesMap[i])===null||n===void 0)&&n[t])}static __getRegisteredModules(t){return[...qs(r.globalModulesMap),...qs(r.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var i;return qs((i=r.gridModulesMap[t])!==null&&i!==void 0?i:{})||[]}static __isPackageBased(){return!r.moduleBased}}return r.globalModulesMap={},r.gridModulesMap={},r.areGridScopedModules=!1,r})();var Sf=class{constructor(e,t){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();let i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return qs(this.beanWrappers).map(e=>e.beanInstance)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],t),e}wireBeans(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),V(t)&&e.forEach(t),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),ft(this.beanWrappers,(t,i)=>{let n;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(n=i.bean.__agBeanMetaData.autowireMethods.agConstructor);let s=this.getBeansForParameters(n,i.bean.name),o=new(i.bean.bind.apply(i.bean,[null,...s]));i.beanInstance=o});let e=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${e}`)}createBeanWrapper(e){let t=e.__agBeanMetaData;if(!t){let n;e.prototype.constructor?n=gd(e.prototype.constructor):n=""+e,console.error(`Context item ${n} is not a bean`);return}let i={bean:e,beanInstance:null,beanName:t.beanName};this.beanWrappers[t.beanName]=i}autoWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,n)=>{let s=i.agClassAttributes;s&&s.forEach(o=>{let a=this.lookupBeanInstance(n,o.beanName,o.optional);t[o.attributeName]=a})})})}methodWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,n)=>{ft(i.autowireMethods,(s,o)=>{if(s==="agConstructor")return;let a=this.getBeansForParameters(o,n);t[s].apply(t,a)})})})}forEachMetaDataInHierarchy(e,t){let i=Object.getPrototypeOf(e);for(;i!=null;){let n=i.constructor;if(n.hasOwnProperty("__agBeanMetaData")){let s=n.__agBeanMetaData,o=this.getBeanName(n);t(s,o)}i=Object.getPrototypeOf(i)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;let t=e.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(e,t){let i=[];return e&&ft(e,(n,s)=>{let o=this.lookupBeanInstance(t,s);i[Number(n)]=o}),i}lookupBeanInstance(e,t,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${t} is used after the grid is destroyed!`),null;if(t==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];let n=this.beanWrappers[t];return n?n.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${t} while initialising ${e}`),null)}callLifeCycleMethods(e,t){e.forEach(i=>this.callLifeCycleMethodsOnBean(i,t))}callLifeCycleMethodsOnBean(e,t,i){let n={};this.forEachMetaDataInHierarchy(e,o=>{let a=o[t];a&&a.forEach(l=>{l!=i&&(n[l]=!0)})}),Object.keys(n).forEach(o=>e[o]())}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");let e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,De.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){e&&this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach(t=>{this.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");let i=t;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function P0(r,e,t){let i=vd(r.constructor);i.preConstructMethods||(i.preConstructMethods=[]),i.preConstructMethods.push(e)}function G(r,e,t){let i=vd(r.constructor);i.postConstructMethods||(i.postConstructMethods=[]),i.postConstructMethods.push(e)}function at(r,e,t){let i=vd(r.constructor);i.preDestroyMethods||(i.preDestroyMethods=[]),i.preDestroyMethods.push(e)}function Y(r){return e=>{let t=vd(e);t.beanName=r}}function y(r){return(e,t,i)=>{V1(e,r,!1,e,t,null)}}function He(r){return(e,t,i)=>{V1(e,r,!0,e,t,null)}}function V1(r,e,t,i,n,s){if(e===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof s=="number"){console.error("AG Grid: Autowired should be on an attribute");return}let o=vd(r.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:n,beanName:e,optional:t})}function Wt(r){return(e,t,i)=>{let n=typeof e=="function"?e:e.constructor,s;if(typeof i=="number"){let o;t?(s=vd(n),o=t):(s=vd(n),o="agConstructor"),s.autowireMethods||(s.autowireMethods={}),s.autowireMethods[o]||(s.autowireMethods[o]={}),s.autowireMethods[o][i]=r}}}function vd(r){return r.hasOwnProperty("__agBeanMetaData")||(r.__agBeanMetaData={}),r.__agBeanMetaData}var H1=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},wf=function(r,e){return function(t,i){e(t,i,r)}},Li=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t,i,n=null,s=null){if(this.frameworkOverrides=i,this.gridOptionsService=t,n){let o=t.useAsyncEvents();this.addGlobalListener(n,o)}s&&this.addGlobalListener(s,!1)}getListeners(e,t,i){let n=t?this.allAsyncListeners:this.allSyncListeners,s=n.get(e);return!s&&i&&(s=new Set,n.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){let n=this.getListeners(e,i,!1);n&&(n.delete(t),n.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;if(this.gridOptionsService){let{api:i,columnApi:n,context:s}=this.gridOptionsService;t.api=i,t.columnApi=n,t.context=s}this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let i=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let n=a=>a.forEach(l=>{t?this.dispatchAsync(()=>l(e)):l(e)}),s=new Set(this.getListeners(i,t,!1));s.size>0&&n(s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{t?this.dispatchAsync(()=>this.frameworkOverrides.dispatchEvent(i,()=>a(i,e),!0)):this.frameworkOverrides.dispatchEvent(i,()=>a(i,e),!0)})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};H1([wf(0,Wt("loggerFactory")),wf(1,Wt("gridOptionsService")),wf(2,Wt("frameworkOverrides")),wf(3,Wt("globalEventListener")),wf(4,Wt("globalSyncEventListener"))],Li.prototype,"setBeans",null);Li=H1([Y("eventService")],Li);var I0=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zP=0;function Dy(){return zP++}var Oe=class r{constructor(e,t,i,n){this.instanceId=Dy(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new Li,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=Vr(e.sortIndex),i=Vr(e.initialSortIndex);t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);let n=Kn(e.hide),s=Kn(e.initialHide);n!==void 0?this.visible=!n:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let o=Vr(e.flex),a=Vr(e.initialFlex);o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(e,t){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.validate()}initDotNotation(){let e=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=V(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=V(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(e),this.maxWidth=this.columnUtils.calculateColMaxWidth(e)}initTooltip(){this.tooltipEnabled=V(this.colDef.tooltipField)||V(this.colDef.tooltipValueGetter)||V(this.colDef.tooltipComponent)}resetActualWidth(e="api"){let t=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Ce(this.colDef)||Ce(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}validate(){let e=this.colDef;function t(n,s,o){Ne(()=>{o?console.warn(n,o):Ne(()=>console.warn(n),s)},s)}if(this.gridOptionsService.isRowModelType("clientSide")&&!De.__isRegistered(he.RowGroupingModule,this.gridOptionsService.getGridId())){let s=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].filter(o=>V(e[o]));s.length>0&&De.__assertRegistered(he.RowGroupingModule,s.map(o=>"colDef."+o).join(", "),this.gridOptionsService.getGridId())}if((this.colDef.cellEditor==="agRichSelect"||this.colDef.cellEditor==="agRichSelectCellEditor")&&De.__assertRegistered(he.RichSelectModule,this.colDef.cellEditor,this.gridOptionsService.getGridId()),this.gridOptionsService.is("treeData")){let s=["rowGroup","rowGroupIndex","pivot","pivotIndex"].filter(o=>V(e[o]));s.length>0&&t(`AG Grid: ${s.join()} is not possible when doing tree data, your column definition should not have ${s.join()}`,"TreeDataCannotRowGroup")}if(V(e.menuTabs))if(Array.isArray(e.menuTabs)){let n=["filterMenuTab"],s=["columnsMenuTab","generalMenuTab"],o=s.filter(a=>e.menuTabs.includes(a));o.length>0&&De.__assertRegistered(he.MenuModule,`menuTab(s): ${o.map(a=>`'${a}'`).join()}`,this.gridOptionsService.getGridId()),e.menuTabs.forEach(a=>{!s.includes(a)&&!n.includes(a)&&t(`AG Grid: '${a}' is not valid for 'colDef.menuTabs'. Valid values are: ${[...n,...s].map(l=>`'${l}'`).join()}.`,"wrongValue_menuTabs_"+a)})}else t("AG Grid: The typeof 'colDef.menuTabs' should be an array not:"+typeof e.menuTabs,"wrongType_menuTabs");V(e.columnsMenuParams)&&De.__assertRegistered(he.MenuModule,"columnsMenuParams",this.gridOptionsService.getGridId()),V(e.columnsMenuParams)&&De.__assertRegistered(he.ColumnsToolPanelModule,"columnsMenuParams",this.gridOptionsService.getGridId()),V(this.colDef.width)&&typeof this.colDef.width!="number"&&t("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),V(e.columnGroupShow)&&e.columnGroupShow!=="closed"&&e.columnGroupShow!=="open"&&t(`AG Grid: '${e.columnGroupShow}' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null`,"columnGroupShow_invalid")}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}createColumnFunctionCallbackParams(e){return{node:e,data:e.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){return e.group&&!this.gridOptionsService.is("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!Kn(this.colDef.suppressFillHandle)}isAutoHeight(){return!!Kn(this.colDef.autoHeight)}isAutoHeaderHeight(){return!!Kn(this.colDef.autoHeaderHeight)}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!Kn(this.colDef.resizable)}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setMoving(e,t="api"){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return{type:e,column:this,columns:[this],source:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t="api"){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,t="api"){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Ce(this.sort)}isSorting(){return V(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t="api"){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t="api",i){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let n=this.createColumnEvent("filterChanged",t);i&&or(n,i),this.eventService.dispatchEvent(n)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t="api"){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t="api"){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t="api"){let i=e===!0;this.visible!==i&&(this.visible=i,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return{node:e,data:e.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}getColSpan(e){if(Ce(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Ce(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t="api",i=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e="api"){V(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t="api"){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t="api"){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t="api"){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){let t=this.getColDef().menuTabs;return t==null&&(t=e),t}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:r.EVENT_STATE_UPDATED,key:e})}};Oe.EVENT_MOVING_CHANGED="movingChanged";Oe.EVENT_LEFT_CHANGED="leftChanged";Oe.EVENT_WIDTH_CHANGED="widthChanged";Oe.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";Oe.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";Oe.EVENT_VISIBLE_CHANGED="visibleChanged";Oe.EVENT_FILTER_CHANGED="filterChanged";Oe.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";Oe.EVENT_SORT_CHANGED="sortChanged";Oe.EVENT_COL_DEF_CHANGED="colDefChanged";Oe.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";Oe.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";Oe.EVENT_PIVOT_CHANGED="columnPivotChanged";Oe.EVENT_VALUE_CHANGED="columnValueChanged";Oe.EVENT_STATE_UPDATED="columnStateUpdated";I0([y("gridOptionsService")],Oe.prototype,"gridOptionsService",void 0);I0([y("columnUtils")],Oe.prototype,"columnUtils",void 0);I0([y("columnHoverService")],Oe.prototype,"columnHoverService",void 0);I0([G],Oe.prototype,"initialise",null);var jP=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},bt=class r{constructor(e,t,i,n){this.localEventService=new Li,this.expandable=!1,this.instanceId=Dy(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=n}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;let t={type:r.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(t)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{t instanceof Oe?e.push(t):t instanceof r&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1,n=this.findChildrenRemovingPadding();for(let o=0,a=n.length;o<a;o++){let l=n[o];if(!l.isVisible())continue;let c=l.getColumnGroupShow();c==="open"?(e=!0,i=!0):c==="closed"?(t=!0,i=!0):(e=!0,t=!0)}let s=e&&t&&i;if(this.expandable!==s){this.expandable=s;let o={type:r.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(o)}}findChildrenRemovingPadding(){let e=[],t=i=>{i.forEach(n=>{n instanceof r&&n.isPadding()?t(n.children):e.push(n)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};bt.EVENT_EXPANDED_CHANGED="expandedChanged";bt.EVENT_EXPANDABLE_CHANGED="expandableChanged";jP([at],bt.prototype,"destroy",null);var W1={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};var ky={};tr(ky,{addSafePassiveEventListener:()=>Ny,createEventPath:()=>j1,getCtrlForEventTarget:()=>gh,getEventPath:()=>K1,isElementInEventPath:()=>mh,isEventSupported:()=>bf,isStopPropagationForAgGrid:()=>dr,stopPropagationForAgGrid:()=>wr});var My={};tr(My,{areEqual:()=>Zs,existsAndNotEmpty:()=>KP,firstExistingValue:()=>Oy,flatten:()=>Iy,forEachReverse:()=>ZP,includes:()=>cr,insertArrayIntoArray:()=>XP,insertIntoArray:()=>fh,last:()=>je,moveInArray:()=>L0,pushAll:()=>N0,removeAllFromArray:()=>U1,removeAllFromUnorderedArray:()=>Py,removeFromArray:()=>lr,removeFromUnorderedArray:()=>M0,removeRepeatsFromArray:()=>YP,shallowCompare:()=>$P,sortNumerically:()=>Fy,toStrings:()=>qP});function Oy(...r){for(let e=0;e<r.length;e++){let t=r[e];if(V(t))return t}return null}function KP(r){return r!=null&&r.length>0}function je(r){if(!(!r||!r.length))return r[r.length-1]}function Zs(r,e,t){return r==null&&e==null?!0:r!=null&&e!=null&&r.length===e.length&&r.every((i,n)=>t?t(i,e[n]):e[n]===i)}function $P(r,e){return Zs(r,e)}function Fy(r){return r.sort((e,t)=>e-t)}function YP(r,e){if(r)for(let t=r.length-2;t>=0;t--){let i=r[t]===e,n=r[t+1]===e;i&&n&&r.splice(t+1,1)}}function M0(r,e){let t=r.indexOf(e);t>=0&&(r[t]=r[r.length-1],r.pop())}function lr(r,e){let t=r.indexOf(e);t>=0&&r.splice(t,1)}function Py(r,e){for(let t=0;t<e.length;t++)M0(r,e[t])}function U1(r,e){for(let t=0;t<e.length;t++)lr(r,e[t])}function fh(r,e,t){r.splice(t,0,e)}function XP(r,e,t){if(!(r==null||e==null))for(let i=e.length-1;i>=0;i--){let n=e[i];fh(r,n,t)}}function L0(r,e,t){U1(r,e),e.slice().reverse().forEach(i=>fh(r,i,t))}function cr(r,e){return r.indexOf(e)>-1}function Iy(r){return[].concat.apply([],r)}function N0(r,e){e==null||r==null||e.forEach(t=>r.push(t))}function qP(r){return r.map(Gl)}function ZP(r,e){if(r!=null)for(let t=r.length-1;t>=0;t--)e(r[t],t)}var z1="__ag_Grid_Stop_Propagation",QP=["touchstart","touchend","touchmove","touchcancel","scroll"],Ly={};function wr(r){r[z1]=!0}function dr(r){return r[z1]===!0}var bf=(()=>{let r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if(typeof Ly[t]=="boolean")return Ly[t];let i=document.createElement(r[t]||"div");return t="on"+t,Ly[t]=t in i}})();function gh(r,e,t){let i=e;for(;i;){let n=r.getDomData(i,t);if(n)return n;i=i.parentElement}return null}function mh(r,e){return!e||!r?!1:K1(e).indexOf(r)>=0}function j1(r){let e=[],t=r.target;for(;t;)e.push(t),t=t.parentElement;return e}function K1(r){let e=r;return e.path?e.path:e.composedPath?e.composedPath():j1(e)}function Ny(r,e,t,i){let s=cr(QP,t)?{passive:!0}:void 0;r&&r.addEventListener&&r.addEventListener(e,t,i,s)}var Cd=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},L=class r{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){this.destroyFunctions.forEach(e=>e()),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:r.EVENT_DESTROYED})}addEventListener(e,t){this.localEventService||(this.localEventService=new Li),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchEventAsync(e){window.setTimeout(()=>this.dispatchEvent(e),0)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,t,i){if(this.destroyed)return;e instanceof HTMLElement?Ny(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);let n=()=>(e.removeEventListener(t,i),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null);return this.destroyFunctions.push(n),n}setupGridOptionListener(e,t){this.gridOptionsService.addEventListener(e,t);let i=()=>(this.gridOptionsService.removeEventListener(e,t),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null);this.destroyFunctions.push(i)}addManagedPropertyListener(e,t){this.destroyed||this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let i=e.join("-")+this.propertyListenerId++,n=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=s.changeSet.id}let o={type:"gridPropertyChanged",changeSet:s.changeSet};t(o)};e.forEach(s=>this.setupGridOptionListener(s,n))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.getContext()).createBean(e,i)}destroyBean(e,t){return(t||this.getContext()).destroyBean(e)}destroyBeans(e,t){return e&&e.forEach(i=>this.destroyBean(i,t)),[]}};L.EVENT_DESTROYED="destroyed";Cd([y("frameworkOverrides")],L.prototype,"frameworkOverrides",void 0);Cd([y("context")],L.prototype,"context",void 0);Cd([y("eventService")],L.prototype,"eventService",void 0);Cd([y("gridOptionsService")],L.prototype,"gridOptionsService",void 0);Cd([y("localeService")],L.prototype,"localeService",void 0);Cd([y("environment")],L.prototype,"environment",void 0);Cd([at],L.prototype,"destroy",null);var k0=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},JP=function(r,e){return function(t,i){e(t,i,r)}},Bl=class extends L{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,i){let n=new vf,{existingCols:s,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(i);n.addExistingKeys(a);let l=this.recursivelyCreateColumns(e,0,t,s,n,o),c=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+c);let d=this.balanceColumnTree(l,0,c,n),u=(h,p)=>{h instanceof bt&&h.setupExpandable(),h.setOriginalParent(p)};return this.columnUtils.depthFirstOriginalTreeSearch(null,d,u),{columnTree:d,treeDept:c}}extractExistingTreeData(e){let t=[],i=[],n=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,s=>{if(s instanceof bt){let o=s;i.push(o)}else{let o=s;n.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}createForAutoGroups(e,t){return e.map(i=>this.createAutoGroupTreeItem(t,i))}createAutoGroupTreeItem(e,t){let i=this.findDepth(e),n=t;for(let s=i-1;s>=0;s--){let o=new bt(null,`FAKE_PATH_${t.getId()}}_${s}`,!0,s);this.createBean(o),o.setChildren([n]),n.setOriginalParent(o),n=o}return i===0&&t.setOriginalParent(null),n}findDepth(e){let t=0,i=e;for(;i&&i[0]&&i[0]instanceof bt;)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,n){let s=[];for(let o=0;o<e.length;o++){let a=e[o];if(a instanceof bt){let l=a,c=this.balanceColumnTree(l.getChildren(),t+1,i,n);l.setChildren(c),s.push(l)}else{let l,c;for(let d=i-1;d>=t;d--){let u=n.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),p=new bt(h,u,!0,t);this.createBean(p),c&&c.setChildren([p]),c=p,l||(l=c)}if(l&&c)if(s.push(l),e.some(u=>u instanceof bt)){c.setChildren([a]);continue}else{c.setChildren(e);break}s.push(a)}}return s}findMaxDept(e,t){let i=t;for(let n=0;n<e.length;n++){let s=e[n];if(s instanceof bt){let o=s,a=this.findMaxDept(o.getChildren(),t+1);i<a&&(i=a)}}return i}recursivelyCreateColumns(e,t,i,n,s,o){if(!e)return[];let a=new Array(e.length);for(let l=0;l<a.length;l++){let c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(i,c,t,n,s,o):a[l]=this.createColumn(i,c,n,s)}return a}createColumnGroup(e,t,i,n,s,o){let a=this.createMergedColGroupDef(t),l=s.getUniqueKey(a.groupId||null,null),c=new bt(a,l,!1,i);this.createBean(c);let d=this.findExistingGroup(t,o);d&&o.splice(d.idx,1);let u=d?.group;u&&c.setExpanded(u.isExpanded());let h=this.recursivelyCreateColumns(a.children,i+1,e,n,s,o);return c.setChildren(h),c}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,n){let s=this.findExistingColumn(t,i);s&&i?.splice(s.idx,1);let o=s?.column;if(o){let a=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(a,t),this.applyColumnState(o,a)}else{let a=n.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);o=new Oe(l,t,a,e),this.context.createBean(o)}return this.dataTypeService.addColumnListeners(o),o}applyColumnState(e,t){let i=Vr(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){let a=Vr(t.width);if(a!=null)e.setActualWidth(a);else{let l=e.getActualWidth();e.setActualWidth(l)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort):e.setSort(void 0));let s=Vr(t.sortIndex);s!==void 0&&e.setSortIndex(s);let o=Kn(t.hide);o!==void 0&&e.setVisible(!o),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){let n=t[i].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(n.field===e.field)return{idx:i,column:t[i]};continue}if(n===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){let s=t[n];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:n,group:s}}}addColumnDefaultAndTypes(e,t){let i={},n=this.gridOptionsService.get("defaultColDef");or(i,n,!1,!0);let s=this.dataTypeService.updateColDefAndGetColumnType(i,e,t);s&&this.assignColumnTypes(s,i),or(i,e,!1,!0);let o=this.gridOptionsService.get("autoGroupColumnDef"),a=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&o&&a&&or(i,{sort:o.sort,initialSort:o.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(e,t){if(!e.length)return;let i=Object.assign({},W1),n=this.gridOptionsService.get("columnTypes")||{};ft(n,(s,o)=>{s in i?console.warn(`AG Grid: the column type '${s}' is a default column type and cannot be overridden.`):i[s]=o}),e.forEach(s=>{let o=i[s.trim()];o?or(t,o,!1,!0):console.warn("AG Grid: colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};k0([y("columnUtils")],Bl.prototype,"columnUtils",void 0);k0([y("dataTypeService")],Bl.prototype,"dataTypeService",void 0);k0([JP(0,Wt("loggerFactory"))],Bl.prototype,"setBeans",null);Bl=k0([Y("columnFactory")],Bl);var e2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ut=class r{constructor(e,t,i,n){this.displayedChildren=[],this.localEventService=new Li,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=n}static createUniqueId(e,t){return e+"_"+t}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return r.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof r&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){let t=je(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=e,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let t=!1;return this.children.forEach(i=>{e===i&&(t=!0),i instanceof r&&i.isChildInThisGroupDeepSearch(e)&&(t=!0)}),t}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{t instanceof Oe?e.push(t):t instanceof r&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{t instanceof Oe?e.push(t):t instanceof r&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(i=>{if(i instanceof r&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED))}};Ut.EVENT_LEFT_CHANGED="leftChanged";Ut.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";e2([y("gridOptionsService")],Ut.prototype,"gridOptionsService",void 0);var w=(()=>{class r{}return r.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",r.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",r.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",r.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",r.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",r.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",r.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",r.EVENT_COLUMN_MOVED="columnMoved",r.EVENT_COLUMN_VISIBLE="columnVisible",r.EVENT_COLUMN_PINNED="columnPinned",r.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",r.EVENT_COLUMN_RESIZED="columnResized",r.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",r.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",r.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",r.EVENT_ROW_GROUP_OPENED="rowGroupOpened",r.EVENT_ROW_DATA_CHANGED="rowDataChanged",r.EVENT_ROW_DATA_UPDATED="rowDataUpdated",r.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",r.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",r.EVENT_CHART_CREATED="chartCreated",r.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",r.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",r.EVENT_CHART_DESTROYED="chartDestroyed",r.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",r.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",r.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",r.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",r.EVENT_MODEL_UPDATED="modelUpdated",r.EVENT_CUT_START="cutStart",r.EVENT_CUT_END="cutEnd",r.EVENT_PASTE_START="pasteStart",r.EVENT_PASTE_END="pasteEnd",r.EVENT_FILL_START="fillStart",r.EVENT_FILL_END="fillEnd",r.EVENT_RANGE_DELETE_START="rangeDeleteStart",r.EVENT_RANGE_DELETE_END="rangeDeleteEnd",r.EVENT_UNDO_STARTED="undoStarted",r.EVENT_UNDO_ENDED="undoEnded",r.EVENT_REDO_STARTED="redoStarted",r.EVENT_REDO_ENDED="redoEnded",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",r.EVENT_CELL_CLICKED="cellClicked",r.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",r.EVENT_CELL_MOUSE_DOWN="cellMouseDown",r.EVENT_CELL_CONTEXT_MENU="cellContextMenu",r.EVENT_CELL_VALUE_CHANGED="cellValueChanged",r.EVENT_CELL_EDIT_REQUEST="cellEditRequest",r.EVENT_ROW_VALUE_CHANGED="rowValueChanged",r.EVENT_CELL_FOCUSED="cellFocused",r.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",r.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_SELECTION_CHANGED="selectionChanged",r.EVENT_TOOLTIP_SHOW="tooltipShow",r.EVENT_TOOLTIP_HIDE="tooltipHide",r.EVENT_CELL_KEY_DOWN="cellKeyDown",r.EVENT_CELL_MOUSE_OVER="cellMouseOver",r.EVENT_CELL_MOUSE_OUT="cellMouseOut",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_MODIFIED="filterModified",r.EVENT_FILTER_OPENED="filterOpened",r.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",r.EVENT_ROW_CLICKED="rowClicked",r.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",r.EVENT_GRID_READY="gridReady",r.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",r.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",r.EVENT_VIEWPORT_CHANGED="viewportChanged",r.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",r.EVENT_FIRST_DATA_RENDERED="firstDataRendered",r.EVENT_DRAG_STARTED="dragStarted",r.EVENT_DRAG_STOPPED="dragStopped",r.EVENT_CHECKBOX_CHANGED="checkboxChanged",r.EVENT_ROW_EDITING_STARTED="rowEditingStarted",r.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",r.EVENT_CELL_EDITING_STARTED="cellEditingStarted",r.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",r.EVENT_BODY_SCROLL="bodyScroll",r.EVENT_BODY_SCROLL_END="bodyScrollEnd",r.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",r.EVENT_PAGINATION_CHANGED="paginationChanged",r.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",r.EVENT_STORE_REFRESHED="storeRefreshed",r.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",r.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",r.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",r.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",r.EVENT_FLASH_CELLS="flashCells",r.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",r.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",r.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",r.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",r.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",r.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",r.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",r.EVENT_ROW_DRAG_ENTER="rowDragEnter",r.EVENT_ROW_DRAG_MOVE="rowDragMove",r.EVENT_ROW_DRAG_LEAVE="rowDragLeave",r.EVENT_ROW_DRAG_END="rowDragEnd",r.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",r.EVENT_POPUP_TO_FRONT="popupToFront",r.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",r.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",r.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",r.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",r.EVENT_KEYBOARD_FOCUS="keyboardFocus",r.EVENT_MOUSE_FOCUS="mouseFocus",r.EVENT_STORE_UPDATED="storeUpdated",r.EVENT_FILTER_DESTROYED="filterDestroyed",r.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",r.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",r.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",r.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",r.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",r})();var Ef=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}};var Gy=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Vl="ag-Grid-AutoColumn",vh=class extends L{createAutoGroupColumns(e){let t=[],i=this.gridOptionsService.is("treeData"),n=this.gridOptionsService.isGroupMultiAutoColumn();return i&&n&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),n=!1),n?e.forEach((s,o)=>{t.push(this.createOneAutoGroupColumn(s,o))}):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(e){e.forEach((t,i)=>this.updateOneAutoGroupColumn(t,i))}createOneAutoGroupColumn(e,t){let i;e?i=`${Vl}-${e.getId()}`:i=Vl;let n=this.createAutoGroupColDef(i,e,t);n.colId=i;let s=new Oe(n,null,i,!0);return this.context.createBean(s),s}updateOneAutoGroupColumn(e,t){let i=e.getColDef(),n=typeof i.showRowGroup=="string"?i.showRowGroup:void 0,s=n!=null?this.columnModel.getPrimaryColumn(n):void 0,o=this.createAutoGroupColDef(e.getId(),s??void 0,t);e.setColDef(o,null),this.columnFactory.applyColumnState(e,o)}createAutoGroupColDef(e,t,i){let n=this.createBaseColDef(t),s=this.gridOptionsService.get("autoGroupColumnDef");or(n,s),n=this.columnFactory.addColumnDefaultAndTypes(n,e),this.gridOptionsService.is("treeData")||Ce(n.field)&&Ce(n.valueGetter)&&Ce(n.filterValueGetter)&&n.filter!=="agGroupColumnFilter"&&(n.filter=!1),i&&i>0&&(n.headerCheckboxSelection=!1);let o=this.gridOptionsService.isColumnsSortingCoupledToGroup(),a=n.valueGetter||n.field!=null;return o&&!a&&(n.sortIndex=void 0,n.initialSort=void 0),n}createBaseColDef(e){let t=this.gridOptionsService.get("autoGroupColumnDef"),n={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(n.cellRenderer="agGroupCellRenderer"),e){let o=e.getColDef();Object.assign(n,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:o.headerValueGetter}),o.cellRenderer&&Object.assign(n,{cellRendererParams:{innerRenderer:o.cellRenderer,innerRendererParams:o.cellRendererParams}}),n.showRowGroup=e.getColId()}else n.showRowGroup=!0;return n}};Gy([y("columnModel")],vh.prototype,"columnModel",void 0);Gy([y("columnFactory")],vh.prototype,"columnFactory",void 0);vh=Gy([Y("autoGroupColService")],vh);var Hy={};tr(Hy,{camelCaseToHumanText:()=>By,camelCaseToHyphenated:()=>Vy,capitalise:()=>n2,escapeString:()=>Et,utf8_encode:()=>r2});var t2=/[&<>"']/g,i2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function r2(r){let e=String.fromCharCode;function t(u){let h=[];if(!u)return[];let p=u.length,f=0,g,m;for(;f<p;)g=u.charCodeAt(f++),g>=55296&&g<=56319&&f<p?(m=u.charCodeAt(f++),(m&64512)==56320?h.push(((g&1023)<<10)+(m&1023)+65536):(h.push(g),f--)):h.push(g);return h}function i(u){if(u>=55296&&u<=57343)throw Error("Lone surrogate U+"+u.toString(16).toUpperCase()+" is not a scalar value")}function n(u,h){return e(u>>h&63|128)}function s(u){if(u>=0&&u<=31&&u!==10)return`_x${u.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(u&4294967168))return e(u);let h="";return u&4294965248?u&4294901760?u&4292870144||(h=e(u>>18&7|240),h+=n(u,12),h+=n(u,6)):(i(u),h=e(u>>12&15|224),h+=n(u,6)):h=e(u>>6&31|192),h+=e(u&63|128),h}let o=t(r),a=o.length,l=-1,c,d="";for(;++l<a;)c=o[l],d+=s(c);return d}function n2(r){return r[0].toUpperCase()+r.substr(1).toLowerCase()}function Et(r,e){if(r==null)return null;let t=r.toString().toString();return e?t:t.replace(t2,i=>i2[i])}function By(r){if(!r||r==null)return null;let e=/([a-z])([A-Z])/g,t=/([A-Z]+)([A-Z])([a-z])/g;return r.replace(e,"$1 $2").replace(t,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}function Vy(r){return r.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var Wy={};tr(Wy,{convertToMap:()=>Uo,keys:()=>o2,mapById:()=>s2});function Uo(r){let e=new Map;return r.forEach(t=>e.set(t[0],t[1])),e}function s2(r,e){let t=new Map;return r.forEach(i=>t.set(e(i),i)),t}function o2(r){let e=[];return r.forEach((t,i)=>e.push(i)),e}var Hl=class{};Hl.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0};Hl.ALL_PROPERTIES=Object.keys(Hl.ColDefPropertyMap);var It=class{};It.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator"];It.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams"];It.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"];It.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"];It.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideFilterAllLevels","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard","enableAdvancedFilter","includeHiddenColumnsInAdvancedFilter"];It.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];It.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"];It.FUNCTION_PROPERTIES=[...It.FUNCTIONAL_PROPERTIES,...It.CALLBACK_PROPERTIES];It.ALL_PROPERTIES=[...It.ARRAY_PROPERTIES,...It.OBJECT_PROPERTIES,...It.STRING_PROPERTIES,...It.NUMBER_PROPERTIES,...It.FUNCTION_PROPERTIES,...It.BOOLEAN_PROPERTIES];var _t=class r{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substr(1)}static getCoercionLookup(){let e={};return[...r.ARRAY_PROPERTIES,...r.OBJECT_PROPERTIES,...r.STRING_PROPERTIES,...r.FUNCTION_PROPERTIES,...r.EVENT_CALLBACKS].forEach(t=>e[t]="none"),r.BOOLEAN_PROPERTIES.forEach(t=>e[t]="boolean"),r.NUMBER_PROPERTIES.forEach(t=>e[t]="number"),e}static getValue(e,t){let i=r.coercionLookup[e];if(i){let n=t;switch(i){case"number":{n=r.toNumber(t);break}case"boolean":{n=r.toBoolean(t);break}case"none":{e==="groupAggFiltering"&&typeof t!="function"&&(n=r.toBoolean(t));break}}return n}}static getGridOptionKeys(e,t){return Object.keys(t?r.coercionLookup:e)}static copyAttributesToGridOptions(e,t,i=!1){typeof e!="object"&&(e={});let n=e;return r.getGridOptionKeys(t,i).forEach(o=>{let a=t[o];if(typeof a<"u"){let l=r.getValue(o,a);l!==void 0&&(n[o]=l)}}),e}static processOnChange(e,t){if(!e||Object.keys(e).length===0)return;this.changeSetId++;let i=Object.assign({},e);i.columnTypes&&(t.setColumnTypes(i.columnTypes.currentValue,"gridOptionsChanged"),delete i.columnTypes),i.autoGroupColumnDef&&(t.setAutoGroupColumnDef(i.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete i.autoGroupColumnDef),i.defaultColDef&&(t.setDefaultColDef(i.defaultColDef.currentValue,"gridOptionsChanged"),delete i.defaultColDef),i.columnDefs&&(t.setColumnDefs(i.columnDefs.currentValue,"gridOptionsChanged"),delete i.columnDefs);let n=Object.keys(i).map(a=>{let l=a,c=r.getValue(l,i[l].currentValue),d=t.__setPropertyOnly(l,c);return{gridKey:l,coercedValue:c,isChanged:d}}).filter(a=>a.isChanged),s=n.map(a=>a.gridKey);n.forEach(a=>t.__updateProperty(a.gridKey,a.coercedValue,a.isChanged,{id:this.changeSetId,properties:s}));let o={type:w.EVENT_COMPONENT_STATE_CHANGED};ft(e,(a,l)=>{o[a]=l}),t.dispatchEvent(o)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}static toNumber(e){if(typeof e=="number")return e;if(typeof e=="string")return Number(e)}};_t.EVENTS=qs(w);_t.EXCLUDED_INTERNAL_EVENTS=[w.EVENT_SCROLLBAR_WIDTH_CHANGED,w.EVENT_CHECKBOX_CHANGED,w.EVENT_HEIGHT_SCALE_CHANGED,w.EVENT_BODY_HEIGHT_CHANGED,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,w.EVENT_SCROLL_VISIBILITY_CHANGED,w.EVENT_COLUMN_HOVER_CHANGED,w.EVENT_FLASH_CELLS,w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,w.EVENT_DISPLAYED_ROWS_CHANGED,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,w.EVENT_POPUP_TO_FRONT,w.EVENT_KEYBOARD_FOCUS,w.EVENT_MOUSE_FOCUS,w.EVENT_STORE_UPDATED,w.EVENT_COLUMN_PANEL_ITEM_DRAG_START,w.EVENT_COLUMN_PANEL_ITEM_DRAG_END,w.EVENT_FILL_START,w.EVENT_FILL_END,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,w.EVENT_FULL_WIDTH_ROW_FOCUSED,w.EVENT_HEADER_HEIGHT_CHANGED,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,w.EVENT_CELL_FOCUS_CLEARED,w.EVENT_GRID_STYLES_CHANGED,w.EVENT_FILTER_DESTROYED,w.EVENT_ROW_DATA_UPDATE_STARTED,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,w.EVENT_DATA_TYPES_INFERRED,w.EVENT_FIELD_VALUE_CHANGED,w.EVENT_FIELD_PICKER_VALUE_SELECTED];_t.PUBLIC_EVENTS=_t.EVENTS.filter(r=>!cr(_t.EXCLUDED_INTERNAL_EVENTS,r));_t.EVENT_CALLBACKS=_t.EVENTS.map(r=>_t.getCallbackForEvent(r));_t.STRING_PROPERTIES=It.STRING_PROPERTIES;_t.OBJECT_PROPERTIES=It.OBJECT_PROPERTIES;_t.ARRAY_PROPERTIES=It.ARRAY_PROPERTIES;_t.NUMBER_PROPERTIES=It.NUMBER_PROPERTIES;_t.BOOLEAN_PROPERTIES=It.BOOLEAN_PROPERTIES;_t.FUNCTION_PROPERTIES=It.FUNCTION_PROPERTIES;_t.ALL_PROPERTIES=It.ALL_PROPERTIES;_t.ALL_PROPERTIES_SET=new Set(It.ALL_PROPERTIES);_t.changeSetId=0;_t.coercionLookup=_t.getCoercionLookup();var zy={};tr(zy,{fuzzyCheckStrings:()=>Uy,fuzzySuggestions:()=>Wl});function Uy(r,e,t){let i={},n=r.filter(s=>!e.some(o=>o===s));return n.length>0&&n.forEach(s=>i[s]=Wl(s,t).values),i}function Wl(r,e,t,i){let n=e.map((a,l)=>({value:a,relevance:a2(r.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(n.sort((a,l)=>l.relevance-a.relevance),t&&(n=n.filter(a=>a.relevance!==0)),n.length>0&&i&&i>0){let l=n[0].relevance*i;n=n.filter(c=>l-c.relevance<0)}let s=[],o=[];for(let a of n)s.push(a.value),o.push(a.idx);return{values:s,indices:o}}function a2(r,e){let t=r.replace(/\s/g,""),i=e.replace(/\s/g,""),n=0,s=-1;for(let o=0;o<t.length;o++){let a=i.indexOf(t[o],s+1);a!==-1&&(s=a,n+=100-s*100/1e4*100)}return n}var G0=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};function xn(r,e,t,i){let n=t?`Please use '${t}' instead. `:"";Ne(()=>console.warn(`AG Grid: since v${r}, '${e}' is deprecated. ${n}${i??""}`),`Deprecated_${e}`)}var $1=["__ob__","__v_skip","__metadata__"],yd=class{constructor(){this.deprecatedProperties={rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideOnlyRefreshFilteredGroups",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",newProp:"enterNavigatesVertically",copyToNewProp:!0},enterMovesDownAfterEdit:{version:"30",newProp:"enterNavigatesVerticallyAfterEdit",copyToNewProp:!0},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."}}}pickOneWarning(e,t){console.warn(`AG Grid: ${e} and ${t} do not work with each other, you need to pick one.`)}init(){if(this.checkForDeprecated(),this.checkForViolations(),this.gridOptions.suppressPropertyNamesCheck!==!0&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.get("rowSelection")!=="multiple"&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){let t=(i,n)=>`AG Grid: '${i}' is not supported on the Server-Side Row Model.`+(n?` Please use ${n} instead.`:"");this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(t("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&this.gridOptionsService.is("suppressServerSideInfiniteScroll")&&console.warn(t("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(t("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?De.__assertRegistered(he.RangeSelectionModule,"enableRangeSelection",this.gridOptionsService.getGridId()):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");let e=(t,i)=>this.gridOptionsService.exists(t)&&De.__assertRegistered(i,t,this.gridOptionsService.getGridId());e("sideBar",he.SideBarModule),e("statusBar",he.StatusBarModule),e("enableCharts",he.GridChartsModule),e("getMainMenuItems",he.MenuModule),e("getContextMenuItems",he.MenuModule),e("allowContextMenuWithControlKey",he.MenuModule),e("enableAdvancedFilter",he.AdvancedFilterModule),e("treeData",he.RowGroupingModule),e("enableRangeSelection",he.RangeSelectionModule),e("masterDetail",he.MasterDetailModule)}checkColumnDefProperties(){if(this.gridOptions.columnDefs==null)return;let e=Hl.ALL_PROPERTIES,t=(i,n)=>{let s=Object.getOwnPropertyNames(i);this.checkProperties(s,[...e,...$1],e,n,"https://www.ag-grid.com/javascript-data-grid/column-properties/"),i.children&&i.children.forEach(o=>t(o,"columnDefs.children"))};this.gridOptions.columnDefs.forEach(i=>t(i,"columnDefs")),this.gridOptions.defaultColDef&&t(this.gridOptions.defaultColDef,"defaultColDef")}checkColumnDefViolations(){var e;let t=(e=this.gridOptionsService.get("rowModelType"))!==null&&e!==void 0?e:"clientSide",n={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]}[t];if(!n)return;let s=this.gridOptionsService.get("rowSelection")==="multiple",o=["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],a=l=>{s||o.forEach(c=>{c in l&&l[c]&&console.warn(`AG Grid: Column property ${c} is not supported unless rowSelection='multiple'.`)}),n.forEach(c=>{c in l&&l[c]&&console.warn(`AG Grid: Column property ${c} is not supported with the row model type ${t}.`)})};this.gridOptions.columnDefs!=null&&this.gridOptions.columnDefs.forEach(l=>a(l)),this.gridOptions.autoGroupColumnDef!=null&&a(this.gridOptions.autoGroupColumnDef),this.gridOptions.defaultColDef!=null&&a(this.gridOptions.defaultColDef)}checkGridOptionsProperties(){let e=Object.getOwnPropertyNames(this.gridOptions),t=[...It.ALL_PROPERTIES,..._t.EVENT_CALLBACKS],i=[...t,"api","columnApi",...$1,...Object.keys(this.deprecatedProperties)];this.checkProperties(e,i,t,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")}checkProperties(e,t,i,n,s){let o=Uy(e,t,i);ft(o,(a,l)=>{Ne(()=>console.warn(`AG Grid: invalid ${n} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`),"invalidProperty"+n+a)}),Object.keys(o).length>0&&Ne(()=>console.warn(`AG Grid: to see all the valid ${n} properties please check: ${s}`),"invalidProperties"+n+s)}checkForDeprecated(){let e=this.gridOptions;Object.entries(this.deprecatedProperties).forEach(([t,i])=>{var n;let s=e[t];s&&(xn(i.version,t,i.newProp,i.message),i.copyToNewProp&&i.newProp&&e[i.newProp]==null&&(e[i.newProp]=(n=i.newPropValue)!==null&&n!==void 0?n:s))}),e.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),e.suppressServerSideInfiniteScroll=e.serverSideStoreType!=="partial")}checkForViolations(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()}treeDataViolations(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))}};G0([y("gridOptions")],yd.prototype,"gridOptions",void 0);G0([y("gridOptionsService")],yd.prototype,"gridOptionsService",void 0);G0([G],yd.prototype,"init",null);yd=G0([Y("gridOptionsValidator")],yd);function _f(r,e){let t=["groupRows","multipleColumns","custom","singleColumn"];return t.indexOf(e)<0?(console.warn(`AG Grid: '${e}' is not a valid groupDisplayType value - possible values are: '${t.join("', '")}'`),!1):e===r}function Y1(r,e){let t=["auto","custom"];return t.indexOf(e)<0?(console.warn(`AG Grid: '${e}' is not a valid treeDataDisplayType value - possible values are: '${t.join("', '")}'`),!1):e===r}var br=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},l2=function(r,e){return function(t,i){e(t,i,r)}},c2=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t},Ei=class extends L{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");let e=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData"],()=>this.buildAutoGroupColumns()),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.onAutoGroupColumnDefChanged()),this.addManagedPropertyListener("defaultColDef",t=>this.onSharedColDefChanged(t.source)),this.addManagedPropertyListener("columnTypes",t=>this.onSharedColDefChanged(t.source))}buildAutoGroupColumns(){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged"))}onAutoGroupColumnDefChanged(){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns)}onSharedColDefChanged(e="api"){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns),this.createColumnsFromColumnDefs(!0,e)}setColumnDefs(e,t="api"){let i=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(i,t)}recreateColumnDefs(e="api"){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){let i={};if(!e)return;this.columnUtils.depthFirstOriginalTreeSearch(null,e,s=>{i[s.getInstanceId()]=s}),t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,s=>{i[s.getInstanceId()]=null});let n=Object.values(i).filter(s=>s!=null);this.destroyBeans(n)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t="api"){let i=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;let n=this.primaryColumns,s=this.primaryColumnTree,o=this.columnFactory.createColumnTree(this.columnDefs,!0,s);this.destroyOldColumns(this.primaryColumnTree,o.columnTree),this.primaryColumnTree=o.columnTree,this.primaryHeaderRowCount=o.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(c=>this.primaryColumnsMap[c.getId()]=c),this.extractRowGroupColumns(t,n),this.extractPivotColumns(t,n),this.extractValueColumns(t,n),this.ready=!0;let a=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||a||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),i&&i(),this.dispatchNewColumnsLoaded(t)}dispatchNewColumnsLoaded(e){let t={type:w.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(t)}dispatchEverythingChanged(e="api"){let t={type:w.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){let e=this.primaryColumns;if(!e)return;let t=e.filter(n=>this.gridColumns.indexOf(n)>=0),i=this.gridColumns.filter(n=>t.indexOf(n)<0);this.gridColumns=[...i,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}getDisplayedColumnsStartingAt(e){let t=e,i=[];for(;t!=null;)i.push(t),t=this.getDisplayedColAfter(t);return i}checkViewportColumns(e=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;let i={type:w.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(i)}setViewportPosition(e,t,i=!1){(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return e&&this.gridOptionsService.is("treeData")?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0}setPivotMode(e,t="api"){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))return;this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);let i={type:w.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(e,t){if(Ce(this.secondaryColumns))return null;let i=this.getPrimaryColumn(t),n=null;return this.secondaryColumns.forEach(s=>{let o=s.getColDef().pivotKeys,a=s.getColDef().pivotValueColumn;Zs(o,e)&&a===i&&(n=s)}),n}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,i;this.gridOptionsService.is("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?je(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?je(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(n=>{n.setLastLeftPinned(n===t,e),n.setFirstRightPinned(n===i,e)})}autoSizeColumns(e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(e));return}let{columns:t,skipHeader:i,skipHeaderGroups:n,stopAtGroup:s,source:o="api"}=e;this.animationFrameService.flushAllFrames();let a=[],l=-1,c=i??this.gridOptionsService.is("skipHeaderOnAutoSize"),d=n??c;for(;l!==0;)l=0,this.actionOnGridColumns(t,u=>{if(a.indexOf(u)>=0)return!1;let h=this.autoWidthCalculator.getPreferredWidthForColumn(u,c);if(h>0){let p=this.normaliseColumnWidth(u,h);u.setActualWidth(p,o),a.push(u),l++}return!0},o);d||this.autoSizeColumnGroupsByColumns(t,o,s),this.dispatchColumnResizedEvent(a,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,i,n=null){if(e&&e.length){let s={type:w.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:n,finished:t,source:i};this.eventService.dispatchEvent(s)}}dispatchColumnChangedEvent(e,t,i){let n={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i};this.eventService.dispatchEvent(n)}dispatchColumnMovedEvent(e){let{movedColumns:t,source:i,toIndex:n,finished:s}=e,o={type:w.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:n,finished:s,source:i};this.eventService.dispatchEvent(o)}dispatchColumnPinnedEvent(e,t){if(!e.length)return;let i=e.length===1?e[0]:null,n=this.getCommonValue(e,o=>o.getPinned()),s={type:w.EVENT_COLUMN_PINNED,pinned:n??null,columns:e,column:i,source:t};this.eventService.dispatchEvent(s)}dispatchColumnVisibleEvent(e,t){if(!e.length)return;let i=e.length===1?e[0]:null,n=this.getCommonValue(e,o=>o.isVisible()),s={type:w.EVENT_COLUMN_VISIBLE,visible:n,columns:e,column:i,source:t};this.eventService.dispatchEvent(s)}autoSizeColumn(e,t,i="api"){e&&this.autoSizeColumns({columns:[e],skipHeader:t,skipHeaderGroups:!0,source:i})}autoSizeColumnGroupsByColumns(e,t,i){let n=new Set;this.getGridColumns(e).forEach(l=>{let c=l.getParent();for(;c&&c!=i;)c.isPadding()||n.add(c),c=c.getParent()});let o,a=[];for(let l of n){for(let c of this.ctrlsService.getHeaderRowContainerCtrls())if(o=c.getHeaderCtrlForColumn(l),o)break;o&&o.resizeLeafColumnsToFit(t)}return a}autoSizeAllColumns(e,t="api"){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(e,t));return}let i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:t})}getColumnsFromTree(e){let t=[],i=n=>{for(let s=0;s<n.length;s++){let o=n[s];o instanceof Oe?t.push(o):o instanceof bt&&i(o.getChildren())}};return i(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,i,n){let s=[],o=null;for(let a=0;a<t.length;a++){let l=t[a],c=t.length-a,d=Math.min(l.getColSpan(e),c),u=[l];if(d>1){let p=d-1;for(let f=1;f<=p;f++)u.push(t[a+f]);a+=p}let h;i?(h=!1,u.forEach(p=>{i(p)&&(h=!0)})):h=!0,h&&(s.length===0&&o&&(n&&n(l))&&s.push(o),s.push(l)),o=l}return s}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;let t=n=>{let s=n.getLeft();return V(s)&&s>this.viewportLeft},i=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,i,t)}getAriaColumnIndex(e){return this.getAllGridColumns().indexOf(e)+1}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,s=this.viewportRight+200,o=t<n&&i<n,a=t>s&&i>s;return!o&&!a}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,i,n,s,o="api"){if(!e||sr(e))return;let a=!1;if(e.forEach(c=>{let d=this.getPrimaryColumn(c);if(d){if(i){if(t.indexOf(d)>=0)return;t.push(d)}else{if(t.indexOf(d)<0)return;lr(t,d)}n(d),a=!0}}),!a)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o);let l={type:s,columns:t,column:t.length===1?t[0]:null,source:o};this.eventService.dispatchEvent(l)}setRowGroupColumns(e,t="api"){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,w.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(t,!1,i),!e&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(t,!0,i))}addRowGroupColumn(e,t="api"){e&&this.addRowGroupColumns([e],t)}addRowGroupColumns(e,t="api"){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),w.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t="api"){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),w.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumn(e,t="api"){e&&this.removeRowGroupColumns([e],t)}addPivotColumns(e,t="api"){this.updatePrimaryColumnList(e,this.pivotColumns,!0,i=>i.setPivotActive(!0,t),w.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t="api"){this.setPrimaryColumnList(e,this.pivotColumns,w.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,n)=>{n.setPivotActive(i,t)},t)}addPivotColumn(e,t="api"){this.addPivotColumns([e],t)}removePivotColumns(e,t="api"){this.updatePrimaryColumnList(e,this.pivotColumns,!1,i=>i.setPivotActive(!1,t),w.EVENT_COLUMN_PIVOT_CHANGED,t)}removePivotColumn(e,t="api"){this.removePivotColumns([e],t)}setPrimaryColumnList(e,t,i,n,s,o){let a=new Map;t.forEach((l,c)=>a.set(l,c)),t.length=0,V(e)&&e.forEach(l=>{let c=this.getPrimaryColumn(l);c&&t.push(c)}),t.forEach((l,c)=>{let d=a.get(l);if(d===void 0){a.set(l,0);return}n&&d!==c||a.delete(l)}),(this.primaryColumns||[]).forEach(l=>{let c=t.indexOf(l)>=0;s(c,l)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o),this.dispatchColumnChangedEvent(i,[...a.keys()],o)}setValueColumns(e,t="api"){this.setPrimaryColumnList(e,this.valueColumns,w.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc())){let n=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(n)}}addValueColumns(e,t="api"){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),w.EVENT_COLUMN_VALUE_CHANGED,t)}addValueColumn(e,t="api"){e&&this.addValueColumns([e],t)}removeValueColumn(e,t="api"){this.removeValueColumns([e],t)}removeValueColumns(e,t="api"){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),w.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){let i=e.getMinWidth();V(i)&&t<i&&(t=i);let n=e.getMaxWidth();return V(n)&&e.isGreaterThanMax(t)&&(t=n),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,i,n="api"){let s=[];e.forEach(o=>{let a=this.getPrimaryOrGridColumn(o.key);if(!a)return;if(s.push({width:o.newWidth,ratios:[1],columns:[a]}),this.gridOptionsService.get("colResizeDefault")==="shift"&&(t=!t),t){let c=this.getDisplayedColAfter(a);if(!c)return;let d=a.getActualWidth()-o.newWidth,u=c.getActualWidth()+d;s.push({width:u,ratios:[1],columns:[c]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:i,source:n})}checkMinAndMaxWidthsForSet(e){let{columns:t,width:i}=e,n=0,s=0,o=!0;t.forEach(c=>{let d=c.getMinWidth();n+=d||0;let u=c.getMaxWidth();V(u)&&u>0?s+=u:o=!1});let a=i>=n,l=!o||i<=s;return a&&l}resizeColumnSets(e){let{resizeSets:t,finished:i,source:n}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(i){let u=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(u,i,n)}return}let o=[],a=[];t.forEach(u=>{let{width:h,columns:p,ratios:f}=u,g={},m={};p.forEach(S=>a.push(S));let v=!0,C=0;for(;v;){if(C++,C>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}v=!1;let S=[],b=0,T=h;p.forEach((E,N)=>{if(m[E.getId()])T-=g[E.getId()];else{S.push(E);let k=f[N];b+=k}});let A=1/b;S.forEach((E,N)=>{let M=N===S.length-1,k;M?k=T:(k=Math.round(f[N]*h*A),T-=k);let W=E.getMinWidth(),ee=E.getMaxWidth();V(W)&&k<W?(k=W,m[E.getId()]=!0,v=!0):V(ee)&&ee>0&&k>ee&&(k=ee,m[E.getId()]=!0,v=!0),g[E.getId()]=k})}p.forEach(S=>{let b=g[S.getId()];S.getActualWidth()!==b&&(S.setActualWidth(b,n),o.push(S))})});let l=o.length>0,c=[];l&&(c=this.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}),this.setLeftValues(n),this.updateBodyWidths(),this.checkViewportColumns());let d=a.concat(c);(l||i)&&this.dispatchColumnResizedEvent(d,i,n,c)}setColumnAggFunc(e,t,i="api"){if(!e)return;let n=this.getPrimaryColumn(e);n&&(n.setAggFunc(t),this.dispatchColumnChangedEvent(w.EVENT_COLUMN_VALUE_CHANGED,[n],i))}moveRowGroupColumn(e,t,i="api"){let n=this.rowGroupColumns[e],s=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,n);let o={type:w.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:s,column:s.length===1?s[0]:null,source:i};this.eventService.dispatchEvent(o)}moveColumns(e,t,i="api",n=!0){if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}let s=this.getGridColumns(e);this.doesMovePassRules(s,t)&&(L0(this.gridColumns,s,t),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:s,source:i,toIndex:t,finished:n}),this.columnAnimationService.finish())}doesMovePassRules(e,t){let i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let i=this.gridColumns.slice();return L0(i,e,t),i}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(i=>this.gridColumns.indexOf(i)<0).length>0||e.sort((i,n)=>{let s=this.gridColumns.indexOf(i),o=this.gridColumns.indexOf(n);return s-o})}doesMovePassLockedPositions(e){let t=0,i=!0,n=s=>s?s===!0||s==="left"?0:2:1;return e.forEach(s=>{let o=n(s.getColDef().lockPosition);o<t&&(i=!1),t=o}),i}doesMovePassMarryChildren(e){let t=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{if(!(i instanceof bt))return;let n=i,s=n.getColGroupDef();if(!(s&&s.marryChildren))return;let a=[];n.getLeafColumns().forEach(h=>{let p=e.indexOf(h);a.push(p)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),d=l-c,u=n.getLeafColumns().length-1;d>u&&(t=!1)}),t}moveColumn(e,t,i="api"){this.moveColumns([e],t,i)}moveColumnByIndex(e,t,i="api"){let n=this.gridColumns[e];this.moveColumn(n,t,i)}getColumnDefs(){if(!this.primaryColumns)return;let e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((t,i)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&e.sort((t,i)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){let e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i;let s={type:w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(s)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getDisplayedColumns(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns.slice():null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns.slice():null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){return this.gridColumns}isEmpty(){return sr(this.gridColumns)}isRowGroupEmpty(){return sr(this.rowGroupColumns)}setColumnVisible(e,t,i="api"){this.setColumnsVisible([e],t,i)}setColumnsVisible(e,t=!1,i="api"){this.applyColumnState({state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},i)}setColumnPinned(e,t,i="api"){e&&this.setColumnsPinned([e],t,i)}setColumnsPinned(e,t,i="api"){if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let n;t===!0||t==="left"?n="left":t==="right"?n="right":n=null,this.actionOnGridColumns(e,s=>s.getPinned()!==n?(s.setPinned(n),!0):!1,i,()=>({type:w.EVENT_COLUMN_PINNED,pinned:n,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(e,t,i,n){if(sr(e))return;let s=[];if(e.forEach(o=>{let a=this.getGridColumn(o);if(!a)return;t(a)!==!1&&s.push(a)}),!!s.length&&(this.updateDisplayedColumns(i),V(n)&&n)){let o=n();o.columns=s,o.column=s.length===1?s[0]:null,this.eventService.dispatchEvent(o)}}getDisplayedColBefore(e){let t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i>0?t[i-1]:null}getDisplayedColAfter(e){let t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getDisplayedGroupAfter(e){return this.getDisplayedGroupAtDirection(e,"After")}getDisplayedGroupBefore(e){return this.getDisplayedGroupAtDirection(e,"Before")}getDisplayedGroupAtDirection(e,t){let i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),s=t==="After"?je(n):n[0],o=`getDisplayedCol${t}`;for(;;){let a=this[o](s);if(!a)return null;let l=this.getColumnGroupAtLevel(a,i);if(l!==e)return l}}getColumnGroupAtLevel(e,t){let i=e.getParent(),n,s;for(;n=i.getProvidedColumnGroup().getLevel(),s=i.getPaddingLevel(),!(n+s<=t);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){let t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,n=e.isValueActive()?e.getAggFunc():null,s=e.getSort()!=null?e.getSort():null,o=e.getSortIndex()!=null?e.getSortIndex():null,a=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:o,aggFunc:n,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:a}}getColumnState(){if(Ce(this.primaryColumns)||!this.isAlive())return[];let t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(e){let t=Uo(this.gridColumns.map((i,n)=>[i.getColId(),n]));e.sort((i,n)=>{let s=t.has(i.colId)?t.get(i.colId):-1,o=t.has(n.colId)?t.get(n.colId):-1;return s-o})}resetColumnState(e="api"){let t=this.getColumnsFromTree(this.primaryColumnTree),i=[],n=1e3,s=1e3,o=[];this.groupAutoColumns&&(o=o.concat(this.groupAutoColumns)),t&&(o=o.concat(t)),o.forEach(a=>{let l=this.getColumnStateFromColDef(a);Ce(l.rowGroupIndex)&&l.rowGroup&&(l.rowGroupIndex=n++),Ce(l.pivotIndex)&&l.pivot&&(l.pivotIndex=s++),i.push(l)}),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(g,m)=>g??m??null,i=e.getColDef(),n=t(i.sort,i.initialSort),s=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),a=t(i.pinned,i.initialPinned),l=t(i.width,i.initialWidth),c=t(i.flex,i.initialFlex),d=t(i.rowGroupIndex,i.initialRowGroupIndex),u=t(i.rowGroup,i.initialRowGroup);d==null&&(u==null||u==!1)&&(d=null,u=null);let h=t(i.pivotIndex,i.initialPivotIndex),p=t(i.pivot,i.initialPivot);h==null&&(p==null||p==!1)&&(h=null,p=null);let f=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:s,hide:o,pinned:a,width:l,flex:c,rowGroup:u,rowGroupIndex:d,pivot:p,pivotIndex:h,aggFunc:f}}applyColumnState(e,t){if(sr(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=(o,a,l)=>{let c=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;let d=a.slice(),u={},h={},p=[],f=[],g=0,m=this.rowGroupColumns.slice(),v=this.pivotColumns.slice();o.forEach(T=>{let A=T.colId||"";if(A.startsWith(Vl)){p.push(T),f.push(T);return}let N=l(A);N?(this.syncColumnWithStateItem(N,T,e.defaultState,u,h,!1,t),lr(d,N)):(f.push(T),g+=1)});let C=T=>this.syncColumnWithStateItem(T,null,e.defaultState,u,h,!1,t);d.forEach(C);let S=(T,A,E,N)=>{let M=T[E.getId()],k=T[N.getId()],W=M!=null,ee=k!=null;if(W&&ee)return M-k;if(W)return-1;if(ee)return 1;let te=A.indexOf(E),le=A.indexOf(N),Ye=te>=0,Xe=le>=0;return Ye&&Xe?te-le:Ye?-1:1};this.rowGroupColumns.sort(S.bind(this,u,m)),this.pivotColumns.sort(S.bind(this,h,v)),this.updateGridColumns();let b=this.groupAutoColumns?this.groupAutoColumns.slice():[];return p.forEach(T=>{let A=this.getAutoColumn(T.colId);lr(b,A),this.syncColumnWithStateItem(A,T,e.defaultState,null,null,!0,t)}),b.forEach(C),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),c(),{unmatchedAndAutoStates:f,unmatchedCount:g}};this.columnAnimationService.start();let{unmatchedAndAutoStates:n,unmatchedCount:s}=i(e.state||[],this.primaryColumns||[],o=>this.getPrimaryColumn(o));return(n.length>0||V(e.defaultState))&&(s=i(n,this.secondaryColumns||[],o=>this.getSecondaryColumn(o)).unmatchedCount),this.columnAnimationService.finish(),s===0}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[],i={};e.state.forEach(s=>{if(!s.colId||i[s.colId])return;let o=this.gridColumnsMap[s.colId];o&&(t.push(o),i[s.colId]=!0)});let n=0;if(this.gridColumns.forEach(s=>{let o=s.getColId();if(i[o]!=null)return;o.startsWith(Vl)?fh(t,s,n++):t.push(s)}),t=this.placeLockedColumns(t),!this.doesMovePassMarryChildren(t)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=t}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),n={};return i.forEach(s=>{n[s.colId]=s}),()=>{let s=this.getPrimaryAndSecondaryAndAutoColumns(),o=(g,m,v,C)=>{let S=m.map(C),b=v.map(C);if(Zs(S,b))return;let A=new Set(m);v.forEach(M=>{A.delete(M)||A.add(M)});let E=[...A],N={type:g,columns:E,column:E.length===1?E[0]:null,source:e};this.eventService.dispatchEvent(N)},a=g=>{let m=[];return s.forEach(v=>{let C=n[v.getColId()];C&&g(C,v)&&m.push(v)}),m},l=g=>g.getColId();o(w.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,l),o(w.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,l);let d=a((g,m)=>{let v=g.aggFunc!=null,C=v!=m.isValueActive(),S=v&&g.aggFunc!=m.getAggFunc();return C||S});d.length>0&&this.dispatchColumnChangedEvent(w.EVENT_COLUMN_VALUE_CHANGED,d,e);let u=(g,m)=>g.width!=m.getActualWidth();this.dispatchColumnResizedEvent(a(u),!0,e);let h=(g,m)=>g.pinned!=m.getPinned();this.dispatchColumnPinnedEvent(a(h),e);let p=(g,m)=>g.hide==m.isVisible();this.dispatchColumnVisibleEvent(a(p),e),a((g,m)=>g.sort!=m.getSort()||g.sortIndex!=m.getSortIndex()).length>0&&this.sortController.dispatchSortChangedEvents(e),this.normaliseColumnMovedEventForColumnState(i,e)}}getCommonValue(e,t){if(!e||e.length==0)return;let i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}normaliseColumnMovedEventForColumnState(e,t){let i=this.getColumnState(),n={};i.forEach(c=>n[c.colId]=c);let s={};e.forEach(c=>{n[c.colId]&&(s[c.colId]=!0)});let o=e.filter(c=>s[c.colId]),a=i.filter(c=>s[c.colId]),l=[];a.forEach((c,d)=>{let u=o&&o[d];if(u&&u.colId!==c.colId){let h=this.getGridColumn(u.colId);h&&l.push(h)}}),l.length&&this.dispatchColumnMovedEvent({movedColumns:l,source:t,finished:!0})}syncColumnWithStateItem(e,t,i,n,s,o,a){if(!e)return;let l=(T,A)=>{let E={value1:void 0,value2:void 0},N=!1;return t&&(t[T]!==void 0&&(E.value1=t[T],N=!0),V(A)&&t[A]!==void 0&&(E.value2=t[A],N=!0)),!N&&i&&(i[T]!==void 0&&(E.value1=i[T]),V(A)&&i[A]!==void 0&&(E.value2=i[A])),E},c=l("hide").value1;c!==void 0&&e.setVisible(!c,a);let d=l("pinned").value1;d!==void 0&&e.setPinned(d);let u=this.columnUtils.calculateColMinWidth(e.getColDef()),h=l("flex").value1;if(h!==void 0&&e.setFlex(h),e.getFlex()<=0){let T=l("width").value1;T!=null&&u!=null&&T>=u&&e.setActualWidth(T,a)}let f=l("sort").value1;f!==void 0&&(f==="desc"||f==="asc"?e.setSort(f,a):e.setSort(void 0,a));let g=l("sortIndex").value1;if(g!==void 0&&e.setSortIndex(g),o||!e.isPrimary())return;let m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,a),this.valueColumns.push(e))):(V(m)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,a),lr(this.valueColumns,e))));let{value1:v,value2:C}=l("rowGroup","rowGroupIndex");(v!==void 0||C!==void 0)&&(typeof C=="number"||v?(e.isRowGroupActive()||(e.setRowGroupActive(!0,a),this.rowGroupColumns.push(e)),n&&typeof C=="number"&&(n[e.getId()]=C)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,a),lr(this.rowGroupColumns,e)));let{value1:S,value2:b}=l("pivot","pivotIndex");(S!==void 0||b!==void 0)&&(typeof b=="number"||S?(e.isPivotActive()||(e.setPivotActive(!0,a),this.pivotColumns.push(e)),s&&typeof b=="number"&&(s[e.getId()]=b)):e.isPivotActive()&&(e.setPivotActive(!1,a),lr(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){let i=[];return e&&e.forEach(n=>{let s=t(n);s&&i.push(s)}),i}getColumnWithValidation(e){if(e==null)return null;let t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(e){return this.gridColumnsMap[e]}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,i){if(!e)return null;if(typeof e=="string"&&i[e])return i[e];for(let n=0;n<t.length;n++)if(this.columnsMatch(t[n],e))return t[n];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);let i=this.getPrimaryColumn(t);return i?[i]:null}getAutoColumn(e){return!this.groupAutoColumns||!V(this.groupAutoColumns)||Ce(this.groupAutoColumns)?null:this.groupAutoColumns.find(t=>this.columnsMatch(t,e))||null}columnsMatch(e,t){let i=e===t,n=e.getColDef()===t,s=e.getColId()==t;return i||n||s}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;let n=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){let n=t?t.getColGroupDef():null;return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){let o=e.headerValueGetter;if(o){let a={colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return typeof o=="function"?o(a):typeof o=="string"?this.expressionService.evaluate(o,a):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return By(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return t;let i=e.getColDef().pivotValueColumn,n=V(i),s=null,o;if(n){let a=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;s=i?i.getAggFunc():null,o=!0}else{let a=e.isValueActive(),l=this.pivotMode||!this.isRowGroupEmpty();a&&l?(s=e.getAggFunc(),o=!0):o=!1}if(o){let a=typeof s=="string"?s:"func";return`${this.localeService.getLocaleTextFunc()(a,a)}(${t})`}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof Ut)return e;let i=this.getAllDisplayedTrees(),n=typeof t=="number",s=null;return this.columnUtils.depthFirstAllColumnTreeSearch(i,o=>{if(o instanceof Ut){let a=o,l;n?l=e===a.getGroupId()&&t===a.getPartId():l=e===a.getGroupId(),l&&(s=a)}}),s}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(i,n)=>i.setValueActive(n,e),()=>{},()=>{},i=>{let n=i.aggFunc;if(n===null||n==="")return null;if(n!==void 0)return!!n},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{let n=i.getColDef();n.aggFunc!=null&&n.aggFunc!=""?i.setAggFunc(n.aggFunc):i.getAggFunc()||i.setAggFunc(n.initialAggFunc)})}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(i,n)=>i.setRowGroupActive(n,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(e=[],t=[],i,n,s,o,a){let l=[],c=[];(this.primaryColumns||[]).forEach(h=>{let p=e.indexOf(h)<0,f=h.getColDef(),g=Kn(o(f)),m=Kn(a(f)),v=Vr(n(f)),C=Vr(s(f)),S;g!==void 0?S=g:v!==void 0?v===null?S=!1:S=v>=0:p?m!==void 0?S=m:C!==void 0?S=C!=null&&C>=0:S=!1:S=t.indexOf(h)>=0,S&&((p?v!=null||C!=null:v!=null)?l.push(h):c.push(h))});let d=h=>{let p=n(h.getColDef()),f=s(h.getColDef());return p??f};l.sort((h,p)=>{let f=d(h),g=d(p);return f===g?0:f<g?-1:1});let u=[].concat(l);return t.forEach(h=>{c.indexOf(h)>=0&&u.push(h)}),c.forEach(h=>{u.indexOf(h)<0&&u.push(h)}),t.forEach(h=>{u.indexOf(h)<0&&i(h,!1)}),u.forEach(h=>{t.indexOf(h)<0&&i(h,!0)}),u}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(i,n)=>i.setPivotActive(n,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(e="api"){let t=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,i=>{if(i instanceof bt){let n=i.getColGroupDef(),s={groupId:i.getGroupId(),open:n?n.openByDefault:void 0};t.push(s)}}),this.setColumnGroupState(t,e)}getColumnGroupState(){let e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{t instanceof bt&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}setColumnGroupState(e,t="api"){this.columnAnimationService.start();let i=[];e.forEach(n=>{let s=n.groupId,o=n.open,a=this.getProvidedColumnGroup(s);a&&a.isExpanded()!==o&&(this.logger.log("columnGroupOpened("+a.getGroupId()+","+o+")"),a.setExpanded(o),i.push(a))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),i.forEach(n=>{let s={type:w.EVENT_COLUMN_GROUP_OPENED,columnGroup:n};this.eventService.dispatchEvent(s)}),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i="api"){let n;e instanceof bt?n=e.getId():n=e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColumnGroup(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");let t=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{i instanceof bt&&i.getId()===e&&(t=i)}),t}calculateColumnsForDisplay(){let e;return this.pivotMode&&Ce(this.secondaryColumns)?e=this.gridColumns.filter(t=>{let i=this.groupAutoColumns&&cr(this.groupAutoColumns,t),n=this.valueColumns&&cr(this.valueColumns,t);return i||n}):e=this.gridColumns.filter(t=>this.groupAutoColumns&&cr(this.groupAutoColumns,t)||t.isVisible()),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach(i=>{V(i.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};let e=t=>{let i=t.getColDef(),n=i.showRowGroup;i&&V(n)&&(this.groupDisplayColumns.push(t),typeof n=="string"?this.groupDisplayColumnsMap[n]=t:n===!0&&this.getRowGroupColumns().forEach(s=>{this.groupDisplayColumnsMap[s.getId()]=t}))};this.gridColumns.forEach(e)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){let t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return V(this.secondaryColumns)}setSecondaryColumns(e,t="api"){let i=e&&e.length>0;if(!(!i&&Ce(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(e);let n=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,n.columnTree),this.secondaryBalancedTree=n.columnTree,this.secondaryHeaderRowCount=n.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(s=>this.secondaryColumnsMap[s.getId()]=s),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){let t=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),i=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(!t&&!i)return;let n=s=>{s.forEach(o=>{if(V(o.children)){let l=o;i&&i(l),n(l.children)}else t&&t(o)})};e&&n(e)}updateGridColumns(){let e=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;let t;if(this.secondaryColumns&&this.secondaryBalancedTree){let n=this.secondaryColumns.every(s=>this.gridColumnsMap[s.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,n&&(t=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,t=this.lastPrimaryOrder);if(this.createGroupAutoColumnsIfNeeded()&&t){let n=Uo(this.groupAutoColumns.map(s=>[s,!0]));t=t.filter(s=>!n.has(s)),t=[...this.groupAutoColumns,...t]}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(t),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(n=>this.gridColumnsMap[n.getId()]=n),this.setAutoHeightActive(),!Zs(e,this.gridBalancedTree)){let n={type:w.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(n)}}setAutoHeightActive(){if(this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,!(this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")))){let t="AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";Ne(()=>console.warn(t),"autoHeightActive.wrongRowModel")}}orderGridColsLike(e){if(Ce(e))return;let t=Uo(e.map((c,d)=>[c,d])),i=!0;if(this.gridColumns.forEach(c=>{t.has(c)&&(i=!1)}),i)return;let n=Uo(this.gridColumns.map(c=>[c,!0])),s=e.filter(c=>n.has(c)),o=Uo(s.map(c=>[c,!0])),a=this.gridColumns.filter(c=>!o.has(c)),l=s.slice();a.forEach(c=>{let d=c.getOriginalParent();if(!d){l.push(c);return}let u=[];for(;!u.length&&d;)d.getLeafColumns().forEach(g=>{let m=l.indexOf(g)>=0,v=u.indexOf(g)<0;m&&v&&u.push(g)}),d=d.getOriginalParent();if(!u.length){l.push(c);return}let h=u.map(f=>l.indexOf(f)),p=Math.max(...h);fh(l,c,p+1)}),this.gridColumns=l}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!==null&&e!==void 0?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")?t:t.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(e){let t=[],i=[],n=[];return e.forEach(s=>{let o=s.getColDef().lockPosition;o==="right"?n.push(s):o==="left"||o===!0?t.push(s):i.push(s)}),[...t,...i,...n]}addAutoGroupToGridColumns(){if(Ce(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;let e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();let t={type:w.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinDisplayedColumns(){this.gridOptionsService.is("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;let t=this.primaryColumns.slice(0),i=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(n=>{if(i){let s=this.getWidthOfColsInList(n);n.forEach(o=>{s-=o.getActualWidth(),o.setLeft(s,e)})}else{let s=0;n.forEach(o=>{o.setLeft(s,e),s+=o.getActualWidth()})}Py(t,n)}),t.forEach(n=>{n.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(t=>{t instanceof Ut&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,i=>{i instanceof Oe&&t.push(i)})}extractViewportColumns(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let i;switch(e){case"left":i=this.viewportRowLeft[t];break;case"right":i=this.viewportRowRight[t];break;default:i=this.viewportRowCenter[t];break}return Ce(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};let e={};this.headerViewportColumns.forEach(i=>e[i.getId()]=!0);let t=(i,n,s)=>{let o=!1;for(let a=0;a<i.length;a++){let l=i[a],c=!1;if(l instanceof Oe)c=e[l.getId()]===!0;else{let u=l.getDisplayedChildren();u&&(c=t(u,n,s+1))}c&&(o=!0,n[s]||(n[s]=[]),n[s].push(l))}return o};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){let e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.viewportColumns.map(e).join("#"),i=this.viewportColumnsHash!==t;return i&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),i}refreshFlexedColumns(e={}){var t;let i=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let n=-1;if(e.resizingCols){let p=new Set(e.resizingCols),f=this.displayedColumnsCenter;for(let g=f.length-1;g>=0;g--)if(p.has(f[g])){n=g;break}}let s=0,o=[],a=0,l=0;for(let p=0;p<this.displayedColumnsCenter.length;p++)this.displayedColumnsCenter[p].getFlex()&&p>n?(o.push(this.displayedColumnsCenter[p]),l+=this.displayedColumnsCenter[p].getFlex(),a+=(t=this.displayedColumnsCenter[p].getMinWidth())!==null&&t!==void 0?t:0):s+=this.displayedColumnsCenter[p].getActualWidth();if(!o.length)return[];let c=[];s+a>this.flexViewportWidth&&(o.forEach(p=>{var f;return p.setActualWidth((f=p.getMinWidth())!==null&&f!==void 0?f:0,i)}),c=o,o=[]);let d=[],u;e:for(;;){u=this.flexViewportWidth-s;let p=u/l;for(let f=0;f<o.length;f++){let g=o[f],m=p*g.getFlex(),v=0,C=g.getMinWidth(),S=g.getMaxWidth();if(V(C)&&m<C?v=C:V(S)&&m>S&&(v=S),v){g.setActualWidth(v,i),M0(o,g),l-=g.getFlex(),c.push(g),s+=g.getActualWidth();continue e}d[f]=Math.round(m)}break}let h=u;return o.forEach((p,f)=>{p.setActualWidth(Math.min(d[f],h),i),c.push(p),h-=d[f]}),e.skipSetLeft||this.setLeftValues(i),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(c,!0,i,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",i,n){var s,o,a,l,c;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(e,t,i,n));return}let d={};n&&((s=n?.columnLimits)===null||s===void 0||s.forEach(C=>{var{key:S}=C,b=c2(C,["key"]);d[typeof S=="string"?S:S.getColId()]=b}));let u=this.getAllDisplayedColumns(),h=e===this.getWidthOfColsInList(u);if(e<=0||!u.length||h)return;let p=[],f=[];u.forEach(C=>{C.getColDef().suppressSizeToFit===!0?f.push(C):p.push(C)});let g=p.slice(0),m=!1,v=C=>{lr(p,C),f.push(C)};for(p.forEach(C=>{var S,b;C.resetActualWidth(t);let T=d?.[C.getId()],A=(S=T?.minWidth)!==null&&S!==void 0?S:n?.defaultMinWidth,E=(b=T?.maxWidth)!==null&&b!==void 0?b:n?.defaultMaxWidth,N=C.getActualWidth();typeof A=="number"&&N<A?C.setActualWidth(A,t,!0):typeof E=="number"&&N>E&&C.setActualWidth(E,t,!0)});!m;){m=!0;let C=e-this.getWidthOfColsInList(f);if(C<=0)p.forEach(S=>{var b,T;let A=(T=(b=d?.[S.getId()])===null||b===void 0?void 0:b.minWidth)!==null&&T!==void 0?T:n?.defaultMinWidth;if(typeof A=="number"){S.setActualWidth(A,t,!0);return}S.setMinimum(t)});else{let S=C/this.getWidthOfColsInList(p),b=C;for(let T=p.length-1;T>=0;T--){let A=p[T],E=d?.[A.getId()],N=(o=E?.minWidth)!==null&&o!==void 0?o:n?.defaultMinWidth,M=(a=E?.maxWidth)!==null&&a!==void 0?a:n?.defaultMaxWidth,k=(l=A.getMinWidth())!==null&&l!==void 0?l:0,W=(c=A.getMaxWidth())!==null&&c!==void 0?c:Number.MAX_VALUE,ee=typeof N=="number"&&N>k?N:A.getMinWidth(),te=typeof M=="number"&&M<W?M:A.getMaxWidth(),le=Math.round(A.getActualWidth()*S);V(ee)&&le<ee?(le=ee,v(A),m=!1):V(te)&&le>te?(le=te,v(A),m=!1):T===0&&(le=b),A.setActualWidth(le,t,!0),b-=le}}}g.forEach(C=>{C.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(g,!0,t)}buildDisplayedTrees(e){let t=[],i=[],n=[];e.forEach(o=>{switch(o.getPinned()){case"left":t.push(o);break;case"right":i.push(o);break;default:n.push(o);break}});let s=new Ef;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,s,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,s,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(n,s,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};let e=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,t=>{t instanceof Ut&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){let e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;let t=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gridOptionsService.is("treeData"))&&!i&&!t){let o=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(o,this.groupAutoColumns)||e)return this.groupAutoColumns=o,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){let e=this.gridOptionsService.get("groupDisplayType");if(e?_f("custom",e):!1)return!0;let i=this.gridOptionsService.get("treeDataDisplayType");return i?Y1("custom",i):!1}autoColsEqual(e,t){return Zs(e,t,(i,n)=>i.getColId()===n.getColId())}getWidthOfColsInList(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getGridBalancedTree(){return this.gridBalancedTree}getFirstDisplayedColumn(){let e=this.gridOptionsService.is("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let i=0;i<t.length;i++){let n=this[t[i]]();if(n.length)return e?je(n):n[0]}return null}setColumnHeaderHeight(e,t){if(e.setAutoHeaderHeight(t)){let n={type:w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(n)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("headerHeight"))!==null&&e!==void 0?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return(e=this.gridOptionsService.getNum("floatingFiltersHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("groupHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("pivotHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))!==null&&e!==void 0?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e){let t=e.getUserProvidedColDef();if(!t)return!1;let i=this.columnFactory.addColumnDefaultAndTypes(t,e.getColId());return e.setColDef(i,t),!0}generateColumnStateForRowGroupAndPivotIndexes(e,t){let i={},n=(s,o,a,l,c,d)=>{if(!o.length||!this.primaryColumns)return[];let u=Object.keys(s),h=new Set(u),p=new Set(u),f=new Set(o.map(A=>{let E=A.getColId();return p.delete(E),E}).concat(u)),g=[],m={},v=0;for(let A=0;A<this.primaryColumns.length;A++){let E=this.primaryColumns[A].getColId();f.has(E)&&(g.push(E),m[E]=v++)}let C=1e3,S=!1,b=0,T=A=>{let E=m[A];for(let N=b;N<E;N++){let M=g[N];p.has(M)&&(s[M][c]=C++,p.delete(M))}b=E};o.forEach(A=>{let E=A.getColId();if(h.has(E))T(E),s[E][c]=C++;else{let N=A.getColDef();(N[c]===null||N[c]===void 0&&N[d]==null)&&(S||(N[a]||N[a]===void 0&&N[l]?T(E):(p.forEach(W=>{s[W][c]=C+m[W]}),C+=g.length,S=!0)),i[E]||(i[E]={colId:E}),i[E][c]=C++)}})};return n(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),n(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}};br([y("expressionService")],Ei.prototype,"expressionService",void 0);br([y("columnFactory")],Ei.prototype,"columnFactory",void 0);br([y("displayedGroupCreator")],Ei.prototype,"displayedGroupCreator",void 0);br([y("ctrlsService")],Ei.prototype,"ctrlsService",void 0);br([y("autoWidthCalculator")],Ei.prototype,"autoWidthCalculator",void 0);br([y("columnUtils")],Ei.prototype,"columnUtils",void 0);br([y("columnAnimationService")],Ei.prototype,"columnAnimationService",void 0);br([y("autoGroupColService")],Ei.prototype,"autoGroupColService",void 0);br([He("aggFuncService")],Ei.prototype,"aggFuncService",void 0);br([He("valueCache")],Ei.prototype,"valueCache",void 0);br([He("animationFrameService")],Ei.prototype,"animationFrameService",void 0);br([y("sortController")],Ei.prototype,"sortController",void 0);br([y("columnDefFactory")],Ei.prototype,"columnDefFactory",void 0);br([G],Ei.prototype,"init",null);br([at],Ei.prototype,"destroyColumns",null);br([l2(0,Wt("loggerFactory"))],Ei.prototype,"setBeans",null);Ei=br([Y("columnModel")],Ei);var d2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Tf=class extends L{calculateColMinWidth(e){return e.minWidth!=null?e.minWidth:this.environment.getMinColWidth()}calculateColMaxWidth(e){return e.maxWidth!=null?e.maxWidth:Number.MAX_SAFE_INTEGER}calculateColInitialWidth(e){let t=this.calculateColMinWidth(e),i=this.calculateColMaxWidth(e),n,s=Vr(e.width),o=Vr(e.initialWidth);return s!=null?n=s:o!=null?n=o:n=200,Math.max(Math.min(n,i),t)}getOriginalPathForColumn(e,t){let i=[],n=!1,s=(o,a)=>{for(let l=0;l<o.length;l++){if(n)return;let c=o[l];c instanceof bt?(s(c.getChildren(),a+1),i[a]=c):c===e&&(n=!0)}};return s(t,0),n?i:null}depthFirstOriginalTreeSearch(e,t,i){t&&t.forEach(n=>{n instanceof bt&&this.depthFirstOriginalTreeSearch(n,n.getChildren(),i),i(n,e)})}depthFirstAllColumnTreeSearch(e,t){e&&e.forEach(i=>{i instanceof Ut&&this.depthFirstAllColumnTreeSearch(i.getChildren(),t),t(i)})}depthFirstDisplayedColumnTreeSearch(e,t){e&&e.forEach(i=>{i instanceof Ut&&this.depthFirstDisplayedColumnTreeSearch(i.getDisplayedChildren(),t),t(i)})}};Tf=d2([Y("columnUtils")],Tf);var u2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Rf=class extends L{createDisplayedGroups(e,t,i,n){let s=this.mapOldGroupsById(n),o=[],a=e;for(;a.length;){let l=a;a=[];let c=0,d=u=>{let h=c;c=u;let p=l[h],g=(p instanceof Ut?p.getProvidedColumnGroup():p).getOriginalParent();if(g==null){for(let v=h;v<u;v++)o.push(l[v]);return}let m=this.createColumnGroup(g,t,s,i);for(let v=h;v<u;v++)m.addChild(l[v]);a.push(m)};for(let u=1;u<l.length;u++){let h=l[u],f=(h instanceof Ut?h.getProvidedColumnGroup():h).getOriginalParent(),g=l[c],v=(g instanceof Ut?g.getProvidedColumnGroup():g).getOriginalParent();f!==v&&d(u)}c<l.length&&d(l.length)}return this.setupParentsIntoColumns(o,null),o}createColumnGroup(e,t,i,n){let s=e.getGroupId(),o=t.getInstanceIdForKey(s),a=Ut.createUniqueId(s,o),l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),V(l)?l.reset():(l=new Ut(e,s,o,n),this.context.createBean(l)),l}mapOldGroupsById(e){let t={},i=n=>{n.forEach(s=>{if(s instanceof Ut){let o=s;t[s.getUniqueId()]=o,i(o.getChildren())}})};return e&&i(e),t}setupParentsIntoColumns(e,t){e.forEach(i=>{if(i.setParent(t),i instanceof Ut){let n=i;this.setupParentsIntoColumns(n.getChildren(),n)}})}};Rf=u2([Y("displayedGroupCreator")],Rf);var h2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Af=class extends L{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(t=>this.addComponent(t))}addComponent(e){let i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};Af=h2([Y("agStackComponentsRegistry")],Af);var lx={};tr(lx,{getAriaCheckboxStateName:()=>xd,getAriaDescribedBy:()=>p2,getAriaLevel:()=>$y,getAriaPosInSet:()=>Yy,getAriaSortState:()=>Ky,removeAriaExpanded:()=>Jy,removeAriaSort:()=>sx,setAriaActiveDescendant:()=>Of,setAriaChecked:()=>ox,setAriaColCount:()=>ix,setAriaColIndex:()=>Mf,setAriaColSpan:()=>rx,setAriaControls:()=>ax,setAriaDescribedBy:()=>qy,setAriaDescription:()=>Xy,setAriaDisabled:()=>Df,setAriaExpanded:()=>Wr,setAriaHidden:()=>yh,setAriaLabel:()=>Er,setAriaLabelledBy:()=>Ch,setAriaLevel:()=>Qy,setAriaLive:()=>Zy,setAriaMultiSelectable:()=>ex,setAriaPosInSet:()=>Pf,setAriaRole:()=>ut,setAriaRowCount:()=>tx,setAriaRowIndex:()=>If,setAriaSelected:()=>ws,setAriaSetSize:()=>Ff,setAriaSort:()=>nx});function Qs(r,e,t){t==null||t==""?jy(r,e):Ss(r,e,t)}function Ss(r,e,t){r.setAttribute(X1(e),t.toString())}function jy(r,e){r.removeAttribute(X1(e))}function X1(r){return`aria-${r}`}function ut(r,e){e?r.setAttribute("role",e):r.removeAttribute("role")}function Ky(r){let e;return r==="asc"?e="ascending":r==="desc"?e="descending":r==="mixed"?e="other":e="none",e}function $y(r){return parseInt(r.getAttribute("aria-level"),10)}function Yy(r){return parseInt(r.getAttribute("aria-posinset"),10)}function p2(r){return r.getAttribute("aria-describedby")||""}function Er(r,e){Qs(r,"label",e)}function Ch(r,e){Qs(r,"labelledby",e)}function Xy(r,e){Qs(r,"description",e)}function qy(r,e){Qs(r,"describedby",e)}function Zy(r,e){Qs(r,"live",e)}function Qy(r,e){Qs(r,"level",e)}function Df(r,e){Qs(r,"disabled",e)}function yh(r,e){Qs(r,"hidden",e)}function Of(r,e){Qs(r,"activedescendant",e)}function Wr(r,e){Ss(r,"expanded",e)}function Jy(r){jy(r,"expanded")}function Ff(r,e){Ss(r,"setsize",e)}function Pf(r,e){Ss(r,"posinset",e)}function ex(r,e){Ss(r,"multiselectable",e)}function tx(r,e){Ss(r,"rowcount",e)}function If(r,e){Ss(r,"rowindex",e)}function ix(r,e){Ss(r,"colcount",e)}function Mf(r,e){Ss(r,"colindex",e)}function rx(r,e){Ss(r,"colspan",e)}function nx(r,e){Ss(r,"sort",e)}function sx(r){jy(r,"sort")}function ws(r,e){Qs(r,"selected",e)}function ox(r,e){Ss(r,"checked",e===void 0?"mixed":e)}function ax(r,e){Qs(r,"controls",e.id),Ch(e,r.id)}function xd(r,e){return e===void 0?r("ariaIndeterminate","indeterminate"):e===!0?r("ariaChecked","checked"):r("ariaUnchecked","unchecked")}var xx={};tr(xx,{browserSupportsPreventScroll:()=>Sd,getBodyHeight:()=>Cx,getBodyWidth:()=>vx,getMaxDivHeight:()=>mx,getSafariVersion:()=>V0,getScrollbarWidth:()=>yx,getTabIndex:()=>Sh,isBrowserChrome:()=>xh,isBrowserFirefox:()=>H0,isBrowserSafari:()=>Ni,isIOSUserAgent:()=>tn,isInvisibleScrollbar:()=>Ul,isMacOsUserAgent:()=>Lf});var cx,B0,dx,ux,hx,px,fx,gx;function Ni(){return cx===void 0&&(cx=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),cx}function V0(){if(B0===void 0)if(Ni()){let r=navigator.userAgent.match(/version\/(\d+)/i);r&&(B0=r[1]!=null?parseFloat(r[1]):0)}else B0=0;return B0}function xh(){if(dx===void 0){let r=window;dx=!!r.chrome&&(!!r.chrome.webstore||!!r.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return dx}function H0(){return ux===void 0&&(ux=/(firefox)/i.test(navigator.userAgent)),ux}function Lf(){return hx===void 0&&(hx=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),hx}function tn(){return px===void 0&&(px=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),px}function Sd(){return!Ni()||V0()>=15}function Sh(r){if(!r)return null;let e=r.tabIndex,t=r.getAttribute("tabIndex");return e===-1&&(t===null||t===""&&!H0())?null:e.toString()}function mx(){if(!document.body)return-1;let r=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,t=document.createElement("div");for(document.body.appendChild(t);;){let i=r*2;if(t.style.height=i+"px",i>e||t.clientHeight!==i)break;r=i}return document.body.removeChild(t),r}function vx(){var r,e,t;return(e=(r=document.body)===null||r===void 0?void 0:r.clientWidth)!==null&&e!==void 0?e:window.innerHeight||((t=document.documentElement)===null||t===void 0?void 0:t.clientWidth)||-1}function Cx(){var r,e,t;return(e=(r=document.body)===null||r===void 0?void 0:r.clientHeight)!==null&&e!==void 0?e:window.innerHeight||((t=document.documentElement)===null||t===void 0?void 0:t.clientHeight)||-1}function yx(){return gx==null&&q1(),gx}function q1(){let r=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",r.appendChild(e);let t=e.offsetWidth-e.clientWidth;t===0&&e.clientWidth===0&&(t=null),e.parentNode&&e.parentNode.removeChild(e),t!=null&&(gx=t,fx=t===0)}function Ul(){return fx==null&&q1(),fx}var Ex={};tr(Ex,{dateToFormattedString:()=>zl,parseDateTimeFromString:()=>ji,serialiseDate:()=>zi});var wx={};tr(wx,{cleanNumber:()=>f2,createArrayOfNumbers:()=>Sx,decToHex:()=>g2,formatNumberCommas:()=>W0,formatNumberTwoDecimalPlacesAndCommas:()=>m2,oneOrGreater:()=>y2,padStartWidthZeros:()=>wd,sum:()=>v2,zeroOrGreater:()=>C2});function wd(r,e){return r.toString().padStart(e,"0")}function Sx(r,e){let t=[];for(let i=r;i<=e;i++)t.push(i);return t}function f2(r){return typeof r=="string"&&(r=parseInt(r,10)),typeof r=="number"?Math.floor(r):null}function g2(r,e){let t="";for(let i=0;i<e;i++)t+=String.fromCharCode(r&255),r>>>=8;return t}function m2(r,e,t){return typeof r!="number"?"":W0(Math.round(r*100)/100,e,t)}function W0(r,e,t){return typeof r!="number"?"":r.toString().replace(".",t).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function v2(r){return r==null?null:r.reduce((e,t)=>e+t,0)}function C2(r,e){return r>=0?r:e}function y2(r,e){let t=parseInt(r,10);return!isNaN(t)&&isFinite(t)&&t>0?t:e}function zi(r,e=!0,t="-"){if(!r)return null;let i=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(n=>wd(n,2)).join(t);return e&&(i+=" "+[r.getHours(),r.getMinutes(),r.getSeconds()].map(n=>wd(n,2)).join(":")),i}var bx=r=>{if(r>3&&r<21)return"th";switch(r%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function zl(r,e="YYYY-MM-DD"){let t=wd(r.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>t.slice(t.length-4,t.length),YY:()=>t.slice(t.length-2,t.length),Y:()=>`${r.getFullYear()}`,MMMM:()=>i[r.getMonth()],MMM:()=>i[r.getMonth()].slice(0,3),MM:()=>wd(r.getMonth()+1,2),Mo:()=>`${r.getMonth()+1}${bx(r.getMonth()+1)}`,M:()=>`${r.getMonth()+1}`,Do:()=>`${r.getDate()}${bx(r.getDate())}`,DD:()=>wd(r.getDate(),2),D:()=>`${r.getDate()}`,dddd:()=>n[r.getDay()],ddd:()=>n[r.getDay()].slice(0,3),dd:()=>n[r.getDay()].slice(0,2),do:()=>`${r.getDay()}${bx(r.getDay())}`,d:()=>`${r.getDay()}`},o=new RegExp(Object.keys(s).join("|"),"g");return e.replace(o,a=>a in s?s[a]():a)}function ji(r){if(!r)return null;let[e,t]=r.split(" ");if(!e)return null;let i=e.split("-").map(u=>parseInt(u,10));if(i.filter(u=>!isNaN(u)).length!==3)return null;let[n,s,o]=i,a=new Date(n,s-1,o);if(a.getFullYear()!==n||a.getMonth()!==s-1||a.getDate()!==o)return null;if(!t||t==="00:00:00")return a;let[l,c,d]=t.split(":").map(u=>parseInt(u,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),d>=0&&d<60&&a.setSeconds(d),a}var Ix={};tr(Ix,{FOCUSABLE_EXCLUDE:()=>j0,FOCUSABLE_SELECTOR:()=>_x,addOrRemoveAttribute:()=>$n,addStylesToElement:()=>Hf,appendHtml:()=>S2,bindCellRendererToHtmlElement:()=>Uf,clearElement:()=>$t,copyNodeList:()=>Ox,ensureDomOrder:()=>Bf,formatSize:()=>Wf,getAbsoluteHeight:()=>kf,getAbsoluteWidth:()=>jl,getElementAttribute:()=>w2,getElementRectWithOffset:()=>Gf,getElementSize:()=>jo,getInnerHeight:()=>Va,getInnerWidth:()=>bd,getScrollLeft:()=>Kl,insertWithDomOrder:()=>Rx,isElementChildOfClass:()=>Js,isFocusableFormField:()=>Nf,isHorizontalScrollShowing:()=>Ax,isNodeOrElement:()=>Wa,isRtlNegativeScroll:()=>wh,isVerticalScrollShowing:()=>Dx,isVisible:()=>Sn,iterateNamedNodeMap:()=>Fx,loadTemplate:()=>Yt,nodeListForEach:()=>Px,offsetHeight:()=>K0,offsetWidth:()=>$0,prependDC:()=>b2,radioCssClass:()=>z0,removeElement:()=>x2,removeFromParent:()=>bs,setDisabled:()=>zo,setDisplayed:()=>ke,setDomChildOrder:()=>Vf,setElementHeight:()=>E2,setElementWidth:()=>Yl,setFixedHeight:()=>Ha,setFixedWidth:()=>ur,setScrollLeft:()=>$l,setVisible:()=>Tx});var U0;function z0(r,e,t){let i=r.parentElement,n=i&&i.firstChild;for(;n;)e&&n.classList.toggle(e,n===r),t&&n.classList.toggle(t,n!==r),n=n.nextSibling}var _x="[tabindex], input, select, button, textarea, [href]",j0=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled:not(.ag-button), .ag-disabled *.mjs";function Nf(r){let e=Element.prototype.matches||Element.prototype.msMatchesSelector,t="input, select, button, textarea",i=e.call(r,t),n=e.call(r,j0),s=Sn(r);return i&&!n&&s}function ke(r,e,t={}){let{skipAriaHidden:i}=t;r.classList.toggle("ag-hidden",!e),i||yh(r,!e)}function Tx(r,e,t={}){let{skipAriaHidden:i}=t;r.classList.toggle("ag-invisible",!e),i||yh(r,!e)}function zo(r,e){let t="disabled",i=e?n=>n.setAttribute(t,""):n=>n.removeAttribute(t);i(r),Px(r.querySelectorAll("input"),n=>i(n))}function Js(r,e,t){let i=0;for(;r;){if(r.classList.contains(e))return!0;if(r=r.parentElement,typeof t=="number"){if(++i>t)break}else if(r===t)break}return!1}function jo(r){let{height:e,width:t,borderTopWidth:i,borderRightWidth:n,borderBottomWidth:s,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:u,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:g}=window.getComputedStyle(r);return{height:parseFloat(e),width:parseFloat(t),borderTopWidth:parseFloat(i),borderRightWidth:parseFloat(n),borderBottomWidth:parseFloat(s),borderLeftWidth:parseFloat(o),paddingTop:parseFloat(a),paddingRight:parseFloat(l),paddingBottom:parseFloat(c),paddingLeft:parseFloat(d),marginTop:parseFloat(u),marginRight:parseFloat(h),marginBottom:parseFloat(p),marginLeft:parseFloat(f),boxSizing:g}}function Va(r){let e=jo(r);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function bd(r){let e=jo(r);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function kf(r){let e=jo(r),t=e.marginBottom+e.marginTop;return Math.ceil(r.offsetHeight+t)}function jl(r){let e=jo(r),t=e.marginLeft+e.marginRight;return Math.ceil(r.offsetWidth+t)}function Gf(r){let e=r.getBoundingClientRect(),{borderTopWidth:t,borderLeftWidth:i,borderRightWidth:n,borderBottomWidth:s}=jo(r);return{top:e.top+(t||0),left:e.left+(i||0),right:e.right+(n||0),bottom:e.bottom+(s||0)}}function wh(){if(typeof U0=="boolean")return U0;let r=document.createElement("div");return r.style.direction="rtl",r.style.width="1px",r.style.height="1px",r.style.position="fixed",r.style.top="0px",r.style.overflow="hidden",r.dir="rtl",r.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(r),r.scrollLeft=1,U0=Math.floor(r.scrollLeft)===0,document.body.removeChild(r),U0}function Kl(r,e){let t=r.scrollLeft;return e&&(t=Math.abs(t),xh()&&!wh()&&(t=r.scrollWidth-r.clientWidth-t)),t}function $l(r,e,t){t&&(wh()?e*=-1:(Ni()||xh())&&(e=r.scrollWidth-r.clientWidth-e)),r.scrollLeft=e}function $t(r){for(;r&&r.firstChild;)r.removeChild(r.firstChild)}function x2(r,e){bs(r.querySelector(e))}function bs(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function Sn(r){return r.offsetParent!==null}function Yt(r){let e=document.createElement("div");return e.innerHTML=(r||"").trim(),e.firstChild}function S2(r,e){r.lastChild?r.insertAdjacentHTML("afterbegin",e):r.innerHTML=e}function w2(r,e){return r.attributes&&r.attributes[e]?r.attributes[e].value:null}function K0(r){return r&&r.clientHeight?r.clientHeight:0}function $0(r){return r&&r.clientWidth?r.clientWidth:0}function Bf(r,e,t){if(t&&t.nextSibling===e)return;let i=document.activeElement,n=e.contains(i);t?t.nextSibling?r.insertBefore(e,t.nextSibling):r.appendChild(e):r.firstChild&&r.firstChild!==e&&r.insertAdjacentElement("afterbegin",e),n&&i&&Sd()&&i.focus({preventScroll:!0})}function Vf(r,e){for(let t=0;t<e.length;t++){let i=e[t],n=r.children[t];n!==i&&r.insertBefore(i,n)}}function Rx(r,e,t){t?t.insertAdjacentElement("afterend",e):r.firstChild?r.insertAdjacentElement("afterbegin",e):r.appendChild(e)}function b2(r,e){V(r.firstChild)?r.insertBefore(e,r.firstChild):r.appendChild(e)}function Hf(r,e){if(e)for(let[t,i]of Object.entries(e)){if(!t||!t.length||i==null)continue;let n=Vy(t),s=i.toString(),o=s.replace(/\s*!important/g,""),a=o.length!=s.length?"important":void 0;r.style.setProperty(n,o,a)}}function Ax(r){return r.clientWidth<r.scrollWidth}function Dx(r){return r.clientHeight<r.scrollHeight}function Yl(r,e){e==="flex"?(r.style.removeProperty("width"),r.style.removeProperty("minWidth"),r.style.removeProperty("maxWidth"),r.style.flex="1 1 auto"):ur(r,e)}function ur(r,e){e=Wf(e),r.style.width=e.toString(),r.style.maxWidth=e.toString(),r.style.minWidth=e.toString()}function E2(r,e){e==="flex"?(r.style.removeProperty("height"),r.style.removeProperty("minHeight"),r.style.removeProperty("maxHeight"),r.style.flex="1 1 auto"):Ha(r,e)}function Ha(r,e){e=Wf(e),r.style.height=e.toString(),r.style.maxHeight=e.toString(),r.style.minHeight=e.toString()}function Wf(r){return typeof r=="number"?`${r}px`:r}function Wa(r){return r instanceof Node||r instanceof HTMLElement}function Ox(r){if(r==null)return[];let e=[];return Px(r,t=>e.push(t)),e}function Fx(r,e){if(r)for(let t=0;t<r.length;t++){let i=r[t];e(i.name,i.value)}}function $n(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t.toString())}function Px(r,e){if(r!=null)for(let t=0;t<r.length;t++)e(r[t])}function Uf(r,e){r.then(t=>{let i=t.getGui();i!=null&&(typeof i=="object"?e.appendChild(i):e.innerHTML=i)})}var Mx={};tr(Mx,{createIcon:()=>wn,createIconNoSpan:()=>gt,iconNameClassMap:()=>Z1});var Z1={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function wn(r,e,t){let i=gt(r,e,t);if(i){let{className:s}=i;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return i}let n=document.createElement("span");return n.appendChild(i),n}function gt(r,e,t,i){let n=null,s=t&&t.getColDef().icons;if(s&&(n=s[r]),e&&!n){let o=e.get("icons");o&&(n=o[r])}if(n){let o;if(typeof n=="function")o=n();else if(typeof n=="string")o=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Yt(o);if(Wa(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{let o=document.createElement("span"),a=Z1[r];return a||(i?a=r:(console.warn(`AG Grid: Did not find icon ${r}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),ut(o,"presentation"),o}}var Gx={};tr(Gx,{isDeleteKey:()=>kx,isEventFromPrintableCharacter:()=>Ed,isUserSuppressingHeaderKeyboardEvent:()=>Lx,isUserSuppressingKeyboardEvent:()=>bh,normaliseQwertyAzerty:()=>Nx});var B=(()=>{class r{}return r.BACKSPACE="Backspace",r.TAB="Tab",r.ENTER="Enter",r.ESCAPE="Escape",r.SPACE=" ",r.LEFT="ArrowLeft",r.UP="ArrowUp",r.RIGHT="ArrowRight",r.DOWN="ArrowDown",r.DELETE="Delete",r.F2="F2",r.PAGE_UP="PageUp",r.PAGE_DOWN="PageDown",r.PAGE_HOME="Home",r.PAGE_END="End",r.A="KeyA",r.C="KeyC",r.D="KeyD",r.V="KeyV",r.X="KeyX",r.Y="KeyY",r.Z="KeyZ",r})();var _2=65,T2=67,R2=86,A2=68,D2=90,O2=89;function Ed(r){return r.altKey||r.ctrlKey||r.metaKey?!1:r.key.length===1}function bh(r,e,t,i,n){let s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;let o={event:e,editing:n,column:i,api:r.api,node:t,data:t.data,colDef:i.getColDef(),context:r.context,columnApi:r.columnApi};return!!(s&&s(o))}function Lx(r,e,t,i){let n=i.getDefinition(),s=n&&n.suppressHeaderKeyboardEvent;if(!V(s))return!1;let o={api:r.api,columnApi:r.columnApi,context:r.context,colDef:n,column:i,headerRowIndex:t,event:e};return!!s(o)}function Nx(r){let{keyCode:e}=r,t;switch(e){case _2:t=B.A;break;case T2:t=B.C;break;case R2:t=B.V;break;case A2:t=B.D;break;case D2:t=B.Z;break;case O2:t=B.Y;break;default:t=r.code}return t}function kx(r,e=!1){return r===B.DELETE?!0:!e&&r===B.BACKSPACE?Lf():!1}var Bx={};tr(Bx,{areEventsNear:()=>zf});function zf(r,e,t){if(t===0)return!1;let i=Math.abs(r.clientX-e.clientX),n=Math.abs(r.clientY-e.clientY);return Math.max(i,n)<=t}var Vx={};tr(Vx,{sortRowNodesByOrder:()=>F2,traverseNodesWithKey:()=>P2});function F2(r,e){if(!r)return!1;let t=(o,a)=>{let l=e[o.id],c=e[a.id],d=l!==void 0,u=c!==void 0,h=d&&u,p=!d&&!u;return h?l-c:p?o.__objectId-a.__objectId:d?1:-1},i,n,s=!1;for(let o=0;o<r.length-1;o++)if(i=r[o],n=r[o+1],t(i,n)>0){s=!0;break}return s?(r.sort(t),!0):!1}function P2(r,e){let t=[];i(r);function i(n){n&&n.forEach(s=>{if(s.group||s.hasChildren()){t.push(s.key);let o=t.join("|");e(s,o),i(s.childrenAfterGroup),t.pop()}})}}var Hx={};tr(Hx,{convertToSet:()=>jf});function jf(r){let e=new Set;return r.forEach(t=>e.add(t)),e}var I2=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},lx),My),xx),Ex),Ix),ky),Ay),zy),xy),Mx),Gx),Wy),Bx),wx),by),Vx),Hx),Hy),Pe=I2;var Yn=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}};var Kf=function(r){return r[r.IN_PROGRESS=0]="IN_PROGRESS",r[r.RESOLVED=1]="RESOLVED",r}(Kf||{}),vi=class r{constructor(e){this.status=Kf.IN_PROGRESS,this.resolution=null,this.waiters=[],e(t=>this.onDone(t),t=>this.onReject(t))}static all(e){return new r(t=>{let i=e.length,n=new Array(i);e.forEach((s,o)=>{s.then(a=>{n[o]=a,i--,i===0&&t(n)})})})}static resolve(e=null){return new r(t=>t(e))}then(e){return new r(t=>{this.status===Kf.RESOLVED?t(e(this.resolution)):this.waiters.push(i=>t(e(i)))})}resolveNow(e,t){return this.status===Kf.RESOLVED?t(this.resolution):e}onDone(e){this.status=Kf.RESOLVED,this.resolution=e,this.waiters.forEach(t=>t(e))}onReject(e){console.warn("TBI")}};var Wx=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ko=function(r){return r[r.NOTHING=0]="NOTHING",r[r.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",r[r.SHOWING=2]="SHOWING",r}(Ko||{}),Ua=function(r){return r[r.HOVER=0]="HOVER",r[r.FOCUS=1]="FOCUS",r}(Ua||{}),Xn=class r extends L{constructor(e,t,i){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=i,this.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,this.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=Ko.NOTHING,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gridOptionsService.is("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipShowDelay=this.getTooltipDelay("show"),this.tooltipHideDelay=this.getTooltipDelay("hide"),this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");let e=this.parentComp.getGui();this.tooltipTrigger===Ua.HOVER&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===Ua.FOCUS&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){let t=this.gridOptionsService.getNum(e);if(V(t))return t<0&&Ne(()=>console.warn(`AG Grid: ${e} should not be lower than 0`),`${e}Warn`),Math.max(200,t)}getTooltipDelay(e){var t,i,n,s;return e==="show"?(i=(t=this.getGridOptionsTooltipDelay("tooltipShowDelay"))!==null&&t!==void 0?t:this.tooltipShowDelayOverride)!==null&&i!==void 0?i:this.DEFAULT_SHOW_TOOLTIP_DELAY:(s=(n=this.getGridOptionsTooltipDelay("tooltipHideDelay"))!==null&&n!==void 0?n:this.tooltipHideDelayOverride)!==null&&s!==void 0?s:this.DEFAULT_HIDE_TOOLTIP_DELAY}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gridOptionsService.get("tooltipTrigger");return!e||e==="hover"?Ua.HOVER:Ua.FOCUS}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!tn()&&(r.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===Ko.SHOWING&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;let i=e.relatedTarget,n=this.parentComp.getGui(),s=(t=this.tooltipComp)===null||t===void 0?void 0:t.getGui();this.isInteractingWithTooltip||n.contains(i)||this.interactionEnabled&&s?.contains(i)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=Ko.NOTHING||r.isLocked)return!1;let t=0;return e&&(t=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=Ko.WAITING_TO_SHOW,!0}isLastTooltipHiddenRecently(){let e=new Date().getTime(),t=r.lastTooltipHideTime;return e-t<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===Ko.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=Ko.NOTHING,this.lastMouseEvent=null}showTooltip(){let e=Object.assign({},this.parentComp.getTooltipParams());if(!V(e.value)){this.setToDoNothing();return}this.state=Ko.SHOWING,this.tooltipInstanceCount++;let t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),r.lastTooltipHideTime=new Date().getTime());let t={type:w.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(t),this.state=Ko.NOTHING}newTooltipComponentCallback(e,t){if(this.state!==Ko.SHOWING||this.tooltipInstanceCount!==e){this.getContext().destroyBean(t);return}let n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===Ua.HOVER&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");let s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:n,ariaLabel:s("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===Ua.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===Ua.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(n,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(n,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(n,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(n,"focusout",this.onTooltipFocusOut.bind(this))||null));let a={type:w.EVENT_TOOLTIP_SHOW,tooltipGui:n,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var t;let i=this.parentComp.getGui(),n=(t=this.tooltipComp)===null||t===void 0?void 0:t.getGui(),s=e.relatedTarget;n?.contains(s)||(this.isInteractingWithTooltip=!1,i.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Object.assign(Object.assign({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Object.assign(Object.assign({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=this.tooltipTrigger===Ua.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){r.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){r.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};Xn.isLocked=!1;Wx([y("popupService")],Xn.prototype,"popupService",void 0);Wx([y("userComponentFactory")],Xn.prototype,"userComponentFactory",void 0);Wx([G],Xn.prototype,"postConstruct",null);var $f=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.addCssClass(n));return}if(this.cssClassStates[e]!==!0&&e.length){let n=this.getGui();n&&n.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.removeCssClass(n));return}if(this.cssClassStates[e]!==!1&&e.length){let n=this.getGui();n&&n.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let n=(e||"").split(" ");if(n.length>1){n.forEach(s=>this.addOrRemoveCssClass(s,t));return}}if(this.cssClassStates[e]!==t&&e.length){let n=this.getGui();n&&n.classList.toggle(e,t),this.cssClassStates[e]=t}}};var Ux=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},M2=new Yn,oe=class r extends L{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=M2.next(),this.cssClassManager=new $f(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e,t,i){let n=()=>{this.usingBrowserTooltips?this.getGui().removeAttribute("title"):this.tooltipFeature=this.destroyBean(this.tooltipFeature)},s=()=>{this.usingBrowserTooltips?this.getGui().setAttribute("title",this.tooltipText):this.tooltipFeature=this.createBean(new Xn(this,t,i))};this.tooltipText!=e&&(this.tooltipText&&n(),e!=null&&(this.tooltipText=e,this.tooltipText&&s()))}createChildComponentsFromTags(e,t){Ox(e.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;let s=this.createComponentFromElement(n,o=>{o.getGui()&&this.copyAttributesFromNode(n,o.getGui())},t);if(s){if(s.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);let o=Array.prototype.slice.call(n.children);s.addItems(o)}this.swapComponentForNode(s,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)})}createComponentFromElement(e,t,i){let n=e.nodeName,s=i?i[e.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(n);if(o){r.elementGettingCreated=e;let a=new o(s);return a.setParentComponent(this),this.createBean(a,null,t),a}return null}copyAttributesFromNode(e,t){Fx(e.attributes,(i,n)=>t.setAttribute(i,n))}swapComponentForNode(e,t,i){let n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,i)}swapInComponentForQuerySelectors(e,t){let i=this;this.iterateOverQuerySelectors(n=>{i[n.attributeName]===t&&(i[n.attributeName]=e)})}iterateOverQuerySelectors(e){let t=Object.getPrototypeOf(this);for(;t!=null;){let i=t.__agComponentMetaData,n=gd(t.constructor);i&&i[n]&&i[n].querySelectors&&i[n].querySelectors.forEach(s=>e(s)),t=Object.getPrototypeOf(t)}}activateTabIndex(e){let t=this.gridOptionsService.getNum("tabIndex")||0;e||(e=[]),e.length||e.push(this.getGui()),e.forEach(i=>i.setAttribute("tabindex",t.toString()))}setTemplate(e,t){let i=Yt(e);this.setTemplateFromElement(i,t)}setTemplateFromElement(e,t){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),t)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;let e=this;this.iterateOverQuerySelectors(t=>{let i=s=>e[t.attributeName]=s;if(t.refSelector&&this.getAttribute("ref")===t.refSelector)i(this.eGui);else{let s=this.eGui.querySelector(t.querySelector);s&&i(s.__agComponent||s)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,t){if(e!=null)if(t||(t=this.eGui),Wa(e))t.appendChild(e);else{let i=e;t.appendChild(i.getGui())}}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:i}=t;Tx(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:i}=t;ke(this.eGui,e,{skipAriaHidden:i});let n={type:r.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(n)}}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);let e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}getAttribute(e){let{eGui:t}=this;return t?t.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}};oe.EVENT_DISPLAYED_CHANGED="displayedChanged";Ux([y("agStackComponentsRegistry")],oe.prototype,"agStackComponentsRegistry",void 0);Ux([P0],oe.prototype,"preConstructOnComponent",null);Ux([P0],oe.prototype,"createChildComponentsPreConstruct",null);function Z(r){return L2.bind(this,`[ref=${r}]`,r)}function L2(r,e,t,i,n){if(r===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof n=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}N2(t,"querySelectors",{attributeName:i,querySelector:r,refSelector:e})}function N2(r,e,t){let i=k2(r,gd(r.constructor));i[e]||(i[e]=[]),i[e].push(t)}function k2(r,e){return r.__agComponentMetaData||(r.__agComponentMetaData={}),r.__agComponentMetaData[e]||(r.__agComponentMetaData[e]={}),r.__agComponentMetaData[e]}var Q1=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Eh=class extends oe{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(!e){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.init(e)}};Q1([Z("eFloatingFilterText")],Eh.prototype,"eFloatingFilterText",void 0);Q1([y("columnModel")],Eh.prototype,"columnModel",void 0);var _h=class{constructor(e,t,i,n){this.alive=!0,this.context=e,this.eParent=n,t.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(n.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){ke(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t;!((t=this.dateComp)===null||t===void 0)&&t.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}};var Th=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],i=n=>n.some(s=>e[s]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${n}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(n=>n===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}};var Y0={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};var J1=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ci=class r extends L{constructor(e,t={}){super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks=Object.assign({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);n&&(n.focus(),i.preventDefault())}},t)}postConstruct(){this.eFocusableElement.classList.add(r.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",t=>{if(!(t.defaultPrevented||dr(t))){if(this.callbacks.shouldStopEventPropagation(t)){wr(t);return}t.key===B.TAB?this.callbacks.onTabKeyDown(t):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(t)}})}};Ci.FOCUS_MANAGED_CLASS="ag-focus-managed";J1([y("focusService")],Ci.prototype,"focusService",void 0);J1([G],Ci.prototype,"postConstruct",null);var zx=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},e_="ag-resizer-wrapper",G2=`<div class="${e_}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,$o=class extends L{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:s,height:o,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0,u=!!this.element.offsetParent;if(u){let h=this.findBoundaryElement(),p=window.getComputedStyle(h);if(p.minWidth!=null){let f=h.offsetWidth-this.element.offsetWidth;d=parseInt(p.minWidth,10)-f}if(p.minHeight!=null){let f=h.offsetHeight-this.element.offsetHeight;c=parseInt(p.minHeight,10)-f}}if(this.minHeight=s||c,this.minWidth=i||d,n&&this.setWidth(n),o&&this.setHeight(o),(!n||!o)&&this.refreshSize(),e)this.center();else if(a||l)this.offsetElement(a,l);else if(u&&t){let h=this.boundaryEl,p=!0;if(h||(h=this.findBoundaryElement(),p=!1),h){let f=parseFloat(h.style.top),g=parseFloat(h.style.left);p?this.offsetElement(isNaN(g)?0:g,isNaN(f)?0:f):this.setPosition(g,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let n=!!e[t],s=this.getResizerElement(t),o={dragStartPixels:0,eElement:s,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragService.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,i=this.element,n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ha(i,e),e=kf(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Ha(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:i}=this.offsetParent;if(!i)return null;let n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:n.top,a=e?0:s.top,l=0;if(t){let d=this.element.parentElement;if(d){let{bottom:u}=d.getBoundingClientRect();l=u-n.bottom}}return i+a-o-l}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:i}=this.config,n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)ur(t,e),e=jl(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:s}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+o>s&&(e=s-o)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?ur(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&(this.popupService.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:i,isTop:n,anywhereWithin:s,topBuffer:o}=e,a=t.clientX-this.dragStartPosition.x,l=t.clientY-this.dragStartPosition.y,c=this.shouldSkipX(t,!!i,!!s,a)?0:a,d=this.shouldSkipY(t,!!n,o,l)?0:l;return{movementX:c,movementY:d}}shouldSkipX(e,t,i,n){let s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.x:s.left,c=l<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=a.right;return c?!0:(t?c=n<0&&e.clientX>l+o.left||n>0&&e.clientX<l+o.left:i?c=n<0&&e.clientX>a.right||n>0&&e.clientX<l+o.left:c=n<0&&e.clientX>a.right||n>0&&e.clientX<a.right,c)}shouldSkipY(e,t,i=0,n){let s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.y:s.top,c=l<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=a.bottom;return c?!0:(t?c=n<0&&e.clientY>l+o.top+i||n>0&&e.clientY<l+o.top:c=n<0&&e.clientY>a.bottom||n>0&&e.clientY<a.bottom,c)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let i=new DOMParser().parseFromString(G2,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${e_}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:i,forcePopupParentAsOffsetParent:n}=this.config;!i&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,i=0;for(let n=0;n<e.length;n++){let s=e[n],o=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let a=this.minHeight||0,l=this.minWidth||0;if(o){let c=window.getComputedStyle(s);c.minHeight&&(a=parseInt(c.minHeight,10)),c.minWidth&&(l=parseInt(c.minWidth,10))}else a=s.offsetHeight,l=s.offsetWidth;t+=a,i+=l}return{height:t,width:i}}applySizeToSiblings(e){let t=null,i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){let s=i[n];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:s,isBottom:o,isLeft:a}=this.currentResizer,l=s||a,c=o||n,{movementX:d,movementY:u}=this.calculateMouseMovement({e,isLeft:a,isTop:n}),h=this.position.x,p=this.position.y,f=0,g=0;if(l&&d){let m=a?-1:1,v=this.getWidth(),C=v+d*m,S=!1;a&&(f=v-C,(h+f<=0||C<=this.minWidth)&&(S=!0,f=0)),S||this.setWidth(C)}if(c&&u){let m=n?-1:1,v=this.getHeight(),C=v+u*m,S=!1;n?(g=v-C,(p+g<=0||C<=this.minHeight)&&(S=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(S=!0),S||this.setHeight(C)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&f||g)&&this.offsetElement(h+f,p+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;let i={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent(i)}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:i}=this.position,n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());let{movementX:s,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+s,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};zx([y("popupService")],$o.prototype,"popupService",void 0);zx([y("resizeObserverService")],$o.prototype,"resizeObserverService",void 0);zx([y("dragService")],$o.prototype,"dragService",void 0);var jx=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qn=class r extends oe{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null}postConstruct(){this.resetTemplate(),this.createManagedBean(new Ci(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new $o(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=r.isUseApplyButton(e),this.createButtonPanel()}createButtonPanel(){let{buttons:e}=this.providedFilterParams;if(!e||e.length<1||this.isReadOnly())return;let t=document.createElement("div");t.classList.add("ag-filter-apply-panel");let i=n=>{let s,o;switch(n){case"apply":s=this.translate("applyFilter"),o=c=>this.onBtApply(!1,!1,c);break;case"clear":s=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":s=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":s=this.translate("cancelFilter"),o=c=>{this.onBtCancel(c)};break;default:console.warn("AG Grid: Unknown button type specified");return}let l=Yt(`<button
                    type="${n==="apply"?"submit":"button"}"
                    ref="${n}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${s}
                </button>`);t.appendChild(l),this.addManagedListener(l,"click",o)};jf(e).forEach(n=>i(n)),this.getGui().appendChild(t)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=r.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),t=ar(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let i=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){let s="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:s})}let{closeOnApply:n}=this.providedFilterParams;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,i=t&&t.key,n;(i==="Enter"||i==="Space")&&(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let i=this.isModelValid(this.getModelFromUi());zo(this.getRefElement("applyFilterButton"),!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter",{positionableFeature:i,gridOptionsService:n}=this;t?(i.restoreLastSize(),i.setResizable(n.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,t){return r.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Y0[e])}getCellValue(e){let{api:t,colDef:i,column:n,columnApi:s,context:o}=this.providedFilterParams;return this.providedFilterParams.valueGetter({api:t,colDef:i,column:n,columnApi:s,context:o,data:e.data,getValue:a=>e.data[a],node:e})}getPositionableElement(){return this.eFilterBody}};jx([y("rowModel")],qn.prototype,"rowModel",void 0);jx([Z("eFilterBody")],qn.prototype,"eFilterBody",void 0);jx([G],qn.prototype,"postConstruct",null);var B2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Xl=class extends oe{constructor(e,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n}=this.config;e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){$t(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(ke(this.eLabel,!1),ut(this.eLabel,"presentation")):(ke(this.eLabel,!0),ut(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Yl(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return zo(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}};B2([G],Xl.prototype,"postConstruct",null);var _d=class extends Xl{constructor(e,t,i){super(e,t),this.className=i}postConstruct(){super.postConstruct(),this.className&&this.addCssClass(this.className)}onValueChange(e){return this.addManagedListener(this,w.EVENT_FIELD_VALUE_CHANGED,()=>e(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return ur(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this)}};var Yf=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},V2=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Es=class extends _d{constructor(e){if(super(e,e?.template||V2,e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:s,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,i!=null&&this.setPickerMaxHeight(i),s!=null&&this.setPickerMinWidth(s),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();qy(t,e),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));let{pickerIcon:i}=this.config;if(i){let n=gt(i,this.gridOptionsService);n&&this.eIcon.appendChild(n)}}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",(this.gridOptionsService.getNum("tabIndex")||0).toString()),Wr(e,!1),this.ariaRole&&ut(e,this.ariaRole)}refreshLabel(){var e;let t=this.getAriaElement();Ch(t,(e=this.getLabelId())!==null&&e!==void 0?e:""),super.refreshLabel()}onLabelOrWrapperMouseDown(){if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case B.UP:case B.DOWN:case B.ENTER:case B.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case B.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.gridOptionsService.getDocument(),t=this.pickerComponent.getGui();this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(e.body,"wheel",v=>{t.contains(v.target)||this.hidePicker()}));let i=this.localeService.getLocaleTextFunc(),{pickerType:n,pickerAriaLabelKey:s,pickerAriaLabelValue:o,modalPicker:a=!0}=this.config,l={modal:a,eChild:t,closeOnEsc:!0,closedCallback:()=>{let v=e.activeElement===e.body;this.beforeHidePicker(),v&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(s,o)},c=this.popupService.addPopup(l),{maxPickerHeight:d,minPickerWidth:u,maxPickerWidth:h,pickerGap:p,variableWidth:f}=this;f?(u&&(t.style.minWidth=u),t.style.width=Wf(jl(this.eWrapper)),h&&(t.style.maxWidth=h)):Yl(t,h??jl(this.eWrapper));let g=d??`${Va(this.popupService.getPopupParent())}px`;t.style.setProperty("max-height",g),t.style.position="absolute";let m=this.gridOptionsService.is("enableRtl")?"right":"left";return this.popupService.positionPopupByComponent({type:n,eventSource:this.eWrapper,ePopup:t,position:"under",alignSide:m,keepWithinBounds:!0,nudgeY:p}),c.hideFunc}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();Wr(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;!((t=this.pickerComponent)===null||t===void 0)&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setAriaLabel(e){return Er(this.getAriaElement(),e),this}setInputWidth(e){return Yl(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}};Yf([y("popupService")],Es.prototype,"popupService",void 0);Yf([Z("eLabel")],Es.prototype,"eLabel",void 0);Yf([Z("eWrapper")],Es.prototype,"eWrapper",void 0);Yf([Z("eDisplayField")],Es.prototype,"eDisplayField",void 0);Yf([Z("eIcon")],Es.prototype,"eIcon",void 0);var H2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ql=class r extends oe{constructor(e="default"){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.options=[],this.itemEls=[]}init(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){let t=e.key;switch(t){case B.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let s=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(s)}break;case B.DOWN:case B.UP:let i=t===B.DOWN,n;if(e.preventDefault(),!this.highlightedEl)n=this.itemEls[i?0:this.itemEls.length-1];else{let o=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);o=Math.min(Math.max(o,0),this.itemEls.length-1),n=this.itemEls[o]}this.highlightItem(n);break}}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:i}=e,n=Et(i||t);return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{Pf(t,i+1),Ff(t,e.length)})}renderOption(e,t){let i=document.createElement("div");ut(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`),i.innerHTML=`<span>${t}</span>`,i.tabIndex=-1,this.itemEls.push(i),this.addManagedListener(i,"mouseover",()=>this.highlightItem(i)),this.addManagedListener(i,"mouseleave",()=>this.clearHighlighted()),this.addManagedListener(i,"click",()=>this.setValue(e)),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(),this;let i=this.options.findIndex(n=>n.value===e);if(i!==-1){let n=this.options[i];this.value=n.value,this.displayValue=n.text!=null?n.text:n.value,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()}highlightItem(e){e.offsetParent&&(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(r.ACTIVE_CLASS),ws(this.highlightedEl,!0),this.highlightedEl.focus())}clearHighlighted(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(r.ACTIVE_CLASS),ws(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:r.EVENT_ITEM_SELECTED})}};ql.EVENT_ITEM_SELECTED="selectedItem";ql.ACTIVE_CLASS="ag-active-item";H2([G],ql.prototype,"init",null);var Td=(()=>{class r extends Es{constructor(t){super(Object.assign({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"listbox"},t))}postConstruct(){var t;super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=(t=this.gridOptionsService.getNum("tabIndex"))!==null&&t!==void 0?t:0}createListComponent(){this.listComponent=this.createBean(new ql("select")),this.listComponent.setParentComponent(this),this.listComponent.addGuiEventListener("keydown",t=>{t.key===B.TAB&&(t.preventDefault(),t.stopImmediatePropagation(),this.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:t.key,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,ql.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:r.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,w.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(t){return t.forEach(i=>this.addOption(i)),this}addOption(t){return this.listComponent.addOption(t),this}setValue(t,i,n){return this.value===t||!this.listComponent?this:(n||this.listComponent.setValue(t,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),super.setValue(t,i)))}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}}return r.EVENT_ITEM_SELECTED="selectedItem",r})();var Kx=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},hr=class extends _d{constructor(e,t,i="text",n="input"){super(e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${n} ref="eInput" class="ag-input-field-input"></${n}>
                </div>
            </div>`,t),this.inputType=i,this.displayFieldTag=n}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{width:e,value:t}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}refreshLabel(){V(this.getLabel())?Ch(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),super.refreshLabel()}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>this.setValue(e.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Yl(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return $n(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Er(this.eInput,e),this}setDisabled(e){return zo(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)$n(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";$n(this.eInput,"autocomplete",t)}return this}};Kx([Z("eLabel")],hr.prototype,"eLabel",void 0);Kx([Z("eWrapper")],hr.prototype,"eWrapper",void 0);Kx([Z("eInput")],hr.prototype,"eInput",void 0);var eo=class extends hr{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:t,event:i});let n=this.getInputElement(),s={type:w.EVENT_CHECKBOX_CHANGED,id:n.id,name:n.name,selected:e,previousValue:t};this.eventService.dispatchEvent(s)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}};var Rd=class extends eo{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,w.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}};var Zl=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;let t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){let n=e,{conditions:s}=n;if(!s){let{condition1:l,condition2:c}=n;s=[l,c]}let o=s.map(l=>this.getModelAsString(l)),a=n.operator==="AND"?"andCondition":"orCondition";return o.join(` ${i(a,Y0[a])} `)}else{if(e.type===Mt.BLANK||e.type===Mt.NOT_BLANK)return i(e.type,e.type);{let n=e,s=this.optionsFactory.getCustomOption(n.type),{displayKey:o,displayName:a,numberOfInputs:l}=s||{};return o&&a&&l===0?(i(o,a),a):this.conditionToString(n,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;return this.valueFormatter?(t=this.valueFormatter(e??null))!==null&&t!==void 0?t:"":String(e)}},Mt=(()=>{class r extends qn{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(t){let i=this.optionsFactory.getCustomOption(t);if(i){let{numberOfInputs:s}=i;return s??1}let n=[r.EMPTY,r.NOT_BLANK,r.BLANK];return t&&n.indexOf(t)>=0?0:t===r.IN_RANGE?2:1}onFloatingFilterChanged(t,i){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)}setTypeFromFloatingFilter(t){this.eTypes.forEach((i,n)=>{n===0?i.setValue(t,!0):i.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let t=this.getUiCompleteConditions();return t.length===0?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:t[0],condition2:t[1],conditions:t}:t[0]}getConditionTypes(){return this.eTypes.map(t=>t.getValue())}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(t,i){if(!t&&!i)return!0;if(!t&&i||t&&!i)return!1;let n=!t.operator,s=!i.operator;if(!n&&s||n&&!s)return!1;let a;if(n){let l=t,c=i;a=this.areSimpleModelsEqual(l,c)}else{let l=t,c=i;a=l.operator===c.operator&&Zs(l.conditions,c.conditions,(d,u)=>this.areSimpleModelsEqual(d,u))}return a}setModelIntoUi(t){if(t.operator){let n=t;n.conditions||(n.conditions=[n.condition1,n.condition2]);let s=this.validateAndUpdateConditions(n.conditions),o=this.getNumConditions();if(s<o)this.removeConditionsAndOperators(s);else if(s>o)for(let l=o;l<s;l++)this.createJoinOperatorPanel(),this.createOption();let a=n.operator==="OR";this.eJoinOperatorsAnd.forEach(l=>l.setValue(!a,!0)),this.eJoinOperatorsOr.forEach(l=>l.setValue(a,!0)),n.conditions.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{let n=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),vi.resolve()}validateAndUpdateConditions(t){let i=t.length;return i>this.maxNumConditions&&(t.splice(this.maxNumConditions),Ne(()=>console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),"simpleFilterSetModelMaxNumConditions"),i=this.maxNumConditions),i}doesFilterPass(t){var i;let n=this.getModel();if(n==null)return!0;let{operator:s}=n,o=[];if(s){let l=n;o.push(...(i=l.conditions)!==null&&i!==void 0?i:[])}else o.push(n);return o[s&&s==="OR"?"some":"every"](l=>this.individualConditionPasses(t,l))}setParams(t){super.setParams(t),this.setNumConditions(t),this.defaultJoinOperator=this.getDefaultJoinOperator(t.defaultJoinOperator),this.filterPlaceholder=t.filterPlaceholder,this.optionsFactory=new Th,this.optionsFactory.init(t,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(t){var i,n;t.suppressAndOrCondition!=null&&Ne(()=>console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),"simpleFilterSuppressAndOrCondition"),t.alwaysShowBothConditions!=null&&Ne(()=>console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=(i=t.maxNumConditions)!==null&&i!==void 0?i:t.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Ne(()=>console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.'),"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(n=t.numAlwaysVisibleConditions)!==null&&n!==void 0?n:t.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Ne(()=>console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Ne(()=>console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let t=this.createManagedBean(new Td);this.eTypes.push(t),t.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(t.getGui());let i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);let n=this.getNumConditions()-1;this.forEachPositionInput(n,s=>this.resetInput(s)),this.addChangedListeners(t,n)}createJoinOperatorPanel(){let t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");let i=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);let s=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(i,s,o),this.resetJoinOperatorOr(n,s,o),this.isReadOnly()||(i.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(t,i,n){let s=this.createManagedBean(new Rd);return t.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${n}`),i.appendChild(s.getGui()),s}getDefaultJoinOperator(t){return t==="AND"||t==="OR"?t:"AND"}createFilterListOptions(){let t=this.optionsFactory.getFilterOptions();this.filterListOptions=t.map(i=>typeof i=="string"?this.createBoilerplateListOption(i):this.createCustomListOption(i))}putOptionsIntoDropdown(t){this.filterListOptions.forEach(i=>{t.addOption(i)}),t.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){let{displayKey:i}=t,n=this.optionsFactory.getCustomOption(t.displayKey);return{value:i,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(i)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){var t;let i=-1,n=!0;for(let s=0;s<this.getNumConditions();s++)this.isConditionUiComplete(s)?i=s:n=!1;if(this.shouldAddNewConditionAtEnd(n))this.createJoinOperatorPanel(),this.createOption();else{let s=(t=this.lastUiCompletePosition)!==null&&t!==void 0?t:this.getNumConditions()-2;if(i<s){this.removeConditionsAndOperators(s+1);let o=i+1,a=s-o;a>0&&this.removeConditionsAndOperators(o,a),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=i}updateConditionStatusesAndValues(t,i){this.eTypes.forEach((s,o)=>{let a=this.isConditionDisabled(o,t);s.setDisabled(a||this.filterListOptions.length<=1),o===1&&(zo(this.eJoinOperatorPanels[0],a),this.eJoinOperatorsAnd[0].setDisabled(a),this.eJoinOperatorsOr[0].setDisabled(a))}),this.eConditionBodies.forEach((s,o)=>{ke(s,this.isConditionBodyVisible(o))});let n=(i??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((s,o)=>{s.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach((s,o)=>{s.setValue(n,!0)}),this.forEachInput((s,o,a,l)=>{this.setElementDisplayed(s,o<l),this.setElementDisabled(s,this.isConditionDisabled(a,t))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,i){if(t>=this.getNumConditions())return;this.removeComponents(this.eTypes,t,i),this.removeElements(this.eConditionBodies,t,i),this.removeValueElements(t,i);let n=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,n,i),this.removeComponents(this.eJoinOperatorsAnd,n,i),this.removeComponents(this.eJoinOperatorsOr,n,i)}removeElements(t,i,n){this.removeItems(t,i,n).forEach(o=>bs(o))}removeComponents(t,i,n){this.removeItems(t,i,n).forEach(o=>{bs(o.getGui()),this.destroyBean(o)})}removeItems(t,i,n){return n==null?t.splice(i):t.splice(i,n)}afterGuiAttached(t){if(super.afterGuiAttached(t),this.resetPlaceholder(),!t?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let i=this.getInputs(0)[0];if(!i)return;i instanceof hr&&i.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let t=this.getModel();(!this.areModelsEqual(t,this.getModelFromUi())||this.hasInvalidInputs())&&this.resetUiToActiveModel(t);let i=-1,n=-1,s=!1,o=this.getJoinOperator();for(let l=this.getNumConditions()-1;l>=0;l--)if(this.isConditionUiComplete(l))i===-1&&(i=l,n=l);else{let c=l>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(l-1),d=l<i;(c||d)&&(this.removeConditionsAndOperators(l,1),s=!0,d&&n--)}let a=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),a=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),a=!0),a&&this.updateConditionStatusesAndValues(n,o),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(t,i){let n=this.translate(t);if(md(this.filterPlaceholder)){let s=this.filterPlaceholder,o=this.eTypes[i].getValue(),a=this.translate(o);n=s({filterOptionKey:o,filterOption:a,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let t=this.localeService.getLocaleTextFunc();this.forEachInput((i,n,s,o)=>{if(!(i instanceof hr))return;let a=n===0&&o>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",l=n===0&&o>1?t("ariaFilterFromValue","Filter from value"):n===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(this.getPlaceholderText(a,s)),i.setInputAriaLabel(l)})}setElementValue(t,i,n){t instanceof hr&&t.setValue(i!=null?String(i):null,!0)}setElementDisplayed(t,i){t instanceof oe&&ke(t.getGui(),i)}setElementDisabled(t,i){t instanceof oe&&zo(t.getGui(),i)}attachElementOnChange(t,i){t instanceof hr&&t.onValueChange(i)}forEachInput(t){this.getConditionTypes().forEach((i,n)=>{this.forEachPositionTypeInput(n,i,t)})}forEachPositionInput(t,i){let n=this.getConditionType(t);this.forEachPositionTypeInput(t,n,i)}forEachPositionTypeInput(t,i,n){let s=this.getNumberOfInputs(i),o=this.getInputs(t);for(let a=0;a<o.length;a++){let l=o[a];l!=null&&n(l,a,t,s)}}isConditionDisabled(t,i){return this.isReadOnly()?!0:t===0?!1:t>i+1}isConditionBodyVisible(t){let i=this.getConditionType(t);return this.getNumberOfInputs(i)>0}isConditionUiComplete(t){return!(t>=this.getNumConditions()||this.getConditionType(t)===r.EMPTY||this.getValues(t).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let t=[];for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&t.push(this.createCondition(i));return t}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(t){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(i=>this.resetType(i)),this.eJoinOperatorsAnd.forEach((i,n)=>this.resetJoinOperatorAnd(i,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((i,n)=>this.resetJoinOperatorOr(i,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(i=>this.resetInput(i)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),vi.resolve()}resetType(t){let n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,i,n){this.resetJoinOperator(t,i,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(t,i,n){this.resetJoinOperator(t,i,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(t,i,n,s,o){this.updateJoinOperatorDisabled(t.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${o}`).setLabel(s),i)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((t,i)=>this.updateJoinOperatorDisabled(t,i)),this.eJoinOperatorsOr.forEach((t,i)=>this.updateJoinOperatorDisabled(t,i))}updateJoinOperatorDisabled(t,i){t.setDisabled(this.isReadOnly()||i>0)}resetInput(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,i){let n=this.mapValuesFromModel(t);this.forEachInput((s,o,a,l)=>{a===i&&this.setElementValue(s,n[o]!=null?n[o]:null)})}setValueFromFloatingFilter(t){this.forEachInput((i,n,s,o)=>{this.setElementValue(i,n===0&&s===0?t:null,!0)})}isDefaultOperator(t){return t===this.defaultJoinOperator}addChangedListeners(t,i){this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(i,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(t,i){let n=this.getCellValue(t.node),s=this.mapValuesFromModel(i),o=this.optionsFactory.getCustomOption(i.type),a=this.evaluateCustomFilter(o,s,n);return a??(n==null?this.evaluateNullValue(i.type):this.evaluateNonNullValue(s,n,i,t))}evaluateCustomFilter(t,i,n){if(t==null)return;let{predicate:s}=t;if(s!=null&&!i.some(o=>o==null))return s(i,n)}isBlank(t){return t==null||typeof t=="string"&&t.trim().length===0}hasInvalidInputs(){return!1}}return r.EMPTY="empty",r.BLANK="blank",r.NOT_BLANK="notBlank",r.EQUALS="equals",r.NOT_EQUAL="notEqual",r.LESS_THAN="lessThan",r.LESS_THAN_OR_EQUAL="lessThanOrEqual",r.GREATER_THAN="greaterThan",r.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",r.IN_RANGE="inRange",r.CONTAINS="contains",r.NOT_CONTAINS="notContains",r.STARTS_WITH="startsWith",r.ENDS_WITH="endsWith",r})();var li=class r extends Mt{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case r.EQUALS:case r.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case r.GREATER_THAN:case r.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case r.LESS_THAN:case r.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case r.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case r.BLANK:return!0;case r.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,t,i){let n=this.comparator(),s=e[0]!=null?n(e[0],t):0;switch(i.type){case r.EQUALS:return s===0;case r.NOT_EQUAL:return s!==0;case r.GREATER_THAN:return s>0;case r.GREATER_THAN_OR_EQUAL:return s>=0;case r.LESS_THAN:return s<0;case r.LESS_THAN_OR_EQUAL:return s<=0;case r.IN_RANGE:{let o=n(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&o<=0:s>0&&o<0}case r.BLANK:return this.isBlank(t);case r.NOT_BLANK:return!this.isBlank(t);default:return console.warn('AG Grid: Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}};var W2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},t_=1e3,i_=1/0,Xf=class extends Zl{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){let{type:i}=e,{numberOfInputs:n}=t||{},s=i==Mt.IN_RANGE||n===2,o=ji(e.dateFrom),a=ji(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){let c=o!==null?zl(o,l):"null",d=a!==null?zl(a,l):"null";return`${c}-${d}`}return o!=null?zl(o,l):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},za=class r extends li{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=t_,this.maxValidYear=i_,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&ji(t)||null,i&&ji(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(i,n)=>{if(e[i]!=null)if(isNaN(e[i]))console.warn(`AG Grid: DateFilter ${i} is not a number`);else return e[i]==null?n:Number(e[i]);return n};this.minValidYear=t("minValidYear",t_),this.maxValidYear=t("maxValidYear",i_),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:ji(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:ji(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Xf(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new _h(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return r.DEFAULT_FILTER_OPTIONS}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,n){let s=document.createElement("div");s.classList.add(`ag-filter-${n}`),s.classList.add(`ag-filter-date-${n}`),t.push(s),e.appendChild(s),i.push(this.createDateCompWrapper(s))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,s,o)=>{s!==e||!t||n>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=zi(n[0])),n.length>1&&(i.dateTo=zi(n[1])),Object.assign({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},i)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(i.getDate())}),t}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""}};za.DEFAULT_FILTER_OPTIONS=[li.EQUALS,li.GREATER_THAN,li.LESS_THAN,li.NOT_EQUAL,li.IN_RANGE,li.BLANK,li.NOT_BLANK];W2([y("userComponentFactory")],za.prototype,"userComponentFactory",void 0);var Rh=class extends oe{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e)}setSimpleParams(e){this.optionsFactory=new Th,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;let t=this.isTypeEditable(this.lastType);this.setEditable(t)}onParamsUpdated(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){let t=[Mt.IN_RANGE,Mt.EMPTY,Mt.BLANK,Mt.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}};var $x=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ad=class extends Rh{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return za.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Xf(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){super.onParamsUpdated(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams})}setEditable(e){ke(this.eDateWrapper,e),ke(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){if(this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t))return;super.setLastTypeFromModel(e);let i=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(i),i){if(e){let n=e;this.dateComp.setDate(ji(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}onDateChanged(){let e=this.dateComp.getDate(),t=zi(e);this.params.parentFilterInstance(i=>{if(i){let n=ji(t);i.onFloatingFilterChanged(this.getLastType()||null,n)}})}getDateComponentParams(){let e=qn.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:ar(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new _h(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.getDateComponentParams(),{api:t,columnApi:i,context:n}=this.gridOptionsService;e.api=t,e.columnApi=i,e.context=n,this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}};$x([y("userComponentFactory")],Ad.prototype,"userComponentFactory",void 0);$x([Z("eReadOnlyText")],Ad.prototype,"eReadOnlyText",void 0);$x([Z("eDateWrapper")],Ad.prototype,"eDateWrapper",void 0);var U2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qf=class extends oe{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.gridOptionsService.getDocument(),i=this.eDateInput.getInputElement();this.addManagedListener(i,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||i.focus()}),this.addManagedListener(i,"input",n=>{n.target===t.activeElement&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(e){let t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Ni(),t.type=i?"date":"text";let{minValidYear:n,maxValidYear:s,minValidDate:o,maxValidDate:a}=e.filterParams||{};if(o&&n&&Ne(()=>console.warn("AG Grid: DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),"DateFilter.minValidDateAndMinValidYearWarning"),a&&s&&Ne(()=>console.warn("AG Grid: DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),"DateFilter.maxValidDateAndMaxValidYearWarning"),o&&a){let[l,c]=[o,a].map(d=>d instanceof Date?d:ji(d));l&&c&&l.getTime()>c.getTime()&&Ne(()=>console.warn("AG Grid: DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate."),"DateFilter.minValidDateAndMaxValidDateWarning")}o?o instanceof Date?t.min=zl(o):t.min=o:n&&(t.min=`${n}-01-01`),a?a instanceof Date?t.max=zl(a):t.max=a:s&&(t.max=`${s}-12-31`)}onParamsUpdated(e){this.params=e,this.setParams(e)}getDate(){return ji(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(zi(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:xh()||H0()||Ni()&&V0()>=14.1}};U2([Z("eDateInput")],qf.prototype,"eDateInput",void 0);var _r=class extends hr{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=V(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{Ed(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListener(this.eInput,"keydown",t),this.addManagedListener(this.eInput,"paste",i=>{var n;let s=(n=i.clipboardData)===null||n===void 0?void 0:n.getData("text");s&&s.split("").some(o=>!e.test(o))&&i.preventDefault()})}};var ja=class extends _r{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{let e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}let i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,$n(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,$n(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,$n(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(V(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){i=this.adjustPrecision(i);let s=this.normalizeValue(i);n=i!=s}if(n)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}};var Zf=class extends Zl{conditionToString(e,t){let{numberOfInputs:i}=t||{};return e.type==Mt.IN_RANGE||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function X0(r){let{allowedCharPattern:e}=r??{};return e??null}var Ql=class r extends li{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}mapValuesFromModel(e){let{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new Zf(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return r.DEFAULT_FILTER_OPTIONS}setElementValue(e,t,i){let n=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,n)}createValueElement(){let e=X0(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),ut(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){let s=this.createManagedBean(n?new _r({allowedCharPattern:n}):new ja);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=Br(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}};Ql.DEFAULT_FILTER_OPTIONS=[li.EQUALS,li.NOT_EQUAL,li.LESS_THAN,li.LESS_THAN_OR_EQUAL,li.GREATER_THAN,li.GREATER_THAN_OR_EQUAL,li.IN_RANGE,li.BLANK,li.NOT_BLANK];var Qf=class extends Zl{conditionToString(e,t){let{numberOfInputs:i}=t||{};return e.type==Mt.IN_RANGE||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}},Ki=class r extends Mt{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){let t=e&&e.trim();return t===""?e:t}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?r.DEFAULT_FORMATTER:r.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new Qf(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(Pe.doOnce(()=>console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead."),"textCustomComparator.deprecated"),({filterOption:t,value:i,filterText:n})=>e(t,i,n)):this.textFilterParams.textMatcher||r.DEFAULT_MATCHER}createCondition(e){let t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let i=[];return this.forEachPositionInput(e,(n,s,o,a)=>{var l;if(s<a){let c=Br(n.getValue());t&&this.textFilterParams.trimInput&&(c=(l=r.trimInput(c))!==null&&l!==void 0?l:null,n.setValue(c,!0)),i.push(c)}}),i}getDefaultFilterOptions(){return r.DEFAULT_FILTER_OPTIONS}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),ut(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){let n=this.createManagedBean(new _r);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){let t=[Mt.NOT_EQUAL,Mt.NOT_CONTAINS,Mt.BLANK];return e?t.indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,n){let s=e.map(f=>this.formatter(f))||[],o=this.formatter(t),{api:a,colDef:l,column:c,columnApi:d,context:u,textFormatter:h}=this.textFilterParams;if(i.type===Mt.BLANK)return this.isBlank(t);if(i.type===Mt.NOT_BLANK)return!this.isBlank(t);let p={api:a,colDef:l,column:c,columnApi:d,context:u,node:n.node,data:n.data,filterOption:i.type,value:o,textFormatter:h};return s.some(f=>this.matcher(Object.assign(Object.assign({},p),{filterText:f})))}getModelAsString(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""}};Ki.DEFAULT_FILTER_OPTIONS=[Mt.CONTAINS,Mt.NOT_CONTAINS,Mt.EQUALS,Mt.NOT_EQUAL,Mt.STARTS_WITH,Mt.ENDS_WITH,Mt.BLANK,Mt.NOT_BLANK];Ki.DEFAULT_FORMATTER=r=>r;Ki.DEFAULT_LOWERCASE_FORMATTER=r=>r==null?null:r.toString().toLowerCase();Ki.DEFAULT_MATCHER=({filterOption:r,value:e,filterText:t})=>{if(t==null)return!1;switch(r){case Ki.CONTAINS:return e.indexOf(t)>=0;case Ki.NOT_CONTAINS:return e.indexOf(t)<0;case Ki.EQUALS:return e===t;case Ki.NOT_EQUAL:return e!=t;case Ki.STARTS_WITH:return e.indexOf(t)===0;case Ki.ENDS_WITH:let i=e.lastIndexOf(t);return i>=0&&i===e.length-t.length;default:return!1}};var Yx=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ah=class extends L{constructor(e){super(),this.params=e,this.valueChangedListener=()=>{}}setupGui(e){var t;this.eFloatingFilterTextInput=this.createManagedBean(new _r((t=this.params)===null||t===void 0?void 0:t.config));let i=this.eFloatingFilterTextInput.getGui();e.appendChild(i),this.addManagedListener(i,"input",n=>this.valueChangedListener(n)),this.addManagedListener(i,"keydown",n=>this.valueChangedListener(n))}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},Ka=class extends Rh{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;let i=(t=e.browserAutoComplete)!==null&&t!==void 0?t:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=qn.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){let n=qn.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),s=ar(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(s)}}onParamsUpdated(e){super.onParamsUpdated(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();$t(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}getAriaLabel(e){let t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}syncUpWithParentFilter(e){let t=e.key===B.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Ki.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(n=>{n&&n.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}};Yx([y("columnModel")],Ka.prototype,"columnModel",void 0);Yx([Z("eFloatingFilterInputContainer")],Ka.prototype,"eFloatingFilterInputContainer",void 0);Yx([G],Ka.prototype,"postConstruct",null);var Xx=class extends L{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new ja),this.eFloatingFilterTextInput=this.createManagedBean(new _r),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,n=>this.valueChangedListener(n)),this.setupListeners(i,n=>this.valueChangedListener(n))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},q0=class extends Ka{init(e){var t;super.init(e),this.filterModelFormatter=new Zf(this.localeService,this.optionsFactory,(t=e.filterParams)===null||t===void 0?void 0:t.numberFormatter)}onParamsUpdated(e){X0(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.onParamsUpdated(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Ql.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=X0(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Ah({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Xx)}};var Jf=class extends Ka{init(e){super.init(e),this.filterModelFormatter=new Qf(this.localeService,this.optionsFactory)}onParamsUpdated(e){super.onParamsUpdated(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Ki.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new Ah)}};var $i=(()=>{class r{constructor(t,i=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new Li,this.eElement=t,this.preventMouseClick=i;let n=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",o,{passive:!1})})}getActiveTouch(t){for(let i=0;i<t.length;i++)if(t[i].identifier===this.touchStart.identifier)return t[i];return null}addEventListener(t,i){this.eventService.addEventListener(t,i)}removeEventListener(t,i){this.eventService.removeEventListener(t,i)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;let i=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===i;if(this.touching&&n&&!this.moved){this.moved=!0;let s={type:r.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:t};this.eventService.dispatchEvent(s)}},500)}onTouchMove(t){if(!this.touching)return;let i=this.getActiveTouch(t.touches);if(!i)return;!zf(i,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){if(this.touching){if(!this.moved){let i={type:r.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}}checkForDoubleTap(){let t=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(t-this.lastTapTime>r.DOUBLE_TAP_MILLIS){let n={type:r.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=t;else this.lastTapTime=t}destroy(){this.destroyFuncs.forEach(t=>t())}}return r.EVENT_TAP="tap",r.EVENT_DOUBLE_TAP="doubleTap",r.EVENT_LONG_TAP="longTap",r.DOUBLE_TAP_MILLIS=500,r})();var Dd=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Tr=class r extends oe{constructor(e){super(),e||this.setTemplate(r.TEMPLATE)}attachCustomElements(e,t,i,n,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=s}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),this.column.getColDef().sortable&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,t,i){if(t==null)return;let n=gt(e,this.gridOptionsService,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";ke(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";ke(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon"),i=e==null;ke(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";ke(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;let t=this.sortController.getColumnsWithSortingOrdered(),i=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!==null&&e!==void 0?e:-1,n=t.some(o=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(o))!==null&&a!==void 0?a:-1>=1}),s=i>=0&&n;ke(this.eSortOrder,s,{skipAriaHidden:!0}),i>=0?this.eSortOrder.innerHTML=(i+1).toString():$t(this.eSortOrder)}};Tr.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;Dd([Z("eSortOrder")],Tr.prototype,"eSortOrder",void 0);Dd([Z("eSortAsc")],Tr.prototype,"eSortAsc",void 0);Dd([Z("eSortDesc")],Tr.prototype,"eSortDesc",void 0);Dd([Z("eSortMixed")],Tr.prototype,"eSortMixed",void 0);Dd([Z("eSortNone")],Tr.prototype,"eSortNone",void 0);Dd([y("columnModel")],Tr.prototype,"columnModel",void 0);Dd([y("sortController")],Tr.prototype,"sortController",void 0);var Zn=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pr=class r extends oe{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=Oy(this.params.template,r.TEMPLATE);return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=Et(this.currentDisplayName);this.eText&&(this.eText.innerHTML=t)}}setupIcons(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)}addInIcon(e,t,i){if(t==null)return;let n=gt(e,this.gridOptionsService,i);n&&t.appendChild(n)}setupTap(){let{gridOptionsService:e}=this;if(e.is("suppressTouch"))return;let t=new $i(this.getGui(),!0),i=e.is("suppressMenuHide"),n=i&&V(this.eMenu),s=n?new $i(this.eMenu,!0):t;if(this.params.enableMenu){let o=n?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>{e.api.showColumnMenuAfterMouseClick(this.params.column,l.touchStart)};this.addManagedListener(s,$i[o],a)}if(this.params.enableSorting){let o=a=>{let l=a.touchStart.target;i&&this.eMenu.contains(l)||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(t,$i.EVENT_TAP,o)}this.addDestroyFunc(()=>t.destroy()),n&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){let e=!this.gridOptionsService.is("suppressMenuHide"),t=tn()&&e;return this.params.enableMenu&&!t}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){bs(this.eMenu);return}let e=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",()=>this.showMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",e)}showMenu(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new Tr(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;let e=this.gridOptionsService.get("multiSortKey")==="ctrl";this.addManagedListener(this.params.column,Oe.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",i=>{let n=this.params.column.isMoving(),o=new Date().getTime()-this.lastMovingChanged<50;if(!(n||o)){let l=e?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(l)}});let t=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){let i=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),s=!i?.every(o=>this.params.column.getSort()==o.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,t),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}setupFilterIcon(){this.eFilter&&(this.addManagedListener(this.params.column,Oe.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())}onFilterChanged(){let e=this.params.column.isFilterActive();ke(this.eFilter,e,{skipAriaHidden:!0})}};pr.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;Zn([y("sortController")],pr.prototype,"sortController",void 0);Zn([y("menuFactory")],pr.prototype,"menuFactory",void 0);Zn([y("columnModel")],pr.prototype,"columnModel",void 0);Zn([Z("eFilter")],pr.prototype,"eFilter",void 0);Zn([Z("eSortIndicator")],pr.prototype,"eSortIndicator",void 0);Zn([Z("eMenu")],pr.prototype,"eMenu",void 0);Zn([Z("eLabel")],pr.prototype,"eLabel",void 0);Zn([Z("eText")],pr.prototype,"eText",void 0);Zn([Z("eSortOrder")],pr.prototype,"eSortOrder",void 0);Zn([Z("eSortAsc")],pr.prototype,"eSortAsc",void 0);Zn([Z("eSortDesc")],pr.prototype,"eSortDesc",void 0);Zn([Z("eSortMixed")],pr.prototype,"eSortMixed",void 0);Zn([Z("eSortNone")],pr.prototype,"eSortNone",void 0);var qx=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jl=class r extends oe{constructor(){super(r.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){if(this.params.template){let t="AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";Ne(()=>console.warn(t),"HeaderGroupComp.templateNotSupported")}}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");let e=n=>{if(dr(n))return;let s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);let t=n=>{wr(n)};this.addManagedListener(this.eCloseIcon,"dblclick",t),this.addManagedListener(this.eOpenIcon,"dblclick",t),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();let i=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(i,bt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(i,bt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,t){let i=new $i(e,!0);this.addManagedListener(i,$i.EVENT_TAP,t),this.addDestroyFunc(()=>i.destroy()),this.addManagedListener(e,"click",t)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();ke(this.eOpenIcon,t),ke(this.eCloseIcon,!t)}else ke(this.eOpenIcon,!1),ke(this.eCloseIcon,!1)}addInIcon(e,t){let i=gt(e,this.gridOptionsService,null);i&&this.getRefElement(t).appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){ke(this.eOpenIcon,!1),ke(this.eCloseIcon,!1);return}}setupLabel(){var e;let{displayName:t,columnGroup:i}=this.params;if(V(t)){let n=Et(t);this.getRefElement("agLabel").innerHTML=n}this.addOrRemoveCssClass("ag-sticky-label",!(!((e=i.getColGroupDef())===null||e===void 0)&&e.suppressStickyLabel))}};Jl.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;qx([y("columnModel")],Jl.prototype,"columnModel",void 0);qx([Z("agOpened")],Jl.prototype,"eOpenIcon",void 0);qx([Z("agClosed")],Jl.prototype,"eCloseIcon",void 0);var Rr=class extends oe{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}};var z2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Od=class r extends Rr{constructor(){super(r.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),V(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===B.LEFT||t===B.UP||t===B.RIGHT||t===B.DOWN||e.shiftKey&&t===B.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!V(e)&&!V(this.params.value)?this.params.value:this.params.parseValue(e)}};Od.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;z2([Z("eTextArea")],Od.prototype,"eTextArea",void 0);var r_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Fd=class extends Rr{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueFormatterService:i,gridOptionsService:n}=this,{values:s,value:o,eventKey:a}=e;if(Ce(s)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=a!=null?a===B.ENTER:!1;let l=!1;s.forEach(h=>{let p={value:h},f=i.formatValue(e.column,null,h),g=f!=null;p.text=g?f:h,t.addOption(p),l=l||o===h}),l?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:c,valueListMaxWidth:d,valueListMaxHeight:u}=e;c!=null&&t.setPickerGap(c),u!=null&&t.setPickerMaxHeight(u),d!=null&&t.setPickerMaxWidth(d),n.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,Td.EVENT_ITEM_SELECTED,()=>e.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};r_([y("valueFormatterService")],Fd.prototype,"valueFormatterService",void 0);r_([Z("eSelect")],Fd.prototype,"eSelect",void 0);var j2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},to=class extends Rr{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`),this.cellEditorInput=e}init(e){this.params=e;let t=this.eInput;this.cellEditorInput.init(t,e);let i;if(e.cellStartedEdit){this.focusAfterAttached=!0;let n=e.eventKey;n===B.BACKSPACE||e.eventKey===B.DELETE?i="":n&&n.length===1?i=n:(i=this.cellEditorInput.getStartValue(),n!==B.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&t.setStartValue(i),this.addManagedListener(t.getGui(),"keydown",n=>{let{key:s}=n;(s===B.PAGE_UP||s===B.PAGE_DOWN)&&n.preventDefault()})}afterGuiAttached(){var e,t;let i=this.localeService.getLocaleTextFunc(),n=this.eInput;if(n.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Ni()||n.getFocusableElement().focus();let s=n.getInputElement();this.highlightAllOnFocus?s.select():(t=(e=this.cellEditorInput).setCaret)===null||t===void 0||t.call(e)}focusIn(){let e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};j2([Z("eInput")],to.prototype,"eInput",void 0);var Zx=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!V(e)&&!V(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=V(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},Dh=class extends to{constructor(){super(new Zx)}};var K2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$2="\u2191",Y2="\u2193",Pd=class r extends oe{constructor(){super(r.TEMPLATE),this.refreshCount=0}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)}showDelta(e,t){let i=Math.abs(t),n=e.formatValue(i),s=V(n)?n:i,o=t>=0;o?this.eDelta.innerHTML=$2+s:this.eDelta.innerHTML=Y2+s,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),$t(this.eDelta)}refresh(e){let t=e.value;if(t===this.lastValue||(V(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:V(e.value)?this.eValue.innerHTML=t:$t(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof t=="number"&&typeof this.lastValue=="number"){let i=t-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=t,!0}};Pd.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>';K2([y("filterManager")],Pd.prototype,"filterManager",void 0);var X2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Id=class r extends oe{constructor(){super(r.TEMPLATE),this.refreshCount=0,this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=Yt('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)}refresh(e){let t=e.value;return Ce(t)&&(t=""),t===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(this.addSlideAnimation(),this.lastValue=t,V(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:V(e.value)?this.eCurrent.innerHTML=t:$t(this.eCurrent),!0)}};Id.TEMPLATE=`<span>
            <span class="ag-value-slide-current"></span>
        </span>`;X2([y("filterManager")],Id.prototype,"filterManager",void 0);var Ge=(()=>{class r{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=r.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){let n=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let s=this.createDataChangedEvent(t,n,i);this.dispatchLocalEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,n){return{type:r.EVENT_DATA_CHANGED,node:this,oldData:i,newData:t,update:n}}createLocalRowEvent(t){return{type:t,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new r(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){let n=V(this.id)?this.createDaemonNode():null,s=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,n);let o=this.createDataChangedEvent(t,s,!1);this.dispatchLocalEvent(o)}checkRowSelectable(){let t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t){if(this.selectable!==t&&(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_SELECTABLE_CHANGED)),this.beans.gridOptionsService.is("groupSelectsChildren"))){let n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"})}}setId(t){let i=this.beans.gridOptionsService.getCallback("getRowId");if(i)if(this.data){let n=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(r.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${r.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){let i=[],n=this;for(t&&(n=n.parent);n&&n.level>=0;)i.push(n.key),n=n.parent;return i.reverse(),i}isPixelInRange(t){return!V(this.rowTop)||!V(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_TOP_CHANGED)),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DISPLAYED_CHANGED)))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DRAGGING_CHANGED)))}setHighlighted(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HIGHLIGHT_CHANGED)))}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_MASTER_CHANGED)))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_GROUP_CHANGED)))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=ar(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,i=!0,n=0,s=this.__autoHeights;if(s==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(l=>{let c=s[l.getId()];if(c==null)if(this.beans.columnModel.isColSpanActive()){let d=[];switch(l.getPinned()){case"left":d=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":d=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:d=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(d.includes(l)){t=!0;return}c=-1}else{t=!0;return}else i=!1;c>n&&(n=c)}),t)||((i||n<10)&&(n=this.beans.gridOptionsService.getRowHeightForNode(this).height),n==this.rowHeight))return;this.setRowHeight(n);let a=this.beans.rowModel;a.onRowHeightChangedDebounced&&a.onRowHeightChangedDebounced()}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_UI_LEVEL_CHANGED)))}setExpanded(t,i){if(this.expanded===t)return;this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_EXPANDED_CHANGED));let n=Object.assign({},this.createGlobalRowEvent(w.EVENT_ROW_GROUP_OPENED),{expanded:t,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(n),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return{type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}}dispatchLocalEvent(t){this.eventService&&this.eventService.dispatchEvent(t)}setDataValue(t,i,n){let o=(()=>{var c;return typeof t!="string"?t:(c=this.beans.columnModel.getGridColumn(t))!==null&&c!==void 0?c:this.beans.columnModel.getPrimaryColumn(t)})(),a=this.getValueFromValueService(o);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(o,a,i,n),!1;let l=this.beans.valueService.setValue(this,o,i,n);return this.dispatchCellChangedEvent(o,i,a),this.checkRowSelectable(),l}getValueFromValueService(t){let i=this.leafGroup&&this.beans.columnModel.isPivotMode(),n=this.group&&this.expanded&&!this.footer&&!i,o=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),a=this.beans.gridOptionsService.is("groupSuppressBlankHeader"),l=n&&o&&!a;return this.beans.valueService.getValue(t,this,!1,l)}dispatchEventForSaveValueReadOnly(t,i,n,s){let o={type:w.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:i,newValue:n,value:n,source:s};this.beans.eventService.dispatchEvent(o)}setGroupValue(t,i){let n=this.beans.columnModel.getGridColumn(t);Ce(this.groupData)&&(this.groupData={});let s=n.getColId(),o=this.groupData[s];o!==i&&(this.groupData[s]=i,this.dispatchCellChangedEvent(n,i,o))}setAggData(t){let i=Sy([this.aggData,t]),n=this.aggData;this.aggData=t,this.eventService&&i.forEach(s=>{let o=this.aggData?this.aggData[s]:void 0,a=n?n[s]:void 0;if(o===a)return;let l=this.beans.columnModel.lookupGridColumn(s);l&&this.dispatchCellChangedEvent(l,o,a)})}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){let n=this.beans.gridOptionsService.is("treeData"),s=this.beans.gridOptionsService.get("isServerSideGroup");t=!this.stub&&!this.footer&&(n?!!s&&s(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&sr(this.childrenAfterGroup)}dispatchCellChangedEvent(t,i,n){let s={type:r.EVENT_CELL_CHANGED,node:this,column:t,newValue:i,oldValue:n};this.dispatchLocalEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!!(this.hasChildren()&&!this.footer||this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var t;let i=!1,n=!1,s=!1;if(!(!((t=this.childrenAfterGroup)===null||t===void 0)&&t.length))return this.selectable?this.selected:null;for(let o=0;o<this.childrenAfterGroup.length;o++){let a=this.childrenAfterGroup[o],l=a.isSelected();if(!a.selectable){let c=a.calculateSelectedFromChildren();if(c===null)continue;l=c}switch(l){case!0:i=!0;break;case!1:n=!0;break;default:s=!0;break}}if(!(s||i&&n))return i?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}selectThisNode(t,i,n="api"){let s=!this.selectable&&t,o=this.selected===t;if(s||o)return!1;if(this.selected=t,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_ROW_SELECTED));let l=this.sibling;l&&l.footer&&l.dispatchLocalEvent(l.createLocalRowEvent(r.EVENT_ROW_SELECTED))}let a=Object.assign(Object.assign({},this.createGlobalRowEvent(w.EVENT_ROW_SELECTED)),{event:i||null,source:n});return this.beans.eventService.dispatchEvent(a),!0}setSelected(t,i=!1,n="api"){if(typeof n=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:n})}setSelectedParams(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Object.assign(Object.assign({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let i=this.parent;for(;i;){if(i===t)return!0;i=i.parent}return!1}addEventListener(t,i){this.eventService||(this.eventService=new Li),this.eventService.addEventListener(t,i)}removeEventListener(t,i){this.eventService&&(this.eventService.removeEventListener(t,i),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(t){let i=this,n=!0,s=!1,o=null;for(;n&&!s;){let a=i.parent;V(a)&&i.firstChild?a.rowGroupColumn===t&&(s=!0,o=a):n=!1,i=a}return s?o:null}isFullWidthCell(){if(this.detail)return!0;let t=this.beans.gridOptionsService.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;let t=[],i=this;for(;i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new Set(["eventService","__objectId","sticky"]),i=new r(this.beans);Object.keys(this).forEach(n=>{t.has(n)||(i[n]=this[n])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}}return r.ID_PREFIX_ROW_GROUP="row-group-",r.ID_PREFIX_TOP_PINNED="t-",r.ID_PREFIX_BOTTOM_PINNED="b-",r.OBJECT_ID_SEQUENCE=0,r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_DATA_CHANGED="dataChanged",r.EVENT_CELL_CHANGED="cellChanged",r.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",r.EVENT_MASTER_CHANGED="masterChanged",r.EVENT_GROUP_CHANGED="groupChanged",r.EVENT_MOUSE_ENTER="mouseEnter",r.EVENT_MOUSE_LEAVE="mouseLeave",r.EVENT_HEIGHT_CHANGED="heightChanged",r.EVENT_TOP_CHANGED="topChanged",r.EVENT_DISPLAYED_CHANGED="displayedChanged",r.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",r.EVENT_LAST_CHILD_CHANGED="lastChildChanged",r.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",r.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",r.EVENT_SELECTABLE_CHANGED="selectableChanged",r.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",r.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",r.EVENT_DRAGGING_CHANGED="draggingChanged",r})();var n_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$a=class extends oe{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0),Zy(this.eCheckbox.getInputElement(),"polite")}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=xd(e,t),n=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",n=>{wr(n)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",n=>{wr(n);let s=this.gridOptionsService.is("groupSelectsFiltered"),o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,s)?this.onClicked(!0,s,n||{})===0&&this.onClicked(!1,s,n):o?this.onClicked(!1,s,n):this.onClicked(!0,s,n||{})}),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let n=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,n),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,n),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,n),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gridOptionsService.isRowModelType("clientSide")}showOrHideSelect(){var e,t,i,n;let s=this.rowNode.selectable,o=this.getIsVisible();if(s)if(typeof o=="function"){let l=(e=this.overrides)===null||e===void 0?void 0:e.callbackParams,c=(t=this.column)===null||t===void 0?void 0:t.createColumnFunctionCallbackParams(this.rowNode);s=c?o(Object.assign(Object.assign({},l),c)):!1}else s=o??!1;if((i=this.column)===null||i===void 0?void 0:i.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if(!((n=this.overrides)===null||n===void 0)&&n.removeHidden){this.setDisplayed(s);return}this.setVisible(s)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:(t=(e=this.column)===null||e===void 0?void 0:e.getColDef())===null||t===void 0?void 0:t.checkboxSelection}};n_([Z("eCheckbox")],$a.prototype,"eCheckbox",void 0);n_([G],$a.prototype,"postConstruct",null);var Ld=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Qn,yi=function(r){return r[r.ToolPanel=0]="ToolPanel",r[r.HeaderCell=1]="HeaderCell",r[r.RowDrag=2]="RowDrag",r[r.ChartPanel=3]="ChartPanel",r[r.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",r}(yi||{}),Md=function(r){return r[r.Up=0]="Up",r[r.Down=1]="Down",r}(Md||{}),io=function(r){return r[r.Left=0]="Left",r[r.Right=1]="Right",r}(io||{}),qe=Qn=class extends L{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=wn("columnMovePin",this.gridOptionsService,null),this.eHideIcon=wn("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=wn("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=wn("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=wn("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=wn("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=wn("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=wn("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=wn("dropNotAllowed",this.gridOptionsService,null)}addDragSource(e,t=!1){let i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}removeDragSource(e){let t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),lr(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,t){var i,n,s,o;let a=this.getHorizontalDirection(e),l=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);let c=this.dropTargets.filter(u=>this.isMouseOnDropTarget(e,u)),d=this.findCurrentDropTarget(e,c);if(d!==this.lastDropTarget)this.leaveLastTargetIfExists(e,a,l,t),this.lastDropTarget!==null&&d===null&&((n=(i=this.dragSource).onGridExit)===null||n===void 0||n.call(i,this.dragItem)),this.lastDropTarget===null&&d!==null&&((o=(s=this.dragSource).onGridEnter)===null||o===void 0||o.call(s,this.dragItem)),this.enterDragTargetIfExists(d,e,a,l,t),this.lastDropTarget=d;else if(d&&d.onDragging){let u=this.createDropTargetEvent(d,e,a,l,t);d.onDragging(u)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(let i of t){let n=i.getBoundingClientRect();if(n.width===0||n.height===0)return!1;let s=e.clientX>=n.left&&e.clientX<n.right,o=e.clientY>=n.top&&e.clientY<n.bottom;if(!s||!o)return!1}return!0}isMouseOnDropTarget(e,t){let i=this.getAllContainersFromDropTarget(t),n=!1;for(let s of i)if(this.allContainersIntersect(e,s)){n=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:n&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){let i=t.length;if(i===0)return null;if(i===1)return t[0];let s=this.gridOptionsService.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(let o of s)for(let a of t)if(Iy(this.getAllContainersFromDropTarget(a)).indexOf(o)!==-1)return a;return null}enterDragTargetIfExists(e,t,i,n,s){if(e){if(e.onDragEnter){let o=this.createDropTargetEvent(e,t,i,n,s);e.onDragEnter(o)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,i,n){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let s=this.createDropTargetEvent(this.lastDropTarget,e,t,i,n);this.lastDropTarget.onDragLeave(s)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?io.Left:io.Right}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?Md.Up:Md.Down}createDropTargetEvent(e,t,i,n,s){let o=e.getContainer(),a=o.getBoundingClientRect(),{gridApi:l,columnApi:c,dragItem:d,dragSource:u}=this,h=t.clientX-a.left,p=t.clientY-a.top;return{event:t,x:h,y:p,vDirection:n,hDirection:i,dragSource:u,fromNudge:s,dragItem:d,api:l,columnApi:c,dropZoneTarget:o}}positionGhost(e){let t=this.eGhost;if(!t)return;let n=t.getBoundingClientRect().height,s=vx()-2,o=Cx()-2,a=Gf(t.offsetParent),{clientY:l,clientX:c}=e,d=l-a.top-n/2,u=c-a.left-10,h=this.gridOptionsService.getDocument(),p=h.defaultView||window,f=p.pageYOffset||h.documentElement.scrollTop,g=p.pageXOffset||h.documentElement.scrollLeft;s>0&&u+t.clientWidth>s+g&&(u=s+g-t.clientWidth),u<0&&(u=0),o>0&&d+t.clientHeight>o+f&&(d=o+f-t.clientHeight),d<0&&(d=0),t.style.left=`${u}px`,t.style.top=`${d}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Yt(Qn.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);let{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let t=this.eGhost.querySelector(".ag-dnd-ghost-label"),i=this.dragSource.dragItemName;md(i)&&(i=i()),t.innerHTML=Et(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let n=this.gridOptionsService.getDocument(),s=null;try{s=n.fullscreenElement}catch{}finally{if(!s){let o=this.gridOptionsService.getRootNode(),a=o.querySelector("body");a?s=a:o instanceof ShadowRoot?s=o:s=o?.documentElement}}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){$t(this.eGhostIcon);let i=null;switch(e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():Qn.ICON_NOT_ALLOWED),e){case Qn.ICON_PINNED:i=this.ePinnedIcon;break;case Qn.ICON_MOVE:i=this.eMoveIcon;break;case Qn.ICON_LEFT:i=this.eLeftIcon;break;case Qn.ICON_RIGHT:i=this.eRightIcon;break;case Qn.ICON_GROUP:i=this.eGroupIcon;break;case Qn.ICON_AGGREGATE:i=this.eAggregateIcon;break;case Qn.ICON_PIVOT:i=this.ePivotIcon;break;case Qn.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case Qn.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.eHideIcon&&this.gridOptionsService.is("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};qe.ICON_PINNED="pinned";qe.ICON_MOVE="move";qe.ICON_LEFT="left";qe.ICON_RIGHT="right";qe.ICON_GROUP="group";qe.ICON_AGGREGATE="aggregate";qe.ICON_PIVOT="pivot";qe.ICON_NOT_ALLOWED="notAllowed";qe.ICON_HIDE="hide";qe.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;Ld([y("dragService")],qe.prototype,"dragService",void 0);Ld([y("mouseEventService")],qe.prototype,"mouseEventService",void 0);Ld([y("columnApi")],qe.prototype,"columnApi",void 0);Ld([y("gridApi")],qe.prototype,"gridApi",void 0);Ld([G],qe.prototype,"init",null);Ld([at],qe.prototype,"clearDragSourceParamsList",null);qe=Qn=Ld([Y("dragAndDropService")],qe);var eg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},_s=class extends oe{constructor(e,t,i,n,s,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=s,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(gt("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gridOptionsService.is("rowDragManaged")?new J0(this,this.beans,this.rowNode,this.column):new Q0(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gridOptionsService.is("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gridOptionsService.is("rowDragManaged");this.gridOptionsService.is("treeData")&&e&&Ne(()=>console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true"),"RowDragComp.managedAndTreeData")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gridOptionsService.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getRowDragText(this.column),i=this.localeService.getLocaleTextFunc();this.dragSource={type:yi.RowDrag,eElement:this.getGui(),dragItemName:()=>{var n;let s=this.getDragItem(),o=((n=s.rowNodes)===null||n===void 0?void 0:n.length)||1;return t?t(s,o):o===1?this.cellValueFn():`${o} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};eg([y("beans")],_s.prototype,"beans",void 0);eg([G],_s.prototype,"postConstruct",null);eg([at],_s.prototype,"removeDragSource",null);var Z0=class extends L{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,n=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=md(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},Q0=class extends Z0{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(e)}};eg([G],Q0.prototype,"postConstruct",null);var J0=class extends Z0{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,w.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),n=this.gridOptionsService.is("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),o=i&&!s||n;this.setDisplayedOrVisible(o)}};eg([G],J0.prototype,"postConstruct",null);var tg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Yo=class extends L{init(e,t,i,n,s,o,a){this.params=a,this.eGui=t,this.eCheckbox=i,this.eExpanded=n,this.eContracted=s,this.comp=e,this.compClass=o;let{node:l,value:c,colDef:d}=a;if(!this.isTopLevelFooter()){if(this.isEmbeddedRowMismatch())return;let p=d?.showRowGroup===!0,f=c==null&&!l.master;if(!p&&f)return;if(l.footer&&this.gridOptionsService.is("groupHideOpenParents")){let g=d&&d.showRowGroup,m=l.rowGroupColumn&&l.rowGroupColumn.getColId();if(g!==m)return}}this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){let{node:e,eParentOfValue:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){Jy(t);return}let i=()=>{Wr(t,!!e.expanded)};this.expandListener=this.addManagedListener(e,Ge.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gridOptionsService.is("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;let e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;let i=this.columnModel.getRowGroupColumns();return!i||i.length===0?!0:i[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;let e=this.params.pinned==="left",t=this.params.pinned==="right",i=!e&&!t;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!t:!i:this.columnModel.isPinningLeft()?!e:!i}findDisplayedGroupNode(){let e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let i=t.parent;for(;i!=null;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}Ce(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){let e=this.params.node,t=this.params.column;if(!this.gridOptionsService.is("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}if(e.rowGroupColumn!=null){let s=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(s)){this.showingValueForOpenedParent=!1;return}}let n=e.groupData[t.getId()]!=null;this.showingValueForOpenedParent=n}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){let e=this.adjustParamsWithDetailsFromRelatedColumn(),t=this.getInnerCompDetails(e),{valueFormatted:i,value:n}=e,s=i;s==null&&(n===""&&this.params.node.group?s=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):s=n??null),this.comp.setInnerRenderer(t,s)}adjustParamsWithDetailsFromRelatedColumn(){let e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(t!=null&&!t.isRowGroupDisplayed(e.getId()))return this.params;let n=this.params,{value:s,node:o}=this.params,a=this.valueFormatterService.formatValue(e,o,s);return Object.assign(Object.assign({},n),{valueFormatted:a})}addFooterValue(){let e=this.params.footerValueGetter,t="";if(e){let n=Cf(this.params);n.value=this.params.value,typeof e=="function"?t=e(n):typeof e=="string"?t=this.expressionService.evaluate(e,n):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t="Total "+(this.params.value!=null?this.params.value:"");let i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);let t=this.userComponentFactory.getInnerRendererDetails(e,e),i=a=>a&&a.componentClass==this.compClass;if(t&&!i(t))return t;let n=this.displayedGroupNode.rowGroupColumn,s=n?n.getColDef():void 0;if(!s)return;let o=this.userComponentFactory.getCellRendererDetails(s,e);if(o&&!i(o))return o;if(i(o)&&s.cellRendererParams&&s.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(s.cellRendererParams,e)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){let e=this.displayedGroupNode.allChildrenCount,n=this.isShowRowGroupForThisRow()&&e!=null&&e>=0?`(${e})`:"";this.comp.setChildCount(n)}isShowRowGroupForThisRow(){if(this.gridOptionsService.is("treeData"))return!0;let e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;let t=this.params.column;return t==null||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;let t=this.params,i=gt("groupExpanded",this.gridOptionsService,null),n=gt("groupContracted",this.gridOptionsService,null);i&&this.eExpanded.appendChild(i),n&&this.eContracted.appendChild(n);let s=t.eGridCell;!(((e=this.params.column)===null||e===void 0?void 0:e.isCellEditable(t.node))&&this.gridOptionsService.is("enableGroupEdit"))&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(s,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(s,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,Ge.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();let a=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,a),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_MASTER_CHANGED,a),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_GROUP_CHANGED,a),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_HAS_CHILDREN_CHANGED,a)}onExpandClicked(e){dr(e)||(wr(e),this.onExpandOrContract(e))}onExpandOrContract(e){let t=this.displayedGroupNode,i=!t.expanded;!i&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(i,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;let e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;let n=this.params.column;return n!=null&&typeof n.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){let{params:e,displayedGroupNode:t,columnModel:i}=this,{node:n}=e,s=this.isExpandable();if(s){let d=this.showingValueForOpenedParent?!0:n.expanded;this.comp.setExpandedDisplayed(d),this.comp.setContractedDisplayed(!d)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);let o=i.isPivotMode(),a=o&&t.leafGroup,l=s&&!a,c=n.footer&&n.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",l),this.comp.addOrRemoveCssClass("ag-row-group",l),o?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",a):c||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!l)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){let e=this.params.node;this.params.suppressPadding||(this.addManagedListener(e,Ge.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gridOptionsService.is("groupHideOpenParents"))return;let e=this.params,t=e.node,i=!!e.colDef,n=this.gridOptionsService.is("treeData"),o=!i||n||e.colDef.showRowGroup===!0?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+o,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;let e=new _s(()=>this.params.value,this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){let e=this.params.checkbox;return typeof e=="function"||e===!0}addCheckboxIfNeeded(){let e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){let i=new $a;this.getContext().createBean(i),i.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(t)}onKeyDown(e){!(e.key===B.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(dr(e))return;mh(this.eExpanded,e)||mh(this.eContracted,e)||this.onExpandOrContract(e)}};tg([y("expressionService")],Yo.prototype,"expressionService",void 0);tg([y("valueFormatterService")],Yo.prototype,"valueFormatterService",void 0);tg([y("columnModel")],Yo.prototype,"columnModel",void 0);tg([y("userComponentFactory")],Yo.prototype,"userComponentFactory",void 0);tg([y("ctrlsService")],Yo.prototype,"ctrlsService",void 0);var ig=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ts=class r extends oe{constructor(){super(r.TEMPLATE)}init(e){let t={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.innerHTML=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>ke(this.eContracted,o),setExpandedDisplayed:o=>ke(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},i=this.createManagedBean(new Yo),n=!e.colDef,s=this.getGui();i.init(t,s,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),n&&ut(s,"gridcell")}setRenderDetails(e,t){if(e){let i=e.newAgStackInstance();if(!i)return;i.then(n=>{if(!n)return;let s=()=>this.context.destroyBean(n);this.isAlive()?(this.eValue.appendChild(n.getGui()),this.addDestroyFunc(s)):s()})}else this.eValue.innerText=t}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};Ts.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;ig([Z("eExpanded")],Ts.prototype,"eExpanded",void 0);ig([Z("eContracted")],Ts.prototype,"eContracted",void 0);ig([Z("eCheckbox")],Ts.prototype,"eCheckbox",void 0);ig([Z("eValue")],Ts.prototype,"eValue",void 0);ig([Z("eChildCount")],Ts.prototype,"eChildCount",void 0);var s_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Nd=class r extends oe{constructor(){super(r.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=gt("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};Nd.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;s_([Z("eLoadingIcon")],Nd.prototype,"eLoadingIcon",void 0);s_([Z("eLoadingText")],Nd.prototype,"eLoadingText",void 0);var o_=(()=>{class r extends oe{constructor(){super()}destroy(){super.destroy()}init(t){var i;let n=(i=this.gridOptionsService.get("overlayLoadingTemplate"))!==null&&i!==void 0?i:r.DEFAULT_LOADING_OVERLAY_TEMPLATE,s=this.localeService.getLocaleTextFunc(),o=n.replace("[LOADING...]",s("loadingOoo","Loading..."));this.setTemplate(o)}}return r.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',r})();var a_=(()=>{class r extends oe{constructor(){super()}destroy(){super.destroy()}init(t){var i;let n=(i=this.gridOptionsService.get("overlayNoRowsTemplate"))!==null&&i!==void 0?i:r.DEFAULT_NO_ROWS_TEMPLATE,s=this.localeService.getLocaleTextFunc(),o=n.replace("[NO_ROWS_TO_SHOW]",s("noRowsToShow","No Rows To Show"));this.setTemplate(o)}}return r.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',r})();var ev=class extends Rr{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().innerHTML=Et(t)}};var Qx=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step),t.showStepperButtons&&e.getInputElement().classList.add("ag-number-field-input-stepper")}getValue(){let e=this.eInput.getValue();if(!V(e)&&!V(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},rg=class extends to{constructor(){super(new Qx)}};var Jx=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!V(e)&&!V(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return zi(e,!1)}},ng=class extends to{constructor(){super(new Jx)}};var q2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},eS=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!V(e)&&!V(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){var e,t;return zi((t=this.parseDate((e=this.params.value)!==null&&e!==void 0?e:void 0))!==null&&t!==void 0?t:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction()(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction()(e)}},Oh=class extends to{constructor(){super(new eS(()=>this.dataTypeService))}};q2([y("dataTypeService")],Oh.prototype,"dataTypeService",void 0);var Z2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},kd=class r extends oe{constructor(){super(r.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.addManagedListener(this.eCheckbox.getInputElement(),"click",i=>{if(wr(i),this.eCheckbox.isDisabled())return;let n=this.eCheckbox.getValue();this.onCheckboxChanged(n)}),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",i=>{wr(i)});let t=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",i=>{if(i.key===B.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===t.activeElement&&this.eCheckbox.toggle();let n=this.eCheckbox.getValue();this.onCheckboxChanged(n),i.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t,i,n;let s,o=!0;if(e.node.group&&e.column){let u=e.column.getColId();u.startsWith(Vl)?s=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[u]!==void 0?s=(t=e.value)!==null&&t!==void 0?t:void 0:o=!1}else s=(i=e.value)!==null&&i!==void 0?i:void 0;if(!o){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(s);let a=e.disabled!=null?e.disabled:!(!((n=e.column)===null||n===void 0)&&n.isCellEditable(e.node));this.eCheckbox.setDisabled(a);let l=this.localeService.getLocaleTextFunc(),c=xd(l,s),d=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;this.eCheckbox.setInputAriaLabel(d)}onCheckboxChanged(e){let{column:t,node:i,rowIndex:n,value:s}=this.params,o={type:w.EVENT_CELL_EDITING_STARTED,column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:n,rowPinned:i.rowPinned,value:s};this.eventService.dispatchEvent(o);let a=this.params.node.setDataValue(this.params.column,e,"edit"),l={type:w.EVENT_CELL_EDITING_STOPPED,column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:n,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:a};this.eventService.dispatchEvent(l)}};kd.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;Z2([Z("eCheckbox")],kd.prototype,"eCheckbox",void 0);var Q2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Fh=class extends Rr{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(e){var t;this.params=e;let i=(t=e.value)!==null&&t!==void 0?t:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,w.EVENT_FIELD_VALUE_CHANGED,n=>this.setAriaLabel(n.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),i=xd(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}};Q2([Z("eCheckbox")],Fh.prototype,"eCheckbox",void 0);var tS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Gd=class extends L{constructor(){super(...arguments),this.agGridDefaults={agDateInput:qf,agColumnHeader:pr,agColumnGroupHeader:Jl,agSortIndicator:Tr,agTextColumnFloatingFilter:Jf,agNumberColumnFloatingFilter:q0,agDateColumnFloatingFilter:Ad,agReadOnlyFloatingFilter:Eh,agAnimateShowChangeCellRenderer:Pd,agAnimateSlideCellRenderer:Id,agGroupCellRenderer:Ts,agGroupRowRenderer:Ts,agLoadingCellRenderer:Nd,agCheckboxCellRenderer:kd,agCellEditor:Dh,agTextCellEditor:Dh,agNumberCellEditor:rg,agDateCellEditor:ng,agDateStringCellEditor:Oh,agSelectCellEditor:Fd,agLargeTextCellEditor:Od,agCheckboxCellEditor:Fh,agTextColumnFilter:Ki,agNumberColumnFilter:Ql,agDateColumnFilter:za,agLoadingOverlay:o_,agNoRowsOverlay:a_,agTooltipComponent:ev},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:he.SetFilterModule,agSetColumnFloatingFilter:he.SetFilterModule,agMultiColumnFilter:he.MultiFilterModule,agMultiColumnFloatingFilter:he.MultiFilterModule,agGroupColumnFilter:he.RowGroupingModule,agGroupColumnFloatingFilter:he.RowGroupingModule,agRichSelect:he.RichSelectModule,agRichSelectCellEditor:he.RichSelectModule,agDetailCellRenderer:he.MasterDetailModule,agSparklineCellRenderer:he.SparklinesModule},this.jsComps={}}init(){this.gridOptions.components!=null&&ft(this.gridOptions.components,(e,t)=>this.registerJsComponent(e,t))}registerDefaultComponent(e,t){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let i=(l,c)=>({componentFromFramework:c,component:l}),n=this.getFrameworkOverrides().frameworkComponent(t,this.gridOptions.components);if(n!=null)return i(n,!0);let s=this.jsComps[t];if(s){let l=this.getFrameworkOverrides().isFrameworkComponent(s);return i(s,l)}let o=this.agGridDefaults[t];if(o)return i(o,!1);let a=this.enterpriseAgDefaultCompsModule[t];return a?De.__assertRegistered(a,`AG Grid '${e}' component: ${t}`,this.context.getGridId()):Ne(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let i=[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],n=Wl(t,i,!0,.8).values;console.warn(`AG Grid: Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),n.length>0&&console.warn(`         Did you mean: [${n.slice(0,3)}]?`),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")}};tS([y("gridOptions")],Gd.prototype,"gridOptions",void 0);tS([G],Gd.prototype,"init",null);Gd=tS([Y("userComponentRegistry")],Gd);var l_={propertyName:"dateComponent",cellRenderer:!1},c_={propertyName:"headerComponent",cellRenderer:!1},d_={propertyName:"headerGroupComponent",cellRenderer:!1},iS={propertyName:"cellRenderer",cellRenderer:!0},u_={propertyName:"cellEditor",cellRenderer:!1},rS={propertyName:"innerRenderer",cellRenderer:!0},h_={propertyName:"loadingOverlayComponent",cellRenderer:!1},p_={propertyName:"noRowsOverlayComponent",cellRenderer:!1},f_={propertyName:"tooltipComponent",cellRenderer:!1},sg={propertyName:"filter",cellRenderer:!1},g_={propertyName:"floatingFilterComponent",cellRenderer:!1},m_={propertyName:"toolPanel",cellRenderer:!1},v_={propertyName:"statusPanel",cellRenderer:!1},C_={propertyName:"fullWidthCellRenderer",cellRenderer:!0},y_={propertyName:"loadingCellRenderer",cellRenderer:!0},x_={propertyName:"groupRowRenderer",cellRenderer:!0},S_={propertyName:"detailCellRenderer",cellRenderer:!0};var nS=(()=>{class r{static getFloatingFilterType(t){return this.filterToFloatingFilterMapping[t]}}return r.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},r})();var Ph=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Xo=class extends L{getHeaderCompDetails(e,t){return this.getCompDetails(e,c_,"agColumnHeader",t)}getHeaderGroupCompDetails(e){let t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,d_,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,C_,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,y_,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,x_,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,S_,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,rS,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,rS,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,iS,null,t)}getCellEditorDetails(e,t){return this.getCompDetails(e,u_,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,sg,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,l_,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,h_,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,p_,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,f_,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,iS,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,g_,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,m_,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,v_,null,t,!0)}getCompDetails(e,t,i,n,s=!1){let{propertyName:o,cellRenderer:a}=t,{compName:l,jsComp:c,fwComp:d,paramsFromSelector:u,popupFromSelector:h,popupPositionFromSelector:p}=this.getCompKeys(e,t,n),f=C=>{let S=this.userComponentRegistry.retrieve(o,C);S&&(c=S.componentFromFramework?void 0:S.component,d=S.componentFromFramework?S.component:void 0)};if(l!=null&&f(l),c==null&&d==null&&i!=null&&f(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!d){s&&console.error(`AG Grid: Could not find component ${l}, did you forget to configure this component?`);return}let g=this.mergeParamsWithApplicationProvidedParams(e,t,n,u),m=c==null,v=c||d;return{componentFromFramework:m,componentClass:v,params:g,type:t,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(v,m,g,t)}}getCompKeys(e,t,i){let{propertyName:n}=t,s,o,a,l,c,d;if(e){let u=e,h=u[n+"Selector"],p=h?h(i):null,f=g=>{typeof g=="string"?s=g:g!=null&&g!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(g)?a=g:o=g)};p?(f(p.component),l=p.params,c=p.popup,d=p.popupPosition):f(u[n])}return{compName:s,jsComp:o,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}newAgStackInstance(e,t,i,n){let s=n.propertyName,o=!t,a;if(o)a=new e;else{let c=this.componentMetadataProvider.retrieve(s);a=this.frameworkComponentWrapper.wrap(e,c.mandatoryMethodList,c.optionalMethodList,n)}let l=this.initComponent(a,i);return l==null?vi.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(e,t,i,n=null){let s={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};or(s,i);let o=e,a=o&&o[t.propertyName+"Params"];if(typeof a=="function"){let l=a(i);or(s,l)}else typeof a=="object"&&or(s,a);return or(s,n),s}initComponent(e,t){if(this.context.createBean(e),e.init!=null)return e.init(t)}getDefaultFloatingFilterType(e,t){if(e==null)return null;let i=null,{compName:n,jsComp:s,fwComp:o}=this.getCompKeys(e,sg);return n?i=nS.getFloatingFilterType(n):s==null&&o==null&&e.filter===!0&&(i=t()),i}};Ph([y("gridOptions")],Xo.prototype,"gridOptions",void 0);Ph([y("agComponentUtils")],Xo.prototype,"agComponentUtils",void 0);Ph([y("componentMetadataProvider")],Xo.prototype,"componentMetadataProvider",void 0);Ph([y("userComponentRegistry")],Xo.prototype,"userComponentRegistry",void 0);Ph([He("frameworkComponentWrapper")],Xo.prototype,"frameworkComponentWrapper",void 0);Xo=Ph([Y("userComponentFactory")],Xo);var og=function(r){return r[r.SINGLE_SHEET=0]="SINGLE_SHEET",r[r.MULTI_SHEET=1]="MULTI_SHEET",r}(og||{});var sS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Bd=class extends L{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){let t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){let n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),lr(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:s}=e;i.addEventListener("mousedown",t);let o=null,a=this.gridOptionsService.is("suppressTouch");n&&!a&&(o=l=>{Nf(l.target)||(l.cancelable&&(l.preventDefault(),s&&l.stopPropagation()),this.onTouchStart(e,l))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!n})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let i=t.touches[0];this.touchLastTime=i,this.touchStart=i;let n=c=>this.onTouchMove(c,e.eElement),s=c=>this.onTouchUp(c,e.eElement),o=c=>{c.cancelable&&c.preventDefault()},a=t.target,l=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:o,options:{passive:!1}},{target:a,type:"touchmove",listener:n,options:{passive:!0}},{target:a,type:"touchend",listener:s,options:{passive:!0}},{target:a,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){let i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let n=c=>this.onMouseMove(c,e.eElement),s=c=>this.onMouseUp(c,e.eElement),o=c=>c.preventDefault(),a=this.gridOptionsService.getRootNode(),l=[{target:a,type:"mousemove",listener:n},{target:a,type:"mouseup",listener:s},{target:a,type:"contextmenu",listener:o}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:i,type:n,listener:s,options:o}=t;i.addEventListener(n,s,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:i,type:n,listener:s,options:o}=t;i.removeEventListener(n,s,o)})})}isEventNearStartEvent(e,t){let{dragStartPixels:i}=this.currentDragParams,n=V(i)?i:4;return zf(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;let n={type:w.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(n),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){let i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gridOptionsService.is("enableCellTextSelection"),i=Ni(),n=e.type==="mousemove";return(t&&n||i)&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){let t=e.target,i=t?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);let i={type:w.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};sS([y("mouseEventService")],Bd.prototype,"mouseEventService",void 0);sS([at],Bd.prototype,"removeAllListeners",null);Bd=sS([Y("dragService")],Bd);var Vd=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;let n=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<n.left+s,this.tickRight=e.clientX>n.right-s,this.tickUp=e.clientY<n.top+s&&!i,this.tickDown=e.clientY>n.bottom-s&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e;if(e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var w_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},oS="ag-list-item-hovered",ag=class extends L{constructor(e,t,i){super(),this.comp=e,this.virtualList=t,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){let e={isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>qe[this.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"],getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(e)}createAutoScrollService(){let e=this.virtualList.getGui();this.autoScrollService=new Vd({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;let t=this.getListDragItem(e),i=this.virtualList.getComponentAt(t.rowIndex);if(!i)return;let n=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,z0(n,oS),z0(n,`ag-item-highlight-${t.position}`))}getListDragItem(e){let t=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(t).paddingTop),n=this.virtualList.getRowHeight(),s=this.virtualList.getScrollTop(),o=Math.max(0,(e.y-i+s)/n),a=this.params.getNumRows(this.comp)-1,l=Math.min(a,o)|0;return{rowIndex:l,position:Math.round(o)>o||o>a?"bottom":"top",component:this.virtualList.getComponentAt(l)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${oS}`).forEach(t=>{[oS,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(i=>{t.classList.remove(i)})}),this.lastHoveredListItem=null}};w_([y("dragAndDropService")],ag.prototype,"dragAndDropService",void 0);w_([G],ag.prototype,"postConstruct",null);var Rs=function(r){return r[r.Above=0]="Above",r[r.Below=1]="Below",r}(Rs||{});var ct=function(r){return r.EVERYTHING="group",r.FILTER="filter",r.SORT="sort",r.MAP="map",r.AGGREGATE="aggregate",r.FILTER_AGGREGATES="filter_aggregates",r.PIVOT="pivot",r.NOTHING="nothing",r}(ct||{});var ht=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};function ec(r){let e=r;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():r}var rt=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}registerOverlayWrapperComp(e){this.overlayWrapperComp=e}registerSideBarComp(e){this.sideBarComp=e}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()})}__getAlignedGridService(){return this.alignedGridsService}__getContext(){return this.context}getSetterMethod(e){return`set${e.charAt(0).toUpperCase()}${e.substring(1)}`}__setPropertyOnly(e,t){return this.gos.__setPropertyOnly(e,t)}__updateProperty(e,t,i,n=void 0){this.gos.set(e,t,i,{},n);let s=this.getSetterMethod(e),o=this;o[s]&&o[s](t)}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,t){this.detailGridInfoMap[e]=t}removeDetailGridInfo(e){this.detailGridInfoMap[e]=void 0}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let t=0;ft(this.detailGridInfoMap,(i,n)=>{V(n)&&(e(n,t),t++)})}getDataAsCsv(e){if(De.__assertRegistered(he.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){De.__assertRegistered(he.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}getExcelExportMode(e){let t=this.gos.get("defaultExcelExportParams");return Object.assign({exportMode:"xlsx"},t,e).exportMode}assertNotExcelMultiSheet(e,t){if(!De.__assertRegistered(he.ExcelExportModule,"api."+e,this.context.getGridId()))return!1;let i=this.getExcelExportMode(t);return this.excelCreator.getFactoryMode(i)===og.MULTI_SHEET?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(!De.__assertRegistered(he.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId()))return;let t=this.getExcelExportMode(e);return this.excelCreator.setFactoryMode(og.MULTI_SHEET,t),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(De.__assertRegistered(he.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){if(De.__assertRegistered(he.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(e)}setTreeData(e){this.gos.set("treeData",e)}setGridAriaProperty(e,t){if(!e)return;let i=this.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${e}`;t===null?i.removeAttribute(n):i.setAttribute(n,t)}logMissingRowModel(e,...t){console.error(`AG Grid: api.${e} can only be called when gridOptions.rowModelType is ${t.join(" or ")}`)}setServerSideDatasource(e){this.serverSideRowModel?this.serverSideRowModel.setDatasource(e):this.logMissingRowModel("setServerSideDatasource","serverSide")}setCacheBlockSize(e){this.serverSideRowModel?(this.gos.set("cacheBlockSize",e),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")}setDatasource(e){this.gos.isRowModelType("infinite")?this.rowModel.setDatasource(e):this.logMissingRowModel("setDatasource","infinite")}setViewportDatasource(e){this.gos.isRowModelType("viewport")?this.rowModel.setViewportDatasource(e):this.logMissingRowModel("setViewportDatasource","viewport")}setRowData(e){if(this.immutableService==null){this.logMissingRowModel("setRowData","clientSide");return}this.immutableService.isActive()?this.immutableService.setRowData(e):(this.selectionService.reset(),this.clientSideRowModel.setRowData(e))}setPinnedTopRowData(e){this.pinnedRowModel.setPinnedTopRowData(e)}setPinnedBottomRowData(e){this.pinnedRowModel.setPinnedBottomRowData(e)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}setColumnDefs(e,t="api"){this.columnModel.setColumnDefs(e,t),this.gos.set("columnDefs",e,!0,{source:t})}setAutoGroupColumnDef(e,t="api"){this.gos.set("autoGroupColumnDef",e,!0,{source:t})}setDefaultColDef(e,t="api"){this.gos.set("defaultColDef",e,!0,{source:t})}setColumnTypes(e,t="api"){this.gos.set("columnTypes",e,!0,{source:t})}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}setAlwaysShowHorizontalScroll(e){this.gos.set("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.gos.set("alwaysShowVerticalScroll",e)}refreshCells(e={}){this.rowRenderer.refreshCells(e)}flashCells(e={}){this.rowRenderer.flashCells(e)}redrawRows(e={}){let t=e?e.rowNodes:void 0;this.rowRenderer.redrawRows(t)}setFunctionsReadOnly(e){this.gos.set("functionsReadOnly",e)}refreshHeader(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh())}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return this.rowModel}setRowNodeExpanded(e,t,i){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i),e.setExpanded(t))}onGroupExpandedOrCollapsed(){if(Ce(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.clientSideRowModel.refreshModel({step:ct.MAP})}refreshClientSideRowModel(e){if(Ce(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")}addRenderedRowListener(e,t,i){this.rowRenderer.addRenderedRowListener(e,t,i)}getQuickFilter(){return this.gos.get("quickFilterText")}setQuickFilter(e){this.gos.set("quickFilterText",e)}setExcludeHiddenColumnsFromQuickFilter(e){xn("30","setExcludeHiddenColumnsFromQuickFilter",void 0,"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `setIncludeHiddenColumnsInQuickFilter`"),this.setIncludeHiddenColumnsInQuickFilter(!e)}setIncludeHiddenColumnsInQuickFilter(e){this.gos.set("includeHiddenColumnsInQuickFilter",e)}setQuickFilterParser(e){this.gos.set("quickFilterParser",e)}setQuickFilterMatcher(e){this.gos.set("quickFilterMatcher",e)}getAdvancedFilterModel(){return De.__assertRegistered(he.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(e){this.gos.set("advancedFilterModel",e)}setEnableAdvancedFilter(e){this.gos.set("enableAdvancedFilter",e)}setIncludeHiddenColumnsInAdvancedFilter(e){this.gos.set("includeHiddenColumnsInAdvancedFilter",e)}setAdvancedFilterParent(e){this.gos.set("advancedFilterParent",e)}setAdvancedFilterBuilderParams(e){this.gos.set("advancedFilterBuilderParams",e)}showAdvancedFilterBuilder(){De.__assertRegistered(he.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(e){if(!e.nodes.every(a=>a.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):a.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:n,newValue:s}=e,o=i;this.selectionService.setNodesSelected({nodes:o,source:n??"api",newValue:s})}selectAll(e="apiSelectAll"){this.selectionService.selectAllRowNodes({source:e})}deselectAll(e="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return Ce(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()}setServerSideSelectionState(e){if(Ce(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setServerSideSelectionState(e)}selectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}sizeColumnsToFit(e){this.gridBodyCtrl.sizeColumnsToFit(e)}showLoadingOverlay(){this.overlayWrapperComp.showLoadingOverlay()}showNoRowsOverlay(){this.overlayWrapperComp.showNoRowsOverlay()}hideOverlay(){this.overlayWrapperComp.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Ce(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e,t="auto"){this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,t)}ensureIndexVisible(e,t){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,t)}ensureNodeVisible(e,t=null){this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,t)}forEachLeafNode(e){if(Ce(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,t){this.rowModel.forEachNode(e,t)}forEachNodeAfterFilter(e){if(Ce(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){if(Ce(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,t){return this.filterManager.getFilterInstance(e,t)}destroyFilter(e){let t=this.columnModel.getPrimaryColumn(e);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(e){if(!De.__assertRegistered(he.StatusBarModule,"api.getStatusPanel",this.context.getGridId()))return;let t=this.statusBarService.getStatusPanel(e);return ec(t)}getColumnDef(e){let t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(e="api"){this.filterManager.onFilterChanged({source:e})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.filterManager.setFilterModel(e)}getFilterModel(){return this.filterManager.getFilterModel()}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,t,i){this.focusService.setFocusedCell({rowIndex:e,column:t,rowPinned:i,forceBrowserFocus:!0})}setSuppressRowDrag(e){this.gos.set("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.gos.set("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.gos.set("suppressRowClickSelection",e)}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){let t=this.dragAndDropService.findExternalZone(e);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}setHeaderHeight(e){this.gos.set("headerHeight",e)}setDomLayout(e){this.gos.set("domLayout",e)}setEnableCellTextSelection(e){this.gridBodyCtrl.setCellTextSelection(e)}setFillHandleDirection(e){this.gos.set("fillHandleDirection",e)}setGroupHeaderHeight(e){this.gos.set("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.gos.set("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.gos.set("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.gos.set("pivotGroupHeaderHeight",e)}setPivotMode(e){this.columnModel.setPivotMode(e)}setAnimateRows(e){this.gos.set("animateRows",e)}setIsExternalFilterPresent(e){this.gos.set("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.gos.set("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.gos.set("navigateToNextCell",e)}setTabToNextCell(e){this.gos.set("tabToNextCell",e)}setTabToNextHeader(e){this.gos.set("tabToNextHeader",e)}setNavigateToNextHeader(e){this.gos.set("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.gos.set("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.gos.set("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.gos.set("getBusinessKeyForNode",e)}setGetChildCount(e){this.gos.set("getChildCount",e)}setProcessRowPostCreate(e){this.gos.set("processRowPostCreate",e)}setGetRowId(e){this.gos.set("getRowId",e)}setGetRowClass(e){this.gos.set("getRowClass",e)}setIsFullWidthRow(e){this.gos.set("isFullWidthRow",e)}setIsRowSelectable(e){this.gos.set("isRowSelectable",e)}setIsRowMaster(e){this.gos.set("isRowMaster",e)}setPostSortRows(e){this.gos.set("postSortRows",e)}setGetDocument(e){this.gos.set("getDocument",e)}setGetContextMenuItems(e){this.gos.set("getContextMenuItems",e)}setGetMainMenuItems(e){this.gos.set("getMainMenuItems",e)}setProcessCellForClipboard(e){this.gos.set("processCellForClipboard",e)}setSendToClipboard(e){this.gos.set("sendToClipboard",e)}setProcessCellFromClipboard(e){this.gos.set("processCellFromClipboard",e)}setProcessSecondaryColDef(e){xn("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(e)}setProcessSecondaryColGroupDef(e){xn("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(e)}setProcessPivotResultColDef(e){this.gos.set("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.gos.set("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.gos.set("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.gos.set("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.gos.set("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.gos.set("paginationNumberFormatter",e)}setGetServerSideStoreParams(e){xn("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(e)}setGetServerSideGroupLevelParams(e){this.gos.set("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.gos.set("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.gos.set("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.gos.set("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.gos.set("getServerSideGroupKey",e)}setGetRowStyle(e){this.gos.set("getRowStyle",e)}setGetRowHeight(e){this.gos.set("getRowHeight",e)}assertSideBarLoaded(e){return De.__assertRegistered(he.SideBarModule,"api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance")){let t=this.sideBarComp.getToolPanelInstance(e);return ec(t)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()}setSideBar(e){this.gos.set("sideBar",e)}setSuppressClipboardPaste(e){this.gos.set("suppressClipboardPaste",e)}resetRowHeights(){if(V(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setGroupRemoveSingleChildren(e){this.gos.set("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.gos.set("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.gos.set("groupDisplayType",e)}setGroupIncludeFooter(e){this.gos.set("groupIncludeFooter",e)}setGroupIncludeTotalFooter(e){this.gos.set("groupIncludeTotalFooter",e)}setRowClass(e){this.gos.set("rowClass",e)}setDeltaSort(e){this.gos.set("deltaSort",e)}setRowCount(e,t){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(e,t);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(e,t);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,t){let i=this.columnModel.getPrimaryColumn(e);return Ce(i)&&(i=this.columnModel.getGridColumn(e)),Ce(i)?null:this.valueService.getValue(i,t)}addEventListener(e,t){let i=this.gos.useAsyncEvents();this.eventService.addEventListener(e,t,i)}addGlobalListener(e){let t=this.gos.useAsyncEvents();this.eventService.addGlobalListener(e,t)}removeEventListener(e,t){let i=this.gos.useAsyncEvents();this.eventService.removeEventListener(e,t,i)}removeGlobalListener(e){let t=this.gos.useAsyncEvents();this.eventService.removeGlobalListener(e,t)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){if(this.destroyCalled)return;this.destroyCalled=!0,this.dispatchEvent({type:w.EVENT_GRID_PRE_DESTROYED});let e=this.ctrlsService.getGridCtrl();e&&e.destroyGridUi(),this.context.destroy()}cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid(){setTimeout(wy.bind(window,this,"Grid API"),100)}warnIfDestroyed(e){return this.destroyCalled&&console.warn(`AG Grid: Grid API method ${e} was called on a grid that was destroyed.`),this.destroyCalled}resetQuickFilter(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(De.__assertRegistered(he.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){if(this.rangeService){this.rangeService.addCellRange(e);return}De.__assertRegistered(he.RangeSelectionModule,"api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),De.__assertRegistered(he.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}getChartModels(){if(De.__assertRegistered(he.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()}getChartRef(e){if(De.__assertRegistered(he.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(e)}getChartImageDataURL(e){if(De.__assertRegistered(he.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(e)}downloadChart(e){if(De.__assertRegistered(he.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(e)}openChartToolPanel(e){if(De.__assertRegistered(he.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(e)}closeChartToolPanel(e){if(De.__assertRegistered(he.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(e.chartId)}createRangeChart(e){if(De.__assertRegistered(he.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(e)}createPivotChart(e){if(De.__assertRegistered(he.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(e)}createCrossFilterChart(e){if(De.__assertRegistered(he.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(e)}updateChart(e){De.__assertRegistered(he.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(e)}restoreChart(e,t){if(De.__assertRegistered(he.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(e,t)}copyToClipboard(e){De.__assertRegistered(he.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(e)}cutToClipboard(e){De.__assertRegistered(he.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(e,"api")}copySelectedRowsToClipboard(e){De.__assertRegistered(he.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(e)}copySelectedRangeToClipboard(e){De.__assertRegistered(he.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(e)}copySelectedRangeDown(){De.__assertRegistered(he.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()}pasteFromClipboard(){De.__assertRegistered(he.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()}showColumnMenuAfterButtonClick(e,t){let i=this.columnModel.getGridColumn(e);this.menuFactory.showMenuAfterButtonClick(i,t,"columnMenu")}showColumnMenuAfterMouseClick(e,t){let i=this.columnModel.getGridColumn(e);if(i||(i=this.columnModel.getPrimaryColumn(e)),!i){console.error(`AG Grid: column '${e}' not found`);return}this.menuFactory.showMenuAfterMouseEvent(i,t)}hidePopupMenu(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()}setPopupParent(e){this.gos.set("popupParent",e)}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(e={}){return this.rowRenderer.getCellRendererInstances(e).map(ec)}getCellEditorInstances(e={}){return this.rowRenderer.getCellEditorInstances(e).map(ec)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(e=!1){this.rowRenderer.stopEditing(e)}startEditingCell(e){let t=this.columnModel.getGridColumn(e.colKey);if(!t){console.warn(`AG Grid: no column found for ${e.colKey}`);return}let i={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:t};e.rowPinned==null&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e.rowIndex);let s=this.navigationService.getCellByPosition(i);s&&(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),s.startRowOrCellEdit(e.key))}addAggFunc(e,t){this.aggFuncService&&this.aggFuncService.addAggFunc(e,t)}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(e)}applyServerSideTransactionAsync(e,t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(e,t)}applyServerSideRowData(e){var t,i;let n=(t=e.startRow)!==null&&t!==void 0?t:0,s=(i=e.route)!==null&&i!==void 0?i:[];if(n<0){console.warn(`AG Grid: invalid value ${e.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(e.successParams,n,s):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.clientSideRowModel.updateRowData(e)}applyTransactionAsync(e,t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.clientSideRowModel.batchUpdateRowData(e,t)}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.clientSideRowModel.flushAsyncTransactions()}setSuppressModelUpdateAfterUpdateTransaction(e){this.gos.set("suppressModelUpdateAfterUpdateTransaction",e)}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(e)}refreshServerSideStore(e){return xn("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(e)}getServerSideStoreState(){return xn("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}setDataTypeDefinitions(e){this.gos.set("dataTypeDefinitions",e)}setPagination(e){this.gos.set("pagination",e)}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationSetPageSize(e){this.gos.set("paginationPageSize",e)}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}};ht([He("immutableService")],rt.prototype,"immutableService",void 0);ht([He("csvCreator")],rt.prototype,"csvCreator",void 0);ht([He("excelCreator")],rt.prototype,"excelCreator",void 0);ht([y("rowRenderer")],rt.prototype,"rowRenderer",void 0);ht([y("navigationService")],rt.prototype,"navigationService",void 0);ht([y("filterManager")],rt.prototype,"filterManager",void 0);ht([y("columnModel")],rt.prototype,"columnModel",void 0);ht([y("selectionService")],rt.prototype,"selectionService",void 0);ht([y("gridOptionsService")],rt.prototype,"gos",void 0);ht([y("valueService")],rt.prototype,"valueService",void 0);ht([y("alignedGridsService")],rt.prototype,"alignedGridsService",void 0);ht([y("eventService")],rt.prototype,"eventService",void 0);ht([y("pinnedRowModel")],rt.prototype,"pinnedRowModel",void 0);ht([y("context")],rt.prototype,"context",void 0);ht([y("rowModel")],rt.prototype,"rowModel",void 0);ht([y("sortController")],rt.prototype,"sortController",void 0);ht([y("paginationProxy")],rt.prototype,"paginationProxy",void 0);ht([y("focusService")],rt.prototype,"focusService",void 0);ht([y("dragAndDropService")],rt.prototype,"dragAndDropService",void 0);ht([He("rangeService")],rt.prototype,"rangeService",void 0);ht([He("clipboardService")],rt.prototype,"clipboardService",void 0);ht([He("aggFuncService")],rt.prototype,"aggFuncService",void 0);ht([y("menuFactory")],rt.prototype,"menuFactory",void 0);ht([He("contextMenuFactory")],rt.prototype,"contextMenuFactory",void 0);ht([y("valueCache")],rt.prototype,"valueCache",void 0);ht([y("animationFrameService")],rt.prototype,"animationFrameService",void 0);ht([He("statusBarService")],rt.prototype,"statusBarService",void 0);ht([He("chartService")],rt.prototype,"chartService",void 0);ht([He("undoRedoService")],rt.prototype,"undoRedoService",void 0);ht([He("rowNodeBlockLoader")],rt.prototype,"rowNodeBlockLoader",void 0);ht([He("ssrmTransactionManager")],rt.prototype,"serverSideTransactionManager",void 0);ht([y("ctrlsService")],rt.prototype,"ctrlsService",void 0);ht([G],rt.prototype,"init",null);ht([at],rt.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null);rt=ht([Y("gridApi")],rt);var lg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ih,As=Ih=class extends L{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,()=>{this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",()=>this.onIncludeHiddenColumnsInQuickFilterChanged()),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gridOptionsService.is("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return V(e)?this.gridOptionsService.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){console.warn(`AG Grid - setQuickFilter() only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchEvent({type:Ih.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){let e=this.gridOptionsService.get("quickFilterParser"),t=this.gridOptionsService.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchEvent({type:Ih.EVENT_QUICK_FILTER_CHANGED}))}onIncludeHiddenColumnsInQuickFilterChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:Ih.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(e,t){return this.columnModel.getAllColumnsForQuickFilter().some(n=>{let s=this.getQuickFilterTextForColumn(n,e);return V(s)&&s.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);let{quickFilterParts:n,matcher:s}=this;return s(n,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0),n=e.getColDef();if(n.getQuickFilterText){let s={value:i,node:t,data:t.data,column:e,colDef:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};i=n.getQuickFilterText(s)}return V(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(n=>{let s=this.getQuickFilterTextForColumn(n,e);V(s)&&t.push(s)}),t.join(Ih.QUICK_FILTER_SEPARATOR)}};As.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";As.QUICK_FILTER_SEPARATOR=`
`;lg([y("valueService")],As.prototype,"valueService",void 0);lg([y("columnModel")],As.prototype,"columnModel",void 0);lg([y("rowModel")],As.prototype,"rowModel",void 0);lg([G],As.prototype,"postConstruct",null);As=Ih=lg([Y("quickFilterService")],As);var qo=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},bn=class extends L{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[]}init(){this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>this.updateAggFiltering()),this.addManagedPropertyListener("advancedFilterModel",e=>this.setAdvancedFilterModel(e.currentValue)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:e})=>this.onAdvancedFilterEnabledChanged(e)),this.addManagedListener(this.eventService,w.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,As.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"}))}isExternalFilterPresentCallback(){let e=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gridOptionsService.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push(e);return}let t=[],i=this.getFilterModel();if(e){let n=jf(Object.keys(e));this.allColumnFilters.forEach((s,o)=>{let a=e[o];t.push(this.setModelOnFilterWrapper(s.filterPromise,a)),n.delete(o)}),n.forEach(s=>{let o=this.columnModel.getPrimaryColumn(s)||this.columnModel.getGridColumn(s);if(!o){console.warn("AG Grid: setFilterModel() - no column found for colId: "+s);return}if(!o.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}let a=this.getOrCreateFilterWrapper(o,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}t.push(this.setModelOnFilterWrapper(a.filterPromise,e[s]))})}else this.allColumnFilters.forEach(n=>{t.push(this.setModelOnFilterWrapper(n.filterPromise,null))});vi.all(t).then(()=>{let n=this.getFilterModel(),s=[];this.allColumnFilters.forEach((o,a)=>{let l=i?i[a]:null,c=n?n[a]:null;Pe.jsonEquals(l,c)||s.push(o.column)}),s.length>0&&this.onFilterChanged({columns:s,source:"api"})})}setModelOnFilterWrapper(e,t){return new vi(i=>{e.then(n=>{typeof n.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(n.setModel(t)||vi.resolve()).then(()=>i())})})}getFilterModel(){let e={};return this.allColumnFilters.forEach((t,i)=>{let s=t.filterPromise.resolveNow(null,a=>a);if(s==null)return null;if(typeof s.getModel!="function"){console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel");return}let o=s.getModel();V(o)&&(e[i]=o)}),e}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):!((t=this.advancedFilterService)===null||t===void 0)&&t.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return(e=this.advancedFilterService)===null||e===void 0?void 0:e.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;let e=n=>n?n.isFilterActive?n.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,t=!!this.gridOptionsService.getGroupAggFiltering(),i=n=>{if(!n.isPrimary())return!0;let o=!this.columnModel.isPivotActive();return!n.isValueActive()||!o?!1:this.columnModel.isPivotMode()?!0:t};this.allColumnFilters.forEach(n=>{if(n.filterPromise.resolveNow(!1,e)){let s=n.filterPromise.resolveNow(null,o=>o);i(n.column)?this.activeAggregateFilters.push(s):this.activeColumnFilters.push(s)}})}updateFilterFlagInColumns(e,t){this.allColumnFilters.forEach(i=>{let n=i.filterPromise.resolveNow(!1,s=>s.isFilterActive());i.column.setFilterActive(n,e,t)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()}doColumnFiltersPass(e,t,i){let{data:n,aggData:s}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,a=i?s:n;for(let l=0;l<o.length;l++){let c=o[l];if(!(c==null||c===t)){if(typeof c.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!c.doesFilterPass({node:e,data:a}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(e={}){let{source:t,filterInstance:i,additionalEventAttributes:n,columns:s}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",n),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(a=>{a.filterPromise&&a.filterPromise.then(l=>{l&&l!==i&&l.onAnyFilterChanged&&l.onAnyFilterChanged()})});let o={source:t,type:w.EVENT_FILTER_CHANGED,columns:s||[]};n&&or(o,n),this.processingFilterChange=!0,this.eventService.dispatchEvent(o),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}onNewRowsLoaded(e){this.allColumnFilters.forEach(t=>{t.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}getFilterComponent(e,t,i=!0){var n;if(i)return((n=this.getOrCreateFilterWrapper(e,t))===null||n===void 0?void 0:n.filterPromise)||null;let s=this.cachedFilter(e);return s?s.filterPromise:null}isFilterActive(e){let t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return null;let i=this.cachedFilter(e);if(i)t!=="NO_UI"&&this.putIntoGui(i,t);else{i=this.createFilterWrapper(e,t);let n=e.getColId();this.allColumnFilters.set(n,i),this.allColumnListeners.set(n,this.addManagedListener(e,Oe.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(n)))}return i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(De.__isRegistered(he.SetFilterModule,this.context.getGridId()))t="agSetColumnFilter";else{let i=e.getColDef().cellDataType;i==="number"?t="agNumberColumnFilter":i==="date"||i==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(De.__isRegistered(he.SetFilterModule,this.context.getGridId()))t="agSetColumnFloatingFilter";else{let i=e.getColDef().cellDataType;i==="number"?t="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e){let t=this.getDefaultFilter(e),i=e.getColDef(),n,s=Object.assign(Object.assign({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>{let a={type:w.EVENT_FILTER_MODIFIED,column:e,filterInstance:n};this.eventService.dispatchEvent(a)},filterChangedCallback:a=>{var l;let c=(l=a?.source)!==null&&l!==void 0?l:"api",d={filterInstance:n,additionalEventAttributes:a,columns:[e],source:c};this.callOnFilterChangedOutsideRenderCycle(d)},doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(n,a)}),o=this.userComponentFactory.getFilterDetails(i,s,t);return o?{filterPromise:()=>{let a=o.newAgStackInstance();return a&&a.then(l=>n=l),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return{column:e,colDef:Cf(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),doesRowPassOtherFilter:()=>!0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}createFilterWrapper(e,t){var i;let n={column:e,filterPromise:null,compiledElement:null,guiPromise:vi.resolve(null),compDetails:null},{filterPromise:s,compDetails:o}=this.createFilterInstance(e);return n.filterPromise=(i=s?.())!==null&&i!==void 0?i:null,n.compDetails=o,s&&this.putIntoGui(n,t),n}putIntoGui(e,t){let i=document.createElement("div");i.className="ag-filter",e.guiPromise=new vi(n=>{e.filterPromise.then(s=>{let o=s.getGui();V(o)||console.warn(`AG Grid: getGui method from filter returned ${o}, it should be a DOM element or an HTML template string.`),typeof o=="string"&&(o=Yt(o)),i.appendChild(o),n(i);let a={type:w.EVENT_FILTER_OPENED,column:e.column,source:t,eGui:i};this.eventService.dispatchEvent(a)})})}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((t,i)=>{let n;t.column.isPrimary()?n=this.columnModel.getPrimaryColumn(i):n=this.columnModel.getGridColumn(i),!n&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))}),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){let e=this.columnModel.getGroupAutoColumns();e?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t,"NO_UI")})}isFilterAllowed(e){var t,i;if(this.isAdvancedFilterEnabled()||!e.isFilterAllowed())return!1;let s=this.allColumnFilters.get(e.getColId());return(i=(t=s?.filterPromise)===null||t===void 0?void 0:t.resolveNow(!0,o=>{var a,l;return typeof((a=o)===null||a===void 0?void 0:a.isFilterAllowed)=="function"?(l=o)===null||l===void 0?void 0:l.isFilterAllowed():!0}))!==null&&i!==void 0?i:!0}getFloatingFilterCompDetails(e,t){let i=e.getColDef(),n=this.createFilterParams(e,i),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,sg,n),o=this.userComponentFactory.getDefaultFloatingFilterType(i,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");let l={column:e,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:c=>{let d=this.getFilterComponent(e,"NO_UI");d?.then(u=>{c(ec(u))})},showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,l,o)}getCurrentFloatingFilterParentModel(e){let t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(e,t="api"){let i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),n&&(this.disposeFilterWrapper(n,t),this.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{(i.setModel(null)||vi.resolve()).then(()=>{this.getContext().destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());let n={type:w.EVENT_FILTER_DESTROYED,source:t,column:e.column};this.eventService.dispatchEvent(n)})})}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};this.areFilterCompsDifferent(t.compDetails,n)&&this.destroyFilter(i,"columnChanged")}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){this.isAdvancedFilterEnabled()&&(this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"}))}showAdvancedFilterBuilder(e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){if(this.isAdvancedFilterEnabled())return!1;let e=this.columnModel.getAllGridColumns();return e?e.some(t=>t.getColDef().floatingFilter):!1}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}let i=this.getFilterInstanceImpl(e,s=>{if(!t)return;let o=ec(s);t(o)});return ec(i)}getFilterInstanceImpl(e,t){let i=this.columnModel.getPrimaryColumn(e);if(!i)return;let n=this.getFilterComponent(i,"NO_UI"),s=n&&n.resolveNow(null,o=>o);return s?setTimeout(t,0,s):n&&n.then(o=>{t(o)}),s}warnAdvancedFilters(){Ne(()=>{console.warn("AG Grid: Column Filter API methods have been disabled as Advanced Filters are enabled.")},"advancedFiltersCompatibility")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)===null||t===void 0||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(e=>this.setFilterModel(e)),this.filterModelUpdateQueue=[]}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};qo([y("valueService")],bn.prototype,"valueService",void 0);qo([y("columnModel")],bn.prototype,"columnModel",void 0);qo([y("rowModel")],bn.prototype,"rowModel",void 0);qo([y("userComponentFactory")],bn.prototype,"userComponentFactory",void 0);qo([y("rowRenderer")],bn.prototype,"rowRenderer",void 0);qo([y("dataTypeService")],bn.prototype,"dataTypeService",void 0);qo([y("quickFilterService")],bn.prototype,"quickFilterService",void 0);qo([He("advancedFilterService")],bn.prototype,"advancedFilterService",void 0);qo([G],bn.prototype,"init",null);bn=qo([Y("filterManager")],bn);var tc=class extends oe{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}};var cg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ro=class r extends tc{constructor(e){super(r.TEMPLATE,e)}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(i,n)=>this.addOrRemoveCssClass(i,n),addOrRemoveBodyCssClass:(i,n)=>this.eFloatingFilterBody.classList.toggle(i,n),setButtonWrapperDisplayed:i=>ke(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};ro.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;cg([Z("eFloatingFilterBody")],ro.prototype,"eFloatingFilterBody",void 0);cg([Z("eButtonWrapper")],ro.prototype,"eButtonWrapper",void 0);cg([Z("eButtonShowMainFilter")],ro.prototype,"eButtonShowMainFilter",void 0);cg([G],ro.prototype,"postConstruct",null);cg([at],ro.prototype,"destroyFloatingFilterComp",null);var J2=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ci=function(r){return r.AUTO_HEIGHT="ag-layout-auto-height",r.NORMAL="ag-layout-normal",r.PRINT="ag-layout-print",r}(ci||{}),Ya=class extends L{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?ci.AUTO_HEIGHT:t.print?ci.PRINT:ci.NORMAL;this.view.updateLayoutClasses(i,t)}getDomLayout(){var e;let t=(e=this.gridOptionsService.get("domLayout"))!==null&&e!==void 0?e:"normal";return["normal","print","autoHeight"].indexOf(t)===-1?(Ne(()=>console.warn(`AG Grid: ${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"warn about dom layout values"),"normal"):t}};J2([G],Ya.prototype,"postConstruct",null);var ic=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rn=function(r){return r[r.Vertical=0]="Vertical",r[r.Horizontal=1]="Horizontal",r}(rn||{}),En=function(r){return r[r.Container=0]="Container",r[r.FakeContainer=1]="FakeContainer",r}(En||{}),Ds=class extends L{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=ar(()=>this.lastScrollSource[rn.Horizontal]=null,500),this.resetLastVScrollDebounced=ar(()=>this.lastScrollSource[rn.Vertical]=null,500)}postConstruct(){this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let e=this.ctrlsService.getFakeHScrollComp(),t=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));let i=this.gridOptionsService.is("debounceVerticalScrollbar"),n=i?ar(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=i?ar(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",n),t.onScrollCallback(s)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowContainerCtrl==null)return;e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());let i=this.enableRtl?e:-e,n=this.ctrlsService.getTopCenterRowContainerCtrl(),s=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),o=this.ctrlsService.getBottomCenterRowContainerCtrl(),a=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-i),o.setContainerTranslateX(i),n.setContainerTranslateX(i),s.setContainerTranslateX(i);let c=this.centerRowContainerCtrl.getViewportElement(),d=this.lastScrollSource[rn.Horizontal]===En.Container;e=Math.abs(e),d?a.setScrollPosition(e):$l(c,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(En.FakeContainer,rn.Horizontal)&&this.onHScrollCommon(En.FakeContainer)}onHScroll(){this.isControllingScroll(En.Container,rn.Horizontal)&&this.onHScrollCommon(En.Container)}onHScrollCommon(e){let t=this.centerRowContainerCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(rn.Horizontal,i,!0))return;let n;e===En.Container?n=Kl(t,this.enableRtl):n=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(n)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(En.FakeContainer,rn.Vertical)&&this.onVScrollCommon(En.FakeContainer)}onVScroll(){this.isControllingScroll(En.Container,rn.Vertical)&&this.onVScrollCommon(En.Container)}onVScrollCommon(e){let t;e===En.Container?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(rn.Vertical,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===En.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(rn.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:w.EVENT_BODY_SCROLL,direction:e===rn.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let i=Object.assign(Object.assign({},t),{type:w.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!tn()?!1:e===rn.Vertical?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=Va(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){let t=this.centerRowContainerCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowContainerCtrl.getViewportElement();if(this.enableRtl&&wh()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(rn.Vertical)}checkScrollLeft(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(En.Container)}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let n=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(rn.Horizontal,e)&&(this.enableRtl&&wh()?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),$l(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}}getHScrollPosition(){return this.centerRowContainerCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let i=this.rowModel.getRowCount(),n=-1;for(let s=0;s<i;s++){let o=this.rowModel.getRow(s);if(typeof e=="function"){if(o&&e(o)){n=s;break}}else if(e===o||e===o.data){n=s;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t){if(this.gridOptionsService.isDomLayout("print"))return;let i=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=i){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel")||this.paginationProxy.goToPageWithIndex(e);let a=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),l=this.paginationProxy.getRow(e),c;do{let d=l.rowTop,u=l.rowHeight,h=this.paginationProxy.getPixelOffset(),p=l.rowTop-h,f=p+l.rowHeight,g=this.getVScrollPosition(),m=this.heightScaler.getDivStretchOffset(),v=g.top+m,C=g.bottom+m,S=C-v,b=this.heightScaler.getScrollPositionForPixel(p),T=this.heightScaler.getScrollPositionForPixel(f-S),A=Math.min((b+T)/2,p),E=v+a>p,N=C<f,M=null;t==="top"?M=b:t==="bottom"?M=T:t==="middle"?M=A:E?M=b-a:N&&(M=T),M!==null&&(this.setVerticalScrollPosition(M),this.rowRenderer.redraw({afterScroll:!0})),c=d!==l.rowTop||u!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()}ensureColumnVisible(e,t="auto"){let i=this.columnModel.getGridColumn(e);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;let n=this.getPositionedHorizontalScroll(i,t);n!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(n),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),s=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowContainerCtrl.getCenterWidth(),a=this.enableRtl,l=(a?i:n)||s,c=a?n:i;t!=="auto"&&(l=t==="start",c=t==="end");let d=t==="middle";if(l||c||d){let{colLeft:u,colMiddle:h,colRight:p}=this.getColumnBounds(e);return d?h-o/2:l?a?p:u:a?u-o:p-o}return null}isColumnOutsideViewport(e){let{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:s}=this.getColumnBounds(e),o=this.enableRtl,a=o?t>s:i<s,l=o?i<n:t>n;return{columnBeforeStart:a,columnAfterEnd:l}}getColumnBounds(e){let t=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),n=e.getActualWidth(),s=e.getLeft(),o=t?-1:1,a=t?i-s:s,l=a+n*o,c=a+n/2*o;return{colLeft:a,colMiddle:c,colRight:l}}getViewportBounds(){let e=this.centerRowContainerCtrl.getCenterWidth(),t=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),i=t,n=e+t;return{start:i,end:n,width:e}}};ic([y("ctrlsService")],Ds.prototype,"ctrlsService",void 0);ic([y("animationFrameService")],Ds.prototype,"animationFrameService",void 0);ic([y("paginationProxy")],Ds.prototype,"paginationProxy",void 0);ic([y("rowModel")],Ds.prototype,"rowModel",void 0);ic([y("rowContainerHeightService")],Ds.prototype,"heightScaler",void 0);ic([y("rowRenderer")],Ds.prototype,"rowRenderer",void 0);ic([y("columnModel")],Ds.prototype,"columnModel",void 0);ic([G],Ds.prototype,"postConstruct",null);var Os=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ur=class extends L{constructor(e){super(),this.isMultiRowDrag=!1,this.isGridSorted=!1,this.isGridFiltered=!1,this.isRowGroupActive=!1,this.eContainer=e}postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);let e=()=>{this.onSortChanged(),this.onFilterChanged(),this.onRowGroupChanged()};this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,()=>{e()}),e(),this.ctrlsService.whenReady(()=>{let t=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new Vd({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}onSortChanged(){this.isGridSorted=this.sortController.isSortActive()}onFilterChanged(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()}onRowGroupChanged(){let e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!sr(e)}getContainer(){return this.eContainer}isInterestedIn(e){return e===yi.RowDrag}getIconName(){return this.gridOptionsService.is("rowDragManaged")&&this.shouldPreventRowMove()?qe.ICON_NOT_ALLOWED:qe.ICON_MOVE}shouldPreventRowMove(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=this.gridOptionsService.is("rowDragMultiRow"),i=[...this.selectionService.getSelectedNodes()].sort((s,o)=>s.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(o)),n=e.dragItem.rowNode;return t&&i.indexOf(n)!==-1?(this.isMultiRowDrag=!0,i):(this.isMultiRowDrag=!1,[n])}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(w.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gridOptionsService.getDomDataKey()}isDropZoneWithinThisGrid(e){let i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:n}=e;return!i.contains(n)}onEnterOrDragging(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.is("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let i=this.isFromThisGrid(e),n=this.gridOptionsService.is("rowDragManaged"),s=e.dragItem.rowNodes;n&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){return parseInt(je(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===Rs.Below,n=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes,o=i?1:0;if(this.isFromThisGrid(e))s.forEach(a=>{a.rowTop<n&&(o-=1)}),this.moveRows(s,n,o);else{let a=this.gridOptionsService.getCallback("getRowId"),l=this.clientSideRowModel.getRowIndexAtPixel(n)+1;this.clientSideRowModel.getHighlightPosition(n)===Rs.Above&&l--,this.clientSideRowModel.updateRowData({add:s.map(c=>c.data).filter(c=>!this.clientSideRowModel.getRowNode(a?a({data:c,level:0}):c.id)),addIndex:l})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){Ne(()=>console.warn("AG Grid: addRowDropZone - A container target needs to be provided"),"add-drop-zone-empty-target");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,t=e):(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_ENTER,i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_LEAVE,i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_MOVE,i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(Object.assign({isInterestedIn:i=>i===yi.RowDrag,getIconName:()=>qe.ICON_MOVE,external:!0},t))}getRowDropZone(e){let t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),s=this.onDragging.bind(this),o=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?a=>{i(a),e.onDragEnter(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_ENTER,a))}:i,onDragLeave:e.onDragLeave?a=>{n(a),e.onDragLeave(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_LEAVE,a))}:n,onDragging:e.onDragging?a=>{s(a),e.onDragging(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_MOVE,a))}:s,onDragStop:e.onDragStop?a=>{o(a),e.onDragStop(this.draggingToRowDragEvent(w.EVENT_ROW_DRAG_END,a))}:o,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:s,onDragStop:o,fromGrid:!0}}draggingToRowDragEvent(e,t){let i=this.mouseEventService.getNormalisedPosition(t).y,n=i>this.paginationProxy.getCurrentPageHeight(),s=-1,o;n||(s=this.rowModel.getRowIndexAtPixel(i),o=this.rowModel.getRow(s));let a;switch(t.vDirection){case Md.Down:a="down";break;case Md.Up:a="up";break;default:a=null;break}return{type:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:o,y:i,vDirection:a}}dispatchGridEvent(e,t){let i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)}onDragStop(e){this.dispatchGridEvent(w.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}};Os([y("dragAndDropService")],Ur.prototype,"dragAndDropService",void 0);Os([y("rowModel")],Ur.prototype,"rowModel",void 0);Os([y("paginationProxy")],Ur.prototype,"paginationProxy",void 0);Os([y("columnModel")],Ur.prototype,"columnModel",void 0);Os([y("focusService")],Ur.prototype,"focusService",void 0);Os([y("sortController")],Ur.prototype,"sortController",void 0);Os([y("filterManager")],Ur.prototype,"filterManager",void 0);Os([y("selectionService")],Ur.prototype,"selectionService",void 0);Os([y("mouseEventService")],Ur.prototype,"mouseEventService",void 0);Os([y("ctrlsService")],Ur.prototype,"ctrlsService",void 0);Os([He("rangeService")],Ur.prototype,"rangeService",void 0);Os([G],Ur.prototype,"postConstruct",null);var _n=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Hd=function(r){return r.ANIMATION_ON="ag-row-animation",r.ANIMATION_OFF="ag-row-no-animation",r}(Hd||{}),aS="ag-force-vertical-scroll",eI="ag-selectable",tI="ag-column-moving",Yi=class extends L{constructor(){super(...arguments),this.stickyTopHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,n,s,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=s,this.eStickyTop=o,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new Ya(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Ds(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,s,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(n),this.ctrlsService.registerGridBodyCtrl(this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach(t=>{this.addManagedListener(t,"focusin",i=>{let{target:n}=i,s=Js(n,"ag-root",t);t.classList.toggle("ag-has-focus",!s)}),this.addManagedListener(t,"focusout",i=>{let{target:n,relatedTarget:s}=i,o=t.contains(s),a=Js(s,"ag-root",t);Js(n,"ag-root",t)||(!o||a)&&t.classList.remove("ag-has-focus")})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(tI,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(eI,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);let t=e&&this.gridOptionsService.getScrollbarWidth()||0,i=Ul()?16:0,n=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(n))}onGridColumnsChanged(){let e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gridOptionsService.is("stopEditingWhenCellsLoseFocus"))return;let e=i=>{let n=i.relatedTarget;if(Sh(n)===null){this.rowRenderer.stopEditing();return}let s=t.some(o=>o.contains(n))&&this.mouseEventService.isElementInThisGrid(n);if(!s){let o=this.popupService;s=o.getActivePopups().some(a=>a.contains(n))||o.isElementWithinCustomPopup(n)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];t.forEach(i=>this.addManagedListener(i,"focusout",e))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gridOptionsService.is("alwaysShowVerticalScroll"),t=e?aS:null,i=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&Dx(this.eBodyViewport)}setupRowAnimationCssClass(){let e=()=>{let t=this.gridOptionsService.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=t?Hd.ANIMATION_ON:Hd.ANIMATION_OFF;this.comp.setRowAnimationCssOnBodyViewport(i,t)};e(),this.addManagedListener(this.eventService,w.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedListener(e,"wheel",i=>this.onFullWidthContainerWheel(i,t))}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gridOptionsService.is("preventDefaultOnContextMenu")&&(e||i).preventDefault();let{target:n}=e||t;if(n===this.eBodyViewport||n===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;e?this.contextMenuFactory.onContextMenu(e,null,null,null,null,this.eGridBody):i&&this.contextMenuFactory.onContextMenu(null,i,null,null,null,this.eGridBody)}}mockContextMenuForIPad(e){if(!tn())return;let t=new $i(this.eBodyViewport),i=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListener(t,$i.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyTopWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Ur(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight();t&&(t+=1);let i=e.getPinnedBottomTotalHeight();i&&(i+=1),this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyTopWidth(e){if(!e)this.comp.setStickyTopWidth("100%");else{let t=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight(),n=0;t>0&&(n+=t+1),i>0&&(n+=i+1),this.comp.setStickyTopTop(`${n}px`)}sizeColumnsToFit(e,t){let n=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,o=bd(this.eGridBody)-n;if(o>0){this.columnModel.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};_n([y("animationFrameService")],Yi.prototype,"animationFrameService",void 0);_n([y("rowContainerHeightService")],Yi.prototype,"rowContainerHeightService",void 0);_n([y("ctrlsService")],Yi.prototype,"ctrlsService",void 0);_n([y("columnModel")],Yi.prototype,"columnModel",void 0);_n([y("scrollVisibleService")],Yi.prototype,"scrollVisibleService",void 0);_n([He("contextMenuFactory")],Yi.prototype,"contextMenuFactory",void 0);_n([y("headerNavigationService")],Yi.prototype,"headerNavigationService",void 0);_n([y("dragAndDropService")],Yi.prototype,"dragAndDropService",void 0);_n([y("pinnedRowModel")],Yi.prototype,"pinnedRowModel",void 0);_n([y("rowRenderer")],Yi.prototype,"rowRenderer",void 0);_n([y("popupService")],Yi.prototype,"popupService",void 0);_n([y("mouseEventService")],Yi.prototype,"mouseEventService",void 0);_n([y("rowModel")],Yi.prototype,"rowModel",void 0);_n([y("filterManager")],Yi.prototype,"filterManager",void 0);var dg=function(r){return r[r.FILL=0]="FILL",r[r.RANGE=1]="RANGE",r}(dg||{}),Wd=function(r){return r[r.VALUE=0]="VALUE",r[r.DIMENSION=1]="DIMENSION",r}(Wd||{});var ug="ag-cell-range-selected",iI="ag-cell-range-chart",rI="ag-cell-range-single-cell",nI="ag-cell-range-chart-category",sI="ag-cell-range-handle",oI="ag-cell-range-top",aI="ag-cell-range-right",lI="ag-cell-range-bottom",cI="ag-cell-range-left",tv=class{constructor(e,t){this.beans=e,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(ug,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${ug}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${ug}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${ug}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${ug}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(iI,this.hasChartRange),ws(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(rI,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,n=!t&&e.right,s=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass(oI,i),this.cellComp.addOrRemoveCssClass(aI,n),this.cellComp.addOrRemoveCssClass(lI,s),this.cellComp.addOrRemoveCssClass(cI,o)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(i=>cr([Wd.DIMENSION,Wd.VALUE],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gridOptionsService.is("enableRtl"),t=!1,i=!1,n=!1,s=!1,o=this.cellCtrl.getCellPosition().column,{rangeService:a,columnModel:l}=this.beans,c,d;e?(c=l.getDisplayedColAfter(o),d=l.getDisplayedColBefore(o)):(c=l.getDisplayedColBefore(o),d=l.getDisplayedColAfter(o));let u=a.getCellRanges().filter(h=>a.isCellInSpecificRange(this.cellCtrl.getCellPosition(),h));c||(s=!0),d||(i=!0);for(let h=0;h<u.length&&!(t&&i&&n&&s);h++){let p=u[h],f=a.getRangeStartRow(p),g=a.getRangeEndRow(p);!t&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(t=!0),!n&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(n=!0),!s&&c&&p.columns.indexOf(c)<0&&(s=!0),!i&&d&&p.columns.indexOf(d)<0&&(i=!0)}return{top:t,right:i,bottom:n,left:s}}refreshHandle(){if(!this.beans.rangeService)return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(sI,!!this.selectionHandle)}shouldHaveSelectionHandle(){let{gridOptionsService:e,rangeService:t}=this.beans,i=t.getCellRanges(),n=i.length;if(this.rangeCount<1||n<1)return!1;let s=je(i),o=this.cellCtrl.getCellPosition(),a=e.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),l=e.is("enableRangeHandle"),c=n===1&&!this.cellCtrl.isEditing()&&(a||l);if(this.hasChartRange){let u=i[0].type===Wd.DIMENSION&&t.isCellInSpecificRange(o,i[0]);this.cellComp.addOrRemoveCssClass(nI,u),c=s.type===Wd.VALUE}return c&&s.endRow!=null&&t.isContiguousRange(s)&&t.isBottomRightCell(s,o)}addSelectionHandle(){let{gridOptionsService:e,rangeService:t}=this.beans,i=je(t.getCellRanges()).type,s=e.is("enableFillHandle")&&Ce(i)?dg.FILL:dg.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}};var iv=class extends L{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.setupColSpan(),this.setupRowSpan()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode)}setComp(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onDisplayColumnsChanged(){let e=this.getColSpanningList();Zs(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column,n=this.column.getPinned();for(let s=0;i&&s<e&&(t.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!(!i||Ce(i)||n!==i.getPinned()));s++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?e=je(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){let i=this.beans.columnModel.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(){if(this.rowSpan===1)return;let t=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${t}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var rv=class extends L{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),t={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(e.cellClassRules,t,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1))}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let i={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},n=e.cellStyle;t=n(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}};var Xa=class extends L{constructor(e,t){super(),this.ctrl=e,this.beans=t}setComp(e){this.eGui=e,this.setupTooltip()}setBrowserTooltip(e){let t="title";e!=null&&e!=""?this.eGui.setAttribute(t,e):this.eGui.removeAttribute(t)}setupTooltip(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,i,n;if(this.genericTooltipFeature!=null)return;let s={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.genericTooltipFeature=this.createManagedBean(new Xn(s,(t=(e=this.ctrl).getTooltipShowDelayOverride)===null||t===void 0?void 0:t.call(e),(n=(i=this.ctrl).getTooltipHideDelayOverride)===null||n===void 0?void 0:n.call(i)),this.beans.context)}refreshToolTip(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)}getTooltipParams(){let e=this.ctrl,t=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,n=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:n,data:n?n.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>this.genericTooltipFeature.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){super.destroy()}};var $e=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Be=class{postConstruct(){this.doingMasterDetail=this.gridOptionsService.is("masterDetail"),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};$e([y("resizeObserverService")],Be.prototype,"resizeObserverService",void 0);$e([y("paginationProxy")],Be.prototype,"paginationProxy",void 0);$e([y("context")],Be.prototype,"context",void 0);$e([y("columnApi")],Be.prototype,"columnApi",void 0);$e([y("gridApi")],Be.prototype,"gridApi",void 0);$e([y("gridOptionsService")],Be.prototype,"gridOptionsService",void 0);$e([y("expressionService")],Be.prototype,"expressionService",void 0);$e([y("environment")],Be.prototype,"environment",void 0);$e([y("rowRenderer")],Be.prototype,"rowRenderer",void 0);$e([y("templateService")],Be.prototype,"templateService",void 0);$e([y("valueService")],Be.prototype,"valueService",void 0);$e([y("eventService")],Be.prototype,"eventService",void 0);$e([y("columnModel")],Be.prototype,"columnModel",void 0);$e([y("headerNavigationService")],Be.prototype,"headerNavigationService",void 0);$e([y("navigationService")],Be.prototype,"navigationService",void 0);$e([y("columnAnimationService")],Be.prototype,"columnAnimationService",void 0);$e([He("rangeService")],Be.prototype,"rangeService",void 0);$e([y("focusService")],Be.prototype,"focusService",void 0);$e([He("contextMenuFactory")],Be.prototype,"contextMenuFactory",void 0);$e([y("popupService")],Be.prototype,"popupService",void 0);$e([y("valueFormatterService")],Be.prototype,"valueFormatterService",void 0);$e([y("stylingService")],Be.prototype,"stylingService",void 0);$e([y("columnHoverService")],Be.prototype,"columnHoverService",void 0);$e([y("userComponentFactory")],Be.prototype,"userComponentFactory",void 0);$e([y("userComponentRegistry")],Be.prototype,"userComponentRegistry",void 0);$e([y("animationFrameService")],Be.prototype,"animationFrameService",void 0);$e([y("dragService")],Be.prototype,"dragService",void 0);$e([y("dragAndDropService")],Be.prototype,"dragAndDropService",void 0);$e([y("sortController")],Be.prototype,"sortController",void 0);$e([y("filterManager")],Be.prototype,"filterManager",void 0);$e([y("rowContainerHeightService")],Be.prototype,"rowContainerHeightService",void 0);$e([y("frameworkOverrides")],Be.prototype,"frameworkOverrides",void 0);$e([y("cellPositionUtils")],Be.prototype,"cellPositionUtils",void 0);$e([y("rowPositionUtils")],Be.prototype,"rowPositionUtils",void 0);$e([y("selectionService")],Be.prototype,"selectionService",void 0);$e([He("selectionHandleFactory")],Be.prototype,"selectionHandleFactory",void 0);$e([y("rowCssClassCalculator")],Be.prototype,"rowCssClassCalculator",void 0);$e([y("rowModel")],Be.prototype,"rowModel",void 0);$e([y("ctrlsService")],Be.prototype,"ctrlsService",void 0);$e([y("ctrlsFactory")],Be.prototype,"ctrlsFactory",void 0);$e([y("agStackComponentsRegistry")],Be.prototype,"agStackComponentsRegistry",void 0);$e([y("valueCache")],Be.prototype,"valueCache",void 0);$e([y("rowNodeEventThrottle")],Be.prototype,"rowNodeEventThrottle",void 0);$e([y("localeService")],Be.prototype,"localeService",void 0);$e([y("valueParserService")],Be.prototype,"valueParserService",void 0);$e([G],Be.prototype,"postConstruct",null);Be=$e([Y("beans")],Be);var nv=class extends Be{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!dr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:i,gridOptionsService:n}=this.beans,s=e.ctrlKey||e.metaKey;i&&s&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);let o=this.cellCtrl.createEvent(e,w.EVENT_CELL_CLICKED);t.dispatchEvent(o);let a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>a.onCellClicked(o),0),(n.is("singleClickEdit")||a.singleClickEdit)&&!n.is("suppressClickEdit")&&!(e.shiftKey&&i?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!tn()||bf("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let t=this.column.getColDef(),i=this.cellCtrl.createEvent(e,w.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),typeof t.onCellDoubleClicked=="function"&&window.setTimeout(()=>t.onCellDoubleClicked(i),0),!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:i,shiftKey:n}=e,s=e.target,{cellCtrl:o,beans:a}=this,{eventService:l,rangeService:c,focusService:d}=a;if(this.isRightClickInExistingRange(e))return;let u=c&&c.getCellRanges().length!=0;if(!n||!u){let h=Ni()&&!o.isEditing()&&!Nf(s);o.focusCell(h)}if(n&&u&&!d.isCellFocused(o.getCellPosition())){e.preventDefault();let h=d.getFocusedCell();if(h){let{column:p,rowIndex:f,rowPinned:g}=h,m=a.rowRenderer.getRowByPosition({rowIndex:f,rowPinned:g}),v=m?.getCellCtrl(p);v?.isEditing()&&v.stopEditing(),d.setFocusedCell({column:p,rowIndex:f,rowPinned:g,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(c){let h=this.cellCtrl.getCellPosition();if(n)c.extendLatestRangeToCell(h);else{let p=t||i;c.setRangeToCell(h,p)}}l.dispatchEvent(this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),n=e.button===2||e.ctrlKey&&this.beans.gridOptionsService.is("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return Js(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,w.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){}};var sv=class extends L{constructor(e,t,i,n,s){super(),this.cellCtrl=e,this.beans=t,this.rowNode=n,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case B.ENTER:this.onEnterKeyDown(e);break;case B.F2:this.onF2KeyDown(e);break;case B.ESCAPE:this.onEscapeKeyDown(e);break;case B.TAB:this.onTabKeyDown(e);break;case B.BACKSPACE:case B.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case B.DOWN:case B.UP:case B.RIGHT:case B.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:i,beans:n,rowNode:s}=this,{gridOptionsService:o,rangeService:a,eventService:l}=n;i.isEditing()||(l.dispatchEvent({type:w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),kx(e,o.is("enableCellEditingOnBackspace"))?a&&o.is("enableRangeSelection")?a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):i.isCellEditable()&&s.setDataValue(i.getColumn(),null,"cellClear"):i.startRowOrCellEdit(e,t),l.dispatchEvent({type:w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.is("enterNavigatesVertically")){let t=e.shiftKey?B.UP:B.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(B.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(B.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let n=e.key;n===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(n,e),e.preventDefault())}onSpaceKeyDown(e){let{gridOptionsService:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){let i=this.rowNode.isSelected(),n=!i;if(n||!t.is("suppressRowDeselection")){let s=this.beans.gridOptionsService.is("groupSelectsFiltered"),o=this.rowNode.setSelectedParams({newValue:n,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});i===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}};var dI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},hg=class extends oe{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(gt("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let i=()=>{try{let n=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",n),e.dataTransfer.setData("text/plain",n)}catch{}};if(t){let n={rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};t(n)}else i()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};dI([G],hg.prototype,"postConstruct",null);var uI="ag-cell",hI="ag-cell-auto-height",pI="ag-cell-normal-height",fI="ag-cell-focus",gI="ag-cell-first-right-pinned",mI="ag-cell-last-left-pinned",vI="ag-cell-not-inline-editing",CI="ag-column-hover",yI="ag-cell-wrap-text",xI=0,Jn=(()=>{class r extends L{constructor(t,i,n,s){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=t,this.rowNode=i,this.beans=n,this.rowCtrl=s,this.instanceId=t.getId()+"-"+xI++;let o=this.column.getColDef();this.colIdSanitised=Et(this.column.getId()),this.beans.gridOptionsService.is("suppressCellFocus")||(this.tabIndex=-1),this.isCellRenderer=o.cellRenderer!=null||o.cellRendererSelector!=null,this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!0)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new iv(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellPositionFeature)===null||i===void 0||i.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new rv(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellCustomStyleFeature)===null||i===void 0||i.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new nv(this,this.beans,this.column),this.addDestroyFunc(()=>{var i;(i=this.cellMouseListenerFeature)===null||i===void 0||i.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new sv(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var i;(i=this.cellKeyboardListenerFeature)===null||i===void 0||i.destroy(),this.cellKeyboardListenerFeature=null}),this.beans.rangeService&&this.beans.gridOptionsService.is("enableRangeSelection")&&(this.cellRangeFeature=new tv(this.beans,this),this.addDestroyFunc(()=>{var i;(i=this.cellRangeFeature)===null||i===void 0||i.destroy(),this.cellRangeFeature=null})),this.column.isTooltipEnabled()&&this.addTooltipFeature()}addTooltipFeature(){let i={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:()=>{let n=this.column.getColDef(),s=this.rowNode.data;if(n.tooltipField&&V(s))return Ba(s,n.tooltipField,this.column.isTooltipFieldContainsDots());let o=n.tooltipValueGetter;return o?o({location:"cell",api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted}):null},getValueFormatted:()=>this.valueFormatted};this.tooltipFeature=new Xa(i,this.beans),this.addDestroyFunc(()=>{var n;(n=this.tooltipFeature)===null||n===void 0||n.destroy(),this.tooltipFeature=null})}setComp(t,i,n,s,o){var a,l,c,d;this.cellComp=t,this.eGui=i,this.printLayout=s,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),n&&this.setupAutoHeight(n),this.setAriaColIndex(),(a=this.cellPositionFeature)===null||a===void 0||a.setComp(i),(l=this.cellCustomStyleFeature)===null||l===void 0||l.setComp(t),(c=this.tooltipFeature)===null||c===void 0||c.setComp(i),(d=this.cellKeyboardListenerFeature)===null||d===void 0||d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(u=>u()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(!this.column.isAutoHeight())return;let i=t.parentElement,n=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,s=l=>{if(this.editing||!this.isAlive())return;let{paddingTop:c,paddingBottom:d,borderBottomWidth:u,borderTopWidth:h}=jo(i),p=c+d+u+h,g=t.offsetHeight+p;if(l<5){let v=this.beans.gridOptionsService.getDocument(),C=!v||!v.contains(t),S=g==0;if(C||S){this.beans.frameworkOverrides.setTimeout(()=>s(l+1),0);return}}let m=Math.max(g,n);this.rowNode.setRowAutoHeight(m,this.column)},o=()=>s(0);o();let a=this.beans.resizeObserverService.observeResize(t,o);this.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getInstanceId(){return this.instanceId}getIncludeSelection(){return this.includeSelection}getIncludeRowDrag(){return this.includeRowDrag}getIncludeDndSource(){return this.includeDndSource}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}getIsCellRenderer(){return this.isCellRenderer}getValueToDisplay(){return this.valueFormatted!=null?this.valueFormatted:this.value}showValue(t=!1){let i=this.getValueToDisplay(),n;if(this.isCellRenderer){let s=this.createCellRendererParams();n=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(n,i,t),this.refreshHandle()}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){let t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),n=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),s=this.includeDndSource!=this.isIncludeControl(t.dndSource);return i||n||s}startEditing(t=null,i=!1,n=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,n)});return}let s=this.createCellEditorParams(t,i),o=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(o,s),l=a?.popupFromSelector!=null?a.popupFromSelector:!!o.cellEditorPopup,c=a?.popupPositionFromSelector!=null?a.popupPositionFromSelector:o.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(a,l,c);let d=this.createEvent(n,w.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(d)}setEditing(t){this.editing!==t&&(this.editing=t,this.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopRowEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(t){let i={newValueExists:!1};if(t)return i;let n=this.cellComp.getCellEditor();return!n||n.isCancelAfterEnd&&n.isCancelAfterEnd()?i:{newValue:n.getValue(),newValueExists:!0}}saveNewValue(t,i){if(i===t)return!1;this.suppressRefreshCell=!0;let n=this.rowNode.setDataValue(this.column,i,"edit");return this.suppressRefreshCell=!1,n}stopEditing(t=!1){if(!this.editing)return!1;let{newValue:i,newValueExists:n}=this.takeValueFromCellEditor(t),s=this.rowNode.getValueFromValueService(this.column),o=!1;return n&&(o=this.saveNewValue(s,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(s,i,!t&&!!o),o}dispatchEditingStoppedEvent(t,i,n){let s=Object.assign(Object.assign({},this.createEvent(null,w.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:i,valueChanged:n});this.beans.eventService.dispatchEvent(s)}createCellEditorParams(t,i){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:t,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:i,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}}createCellRendererParams(){return{value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,n,s,o)=>this.registerRowDragger(i,n,o)}}parseValue(t){return this.beans.valueParserService.parseValue(this.column,this.rowNode,t,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;let t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(){if(!this.editing)return;let t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}onCellChanged(t){if(!this.cellComp)return;t.column===this.column&&this.refreshCell({})}refreshCell(t){var i,n,s;if(this.suppressRefreshCell||this.editing||!this.cellComp)return;let o=this.column.getColDef(),a=t!=null&&!!t.newData,l=t!=null&&!!t.suppressFlash||!!o.suppressCellFlash,c=o.field==null&&o.valueGetter==null&&o.showRowGroup==null,d=t&&t.forceRefresh||c||a,u=this.updateAndFormatValue();if(d||u){this.showValue(a);let p=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!p&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),(i=this.cellCustomStyleFeature)===null||i===void 0||i.applyUserStyles(),(n=this.cellCustomStyleFeature)===null||n===void 0||n.applyClassesFromColDef()}this.refreshToolTip(),(s=this.cellCustomStyleFeature)===null||s===void 0||s.applyCellClassRules()}stopEditingAndFocus(t=!1,i=!1){this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit(i)}navigateAfterEdit(t){if(this.beans.gridOptionsService.is("enterNavigatesVerticallyAfterEdit")){let n=t?B.UP:B.DOWN;this.beans.navigationService.navigateToNextCell(null,n,this.getCellPosition(),!1)}}flashCell(t){let i=t&&t.flashDelay,n=t&&t.fadeDelay;this.animateCell("data-changed",i,n)}animateCell(t,i,n){var s,o;if(!this.cellComp)return;let a=`ag-cell-${t}`,l=`ag-cell-${t}-animation`,{gridOptionsService:c}=this.beans;i||(i=(s=c.getNum("cellFlashDelay"))!==null&&s!==void 0?s:500),V(n)||(n=(o=c.getNum("cellFadeDelay"))!==null&&o!==void 0?o:1e3),this.cellComp.addOrRemoveCssClass(a,!0),this.cellComp.addOrRemoveCssClass(l,!1),window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(a,!1),this.cellComp.addOrRemoveCssClass(l,!0),this.eGui.style.transition=`background-color ${n}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(l,!1),this.eGui.style.transition="")},n))},i)}onFlashCells(t){if(!this.cellComp)return;let i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){var i;return(i=this.callValueFormatter(t))!==null&&i!==void 0?i:t}callValueFormatter(t){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t=!1){let i=this.value,n=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!0:!this.valuesAreEqual(i,this.value)||this.valueFormatted!=n}valuesAreEqual(t,i){let n=this.column.getColDef();return n.equals?n.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}getValueFormatted(){return this.valueFormatted}addDomData(){let t=this.getGui();this.beans.gridOptionsService.setDomData(t,r.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gridOptionsService.setDomData(t,r.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return{type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex}}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)===null||i===void 0||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)===null||i===void 0||i.onKeyDown(t)}onMouseEvent(t,i){var n;(n=this.cellMouseListenerFeature)===null||n===void 0||n.onMouseEvent(t,i)}getGui(){return this.eGui}refreshToolTip(){var t;(t=this.tooltipFeature)===null||t===void 0||t.refreshToolTip()}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)===null||t===void 0||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&this.setAriaColIndex()}setAriaColIndex(){let t=this.beans.columnModel.getAriaColumnIndex(this.column);Mf(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)===null||t===void 0?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}getBeans(){return this.beans}isPrintLayout(){return this.printLayout}appendChild(t){this.eGui.appendChild(t)}refreshHandle(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){this.cellComp&&(this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i))}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(gI,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(mI,t)}onCellFocused(t){if(this.beans.gridOptionsService.is("suppressCellFocus"))return;let i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(fI,i),i&&t&&t.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!t.preventScrollOnBrowserFocus});let n=this.beans.gridOptionsService.get("editType")==="fullRow";!i&&!n&&this.editing&&this.stopRowOrCellEdit()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Br(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(uI,!0),this.cellComp.addOrRemoveCssClass(vI,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(hI,t),this.cellComp.addOrRemoveCssClass(pI,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gridOptionsService.is("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(CI,t)}onColDefChanged(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(yI,t)}dispatchCellContextMenuEvent(t){let i=this.column.getColDef(),n=this.createEvent(t,w.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),i.onCellContextMenu&&window.setTimeout(()=>i.onCellContextMenu(n),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new $a;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new hg(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}let s=this.createRowDragComp(t,i,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(t,i,n){let s=this.beans.gridOptionsService.is("pagination"),o=this.beans.gridOptionsService.is("rowDragManaged"),a=this.beans.gridOptionsService.isRowModelType("clientSide");if(o){if(!a){Ne(()=>console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model"),"CellComp.addRowDragging");return}if(s){Ne(()=>console.warn("AG Grid: managed row dragging is not possible when doing pagination"),"CellComp.addRowDragging");return}}let l=new _s(()=>this.value,this.rowNode,this.column,t,i,n);return this.beans.context.createBean(l),l}}return r.DOM_DATA_KEY_CELL_CTRL="cellCtrl",r})();var es=function(r){return r.Normal="Normal",r.FullWidth="FullWidth",r.FullWidthLoading="FullWidthLoading",r.FullWidthGroup="FullWidthGroup",r.FullWidthDetail="FullWidthDetail",r}(es||{}),SI=0,Fs=(()=>{class r extends L{constructor(t,i,n,s,o){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gridOptionsService=i.gridOptionsService,this.rowNode=t,this.paginationPage=i.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=s,this.printLayout=o,this.instanceId=t.id+"-"+SI++,this.rowId=Et(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gridOptionsService.is("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Et(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getBeans(){return this.beans}getInstanceId(){return this.instanceId}setComp(t,i,n){let s={rowComp:t,element:i,containerType:n};this.allRowGuis.push(s),n===ki.LEFT?this.leftGui=s:n===ki.RIGHT?this.rightGui=s:n===ki.FULL_WIDTH?this.fullWidthGui=s:this.centerGui=s,this.initialiseRowComp(s),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){switch(this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),t){case ki.LEFT:this.leftGui=void 0;break;case ki.RIGHT:this.rightGui=void 0;break;case ki.FULL_WIDTH:this.fullWidthGui=void 0;break;case ki.CENTER:this.centerGui=void 0;break;default:}}isCacheable(){return this.rowType===es.FullWidthDetail&&this.gridOptionsService.is("keepDetailRows")}setCached(t){let i=t?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=i)}initialiseRowComp(t){let i=this.gridOptionsService;this.listenOnDomOrder(t),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let n=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(o=>n.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Wr(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),i.setDomData(t.element,r.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>i.setDomData(t.element,r.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),i.is("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=Et(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:i}=t;this.slideInAnimation[i]&&(O0(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(O0(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(this.gridOptionsService.is("enableRangeSelection")){Ne(()=>{console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");return}let i=this.beans.localeService.getLocaleTextFunc(),n=new _s(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0);this.createManagedBean(n,this.beans.context)}setupFullWidth(t){let i=this.getPinnedForContainer(t.containerType),n=this.createFullWidthParams(t.element,i);if(this.rowType==es.FullWidthDetail&&!De.__assertRegistered(he.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let s;switch(this.rowType){case es.FullWidthDetail:s=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(n);break;case es.FullWidthGroup:s=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(n);break;case es.FullWidthLoading:s=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(n);break;default:s=this.beans.userComponentFactory.getFullWidthCellRendererDetails(n);break}t.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderer(){var t,i;return(i=(t=this.fullWidthGui)===null||t===void 0?void 0:t.rowComp)===null||i===void 0?void 0:i.getFullWidthCellRenderer()}getCellElement(t){let i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gridOptionsService.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),i=!!this.centerGui,n=!!this.rightGui||!this.beans.columnModel.isPinningRight();return t&&i&&n}setRowType(){let t=this.rowNode.stub,i=this.rowNode.isFullWidthCell(),n=this.beans.doingMasterDetail&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),a=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(s);t?this.rowType=es.FullWidthLoading:n?this.rowType=es.FullWidthDetail:i?this.rowType=es.FullWidth:a?this.rowType=es.FullWidthGroup:this.rowType=es.Normal}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,n=null){let s={list:[],map:{}},o=(a,l)=>{s.list.push(l),s.map[a]=l};return i.forEach(a=>{let l=a.getInstanceId(),c=t.map[l];c||(c=new Jn(a,this.rowNode,this.beans,this)),o(l,c)}),t.list.forEach(a=>{if(s.map[a.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(a,n)){o(a.getColumn().getInstanceId(),a);return}a.destroy()}),s}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{let n=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(n,t)})}getCellCtrlsForContainer(t){switch(t){case ki.LEFT:return this.leftCellCtrls.list;case ki.RIGHT:return this.rightCellCtrls.list;case ki.FULL_WIDTH:return[];case ki.CENTER:return this.centerCellCtrls.list;default:let i=t;throw new Error(`Unhandled case: ${i}`)}}createAllCellCtrls(){let t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let n=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");let s=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;let a=t.isEditing(),l=this.beans.focusService.isCellFocused(t.getCellPosition());if(a||l){let d=t.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(d)>=0)}return!0}getDomOrder(){return this.gridOptionsService.is("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")}listenOnDomOrder(t){let i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)}setAnimateFlags(t){if(this.isSticky()||!t)return;let i=V(this.rowNode.oldRowTop),n=this.beans.columnModel.isPinningLeft(),s=this.beans.columnModel.isPinningRight();if(i){if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}stopRowEditing(t){this.stopEditing(t)}isFullWidth(){return this.rowType!==es.Normal}getRowType(){return this.rowType}refreshFullWidth(){let t=(l,c)=>{if(!l)return!0;let d=l.rowComp.getFullWidthCellRenderer();if(!d||!d.refresh)return!1;let u=this.createFullWidthParams(l.element,c);return d.refresh(u)},i=t(this.fullWidthGui,null),n=t(this.centerGui,null),s=t(this.leftGui,"left"),o=t(this.rightGui,"right");return i&&n&&s&&o}addListeners(){this.addManagedListener(this.rowNode,Ge.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));let t=this.beans.eventService;this.addManagedListener(t,w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(t,w.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(t,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(t,w.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(t,w.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(t,w.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(t,w.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(t,w.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(t,w.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()}onColumnMoved(){this.updateColumnLists()}addListenersForCellComps(){this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())}),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}onRowNodeCellChanged(){this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{let n=t===Rs.Above,s=t===Rs.Below;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}onRowNodeDraggingChanged(){this.postProcessRowDragging()}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-group",t),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),Wr(n.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Br(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){let i=this.allRowGuis.find(c=>c.element.contains(t.target));if(!((i?i.element:null)===t.target))return;let o=this.rowNode,a=this.beans.focusService.getFocusedCell(),l={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:a&&a.column};this.beans.navigationService.navigateToNextCell(t,t.key,l,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||dr(t))return;let i=this.allRowGuis.find(a=>a.element.contains(t.target)),n=i?i.element:null,s=n===t.target,o=null;s||(o=this.beans.focusService.findNextFocusableElement(n,!1,t.shiftKey)),(this.isFullWidth()&&s||!o)&&this.beans.navigationService.onTabKeyDown(this,t)}onFullWidthRowFocused(t){var i;let n=this.rowNode,s=t?this.isFullWidth()&&t.rowIndex===n.rowIndex&&t.rowPinned==n.rowPinned:!1,o=this.fullWidthGui?this.fullWidthGui.element:(i=this.centerGui)===null||i===void 0?void 0:i.element;o&&(o.classList.toggle("ag-full-width-focus",s),s&&o.focus({preventScroll:!0}))}refreshCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),this.updateColumnLists()}removeCellCtrl(t,i){let n={list:[],map:{}};return t.list.forEach(s=>{s!==i&&(n.list.push(s),n.map[s.getInstanceId()]=s)}),n}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return{type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:i}}createRowEventWithSource(t,i){let n=this.createRowEvent(t,i);return n.source=this,n}onRowDblClick(t){if(dr(t))return;let i=this.createRowEventWithSource(w.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(i)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Js(t.target,"ag-row-drag",3),!this.isFullWidth())return;let i=this.rowNode,n=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:n.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}onRowClick(t){if(dr(t)||this.lastMouseDownOnDragger)return;let n=this.createRowEventWithSource(w.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(n);let s=t.ctrlKey||t.metaKey,o=t.shiftKey;if(this.gridOptionsService.is("groupSelectsChildren")&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.is("suppressRowClickSelection"))return;let l=this.gridOptionsService.is("rowMultiSelectWithClick"),c=!this.gridOptionsService.is("suppressRowDeselection"),d="rowClicked";if(this.rowNode.isSelected())l?this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):s?c&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:t,source:d});else{let u=l?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:o,event:t,source:d})}}setupDetailRowAutoHeight(t){if(this.rowType!==es.FullWidthDetail||!this.gridOptionsService.is("detailRowAutoHeight"))return;let i=()=>{let s=t.clientHeight;if(s!=null&&s>0){let o=()=>{this.rowNode.setRowHeight(s),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};this.beans.frameworkOverrides.setTimeout(o,0)}},n=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(n),i()}createFullWidthParams(t,i){return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,o,a,l)=>this.addFullWidthRowDragging(s,o,a,l)}}addFullWidthRowDragging(t,i,n="",s){if(!this.isFullWidth())return;let o=new _s(()=>n,this.rowNode,void 0,t,i,s);this.createManagedBean(o,this.beans.context)}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let i="ag-row-level-"+t,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(i,!0),s.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}onModelUpdated(){this.refreshFirstAndLastRowStyles()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){if(this.stoppingRowEdit)return;let i=this.getAllCellCtrls(),n=this.editingRow;this.stoppingRowEdit=!0;let s=!1;for(let o of i){let a=o.stopEditing(t);n&&!t&&!s&&a&&(s=!0)}if(s){let o=this.createRowEvent(w.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(o)}n&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(t){this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-editing",t));let i=t?this.createRowEvent(w.EVENT_ROW_EDITING_STARTED):this.createRowEvent(w.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)}startRowEditing(t=null,i=null,n=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((o,a)=>{let l=a===i;return l?a.startEditing(t,l,n):a.startEditing(null,l,n),o?!0:a.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t===ki.LEFT?"left":t===ki.RIGHT?"right":null}getInitialRowClasses(t){let i=this.getPinnedForContainer(t),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)}processStylesFromGridOptions(){let t=this.gridOptionsService.get("rowStyle");if(t&&typeof t=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let i=this.gridOptionsService.getCallback("getRowStyle"),n;if(i){let s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};n=i(s)}return n||t?Object.assign({},t,n):this.emptyStyle}onRowSelected(t){let i=!!this.rowNode.isSelected();this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-selected",i),ws(n.element,i?!0:void 0);let s=this.createAriaLabel();Er(n.element,s??"")})}createAriaLabel(){let t=this.rowNode.isSelected();return t&&this.gridOptionsService.is("suppressRowDeselection")?void 0:this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`)}isUseAnimationFrameForCreate(){return this.useAnimationFrameForCreate}addHoverFunctionality(t){this.active&&(this.addManagedListener(t,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gridOptionsService.is("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_LEAVE,()=>{t.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(t){let n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.applyPaginationOffset(n.top,!0)-100,o=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(s,t),o)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let i=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),o=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,a=o?`${Math.min(n,o)-2}px`:void 0;this.forEachGui(t,l=>{l.element.style.height=`${i}px`,a&&l.element.style.setProperty("--ag-line-height",a)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);let t=this.createRowEvent(w.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}setupRemoveAnimation(){if(this.isSticky())return;if(this.rowNode.rowTop!=null){let i=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(i)}else this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0))}destroySecondPass(){this.allRowGuis.length=0;let t=i=>(i.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocused(){this.onCellFocusChanged()}onCellFocusCleared(){this.onCellFocusChanged()}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let n=this.beans.paginationProxy.getPixelOffset();return t+n*(i?1:-1)}setRowTop(t){if(!this.printLayout&&V(t)){let i=this.applyPaginationOffset(t),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(o)}}getInitialRowTop(t){return this.gridOptionsService.is("suppressRowTransform")?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.gridOptionsService.is("suppressRowTransform")?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let i;if(this.isSticky())i=this.rowNode.stickyRowTop;else{let n=this.slideInAnimation[t]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,s=this.applyPaginationOffset(n);i=this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s)}return i+"px"}setRowTopStyle(t){let i=this.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach(n=>i?n.rowComp.setTop(t):n.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(n=>{n.getColumn()==t&&(i=n)}),i!=null||this.getAllCellCtrls().forEach(n=>{n.getColSpanningList().indexOf(t)>=0&&(i=n)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let i=this.rowNode.getRowIndexString(),n=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),s=this.rowNode.rowIndex%2===0,o=n+this.rowNode.rowIndex+1;this.forEachGui(t,a=>{a.rowComp.setRowIndex(i),a.rowComp.addOrRemoveCssClass("ag-row-even",s),a.rowComp.addOrRemoveCssClass("ag-row-odd",!s),If(a.element,o)})}getPinnedLeftRowElement(){return this.leftGui?this.leftGui.element:void 0}getPinnedRightRowElement(){return this.rightGui?this.rightGui.element:void 0}getBodyRowElement(){return this.centerGui?this.centerGui.element:void 0}getFullWidthRowElement(){return this.fullWidthGui?this.fullWidthGui.element:void 0}}return r.DOM_DATA_KEY_ROW_CTRL="renderedRow",r})();var ts=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ar=class extends L{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",bf("touchstart")?"touchstart":"mousedown"].forEach(i=>{let n=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,n)})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||dr(t))return;let i=this.getRowForEvent(t),n=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,null,i,n):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!tn())return;let e=new $i(this.element),t=i=>{let n=this.getRowForEvent(i.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(null,i.touchEvent,n,s)};this.addManagedListener(e,$i.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let i=this.gridOptionsService.getDomData(t,Fs.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,n){let s=i?i.getRowNode():null,o=n?n.getColumn():null,a=null;if(o){let d=e||t;n.dispatchCellContextMenuEvent(d),a=this.valueService.getValue(o,s)}let l=this.ctrlsService.getGridBodyCtrl(),c=n?n.getGui():l.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,t,s,o,a,c)}getControlsForEventTarget(e){return{cellCtrl:gh(this.gridOptionsService,e,Jn.DOM_DATA_KEY_CELL_CTRL),rowCtrl:gh(this.gridOptionsService,e,Fs.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){let n=e.getRowNode(),s=e.getColumn(),o=e.isEditing();if(!bh(this.gridOptionsService,i,n,s,o)&&t==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),Ed(i)&&e.processCharacter(i)),t==="keydown"){let l=e.createEvent(i,w.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(l)}}processFullWidthRowKeyboardEvent(e,t,i){let n=e.getRowNode(),s=this.focusService.getFocusedCell(),o=s&&s.column;if(!bh(this.gridOptionsService,i,n,o,!1)){let l=i.key;if(t==="keydown")switch(l){case B.PAGE_HOME:case B.PAGE_END:case B.PAGE_UP:case B.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case B.UP:case B.DOWN:e.onKeyboardNavigate(i);break;case B.TAB:e.onTabKeyDown(i);break;default:}}if(t==="keydown"){let l=e.createRowEvent(w.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(l)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let i=Nx(e);if(i===B.A)return this.onCtrlAndA(e);if(i===B.C)return this.onCtrlAndC(e);if(i===B.D)return this.onCtrlAndD(e);if(i===B.V)return this.onCtrlAndV(e);if(i===B.X)return this.onCtrlAndX(e);if(i===B.Y)return this.onCtrlAndY();if(i===B.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,paginationProxy:i,rangeService:n}=this;if(n&&i.isRowsToRender()){let[s,o]=[t.isEmpty("top"),t.isEmpty("bottom")],a=s?null:"top",l,c;o?(l=null,c=this.paginationProxy.getRowCount()-1):(l="bottom",c=t.getPinnedBottomRowData().length-1);let d=this.columnModel.getAllDisplayedColumns();if(sr(d))return;n.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:c,rowEndPinned:l,columnStart:d[0],columnEnd:je(d)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||this.gridOptionsService.is("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gridOptionsService.is("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};ts([y("mouseEventService")],Ar.prototype,"mouseEventService",void 0);ts([y("valueService")],Ar.prototype,"valueService",void 0);ts([He("contextMenuFactory")],Ar.prototype,"contextMenuFactory",void 0);ts([y("ctrlsService")],Ar.prototype,"ctrlsService",void 0);ts([y("navigationService")],Ar.prototype,"navigationService",void 0);ts([y("focusService")],Ar.prototype,"focusService",void 0);ts([y("undoRedoService")],Ar.prototype,"undoRedoService",void 0);ts([y("columnModel")],Ar.prototype,"columnModel",void 0);ts([y("paginationProxy")],Ar.prototype,"paginationProxy",void 0);ts([y("pinnedRowModel")],Ar.prototype,"pinnedRowModel",void 0);ts([He("rangeService")],Ar.prototype,"rangeService",void 0);ts([He("clipboardService")],Ar.prototype,"clipboardService",void 0);ts([G],Ar.prototype,"postConstruct",null);var ov=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rc=class extends L{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.listenForResize()}),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))}listenForResize(){let e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=Va(e);if(this.bodyHeight!==t){this.bodyHeight=t;let i={type:w.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}};ov([y("ctrlsService")],rc.prototype,"ctrlsService",void 0);ov([y("columnModel")],rc.prototype,"columnModel",void 0);ov([y("scrollVisibleService")],rc.prototype,"scrollVisibleService",void 0);ov([G],rc.prototype,"postConstruct",null);var b_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Mh=class extends L{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;ke(this.element,t),ur(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};b_([y("pinnedWidthService")],Mh.prototype,"pinnedWidthService",void 0);b_([G],Mh.prototype,"postConstruct",null);var E_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Lh=class extends L{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;ke(this.element,t),ur(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};E_([y("pinnedWidthService")],Lh.prototype,"pinnedWidthService",void 0);E_([G],Lh.prototype,"postConstruct",null);var __=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nc=class extends L{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}};__([y("rowContainerHeightService")],nc.prototype,"maxDivHeightScaler",void 0);__([G],nc.prototype,"postConstruct",null);var lS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ud=class extends L{constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.gridOptionsService.is("enableRangeSelection")||Ce(this.rangeService))return;let e={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(e),this.addDestroyFunc(()=>this.dragService.removeDragSource(e))}};lS([He("rangeService")],Ud.prototype,"rangeService",void 0);lS([y("dragService")],Ud.prototype,"dragService",void 0);lS([G],Ud.prototype,"postConstruct",null);var cS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},no=class extends L{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){let{columnModel:e}=this,t=this.gridOptionsService.isDomLayout("print"),i=e.getBodyContainerWidth(),n=e.getDisplayedColumnsLeftWidth(),s=e.getDisplayedColumnsRightWidth(),o;t?o=i+n+s:(o=i,this.addSpacer&&(this.gridOptionsService.is("enableRtl")?n:s)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(o+=this.gridOptionsService.getScrollbarWidth())),this.callback(o)}};cS([y("columnModel")],no.prototype,"columnModel",void 0);cS([y("scrollVisibleService")],no.prototype,"scrollVisibleService",void 0);cS([G],no.prototype,"postConstruct",null);var sc=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},X=function(r){return r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r.TOP_LEFT="topLeft",r.TOP_RIGHT="topRight",r.TOP_CENTER="topCenter",r.TOP_FULL_WIDTH="topFullWidth",r.STICKY_TOP_LEFT="stickyTopLeft",r.STICKY_TOP_RIGHT="stickyTopRight",r.STICKY_TOP_CENTER="stickyTopCenter",r.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",r.BOTTOM_LEFT="bottomLeft",r.BOTTOM_RIGHT="bottomRight",r.BOTTOM_CENTER="bottomCenter",r.BOTTOM_FULL_WIDTH="bottomFullWidth",r}(X||{}),ki=function(r){return r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r}(ki||{});function dS(r){switch(r){case X.CENTER:case X.TOP_CENTER:case X.STICKY_TOP_CENTER:case X.BOTTOM_CENTER:return ki.CENTER;case X.LEFT:case X.TOP_LEFT:case X.STICKY_TOP_LEFT:case X.BOTTOM_LEFT:return ki.LEFT;case X.RIGHT:case X.TOP_RIGHT:case X.STICKY_TOP_RIGHT:case X.BOTTOM_RIGHT:return ki.RIGHT;case X.FULL_WIDTH:case X.TOP_FULL_WIDTH:case X.STICKY_TOP_FULL_WIDTH:case X.BOTTOM_FULL_WIDTH:return ki.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}var wI=Uo([[X.CENTER,"ag-center-cols-container"],[X.LEFT,"ag-pinned-left-cols-container"],[X.RIGHT,"ag-pinned-right-cols-container"],[X.FULL_WIDTH,"ag-full-width-container"],[X.TOP_CENTER,"ag-floating-top-container"],[X.TOP_LEFT,"ag-pinned-left-floating-top"],[X.TOP_RIGHT,"ag-pinned-right-floating-top"],[X.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[X.STICKY_TOP_CENTER,"ag-sticky-top-container"],[X.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[X.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[X.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[X.BOTTOM_CENTER,"ag-floating-bottom-container"],[X.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[X.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[X.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),bI=Uo([[X.CENTER,"ag-center-cols-viewport"],[X.TOP_CENTER,"ag-floating-top-viewport"],[X.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[X.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),Tn=class r extends L{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name===X.TOP_FULL_WIDTH||this.name===X.STICKY_TOP_FULL_WIDTH||this.name===X.BOTTOM_FULL_WIDTH||this.name===X.FULL_WIDTH}static getRowContainerCssClasses(e){let t=wI.get(e),i=bI.get(e);return{container:t,viewport:i}}static getPinned(e){switch(e){case X.BOTTOM_LEFT:case X.TOP_LEFT:case X.STICKY_TOP_LEFT:case X.LEFT:return"left";case X.BOTTOM_RIGHT:case X.TOP_RIGHT:case X.STICKY_TOP_RIGHT:case X.RIGHT:return"right";default:return null}}postConstruct(){this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([X.CENTER],()=>this.viewportSizeFeature=this.createManagedBean(new rc(this)))}registerWithCtrlsService(){switch(this.name){case X.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case X.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case X.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case X.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case X.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case X.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case X.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case X.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case X.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case X.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case X.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case X.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new Ar(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();let n=[X.TOP_CENTER,X.TOP_LEFT,X.TOP_RIGHT],s=[X.STICKY_TOP_CENTER,X.STICKY_TOP_LEFT,X.STICKY_TOP_RIGHT],o=[X.BOTTOM_CENTER,X.BOTTOM_LEFT,X.BOTTOM_RIGHT],a=[X.CENTER,X.LEFT,X.RIGHT],l=[...n,...o,...a,...s],c=[X.CENTER,X.LEFT,X.RIGHT,X.FULL_WIDTH],d=[X.CENTER,X.TOP_CENTER,X.STICKY_TOP_CENTER,X.BOTTOM_CENTER],u=[X.LEFT,X.BOTTOM_LEFT,X.TOP_LEFT,X.STICKY_TOP_LEFT],h=[X.RIGHT,X.BOTTOM_RIGHT,X.TOP_RIGHT,X.STICKY_TOP_RIGHT];this.forContainers(u,()=>{this.pinnedWidthFeature=this.createManagedBean(new Mh(this.eContainer)),this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new Lh(this.eContainer)),this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(c,()=>this.createManagedBean(new nc(this.eContainer,this.name===X.CENTER?i:void 0))),this.forContainers(l,()=>this.createManagedBean(new Ud(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new no(p=>this.comp.setContainerWidth(`${p}px`)))),Ul()&&(this.forContainers([X.CENTER],()=>{let p=this.enableRtl?w.EVENT_LEFT_PINNED_WIDTH_CHANGED:w.EVENT_RIGHT_PINNED_WIDTH_CHANGED;this.addManagedListener(this.eventService,p,()=>this.refreshPaddingForFakeScrollbar())}),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()}refreshPaddingForFakeScrollbar(){let{enableRtl:e,columnModel:t,eContainer:i}=this,n=e?X.LEFT:X.RIGHT;this.forContainers([X.CENTER,n],()=>{let s=t.getContainerWidth(n),o=e?"marginLeft":"marginRight";i.style[o]=s?"16px":"0px"})}addListeners(){this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if([X.STICKY_TOP_CENTER,X.STICKY_TOP_LEFT,X.STICKY_TOP_RIGHT,X.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let i=()=>{let n=this.gridOptionsService.is("ensureDomOrder"),s=this.gridOptionsService.isDomLayout("print");this.comp.setDomOrder(n||s)};this.addManagedPropertyListener("domLayout",i),i()}stopHScrollOnPinnedRows(){this.forContainers([X.TOP_CENTER,X.STICKY_TOP_CENTER,X.BOTTOM_CENTER],()=>{let e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers([X.CENTER],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers([X.CENTER],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(t,i,e)}getCenterWidth(){return bd(this.eViewport)}getCenterViewportScrollLeft(){return Kl(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportVisible(){return Sn(this.eViewport)}getViewportScrollLeft(){return Kl(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||Ax(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){$l(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!r.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged()),Ul()&&this.refreshPaddingForFakeScrollbar()}onDisplayedRowsChanged(e=!1){if(this.visible){let t=this.gridOptionsService.isDomLayout("print"),i=s=>{let o=s.isFullWidth(),a=this.embedFullWidthRows||t;return this.isFullWithContainer?!a&&o:a||!o},n=this.getRowCtrls().filter(i);this.comp.setRowCtrls(n,e)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)}getRowCtrls(){switch(this.name){case X.TOP_CENTER:case X.TOP_LEFT:case X.TOP_RIGHT:case X.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case X.STICKY_TOP_CENTER:case X.STICKY_TOP_LEFT:case X.STICKY_TOP_RIGHT:case X.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case X.BOTTOM_CENTER:case X.BOTTOM_LEFT:case X.BOTTOM_RIGHT:case X.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};sc([y("scrollVisibleService")],Tn.prototype,"scrollVisibleService",void 0);sc([y("dragService")],Tn.prototype,"dragService",void 0);sc([y("ctrlsService")],Tn.prototype,"ctrlsService",void 0);sc([y("columnModel")],Tn.prototype,"columnModel",void 0);sc([y("resizeObserverService")],Tn.prototype,"resizeObserverService",void 0);sc([y("animationFrameService")],Tn.prototype,"animationFrameService",void 0);sc([y("rowRenderer")],Tn.prototype,"rowRenderer",void 0);sc([G],Tn.prototype,"postConstruct",null);var qa=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},EI=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="${X.TOP_LEFT}"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="${X.TOP_CENTER}"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="${X.TOP_RIGHT}"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="${X.TOP_FULL_WIDTH}"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="${X.LEFT}"></ag-row-container>
                <ag-row-container ref="centerContainer" name="${X.CENTER}"></ag-row-container>
                <ag-row-container ref="rightContainer" name="${X.RIGHT}"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="${X.FULL_WIDTH}"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="${X.STICKY_TOP_LEFT}"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="${X.STICKY_TOP_CENTER}"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="${X.STICKY_TOP_RIGHT}"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="${X.STICKY_TOP_FULL_WIDTH}"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="${X.BOTTOM_LEFT}"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="${X.BOTTOM_CENTER}"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="${X.BOTTOM_RIGHT}"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="${X.BOTTOM_FULL_WIDTH}"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Rn=class extends oe{constructor(){super(EI)}init(){let e=(i,n)=>{let s=`${i}px`;n.style.minHeight=s,n.style.height=s},t={setRowAnimationCssOnBodyViewport:(i,n)=>this.setRowAnimationCssOnBodyViewport(i,n),setColumnCount:i=>ix(this.getGui(),i),setRowCount:i=>tx(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setColumnMovingCss:(i,n)=>this.addOrRemoveCssClass(i,n),updateLayoutClasses:(i,n)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle(ci.AUTO_HEIGHT,n.autoHeight),o.toggle(ci.NORMAL,n.normal),o.toggle(ci.PRINT,n.print)}),this.addOrRemoveCssClass(ci.AUTO_HEIGHT,n.autoHeight),this.addOrRemoveCssClass(ci.NORMAL,n.normal),this.addOrRemoveCssClass(ci.PRINT,n.print)},setAlwaysVerticalScrollClass:(i,n)=>this.eBodyViewport.classList.toggle(aS,n),registerBodyViewportResizeListener:i=>{let n=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>n())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,n)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(i,n))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new Yi),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||this.gridOptionsService.get("rowSelection")==="multiple")&&ex(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let i=this.eBodyViewport.classList;i.toggle(Hd.ANIMATION_ON,t),i.toggle(Hd.ANIMATION_OFF,!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};qa([y("resizeObserverService")],Rn.prototype,"resizeObserverService",void 0);qa([He("rangeService")],Rn.prototype,"rangeService",void 0);qa([Z("eBodyViewport")],Rn.prototype,"eBodyViewport",void 0);qa([Z("eStickyTop")],Rn.prototype,"eStickyTop",void 0);qa([Z("eTop")],Rn.prototype,"eTop",void 0);qa([Z("eBottom")],Rn.prototype,"eBottom",void 0);qa([Z("gridHeader")],Rn.prototype,"headerRootComp",void 0);qa([Z("eBody")],Rn.prototype,"eBody",void 0);qa([G],Rn.prototype,"init",null);var uS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zd=class extends L{postConstruct(){this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)}updateImpl(){let e=this.ctrlsService.getCenterRowContainerCtrl();if(!e)return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;let i={type:w.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};uS([y("ctrlsService")],zd.prototype,"ctrlsService",void 0);uS([G],zd.prototype,"postConstruct",null);zd=uS([Y("scrollVisibleService")],zd);var T_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pg,oc=pg=class extends L{constructor(){super(...arguments),this.gridInstanceId=pg.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[pg.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return gh(this.gridOptionsService,e.target,Jn.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){let i=t[pg.GRID_DOM_KEY];if(V(i))return i===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(e){let t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){let t=this.gridOptionsService.isDomLayout("normal"),i=e,n,s;if(i.clientX!=null||i.clientY!=null?(n=i.clientX,s=i.clientY):(n=i.x,s=i.y),t){let o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();n+=l.left,s+=a.top}return{x:n,y:s}}};oc.gridInstanceSequence=new Yn;oc.GRID_DOM_KEY="__ag_grid_instance";T_([y("ctrlsService")],oc.prototype,"ctrlsService",void 0);oc=pg=T_([Y("mouseEventService")],oc);var An=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fr=class extends L{constructor(){super(),this.onPageDown=F0(this.onPageDown,100),this.onPageUp=F0(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let i=e.key,n=e.altKey,s=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e),l=!1;switch(i){case B.PAGE_HOME:case B.PAGE_END:!s&&!n&&(this.onHomeOrEndKey(i),l=!0);break;case B.LEFT:case B.RIGHT:case B.UP:case B.DOWN:if(!a)return!1;s&&!n&&!o&&(this.onCtrlUpDownLeftRight(i,a),l=!0);break;case B.PAGE_DOWN:case B.PAGE_UP:!s&&!n&&(l=this.handlePageUpDown(i,a,t));break}return l&&e.preventDefault(),l}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===B.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:s,focusColumn:o}=e;if(V(n)&&!n.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(n),V(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){let a={rowIndex:s,rowPinned:null,column:o};this.rangeService.setRangeToCell(a)}}onPageDown(e){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.getViewportHeight(),s=this.paginationProxy.getPixelOffset(),o=i.top+n,a=this.paginationProxy.getRowIndexAtPixel(o+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a):this.navigateToNextPage(e,a)}onPageUp(e){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.paginationProxy.getPixelOffset(),s=i.top,o=this.paginationProxy.getRowIndexAtPixel(s+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,i=!1){let n=this.getViewportHeight(),s=this.paginationProxy.getPageFirstRow(),o=this.paginationProxy.getPageLastRow(),a=this.paginationProxy.getPixelOffset(),l=this.paginationProxy.getRow(e.rowIndex),c=i?l?.rowHeight-n-a:n-a,d=l?.rowTop+c,u=this.paginationProxy.getRowIndexAtPixel(d+a);if(u===e.rowIndex){let p=i?-1:1;t=u=e.rowIndex+p}let h;i?(h="bottom",u<s&&(u=s),t<s&&(t=s)):(h="top",u>o&&(u=o),t>o&&(t=o)),this.isRowTallerThanView(u)&&(t=u,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){var i;let n=t?-1:1,s=this.getViewportHeight(),o=this.paginationProxy.getPageLastRow(),a=0,l=e.rowIndex;for(;l>=0&&l<=o;){let c=this.paginationProxy.getRow(l);if(c){let d=(i=c.rowHeight)!==null&&i!==void 0?i:0;if(a+d>s)break;a+=d}l+=n}return Math.max(0,Math.min(l,o))}getViewportHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.gridOptionsService.getScrollbarWidth(),n=t.bottom-t.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){let t=this.paginationProxy.getRow(e);if(!t)return!1;let i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:n,column:s}=i;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onHomeOrEndKey(e){let t=e===B.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),n=t?i[0]:je(i),s=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onTabKeyDown(e,t){let i=t.shiftKey;if(this.tabToNextCellCommon(e,i,t)){t.preventDefault();return}if(i){let{rowIndex:s,rowPinned:o}=e.getRowPosition();(o?s===0:s===this.paginationProxy.getPageFirstRow())&&(this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Jn&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&t.preventDefault()}tabToNextCell(e,t){let i=this.focusService.getFocusedCell();if(!i)return!1;let n=this.getCellByPosition(i);return!n&&(n=this.rowRenderer.getRowByPosition(i),!n||!n.isFullWidth())?!1:this.tabToNextCellCommon(n,e,t)}tabToNextCellCommon(e,t,i){let n=e.isEditing();if(!n&&e instanceof Jn){let a=e.getRowCtrl();a&&(n=a.isEditing())}let s;return n?this.gridOptionsService.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,t,i):s=this.moveToNextEditingCell(e,t,i):s=this.moveToNextCellNotEditing(e,t),s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){let n=e.getCellPosition();e.getGui().focus(),e.stopEditing();let s=this.findNextCellToFocusOn(n,t,!0);return s==null?!1:(s.startEditing(null,!0,i),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){let n=e.getCellPosition(),s=this.findNextCellToFocusOn(n,t,!0);if(s==null)return!1;let o=s.getCellPosition(),a=this.isCellEditable(n),l=this.isCellEditable(o),c=o&&n.rowIndex===o.rowIndex&&n.rowPinned===o.rowPinned;return a&&e.setFocusOutOnEditor(),c||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,i)),l?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let i=this.columnModel.getAllDisplayedColumns(),n;e instanceof Fs?n=Object.assign(Object.assign({},e.getRowPosition()),{column:t?i[0]:je(i)}):n=e.getCellPosition();let s=this.findNextCellToFocusOn(n,t,!1);if(s instanceof Jn)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return V(s)}findNextCellToFocusOn(e,t,i){let n=e;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextTabbedCell(n,t);let s=this.gridOptionsService.getCallback("tabToNextCell");if(V(s)){let c=s({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});V(c)?(c.floating&&(Ne(()=>{console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),c.rowPinned=c.floating),n={rowIndex:c.rowIndex,column:c.column,rowPinned:c.rowPinned}):n=null}if(!n)return null;if(n.rowIndex<0){let l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+n.rowIndex,column:n.column},fromCell:!0}),null}let o=this.gridOptionsService.get("editType")==="fullRow";if(i&&!o&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);let a=this.getCellByPosition(n);if(!a){let l=this.rowRenderer.getRowByPosition(n);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(n),a}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,t,i,n){let s=i,o=!1;for(;s&&(s===i||!this.isValidNavigateCell(s));)this.gridOptionsService.is("enableRtl")?t===B.LEFT&&(s=this.getLastCellOfColSpan(s)):t===B.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(t,s),o=Ce(s);if(o&&e&&e.key===B.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),n){let l=this.gridOptionsService.getCallback("navigateToNextCell");if(V(l)){let d=l({key:t,previousCellPosition:i,nextCellPosition:s||null,event:e});V(d)?(d.floating&&(Ne(()=>{console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),d.rowPinned=d.floating),s={rowPinned:d.rowPinned,rowIndex:d.rowIndex,column:d.column}):s=null}}if(!s)return;if(s.rowIndex<0){let l=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+s.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}let a=this.getNormalisedPosition(s);a?this.focusPosition(a):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){let i=this.columnModel.getAllDisplayedColumns(),n=this.rowRenderer.getRowByPosition(e);if(!n||!n.isFullWidth())return!1;let s=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?je(i):i[0])};this.focusPosition(o);let a=s!=null?this.rowPositionUtils.before(o,s):!1,l={type:w.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,floating:o.rowPinned,fromBelow:a};return this.eventService.dispatchEvent(l),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:je(i),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=this.gridOptionsService.isGroupRowsSticky(),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&Ce(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};An([y("mouseEventService")],fr.prototype,"mouseEventService",void 0);An([y("paginationProxy")],fr.prototype,"paginationProxy",void 0);An([y("focusService")],fr.prototype,"focusService",void 0);An([He("rangeService")],fr.prototype,"rangeService",void 0);An([y("columnModel")],fr.prototype,"columnModel",void 0);An([y("rowModel")],fr.prototype,"rowModel",void 0);An([y("ctrlsService")],fr.prototype,"ctrlsService",void 0);An([y("rowRenderer")],fr.prototype,"rowRenderer",void 0);An([y("headerNavigationService")],fr.prototype,"headerNavigationService",void 0);An([y("rowPositionUtils")],fr.prototype,"rowPositionUtils",void 0);An([y("cellNavigationService")],fr.prototype,"cellNavigationService",void 0);An([y("pinnedRowModel")],fr.prototype,"pinnedRowModel",void 0);An([G],fr.prototype,"postConstruct",null);fr=An([Y("navigationService")],fr);var _I=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},jd=class r extends Rr{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gridOptionsService.setDomData(this.getGui(),r.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,i=n=>{bh(this.gridOptionsService,n,t.node,t.column,!0)||t.onKeyDown(n)};this.addManagedListener(e,"keydown",i)}};jd.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";_I([G],jd.prototype,"postConstruct",null);var fg=class extends oe{constructor(e,t,i,n,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=n,this.cellCtrl=t,this.setTemplate(`<div comp-id="${this.getCompId()}"/>`);let o=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);let a=(d,u)=>{u!=null&&u!=""?o.setAttribute(d,u):o.removeAttribute(d)};ut(o,"gridcell"),a("col-id",t.getColumnIdSanitised());let l=t.getTabIndex();l!==void 0&&a("tabindex",l.toString());let c={addOrRemoveCssClass:(d,u)=>this.addOrRemoveCssClass(d,u),setUserStyles:d=>Hf(o,d),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:d=>this.includeSelection=d,setIncludeRowDrag:d=>this.includeRowDrag=d,setIncludeDndSource:d=>this.includeDndSource=d,setRenderDetails:(d,u,h)=>this.setRenderDetails(d,u,h),setEditDetails:(d,u,h)=>this.setEditDetails(d,u,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,this.getGui(),this.eCellWrapper,i,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,n=i&&this.eCellWrapper==null;n&&(this.eCellWrapper=Yt('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));let s=!i&&this.eCellWrapper!=null;s&&(bs(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);let o=!e&&i,a=o&&this.eCellValue==null;a&&(this.eCellValue=Yt('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));let l=!o&&this.eCellValue!=null;l&&(bs(this.eCellValue),this.eCellValue=void 0);let c=n||s||a||l;return c&&this.removeControls(),e||t&&this.addControls(),c}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){let n=this.editorVersion,s=e.newAgStackInstance();if(!s)return;let{params:o}=e;s.then(l=>this.afterCellEditorCreated(n,l,o,t,i)),Ce(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();$t(t);let i=e!=null?Et(e):null;i!=null&&(t.innerHTML=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),bs(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),bs(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let i=!this.beans.gridOptionsService.is("suppressAnimationFrame"),n=this.rendererVersion,{componentClass:s}=e,o=()=>{if(this.rendererVersion!==n||!this.isAlive())return;let l=e.newAgStackInstance(),c=this.afterCellRendererCreated.bind(this,n,s);l&&l.then(c)};i&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let s=this.getParentOfValue();$t(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,n,s){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let l=n||t.isPopup!==void 0&&t.isPopup();l?this.addPopupCellEditor(i,s):this.addInCellEditor(),this.refreshEditStyles(!0,l),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),(i=this.rowCtrl)===null||i===void 0||i.setInlineEditingCss(e)}addInCellEditor(){let e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new jd(e));let n=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&n.appendChild(this.cellEditorGui);let s=this.beans.popupService,o=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),a=t??(i.getPopupPosition?i.getPopupPosition():"over"),l=this.beans.gridOptionsService.is("enableRtl"),c={ePopup:n,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:l?"right":"left",keepWithinBounds:!0},d=s.positionPopupByComponent.bind(s,c),u=this.beans.localeService.getLocaleTextFunc(),h=s.addPopup({modal:o,eChild:n,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:d,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});h&&(this.hideEditorPopup=h.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&Sd()&&e.focus({preventScroll:!0}),$t(this.getParentOfValue())}};var av=class extends oe{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e,this.setTemplate(`<div comp-id="${this.getCompId()}" style="${this.getInitialStyle(i)}"/>`);let n=this.getGui(),s=n.style;this.domOrder=this.rowCtrl.getDomOrder(),ut(n,"row");let o=this.rowCtrl.getTabIndex();o!=null&&n.setAttribute("tabindex",o.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>Hf(n,l),setTop:l=>s.top=l,setTransform:l=>s.transform=l,setRowIndex:l=>n.setAttribute("row-index",l),setRowId:l=>n.setAttribute("row-id",l),setRowBusinessKey:l=>n.setAttribute("row-business-key",l)};e.setComp(a,this.getGui(),i),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e),i=this.rowCtrl.getInitialRowTop(e);return t?`transform: ${t}`:`top: ${i}`}showFullWidth(e){let t=n=>{if(this.isAlive()){let s=n.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(n)}else this.beans.context.destroyBean(n)},i=e.newAgStackInstance();i&&i.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(n=>{let s=n.getInstanceId();this.cellComps[s]==null?this.newCellComp(n):t[s]=null});let i=Hr(t).filter(n=>n!=null);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(i=>{let n=this.cellComps[i.getInstanceId()];n&&t.push(n.getGui())}),Vf(this.getGui(),t)}newCellComp(e){let t=new fg(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=Hr(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;let i=t.getCtrl().getInstanceId();this.cellComps[i]===t&&(t.detach(),t.destroy(),this.cellComps[i]=null)})}};var gg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};function TI(){let r=oe.elementGettingCreated.getAttribute("name"),e=Tn.getRowContainerCssClasses(r),t;return r===X.CENTER||r===X.TOP_CENTER||r===X.STICKY_TOP_CENTER||r===X.BOTTOM_CENTER?t=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" ref="eContainer"></div>`,t}var Zo=class extends oe{constructor(){super(TI()),this.rowComps={},this.name=oe.elementGettingCreated.getAttribute("name"),this.type=dS(this.name)}postConstruct(){let e={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:i=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new Tn(this.name)).setComp(e,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){let t=Object.assign({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let i=n=>{let s=n.getInstanceId(),o=t[s];if(o)this.rowComps[s]=o,delete t[s],this.ensureDomOrder(o.getGui());else{if(!n.getRowNode().displayed)return;let a=new av(n,this.beans,this.type);this.rowComps[s]=a,this.appendRow(a.getGui())}};e.forEach(i),Hr(t).forEach(n=>{this.eContainer.removeChild(n.getGui()),n.destroy()}),ut(this.eContainer,e.length?"rowgroup":"presentation")}appendRow(e){this.domOrder?Rx(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(Bf(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}};gg([y("beans")],Zo.prototype,"beans",void 0);gg([Z("eViewport")],Zo.prototype,"eViewport",void 0);gg([Z("eContainer")],Zo.prototype,"eContainer",void 0);gg([G],Zo.prototype,"postConstruct",null);gg([at],Zo.prototype,"preDestroy",null);var R_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Kd=class{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gridOptionsService.is("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?qe.ICON_PINNED:qe.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};R_([y("columnModel")],Kd.prototype,"columnModel",void 0);R_([y("gridOptionsService")],Kd.prototype,"gridOptionsService",void 0);var mg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Qo=class{constructor(e,t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.eContainer=t,this.centerContainer=!V(e)}init(){this.ctrlsService.whenReady(()=>{this.gridBodyCon=this.ctrlsService.getGridBodyCtrl()})}getIconName(){return this.pinned?qe.ICON_PINNED:qe.ICON_MOVE}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===yi.ToolPanel)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let n=e.dragItem.visibleState,s=(t||[]).filter(o=>n[o.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i="api"){if(e){let n=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColumnsVisible(n,t,i)}}setColumnsPinned(e,t,i="api"){if(e){let n=e.filter(s=>!s.getColDef().lockPinned);this.columnModel.setColumnsPinned(n,t,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}normaliseX(e){return this.gridOptionsService.is("enableRtl")&&(e=this.eContainer.clientWidth-e),this.centerContainer&&(e+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),e}checkCenterForScrolling(e){if(this.centerContainer){let t=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=t+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=e<t+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<t+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){var s;if(n){if(this.lastMovedInfo){let{columns:d,toIndex:u}=this.lastMovedInfo;this.moveColumns(d,u,"uiColumnMoved",!0)}return}if(this.lastDraggingEvent=e,Ce(e.hDirection))return;let o=this.normaliseX(e.x);t||this.checkCenterForScrolling(o);let a=this.normaliseDirection(e.hDirection),l=e.dragSource.type,c=((s=e.dragSource.getDragItem().columns)===null||s===void 0?void 0:s.filter(d=>d.getColDef().lockPinned?d.getPinned()==this.pinned:!0))||[];this.attemptMoveColumns({dragSourceType:l,allMovingColumns:c,hDirection:a,mouseX:o,fromEnter:t,fakeEvent:i})}normaliseDirection(e){if(this.gridOptionsService.is("enableRtl"))switch(e){case io.Left:return io.Right;case io.Right:return io.Left;default:console.error(`AG Grid: Unknown direction ${e}`)}else return e}attemptMoveColumns(e){let{dragSourceType:t,hDirection:i,mouseX:n,fromEnter:s,fakeEvent:o}=e,a=i===io.Left,l=i===io.Right,{allMovingColumns:c}=e;if(t===yi.HeaderCell){let C=[];c.forEach(S=>{var b;let T=null,A=S.getParent();for(;A!=null&&A.getDisplayedLeafColumns().length===1;)T=A,A=A.getParent();T!=null?(!!(!((b=T.getColGroupDef())===null||b===void 0)&&b.marryChildren)?T.getProvidedColumnGroup().getLeafColumns():T.getLeafColumns()).forEach(M=>{C.includes(M)||C.push(M)}):C.includes(S)||C.push(S)}),c=C}let d=c.slice();this.columnModel.sortColumnsLikeGridColumns(d);let u=this.calculateValidMoves(d,l,n),h=this.calculateOldIndex(d);if(u.length===0)return;let p=u[0],f=h!==null&&!s;if(t==yi.HeaderCell&&(f=h!==null),f&&!o&&(a&&p>=h||l&&p<=h))return;let g=this.columnModel.getAllDisplayedColumns(),m=[],v=null;for(let C=0;C<u.length;C++){let S=u[C],b=this.columnModel.getProposedColumnOrder(d,S);if(!this.columnModel.doesOrderPassRules(b))continue;let T=b.filter(E=>g.includes(E));if(v===null)v=T;else if(!Pe.areEqual(T,v))break;let A=this.groupFragCount(b);m.push({move:S,fragCount:A})}m.length!==0&&(m.sort((C,S)=>C.fragCount-S.fragCount),this.moveColumns(c,m[0].move,"uiColumnMoved",!1))}calculateOldIndex(e){let t=this.columnModel.getAllGridColumns(),i=Fy(e.map(l=>t.indexOf(l))),n=i[0];return je(i)-n!==i.length-1?null:n}moveColumns(e,t,i,n){this.columnModel.moveColumns(e,t,i,n),this.lastMovedInfo=n?null:{columns:e,toIndex:t}}groupFragCount(e){function t(n){let s=[],o=n.getOriginalParent();for(;o!=null;)s.push(o),o=o.getOriginalParent();return s}let i=0;for(let n=0;n<e.length-1;n++){let s=t(e[n]),o=t(e[n+1]);[s,o]=s.length>o.length?[s,o]:[o,s],s.forEach(a=>{o.indexOf(a)===-1&&i++})}return i}calculateValidMoves(e,t,i){if(this.gridOptionsService.is("suppressMovableColumns")||e.some(g=>g.getColDef().suppressMovable))return[];let s=this.columnModel.getDisplayedColumns(this.pinned),o=this.columnModel.getAllGridColumns(),a=s.filter(g=>cr(e,g)),l=s.filter(g=>!cr(e,g)),c=o.filter(g=>!cr(e,g)),d=0,u=i;if(t){let g=0;a.forEach(m=>g+=m.getActualWidth()),u-=g}if(u>0){for(let g=0;g<l.length;g++){let m=l[g];if(u-=m.getActualWidth(),u<0)break;d++}t&&d++}let h;if(d>0){let g=l[d-1];h=c.indexOf(g)+1}else h=c.indexOf(l[0]),h===-1&&(h=0);let p=[h],f=(g,m)=>g-m;if(t){let g=h+1,m=o.length-1;for(;g<=m;)p.push(g),g++;p.sort(f)}else{let g=h,m=o.length-1,v=o[g];for(;g<=m&&this.isColumnHidden(s,v);)g++,p.push(g),v=o[g];g=h-1;let C=0;for(;g>=C;)p.push(g),g--;p.sort(f).reverse()}return p}isColumnHidden(e,t){return e.indexOf(t)<0}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(qe.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(qe.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(qe.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let s=this.lastDraggingEvent.dragItem.columns.filter(o=>!o.getColDef().lockPinned);if(s.length>0&&(this.dragAndDropService.setGhostIcon(qe.ICON_PINNED),this.failedMoveAttempts>7)){let o=this.needToMoveLeft?"left":"right";this.setColumnsPinned(s,o,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};mg([y("columnModel")],Qo.prototype,"columnModel",void 0);mg([y("dragAndDropService")],Qo.prototype,"dragAndDropService",void 0);mg([y("gridOptionsService")],Qo.prototype,"gridOptionsService",void 0);mg([y("ctrlsService")],Qo.prototype,"ctrlsService",void 0);mg([G],Qo.prototype,"init",null);var vg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jo=class extends L{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]];break}})}isInterestedIn(e){return e===yi.HeaderCell||e===yi.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new Qo(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new Kd(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===yi.ToolPanel}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}};vg([y("dragAndDropService")],Jo.prototype,"dragAndDropService",void 0);vg([y("columnModel")],Jo.prototype,"columnModel",void 0);vg([y("ctrlsService")],Jo.prototype,"ctrlsService",void 0);vg([G],Jo.prototype,"postConstruct",null);vg([G],Jo.prototype,"init",null);var $d=class{static getHeaderClassesFromColDef(e,t,i,n){return Ce(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,t,i,n)}static getToolPanelClassesFromColDef(e,t,i,n){return Ce(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,t,i,n)}static getClassParams(e,t,i,n){return{colDef:e,column:i,columnGroup:n,api:t.api,columnApi:t.columnApi,context:t.context}}static getColumnClassesFromCollDef(e,t,i,n,s){if(Ce(e))return[];let o;if(typeof e=="function"){let a=this.getClassParams(t,i,n,s);o=e(a)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}};var lv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Za=class r extends tc{constructor(e){super(r.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((s,o)=>{o!=null&&o!=""?e.setAttribute(s,o):e.removeAttribute(s)})("col-id",this.column.getColId());let i={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,o)=>this.addOrRemoveCssClass(s,o),setAriaDescription:s=>Xy(e,s),setAriaSort:s=>s?nx(e,s):sx(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper);let n=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",n)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(t,i))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};Za.TEMPLATE=`<div class="ag-header-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;lv([Z("eResize")],Za.prototype,"eResize",void 0);lv([Z("eHeaderCompWrapper")],Za.prototype,"eHeaderCompWrapper",void 0);lv([G],Za.prototype,"postConstruct",null);lv([at],Za.prototype,"destroyHeaderComp",null);var hS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ac=class r extends tc{constructor(e){super(r.TEMPLATE,e)}postConstruct(){let e=this.getGui(),t=(n,s)=>s!=null?e.setAttribute(n,s):e.removeAttribute(n);e.setAttribute("col-id",this.ctrl.getColId());let i={addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setResizableDisplayed:n=>ke(this.eResize,n),setWidth:n=>e.style.width=n,setAriaExpanded:n=>t("aria-expanded",n),setUserCompDetails:n=>this.setUserCompDetails(n)};this.ctrl.setComp(i,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let i=this.getGui(),n=e.getGui();i.appendChild(n),this.addDestroyFunc(t),this.ctrl.setDragSource(i)}};ac.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;hS([y("userComponentFactory")],ac.prototype,"userComponentFactory",void 0);hS([Z("eResize")],ac.prototype,"eResize",void 0);hS([G],ac.prototype,"postConstruct",null);var A_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Gi=function(r){return r.COLUMN_GROUP="group",r.COLUMN="column",r.FLOATING_FILTER="filter",r}(Gi||{}),Yd=class extends oe{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){this.getGui().style.transform=this.ctrl.getTransform(),If(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,i)=>this.setHeaderCtrls(t,i),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(e,t){if(!this.isAlive())return;let i=this.headerComps;if(this.headerComps={},e.forEach(n=>{let s=n.getInstanceId(),o=i[s];delete i[s],o==null&&(o=this.createHeaderComp(n),this.getGui().appendChild(o.getGui())),this.headerComps[s]=o}),ft(i,(n,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),t){let n=Hr(this.headerComps);n.sort((o,a)=>{let l=o.getCtrl().getColumnGroupChild().getLeft(),c=a.getCtrl().getColumnGroupChild().getLeft();return l-c});let s=n.map(o=>o.getGui());Vf(this.getGui(),s)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case Gi.COLUMN_GROUP:t=new ac(e);break;case Gi.FLOATING_FILTER:t=new ro(e);break;default:t=new Za(e);break}return this.createBean(t),t.setParentComponent(this),t}};A_([G],Yd.prototype,"init",null);A_([at],Yd.prototype,"destroyHeaderCtrls",null);var pS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},RI=0,nn=class r extends L{constructor(e,t){super(),this.lastFocusEvent=null,this.columnGroupChild=e,this.parentRowCtrl=t,this.instanceId=e.getUniqueId()+"-"+RI++}shouldStopEventPropagation(e){let{headerRowIndex:t,column:i}=this.focusService.getFocusedHeader();return Lx(this.gridOptionsService,e,t,i)}getWrapperHasFocus(){return this.gridOptionsService.getDocument().activeElement===this.eGui}setGui(e){this.eGui=e,this.addDomData()}handleKeyDown(e){let t=this.getWrapperHasFocus();switch(e.key){case B.PAGE_DOWN:case B.PAGE_UP:case B.PAGE_HOME:case B.PAGE_END:t&&e.preventDefault()}}addDomData(){let e=r.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gridOptionsService.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}};nn.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";pS([y("focusService")],nn.prototype,"focusService",void 0);pS([y("beans")],nn.prototype,"beans",void 0);pS([y("userComponentFactory")],nn.prototype,"userComponentFactory",void 0);var AI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ea=class extends L{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=n,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?je(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,Oe.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){let e=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),t=V(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),n=this.modifyLeftForPrintLayout(e,i),s=this.modifyLeftForPrintLayout(e,t);this.setLeft(n),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gridOptionsService.isDomLayout("print")||e.getPinned()==="left")return t;let n=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){let s=this.beans.columnModel.getBodyContainerWidth();return n+s+t}return n+t}setLeft(e){V(e)&&(this.eCell.style.left=`${e}px`);let t;if(this.columnOrGroup instanceof Oe)t=this.columnOrGroup;else{let s=this.columnOrGroup.getLeafColumns();if(!s.length)return;s.length>1&&rx(this.ariaEl,s.length),t=s[0]}let i=this.beans.columnModel.getAriaColumnIndex(t);Mf(this.ariaEl,i)}};AI([G],ea.prototype,"postConstruct",null);var D_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ta=class extends L{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};D_([y("columnHoverService")],ta.prototype,"columnHoverService",void 0);D_([G],ta.prototype,"postConstruct",null);var fS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lc=class extends nn{constructor(e,t){super(e,t),this.iconCreated=!1,this.column=e}setComp(e,t,i,n){super.setGui(t),this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Oe.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}setupActive(){let e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=gt("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new Ci(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();Er(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gridOptionsService.getDocument().activeElement===this.eGui)return;let s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}let o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.columnModel,i=this.column;do if(i=e?t.getDisplayedColBefore(i):t.getDisplayedColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case B.UP:case B.DOWN:t||e.preventDefault();case B.LEFT:case B.RIGHT:if(t)return;e.stopPropagation();case B.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case B.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&Js(e.relatedTarget,"ag-floating-filter");if(i&&n&&e.target===this.eGui){let o=this.lastFocusEvent,a=!!(o&&o.key===B.TAB);if(o&&a){let l=o.shiftKey;this.focusService.focusInto(this.eGui,l)}}let s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(){this.createManagedBean(new ta([this.column],this.eGui));let e=()=>{if(!this.gridOptionsService.is("columnHoverHighlight"))return;let t=this.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){let e=new ea(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){let e=this.column.getColDef();this.suppressFilterButton=e.floatingFilterComponentParams?!!e.floatingFilterComponentParams.suppressFilterButton:!1}setupUserComp(){if(!this.active)return;let e=this.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,e,"floatingFilter","filterMenuTab",["filterMenuTab"])}setupSyncWithFilter(){if(!this.active)return;let e=t=>{let i=this.comp.getFloatingFilterComp();i&&i.then(n=>{if(n){let s=this.filterManager.getCurrentFloatingFilterParentModel(this.column);n.onParentModelChanged(s,t)}})};this.destroySyncListener=this.addManagedListener(this.column,Oe.EVENT_FILTER_CHANGED,e),this.filterManager.isFilterActive(this.column)&&e(null)}setupWidth(){let e=()=>{let t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListener(this.column,Oe.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Oe.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))}updateFilterButton(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))}onColDefChanged(){var e,t;let i=this.active;this.setupActive();let n=!i&&this.active;i&&!this.active&&((e=this.destroySyncListener)===null||e===void 0||e.call(this),(t=this.destroyFilterChangedListener)===null||t===void 0||t.call(this));let s=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!s?this.updateCompDetails(s,n):o.then(a=>{var l;!a||this.filterManager.areFilterCompsDifferent((l=this.userCompDetails)!==null&&l!==void 0?l:null,s)?this.updateCompDetails(s,n):this.updateFloatingFilterParams(s)})}updateCompDetails(e,t){this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())}updateFloatingFilterParams(e){var t;if(!e)return;let i=e.params;(t=this.comp.getFloatingFilterComp())===null||t===void 0||t.then(n=>{n?.onParamsUpdated&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(i)})}};fS([y("filterManager")],lc.prototype,"filterManager",void 0);fS([y("columnHoverService")],lc.prototype,"columnHoverService",void 0);fS([y("menuFactory")],lc.prototype,"menuFactory",void 0);var gS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Xd=class extends L{constructor(e,t,i,n,s){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=s}postConstruct(){let e=this.column.getColDef(),t=[],i,n,s=()=>{if(ke(this.eResize,i),!i)return;let l=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(t.push(l),n){let c=this.gridOptionsService.is("skipHeaderOnAutoSize"),d=()=>{this.columnModel.autoSizeColumn(this.column,c,"uiColumnResized")};this.eResize.addEventListener("dblclick",d);let u=new $i(this.eResize);u.addEventListener($i.EVENT_DOUBLE_TAP,d),this.addDestroyFunc(()=>{this.eResize.removeEventListener("dblclick",d),u.removeEventListener($i.EVENT_DOUBLE_TAP,d),u.destroy()})}},o=()=>{t.forEach(l=>l()),t.length=0},a=()=>{let l=this.column.isResizable(),c=!this.gridOptionsService.is("suppressAutoSize")&&!e.suppressAutoSize;(l!==i||c!==n)&&(i=l,n=c,o(),s())};a(),this.addDestroyFunc(o),this.ctrl.addRefreshFunction(a)}onResizing(e,t){let i=this.normaliseResizeAmount(t),n=[{key:this.column,newWidth:this.resizeStartWidth+i}];this.columnModel.setColumnWidths(n,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)}normaliseResizeAmount(e){let t=e,i=this.pinned!=="left",n=this.pinned==="right";return this.gridOptionsService.is("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}};gS([y("horizontalResizeService")],Xd.prototype,"horizontalResizeService",void 0);gS([y("columnModel")],Xd.prototype,"columnModel",void 0);gS([G],Xd.prototype,"postConstruct",null);var cv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},cc=class extends L{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e;let t=e.getColDef();this.filteredOnly=!!t?.headerCheckboxSelectionFilteredOnly,this.currentPageOnly=!!t?.headerCheckboxSelectionCurrentPageOnly}onSpaceKeyDown(e){let t=this.cbSelectAll,i=this.gridOptionsService.getDocument();t.isDisplayed()&&!t.getGui().contains(i.activeElement)&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new eo),this.cbSelectAll.addCssClass("ag-header-select-all"),ut(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,w.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),yh(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.filteredOnly,this.currentPageOnly);this.cbSelectAll.setValue(e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),n=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${n} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${n} (${i})`),this.headerCellCtrl.refreshAriaDescription()}checkSelectionType(e){return this.gridOptionsService.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){let t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(console.warn(`AG Grid: ${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t="uiSelectAll";this.currentPageOnly?t="uiSelectAllCurrentPage":this.filteredOnly&&(t="uiSelectAllFiltered");let i={source:t,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};e?this.selectionService.selectAllRowNodes(i):this.selectionService.deselectAllRowNodes(i)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){let t=e,i={column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context};e=t(i)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}};cv([y("gridApi")],cc.prototype,"gridApi",void 0);cv([y("columnApi")],cc.prototype,"columnApi",void 0);cv([y("rowModel")],cc.prototype,"rowModel",void 0);cv([y("selectionService")],cc.prototype,"selectionService",void 0);var O_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dc=function(r){return r.TAB_GUARD="ag-tab-guard",r.TAB_GUARD_TOP="ag-tab-guard-top",r.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",r}(dc||{}),qd=class extends L{constructor(e){super(),this.skipTabGuardFocus=!1;let{comp:t,eTopGuard:i,eBottomGuard:n,focusInnerElement:s,onFocusIn:o,onFocusOut:a,shouldStopEventPropagation:l,onTabKeyDown:c,handleKeyDown:d,eFocusableElement:u}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=s,this.eFocusableElement=u,this.providedFocusIn=o,this.providedFocusOut=a,this.providedShouldStopEventPropagation=l,this.providedOnTabKeyDown=c,this.providedHandleKeyDown=d}postConstruct(){this.createManagedBean(new Ci(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedListener(e,"focus",this.onFocus.bind(this)))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){let e=this.gridOptionsService.getNum("tabIndex")||0;this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}onFocusIn(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()}onFocusOut(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,t.focus()}};O_([y("focusService")],qd.prototype,"focusService",void 0);O_([G],qd.prototype,"postConstruct",null);var is=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zr,zt=zr=class extends L{static addKeyboardModeEvents(e,t){let i=zr.instancesMonitored.get(e);i&&i.length>0?i.indexOf(t)===-1&&i.push(t):(zr.instancesMonitored.set(e,[t]),e.addEventListener("keydown",zr.toggleKeyboardMode),e.addEventListener("mousedown",zr.toggleKeyboardMode))}static removeKeyboardModeEvents(e,t){let i=zr.instancesMonitored.get(e),n=[];i&&i.length&&(n=[...i].filter(s=>s!==t),zr.instancesMonitored.set(e,n)),n.length===0&&(e.removeEventListener("keydown",zr.toggleKeyboardMode),e.removeEventListener("mousedown",zr.toggleKeyboardMode))}static toggleKeyboardMode(e){let t=zr.keyboardModeActive,i=e.type==="keydown";if(i&&(e.ctrlKey||e.metaKey||e.altKey)||t&&i||!t&&!i)return;zr.keyboardModeActive=i;let n=e.target.ownerDocument;if(!n)return;let s=zr.instancesMonitored.get(n);s&&s.forEach(o=>{o.dispatchEvent({type:i?w.EVENT_KEYBOARD_FOCUS:w.EVENT_MOUSE_FOCUS})})}init(){let e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl;let i=this.gridOptionsService.getDocument();zr.addKeyboardModeEvents(i,this.gridCtrl),this.addDestroyFunc(()=>this.unregisterGridCompController(this.gridCtrl))})}unregisterGridCompController(e){let t=this.gridOptionsService.getDocument();zr.removeKeyboardModeEvents(t,e)}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let e=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return zr.keyboardModeActive}getFocusCellToUseAfterRefresh(){let e=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(e.activeElement,Fs.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){let e=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(e.activeElement,nn.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(this.gridOptionsService.getDomData(i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(e){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){let{rowIndex:e,rowPinned:t,column:i}=this.focusedCellPosition,n={rowIndex:e,rowPinned:t,column:i,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return s&&(n.isFullWidthCell=s.isFullWidth()),n}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let e=Object.assign({type:w.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){let{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1}=e,a=this.columnModel.getGridColumn(t);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition=a?{rowIndex:i,rowPinned:Br(n),column:a}:null;let l=Object.assign(Object.assign({type:w.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:s,preventScrollOnBrowserFocus:o,floating:null});this.eventService.dispatchEvent(l)}isCellFocused(e){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeaderPosition==null)return!1;let t=e.getColumnGroupChild(),i=e.getRowIndex(),n=e.getPinned(),{column:s,headerRowIndex:o}=this.focusedHeaderPosition;return t===s&&i===o&&n==s.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){let{direction:t,fromTab:i,allowUserOverride:n,event:s,fromCell:o}=e,{headerPosition:a}=e;if(o&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(n){let d=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(i){let h=this.gridOptionsService.getCallback("tabToNextHeader");h&&(a=h({backwards:t==="Before",previousHeaderPosition:d,nextHeaderPosition:a,headerRowCount:u}))}else{let h=this.gridOptionsService.getCallback("navigateToNextHeader");if(h&&s){let p={key:s.key,previousHeaderPosition:d,nextHeaderPosition:a,headerRowCount:u,event:s};a=h(p)}}}return a?a.headerRowIndex===-1?this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(a):this.focusGridView(a.column):(this.headerNavigationService.scrollToColumn(a.column,t),this.ctrlsService.getHeaderRowContainerCtrl(a.column.getPinned()).focusHeader(a.headerRowIndex,a.column,s)):!1}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];return e?(e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:e}})):!1}focusLastHeader(e){let t=this.headerNavigationService.getHeaderRowCount()-1,i=je(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},event:e})}focusPreviousFromFirstCell(e){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===Br(t)}findFocusableElements(e,t,i=!1){let n=_x,s=j0;t&&(s+=", "+t),i&&(s+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(e.querySelectorAll(n)),a=Array.prototype.slice.apply(e.querySelectorAll(s));return a.length?((c,d)=>c.filter(u=>d.indexOf(u)===-1))(o,a):o}focusInto(e,t=!1,i=!1){let n=this.findFocusableElements(e,null,i),s=t?je(n):n[0];return s?(s.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;let i=this.findFocusableElements(e),n=i.indexOf(t);if(n===-1)return null;let s=-1;for(let o=n-1;o>=0;o--)if(i[o].classList.contains(dc.TAB_GUARD_TOP)){s=o;break}return s<=0?null:i[s-1]}findNextFocusableElement(e=this.eGridDiv,t,i){let n=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),o=this.gridOptionsService.getDocument().activeElement,a;t?a=n.findIndex(c=>c.contains(o)):a=n.indexOf(o);let l=a+(i?-1:1);return l<0||l>=n.length?null:n[l]}isTargetUnderManagedComponent(e,t){if(!t)return!1;let i=e.querySelectorAll(`.${Ci.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let n=0;n<i.length;n++)if(i[n].contains(t))return!0;return!1}findTabbableParent(e,t=5){let i=0;for(;e&&Sh(e)===null&&++i<=t;)e=e.parentElement;return Sh(e)===null?null:e}focusGridView(e,t){if(this.gridOptionsService.is("suppressCellFocus"))return t?this.focusLastHeader():this.focusNextGridCoreContainer(!1);let i=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;let{rowIndex:n,rowPinned:s}=i,o=this.getFocusedHeader();if(!e&&o&&(e=o.column),n==null||!e)return!1;if(this.navigationService.ensureCellVisible({rowIndex:n,column:e,rowPinned:s}),this.setFocusedCell({rowIndex:n,column:e,rowPinned:Br(s),forceBrowserFocus:!0}),this.rangeService){let a={rowIndex:n,rowPinned:s,column:e};this.rangeService.setRangeToCell(a)}return!0}focusNextGridCoreContainer(e,t=!1){return!t&&this.gridCtrl.focusNextInnerContainer(e)?!0:((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e?.column,this.advancedFilterService.getCtrl().focusHeaderComp()}focusNextFromAdvancedFilter(e,t){var i,n;let s=(i=t?void 0:this.advancedFilterFocusColumn)!==null&&i!==void 0?i:(n=this.columnModel.getAllDisplayedColumns())===null||n===void 0?void 0:n[0];return e?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};zt.AG_KEYBOARD_FOCUS="ag-keyboard-focus";zt.keyboardModeActive=!1;zt.instancesMonitored=new Map;is([y("eGridDiv")],zt.prototype,"eGridDiv",void 0);is([y("columnModel")],zt.prototype,"columnModel",void 0);is([y("headerNavigationService")],zt.prototype,"headerNavigationService",void 0);is([y("rowRenderer")],zt.prototype,"rowRenderer",void 0);is([y("rowPositionUtils")],zt.prototype,"rowPositionUtils",void 0);is([y("cellPositionUtils")],zt.prototype,"cellPositionUtils",void 0);is([He("rangeService")],zt.prototype,"rangeService",void 0);is([y("navigationService")],zt.prototype,"navigationService",void 0);is([y("ctrlsService")],zt.prototype,"ctrlsService",void 0);is([y("filterManager")],zt.prototype,"filterManager",void 0);is([He("advancedFilterService")],zt.prototype,"advancedFilterService",void 0);is([G],zt.prototype,"init",null);zt=zr=is([Y("focusService")],zt);var Qa=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Dn=class extends nn{constructor(e,t){super(e,t),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,n){super.setGui(t),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(n),this.addColumnHoverListener(),this.setupFilterCss(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new Xd(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new ta([this.column],t)),this.createManagedBean(new ea(this.column,t,this.beans)),this.createManagedBean(new Ci(t,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addMouseDownListenerIfNeeded(t),this.addManagedListener(this.column,Oe.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onHeaderHeightChanged.bind(this))}addMouseDownListenerIfNeeded(e){if(!Ni())return;let t=["mousedown","touchstart"],i=this.gridOptionsService.getDocument();t.forEach(n=>{this.addManagedListener(e,n,s=>{let o=i.activeElement;o!==e&&!e.contains(o)&&(e.focus(),zt.toggleKeyboardMode(s))})})}setupUserComp(){let e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){let e=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:e.sortable,enableMenu:this.menuEnabled,showColumnMenu:i=>{this.gridApi.showColumnMenuAfterButtonClick(this.column,i)},progressSort:i=>{this.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,n)=>{this.sortController.setSortForColumn(this.column,i,!!n,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()}}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new cc(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===B.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===B.ENTER&&this.onEnterKeyDown(e)}onEnterKeyDown(e){let t=this.comp.getUserCompInstance();if(t){if(e.ctrlKey||e.metaKey)this.menuEnabled&&t.showMenu&&(e.preventDefault(),t.showMenu());else if(this.sortable){let i=e.shiftKey;this.sortController.progressSort(this.column,i,"uiColumnSorted")}}}isMenuEnabled(){return this.menuEnabled}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column)}this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(){let e={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>this.eGui,getLocation:()=>"header",getTooltipValue:()=>this.column.getColDef().headerTooltip},t=this.createManagedBean(new Xa(e,this.beans));t.setComp(this.eGui),this.refreshFunctions.push(()=>t.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),i=$d.getHeaderClassesFromColDef(t,this.gridOptionsService,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(s=>{n.has(s)?n.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),n.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let t=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:yi.HeaderCell,eElement:e,getDefaultIconName:()=>t?qe.ICON_HIDE:qe.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),dragItemName:this.displayName,onDragStarted:()=>{t=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),this.column.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>this.column.setMoving(!1,"uiColumnMoved"),onGridEnter:i=>{var n;if(t){let s=((n=i?.columns)===null||n===void 0?void 0:n.filter(o=>!o.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(s,!0,"uiColumnMoved")}},onGridExit:i=>{var n;if(t){let s=((n=i?.columns)===null||n===void 0?void 0:n.filter(o=>!o.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(s,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}createDragItem(){let e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}}removeDragSource(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)}onColDefChanged(){this.refresh()}updateState(){let e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){let e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gridOptionsService.is("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let e=()=>{let t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListener(this.column,Oe.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,Oe.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,Oe.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,Oe.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:i,columnModel:n,gridOptionsService:s}=this;if(!t.isSpanHeaderHeight())return;let{numberOfParents:o,isSpanningTotal:a}=this.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",o>0);let l=n.getColumnHeaderRowHeight();if(o===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}i.addOrRemoveCssClass("ag-header-span-total",a);let d=s.is("pivotMode")?n.getPivotGroupHeaderHeight():n.getGroupHeaderHeight(),u=o*d;e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${l+u}px`)}getColumnGroupPaddingInfo(){let e=this.column.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}setupAutoHeight(e){let t=l=>{if(!this.isAlive())return;let{paddingTop:c,paddingBottom:d,borderBottomWidth:u,borderTopWidth:h}=jo(this.getGui()),p=c+d+u+h,g=e.offsetHeight+p;if(l<5){let m=this.beans.gridOptionsService.getDocument(),v=!m||!m.contains(e),C=g==0;if(v||C){this.beans.frameworkOverrides.setTimeout(()=>t(l+1),0);return}}this.columnModel.setColumnHeaderHeight(this.column,g)},i=!1,n,s=()=>{let l=this.column.isAutoHeaderHeight();l&&!i&&o(),!l&&i&&a()},o=()=>{i=!0,t(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),n=this.resizeObserverService.observeResize(e,()=>t(0))},a=()=>{i=!1,n&&n(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),n=void 0};s(),this.addDestroyFunc(()=>a()),this.addManagedListener(this.column,Oe.EVENT_WIDTH_CHANGED,()=>i&&t(0)),this.addManagedListener(this.eventService,Oe.EVENT_SORT_CHANGED,()=>{i&&this.beans.frameworkOverrides.setTimeout(()=>t(0))}),this.addRefreshFunction(s)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Ky(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}refreshAriaDescription(){let e=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(e.length?e.join(" "):void 0)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()}addColumnHoverListener(){let e=()=>{if(!this.gridOptionsService.is("columnHoverHighlight"))return;let t=this.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupFilterCss(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-filtered",this.column.isFilterActive())};this.addManagedListener(this.column,Oe.EVENT_FILTER_ACTIVE_CHANGED,e),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let e=t=>this.setActiveHeader(t.type==="mouseenter");this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}};Qa([y("columnModel")],Dn.prototype,"columnModel",void 0);Qa([y("columnHoverService")],Dn.prototype,"columnHoverService",void 0);Qa([y("sortController")],Dn.prototype,"sortController",void 0);Qa([y("menuFactory")],Dn.prototype,"menuFactory",void 0);Qa([y("dragAndDropService")],Dn.prototype,"dragAndDropService",void 0);Qa([y("resizeObserverService")],Dn.prototype,"resizeObserverService",void 0);Qa([y("gridApi")],Dn.prototype,"gridApi",void 0);Qa([y("columnApi")],Dn.prototype,"columnApi",void 0);Qa([at],Dn.prototype,"removeDragSource",null);var dv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},uc=class extends L{constructor(e,t,i,n){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.is("suppressAutoSize")){let t=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let i=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||i.push(s.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){this.calculateInitialValues();let t=null;if(e&&(t=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),t){let i=t.getDisplayedLeafColumns();this.resizeTakeFromCols=i.filter(n=>n.isResizable()),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(n=>this.resizeTakeFromStartWidth+=n.getActualWidth()),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(n=>this.resizeTakeFromRatios.push(n.getActualWidth()/this.resizeTakeFromStartWidth))}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)}onResizing(e,t,i="uiColumnResized"){let n=this.normaliseDragChange(t),s=this.resizeStartWidth+n;this.resizeColumns(s,i,e)}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),t>this.resizeStartWidth&&this.resizeColumns(t,e,!0)}resizeColumns(e,t,i=!0){let n=[];if(n.push({columns:this.resizeCols,ratios:this.resizeRatios,width:e}),this.resizeTakeFromCols){let s=e-this.resizeStartWidth;n.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-s})}this.columnModel.resizeColumnSets({resizeSets:n,finished:i,source:t}),i&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)}calculateInitialValues(){let e=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=e.filter(t=>t.isResizable()),this.resizeStartWidth=0,this.resizeCols.forEach(t=>this.resizeStartWidth+=t.getActualWidth()),this.resizeRatios=[],this.resizeCols.forEach(t=>this.resizeRatios.push(t.getActualWidth()/this.resizeStartWidth))}normaliseDragChange(e){let t=e;return this.gridOptionsService.is("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}};dv([y("horizontalResizeService")],uc.prototype,"horizontalResizeService",void 0);dv([y("autoWidthCalculator")],uc.prototype,"autoWidthCalculator",void 0);dv([y("columnModel")],uc.prototype,"columnModel",void 0);dv([G],uc.prototype,"postConstruct",null);var DI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Cg=class extends L{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,Ut.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}};DI([G],Cg.prototype,"postConstruct",null);var uv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ja=class extends nn{constructor(e,t){super(e,t),this.columnGroup=e}setComp(e,t,i){super.setGui(t),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();let n=this.getParentRowCtrl().getPinned(),s=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new ta(s,t)),this.createManagedBean(new ea(this.columnGroup,t,this.beans)),this.createManagedBean(new Cg(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new uc(e,i,n,this.columnGroup)),this.createManagedBean(new Ci(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}resizeLeafColumnsToFit(e){this.groupResizeFeature&&this.groupResizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){let e=this.displayName,t={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:n=>{this.columnModel.setColumnGroupOpened(this.columnGroup.getProvidedColumnGroup(),n,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!e){let n=this.columnGroup,s=n.getLeafColumns();for(;n.getParent()&&n.getParent().getLeafColumns().length===s.length;)n=n.getParent();let o=n.getColGroupDef();o&&(e=o.headerName),e||(e=s?this.columnModel.getDisplayNameForColumn(s[0],"header",!0):"")}let i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}setupTooltip(){let e=this.columnGroup.getColGroupDef(),t={getColumn:()=>this.columnGroup,getGui:()=>this.eGui,getLocation:()=>"headerGroup",getTooltipValue:()=>e&&e.headerTooltip};e&&(t.getColDef=()=>e),this.createManagedBean(new Xa(t,this.beans)).setComp(this.eGui)}setupExpandable(){let e=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,bt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,bt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){let e=this.columnGroup;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.columnGroup.getUniqueId()}addClasses(){let e=this.columnGroup.getColGroupDef(),t=$d.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.columnGroup);this.columnGroup.isPadding()?(t.push("ag-header-group-cell-no-group"),this.columnGroup.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){let t=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.columnGroup.isMoving());t.forEach(n=>{this.addManagedListener(n,Oe.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.columnGroup)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===B.ENTER){let i=this.columnGroup,n=!i.isExpanded();this.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){if(this.isSuppressMoving())return;let t=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),n={type:yi.HeaderCell,eElement:e,getDefaultIconName:()=>i?qe.ICON_HIDE:qe.ICON_NOT_ALLOWED,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:()=>{i=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),t.forEach(s=>s.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>t.forEach(s=>s.setMoving(!1,"uiColumnDragged")),onGridEnter:s=>{var o;if(i){let a=((o=s?.columns)===null||o===void 0?void 0:o.filter(l=>!l.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(a,!0,"uiColumnMoved")}},onGridExit:s=>{var o;if(i){let a=((o=s?.columns)===null||o===void 0?void 0:o.filter(l=>!l.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(a,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(n))}getDragItemForGroup(){let e=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),t={};e.forEach(n=>t[n.getId()]=n.isVisible());let i=[];return this.columnModel.getAllDisplayedColumns().forEach(n=>{e.indexOf(n)>=0&&(i.push(n),lr(e,n))}),e.forEach(n=>i.push(n)),{columns:i,visibleState:t}}isSuppressMoving(){let e=!1;return this.columnGroup.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.is("suppressMovableColumns")}};uv([y("columnModel")],Ja.prototype,"columnModel",void 0);uv([y("dragAndDropService")],Ja.prototype,"dragAndDropService",void 0);uv([y("gridApi")],Ja.prototype,"gridApi",void 0);uv([y("columnApi")],Ja.prototype,"columnApi",void 0);var hv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OI=0,so=class extends L{constructor(e,t,i){super(),this.instanceId=OI++,this.headerCellCtrls={},this.rowIndex=e,this.pinned=t,this.type=i;let n=i==Gi.COLUMN_GROUP?"ag-header-row-column-group":i==Gi.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}postConstruct(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}getTransform(){if(Ni())return"translateZ(0)"}addEventListeners(){this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_VIRTUAL_COLUMNS_CHANGED,e=>this.onVirtualColumnsChanged(e.afterScroll)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){return qs(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){return this.isPrintLayout?this.pinned!=null?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=this.columnModel.getHeaderRowCount(),t=[],i=0;this.filterManager.hasFloatingFilters()&&(e++,i=1);let n=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),o=1+i,a=e-o;for(let d=0;d<a;d++)t.push(n);t.push(s);for(let d=0;d<i;d++)t.push(this.columnModel.getFloatingFiltersHeight());let l=0;for(let d=0;d<this.rowIndex;d++)l+=t[d];let c=t[this.rowIndex];return{topOffset:l,rowHeight:c}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(s=>{if(s.isEmptyGroup())return;let o=s.getUniqueId(),a=e[o];if(delete e[o],a&&a.getColumnGroupChild()!=s&&(this.destroyBean(a),a=void 0),a==null)switch(this.type){case Gi.FLOATING_FILTER:a=this.createBean(new lc(s,this));break;case Gi.COLUMN_GROUP:a=this.createBean(new Ja(s,this));break;default:a=this.createBean(new Dn(s,this));break}this.headerCellCtrls[o]=a});let i=s=>this.focusService.isHeaderWrapperFocused(s)?this.columnModel.isDisplayed(s.getColumnGroupChild()):!1;return ft(e,(s,o)=>{i(o)?this.headerCellCtrls[s]=o:this.destroyBean(o)}),Hr(this.headerCellCtrls)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth();return["left",null,"right"].forEach(i=>{let n=this.columnModel.getVirtualHeaderGroupRow(i,t);e=e.concat(n)}),e}getActualDepth(){return this.type==Gi.FLOATING_FILTER?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,t){let n=Hr(this.headerCellCtrls).find(s=>s.getColumnGroupChild()==e);return n?(n.focus(t),!0):!1}destroy(){ft(this.headerCellCtrls,(e,t)=>{this.destroyBean(t)}),this.headerCellCtrls={},super.destroy()}};hv([y("columnModel")],so.prototype,"columnModel",void 0);hv([y("focusService")],so.prototype,"focusService",void 0);hv([y("filterManager")],so.prototype,"filterManager",void 0);hv([G],so.prototype,"postConstruct",null);var Nh=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},oo=class extends L{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){let t=new Jo(this.pinned,e);this.createManagedBean(t)}refresh(e=!1){let t=new Yn,i=this.focusService.getFocusHeaderToUseAfterRefresh(),n=()=>{let l=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let c=0;c<l;c++){let d=this.createBean(new so(t.next(),this.pinned,Gi.COLUMN_GROUP));this.groupsRowCtrls.push(d)}},s=()=>{let l=t.next(),c=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==l);(c||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),c&&(this.columnsRowCtrl=this.createBean(new so(l,this.pinned,Gi.COLUMN)))},o=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;let l=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){l();return}let c=t.next();if(this.filtersRowCtrl){let d=this.filtersRowCtrl.getRowIndex()!==c;(!e||d)&&l()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new so(c,this.pinned,Gi.FLOATING_FILTER)))};n(),s(),o();let a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new no(e=>this.comp.setCenterWidth(`${e}px`),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let i=()=>{let n=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(n==null)return;let s=n==0,o=this.hidden!==s,a=this.gridOptionsService.is("enableRtl"),l=this.gridOptionsService.getScrollbarWidth(),d=this.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&t)?n+l:n;this.comp.setPinnedContainerWidth(`${d}px`),this.comp.setDisplayed(!s),o&&(this.hidden=s,this.refresh())};this.addManagedListener(this.eventService,w.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,w.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,w.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(e){if(e instanceof Oe)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){let s=this.getAllCtrls()[e];return s?s.focusHeader(t,i):!1}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};Nh([y("ctrlsService")],oo.prototype,"ctrlsService",void 0);Nh([y("scrollVisibleService")],oo.prototype,"scrollVisibleService",void 0);Nh([y("pinnedWidthService")],oo.prototype,"pinnedWidthService",void 0);Nh([y("columnModel")],oo.prototype,"columnModel",void 0);Nh([y("focusService")],oo.prototype,"focusService",void 0);Nh([y("filterManager")],oo.prototype,"filterManager",void 0);var mS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rs=class r extends oe{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();let e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{let n=this.getGui();n.style.width=i,n.style.maxWidth=i,n.style.minWidth=i}};this.createManagedBean(new oo(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",i=e?r.PINNED_LEFT_TEMPLATE:t?r.PINNED_RIGHT_TEMPLATE:r.CENTER_TEMPLATE;this.setTemplate(i),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let i,n=s=>{let o=s.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),i&&Bf(this.eRowContainer,o,i),i=o};e.forEach(s=>{let o=s.getInstanceId(),a=t[o];delete t[o];let l=a||this.createBean(new Yd(s));this.headerRowComps[o]=l,this.rowCompsList.push(l),n(l)}),Hr(t).forEach(s=>this.destroyRowComp(s))}};rs.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>';rs.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>';rs.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;mS([Z("eCenterContainer")],rs.prototype,"eCenterContainer",void 0);mS([G],rs.prototype,"init",null);mS([at],rs.prototype,"destroyRowComps",null);var yg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ao=function(r){return r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT",r}(ao||{}),el=class extends L{postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getHeaderRowCount(){let e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:n,column:s}=t,o=this.getHeaderRowCount(),a=e===ao.UP,{nextRow:l,nextFocusColumn:c}=a?this.headerPositionUtils.getColumnVisibleParent(s,n):this.headerPositionUtils.getColumnVisibleChild(s,n),d=!1;return l<0&&(l=0,c=s,d=!0),l>=o&&(l=-1),!d&&!c?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:c},allowUserOverride:!0,event:i})}navigateHorizontally(e,t=!1,i){let n=this.focusService.getFocusedHeader(),s=e===ao.LEFT,o=this.gridOptionsService.is("enableRtl"),a,l;return s!==o?(l="Before",a=this.headerPositionUtils.findHeader(n,l)):(l="After",a=this.headerPositionUtils.findHeader(n,l)),a||!t?this.focusService.focusHeaderPosition({headerPosition:a,direction:l,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(n,l,i)}focusNextHeaderRow(e,t,i){let n=e.headerRowIndex,s=null,o;return t==="Before"?n>0&&(o=n-1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=n+1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),this.focusService.focusHeaderPosition({headerPosition:s,direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(e instanceof Ut){let n=e.getDisplayedLeafColumns();i=t==="Before"?je(n):n[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};yg([y("focusService")],el.prototype,"focusService",void 0);yg([y("headerPositionUtils")],el.prototype,"headerPositionUtils",void 0);yg([y("ctrlsService")],el.prototype,"ctrlsService",void 0);yg([G],el.prototype,"postConstruct",null);el=yg([Y("headerNavigationService")],el);var xg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ia=class extends L{setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new Ci(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,i=e.getHeaderRowCount(),n;this.filterManager.hasFloatingFilters()&&(i++,t=1);let o=this.columnModel.getColumnGroupHeaderRowHeight(),a=this.columnModel.getColumnHeaderRowHeight(),l=1+t,c=i-l;if(n=t*e.getFloatingFiltersHeight(),n+=c*o,n+=a,this.headerHeight===n)return;this.headerHeight=n;let d=`${n+1}px`;this.comp.setHeightAndMinHeight(d),this.eventService.dispatchEvent({type:w.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gridOptionsService.is("enableRtl"),i=e.shiftKey!==t?ao.LEFT:ao.RIGHT;(this.headerNavigationService.navigateHorizontally(i,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case B.LEFT:t=ao.LEFT;case B.RIGHT:V(t)||(t=ao.RIGHT),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case B.UP:t=ao.UP;case B.DOWN:V(t)||(t=ao.DOWN),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){let t=this.gridOptionsService.getDocument(),{relatedTarget:i}=e;!i&&this.eGui.contains(t.activeElement)||this.eGui.contains(i)||this.focusService.clearFocusedHeader()}};xg([y("headerNavigationService")],ia.prototype,"headerNavigationService",void 0);xg([y("focusService")],ia.prototype,"focusService",void 0);xg([y("columnModel")],ia.prototype,"columnModel",void 0);xg([y("ctrlsService")],ia.prototype,"ctrlsService",void 0);xg([y("filterManager")],ia.prototype,"filterManager",void 0);var FI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Zd=class r extends oe{constructor(){super(r.TEMPLATE)}postConstruct(){let e={addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setHeightAndMinHeight:n=>{this.getGui().style.height=n,this.getGui().style.minHeight=n}};this.createManagedBean(new ia).setComp(e,this.getGui(),this.getFocusableElement());let i=n=>{this.createManagedBean(n),this.appendChild(n)};i(new rs("left")),i(new rs(null)),i(new rs("right"))}};Zd.TEMPLATE='<div class="ag-header" role="presentation"/>';FI([G],Zd.prototype,"postConstruct",null);var vS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Qd=class extends L{addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){let e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};vS([y("dragService")],Qd.prototype,"dragService",void 0);vS([y("ctrlsService")],Qd.prototype,"ctrlsService",void 0);Qd=vS([Y("horizontalResizeService")],Qd);var Sg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tl=class extends L{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:t,ePopup:i})},"columnMenu",t.target)}showMenuAfterButtonClick(e,t,i){this.showPopup(e,n=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:n,keepWithinBounds:!0,position:"under",column:e})},i,t)}showPopup(e,t,i,n){let s=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!s)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let o=document.createElement("div");ut(o,"presentation"),o.classList.add("ag-menu"),this.tabListener=this.addManagedListener(o,"keydown",p=>this.trapFocusWithin(p,o)),s.guiPromise.then(p=>o.appendChild(p));let a,l=()=>{var p;return(p=s.filterPromise)===null||p===void 0?void 0:p.then(f=>{var g;return(g=f?.afterGuiDetached)===null||g===void 0?void 0:g.call(f)})},c=n||this.ctrlsService.getGridBodyCtrl().getGui(),d=p=>{e.setMenuVisible(!1,"contextMenu");let f=p instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),f&&n&&Sn(n)){let g=this.focusService.findTabbableParent(n);g&&g.focus()}l()},u=this.localeService.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:u("ariaLabelColumnMenu","Column Menu")});h&&(this.hidePopup=a=h.hideFunc),s.filterPromise.then(p=>{t(o),p.afterGuiAttached&&p.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu")}trapFocusWithin(e,t){e.key!==B.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}isMenuEnabled(e){return e.isFilterAllowed()&&e.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")}};Sg([y("filterManager")],tl.prototype,"filterManager",void 0);Sg([y("popupService")],tl.prototype,"popupService",void 0);Sg([y("focusService")],tl.prototype,"focusService",void 0);Sg([y("ctrlsService")],tl.prototype,"ctrlsService",void 0);tl=Sg([Y("menuFactory")],tl);var pv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jd=class r extends oe{constructor(e){super(r.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e,e.items&&e.items.forEach(t=>this.addItem(t))}postConstruct(){this.createManagedBean(new Ci(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(()=>{var e,t,i;return(i=(t=(e=this.activeItem)===null||e===void 0?void 0:e.tabbedItem)===null||t===void 0?void 0:t.afterDetachedCallback)===null||i===void 0?void 0:i.call(t)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader" role="tablist" class="ag-tabs-header ${e?`${e}-header`:""}"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}handleKeyDown(e){let t=this.gridOptionsService.getDocument();switch(e.key){case B.RIGHT:case B.LEFT:if(!this.eHeader.contains(t.activeElement))return;let i=e.key===B.RIGHT,n=this.gridOptionsService.is("enableRtl"),s=this.items.indexOf(this.activeItem),o=i!==n?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===o)return;e.preventDefault();let a=this.items[o];this.showItemWrapper(a),a.eHeaderButton.focus();break;case B.UP:case B.DOWN:e.stopPropagation();break}}onTabKeyDown(e){if(e.defaultPrevented)return;let{focusService:t,eHeader:i,eBody:n,activeItem:s}=this,a=this.gridOptionsService.getDocument().activeElement,l=e.target;if(e.preventDefault(),i.contains(a)){t.focusInto(n,e.shiftKey);return}let c=null;t.isTargetUnderManagedComponent(n,l)&&(e.shiftKey&&(c=this.focusService.findFocusableElementBeforeTabGuard(n,l)),c||(c=s.eHeaderButton)),!c&&n.contains(a)&&(c=t.findNextFocusableElement(n,!1,e.shiftKey),c||(c=s.eHeaderButton)),c&&c.focus()}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){let t=document.createElement("span");ut(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eHeader.appendChild(t),Er(t,e.titleLabel);let i={tabbedItem:e,eHeaderButton:t};this.items.push(i),t.addEventListener("click",this.showItemWrapper.bind(this,i))}showItem(e){let t=this.items.find(i=>i.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){var t,i;let{tabbedItem:n,eHeaderButton:s}=e;if(this.params.onItemClicked&&this.params.onItemClicked({item:n}),this.activeItem===e){Ry(this.params.onActiveItemClicked);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),$t(this.eBody),n.bodyPromise.then(o=>{this.eBody.appendChild(o);let a=!this.focusService.isKeyboardMode();if(this.focusService.focusInto(this.eBody,!1,a),n.afterAttachedCallback&&n.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){let l=n.getScrollableContainer&&n.getScrollableContainer()||o;this.lastScrollListener=this.addManagedListener(l,"scroll",()=>{this.tabbedItemScrollMap.set(n.name,l.scrollTop)});let c=this.tabbedItemScrollMap.get(n.name);c!==void 0&&setTimeout(()=>{l.scrollTop=c},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(i=(t=this.activeItem.tabbedItem).afterDetachedCallback)===null||i===void 0||i.call(t)),s.classList.add("ag-tab-selected"),this.activeItem=e}};pv([y("focusService")],Jd.prototype,"focusService",void 0);pv([Z("eHeader")],Jd.prototype,"eHeader",void 0);pv([Z("eBody")],Jd.prototype,"eBody",void 0);pv([G],Jd.prototype,"postConstruct",null);var PI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},II=50,wg=class extends L{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,t){let i=this.gridOptionsService.getWindow(),n=()=>{let l=new i.ResizeObserver(t);return l.observe(e),()=>l.disconnect()},s=()=>{let l=$0(e),c=K0(e),d=!0,u=()=>{if(d){let h=$0(e),p=K0(e);(h!==l||p!==c)&&(l=h,c=p,t()),this.doNextPolyfillTurn(u)}};return u(),()=>d=!1},o=this.gridOptionsService.is("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!o?n():s()}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let e=()=>{let t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(i=>i())};this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(e,II)}};wg=PI([Y("resizeObserverService")],wg);var fv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},hc=class extends L{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){let t=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);let n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((i,n)=>i.index!==n.index?t*(n.index-i.index):n.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,i=t.list,n=this.createTasksP2,s=n.list,o=this.destroyTasks,a=new Date().getTime(),l=new Date().getTime()-a,c=e<=0,d=this.ctrlsService.getGridBodyCtrl();for(;c||l<e;){if(!d.getScrollFeature().scrollGridIfNeeded()){let h;if(i.length)this.sortTaskList(t),h=i.pop().task;else if(s.length)this.sortTaskList(n),h=s.pop().task;else if(o.length)h=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(h)||h()}l=new Date().getTime()-a}i.length||s.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=this.gridOptionsService.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){this.getFrameworkOverrides().setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};fv([y("ctrlsService")],hc.prototype,"ctrlsService",void 0);fv([y("paginationProxy")],hc.prototype,"paginationProxy",void 0);fv([G],hc.prototype,"init",null);hc=fv([Y("animationFrameService")],hc);var bg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},il=class extends L{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl})}getPreferredWidthForColumn(e,t){let i=this.getHeaderCellForColumn(e);if(!i)return-1;let n=this.rowRenderer.getAllCellsForColumn(e);return t||n.push(i),this.addElementsToContainerAndGetWidth(n)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let i=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,t)),i.appendChild(t);let n=t.offsetWidth;i.removeChild(t);let s=this.getAutoSizePadding();return n+s}getAutoSizePadding(){let e=this.gridOptionsService.getNum("autoSizePadding");return e!=null&&e>=0?e:20}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{let n=i.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}),t}cloneItemIntoDummy(e,t){let i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";let n=document.createElement("div"),s=n.classList;["ag-header-cell","ag-header-group-cell"].some(l=>i.classList.contains(l))?(s.add("ag-header","ag-header-row"),n.style.position="static"):s.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(c=>a.classList.contains(c))){for(let c=0;c<a.classList.length;c++){let d=a.classList[c];d!="ag-row-position-absolute"&&s.add(d)}break}a=a.parentElement}n.appendChild(i),t.appendChild(n)}};bg([y("rowRenderer")],il.prototype,"rowRenderer",void 0);bg([y("ctrlsService")],il.prototype,"ctrlsService",void 0);bg([y("rowCssClassCalculator")],il.prototype,"rowCssClassCalculator",void 0);bg([G],il.prototype,"postConstruct",null);il=bg([Y("autoWidthCalculator")],il);var gv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pc=class extends L{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyRowCtrls=[],this.containerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyRowCtrls(){return this.stickyRowCtrls}checkStickyRows(){let e=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],e);let t=[],i=this.rowRenderer.getFirstVisibleVerticalPixel(),n=s=>{var o,a,l;t.push(s);let c;if(this.isClientSide){let u=s;for(;u.expanded;)if(u.master)u=u.detailNode;else if(u.childrenAfterSort){if(u.childrenAfterSort.length===0)break;u=je(u.childrenAfterSort)}c=u.rowTop+u.rowHeight}else if(s.master)c=s.detailNode.rowTop+s.detailNode.rowHeight;else{let u=(o=s.childStore)===null||o===void 0?void 0:o.getStoreBounds();c=((a=u?.heightPx)!==null&&a!==void 0?a:0)+((l=u?.topPx)!==null&&l!==void 0?l:0)}let d=i+e+s.rowHeight;c<d?s.stickyRowTop=e+(c-d):s.stickyRowTop=e,e=0,t.forEach(u=>{let h=u.stickyRowTop+u.rowHeight;e<h&&(e=h)})};for(;;){let s=i+e,o=this.rowModel.getRowIndexAtPixel(s),a=this.rowModel.getRow(o);if(a==null||a.level<0)break;let l=[],c=a.parent;for(;c.level>=0;)l.push(c),c=c.parent;let d=l.reverse().find(u=>t.indexOf(u)<0&&u.displayed);if(d){n(d);continue}if(a.isExpandable()&&a.expanded&&a.rowTop<s){n(a);continue}break}return this.refreshNodesAndContainerHeight(t,e)}refreshStickyNode(e){let t=[];for(let i=0;i<this.stickyRowCtrls.length;i++){let n=this.stickyRowCtrls[i].getRowNode();n!==e&&t.push(n)}this.refreshNodesAndContainerHeight(t,this.containerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t){let i=!1,n=this.stickyRowCtrls.filter(l=>e.indexOf(l.getRowNode())===-1),s=e.filter(l=>this.stickyRowCtrls.findIndex(c=>c.getRowNode()===l)===-1);(n.length||s.length)&&(i=!0);let o={};n.forEach(l=>{o[l.getRowNode().id]=l,this.stickyRowCtrls=this.stickyRowCtrls.filter(c=>c!==l)});for(let l of Object.values(o))l.getRowNode().sticky=!1;this.destroyRowCtrls(o,!1);let a=s.map(l=>(l.sticky=!0,this.createRowCon(l,!1,!1)));return this.stickyRowCtrls.push(...a),this.stickyRowCtrls.forEach(l=>l.setRowTop(l.getRowNode().stickyRowTop)),this.stickyRowCtrls.sort((l,c)=>c.getRowNode().rowIndex-l.getRowNode().rowIndex),this.containerHeight!==t&&(this.containerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t),i=!0),i}};gv([y("rowModel")],pc.prototype,"rowModel",void 0);gv([y("rowRenderer")],pc.prototype,"rowRenderer",void 0);gv([y("ctrlsService")],pc.prototype,"ctrlsService",void 0);gv([G],pc.prototype,"postConstruct",null);var lo=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},MI=10,sn=class extends L{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.isGroupRowsSticky()){let e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new pc(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gridOptionsService.is("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new CS(t)}}getKeepDetailRowsCount(){let e=this.gridOptionsService.getNum("keepDetailRowsCount");return V(e)&&e>0?e:MI}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]}updateAllRowCtrls(){let e=Hr(this.rowCtrlsByRowIndex),t=this.gridOptionsService.is("ensureDomOrder"),i=this.gridOptionsService.isDomLayout("print");(t||i)&&e.sort((o,a)=>o.getRowNode().rowIndex-a.getRowNode.rowIndex);let n=Hr(this.zombieRowCtrls),s=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];n.length>0||s.length>0?this.allRowCtrls=[...e,...n,...s]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUSED,t=>{this.onCellFocusChanged(t)}),this.addManagedListener(this.eventService,w.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,w.EVENT_FLASH_CELLS,t=>{this.getAllCellCtrls().forEach(i=>i.onFlashCells(t))}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}),this.gridOptionsService.is("enableRangeSelection")&&(this.addManagedListener(this.eventService,w.EVENT_RANGE_SELECTION_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onRangeSelectionChanged())}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,()=>{this.getAllCellCtrls().forEach(t=>t.updateRangeBordersIfRangeCount())}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,()=>{this.getAllCellCtrls().forEach(t=>t.updateRangeBordersIfRangeCount())}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,()=>{this.getAllCellCtrls().forEach(t=>t.updateRangeBordersIfRangeCount())})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,w.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();let e=this.columnModel.getAllGridColumns();e&&e.forEach(t=>{let i=c=>{this.getAllCellCtrls().forEach(d=>{d.getColumn()===t&&c(d)})},n=()=>{i(c=>c.onLeftChanged())},s=()=>{i(c=>c.onWidthChanged())},o=()=>{i(c=>c.onFirstRightPinnedChanged())},a=()=>{i(c=>c.onLastLeftPinnedChanged())},l=()=>{i(c=>c.onColDefChanged())};t.addEventListener("leftChanged",n),t.addEventListener("widthChanged",s),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",a),t.addEventListener("colDefChanged",l),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",n),t.removeEventListener("widthChanged",s),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",a),t.removeEventListener("colDefChanged",l)})})}onDomLayoutChanged(){let e=this.gridOptionsService.isDomLayout("print"),t=e||this.gridOptionsService.is("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(i=>{let n=i.getCellElement(e);n&&t.push(n)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){e.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),e.length=0,t&&t.forEach(i=>{let n=new Fs(i,this.beans,!1,!1,this.printLayout);e.push(n)})}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{let i=n=>{let s=n[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);case"bottom":i(this.bottomRowCtrls);default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let n=this.gridOptionsService.getDocument().activeElement,s=this.gridOptionsService.getDomData(n,Jn.DOM_DATA_KEY_CELL_CTRL),o=this.gridOptionsService.getDomData(n,Fs.DOM_DATA_KEY_ROW_CTRL);return s||o?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&this.gridOptionsService.isAnimateRows(),s=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(s,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,i=this.gridOptionsService.is("suppressScrollOnNewData");t&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"}))}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){let s=t[n].getAllCellCtrls(),o=s.length;for(let a=0;a<o;a++)e.push(s[a])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],t=[...this.topRowCtrls,...this.bottomRowCtrls,...e];for(let i of Object.keys(this.rowCtrlsByRowIndex))t.push(this.rowCtrlsByRowIndex[i]);return t}addRenderedRowListener(e,t,i){let n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}flashCells(e={}){let{flashDelay:t,fadeDelay:i}=e;this.getCellCtrls(e.rowNodes,e.columns).forEach(n=>n.flashCell({flashDelay:t,fadeDelay:i}))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{if(i.refreshShouldDestroy()){let n=i.getRowCtrl();n&&n.refreshCell(i)}else i.refreshCell(t)}),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(i=>{if(!i.isFullWidth())return;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(e){var t;let i=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if(!((t=e.columns)===null||t===void 0)&&t.length)return i;let n=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(s&&!this.isRowInMap(o.getRowNode(),s)||!o.isFullWidth())return;let a=o.getFullWidthCellRenderer();a&&n.push(a)}),[...n,...i]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{let n=i.getCellEditor();n&&t.push(n)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(i=>{let n=i.id;i.rowPinned==="top"?t.top[n]=i:i.rowPinned==="bottom"?t.bottom[n]=i:t.normal[n]=i}),t}isRowInMap(e,t){let i=e.id,n=e.rowPinned;return n==="bottom"?t.bottom[i]!=null:n==="top"?t.top[i]!=null:t.normal[i]!=null}getRowCtrls(e){let t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(n=>{let s=n.getRowNode();return this.isRowInMap(s,t)})}getCellCtrls(e,t){let i;V(t)&&(i={},t.forEach(s=>{let o=this.columnModel.getGridColumn(s);V(o)&&(i[o.getId()]=!0)}));let n=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(o=>{let a=o.getColumn().getId();i&&!i[a]||n.push(o)})}),n}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}getRowsToRecycle(){let e=[];ft(this.rowCtrlsByRowIndex,(i,n)=>{n.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);let t={};return ft(this.rowCtrlsByRowIndex,(i,n)=>{let s=n.getRowNode();t[s.id]=n}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){e.forEach(t=>{let i=this.rowCtrlsByRowIndex[t];i&&(i.destroyFirstPass(),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[t]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,i;this.stickyRowFeature&&Sd()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);let n=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;this.stickyRowFeature&&(o=this.stickyRowFeature.checkStickyRows());let a=this.firstRenderedRow!==n||this.lastRenderedRow!==s;if(!(t&&!o&&!a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t),i!=null)){let l=this.getCellToRestoreFocusToAfterRefresh();i!=null&&l==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e){let t={};e.forEach(s=>t[s]=!0);let n=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!t[s]);this.removeRowCtrls(n)}calculateIndexesToDraw(e){let t=Sx(this.firstRenderedRow,this.lastRenderedRow),i=(s,o)=>{let a=o.getRowNode().rowIndex;a!=null&&(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&t.push(a)};ft(this.rowCtrlsByRowIndex,i),ft(e,i),t.sort((s,o)=>s-o);let n=[];for(let s=0;s<t.length;s++){let o=t[s],a=this.paginationProxy.getRow(o);a&&!a.sticky&&n.push(o)}return n}recycleRows(e,t=!1,i=!1){let n=this.calculateIndexesToDraw(e);this.removeRowCompsNotToDraw(n),this.printLayout&&(t=!1);let s=[];n.forEach(o=>{let a=this.createOrUpdateRowCtrl(o,e,t,i);V(a)&&s.push(a)}),e&&(i&&!this.gridOptionsService.is("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){let t={type:w.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){let e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;let n=i.getRowNode();return!(t!=null&&!this.isRowInMap(n,t))})}createOrUpdateRowCtrl(e,t,i,n){let s,o=this.rowCtrlsByRowIndex[e];if(o||(s=this.paginationProxy.getRow(e),V(s)&&V(t)&&t[s.id]&&s.alreadyRendered&&(o=t[s.id],t[s.id]=null)),!o)if(s||(s=this.paginationProxy.getRow(e)),V(s))o=this.createRowCon(s,i,n);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){let i=[];ft(e,(n,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);return}s.destroyFirstPass(),t?(this.zombieRowCtrls[s.getInstanceId()]=s,i.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[s.getInstanceId()]})):s.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),Ty(i))}getRowBuffer(){let e=this.gridOptionsService.getNum("rowBuffer");return typeof e=="number"?e<0&&(Ne(()=>console.warn("AG Grid: rowBuffer should not be negative"),"warn rowBuffer negative"),e=0,this.gridOptionsService.set("rowBuffer",0)):e=10,e}getRowBufferInPixels(){let e=this.getRowBuffer(),t=this.gridOptionsService.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.paginationProxy.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{let l=this.getRowBufferInPixels(),c=this.ctrlsService.getGridBodyCtrl(),d=this.gridOptionsService.is("suppressRowVirtualisation"),u=!1,h,p;do{let C=this.paginationProxy.getPixelOffset(),{pageFirstPixel:S,pageLastPixel:b}=this.paginationProxy.getCurrentPagePixelRange(),T=this.rowContainerHeightService.getDivStretchOffset(),A=c.getScrollFeature().getVScrollPosition(),E=A.top,N=A.bottom;d?(h=S+T,p=b+T):(h=Math.max(E+C-l,S)+T,p=Math.min(N+C+l,b)+T),this.firstVisibleVPixel=Math.max(E+C,S)+T,u=this.ensureAllRowsInRangeHaveHeightsCalculated(h,p)}while(u);let f=this.paginationProxy.getRowIndexAtPixel(h),g=this.paginationProxy.getRowIndexAtPixel(p),m=this.paginationProxy.getPageFirstRow(),v=this.paginationProxy.getPageLastRow();f<m&&(f=m),g>v&&(g=v),e=f,t=g}let i=this.gridOptionsService.isDomLayout("normal"),n=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);i&&!n&&t-e>s&&(t=e+s);let o=e!==this.firstRenderedRow,a=t!==this.lastRenderedRow;if(o||a){this.firstRenderedRow=e,this.lastRenderedRow=t;let l={type:w.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t};this.eventService.dispatchEvent(l)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let e={type:w.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let i=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let n=e.getRowNode(),s=this.focusService.isRowNodeFocused(n),o=e.isEditing(),a=n.detail;return s||o||a?!!this.paginationProxy.isRowPresent(n):!1}createRowCon(e,t,i){let n=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(n)return n;let s=this.gridOptionsService.is("suppressAnimationFrame"),o=i&&!s&&!this.printLayout;return new Fs(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.keys(e).map(t=>e[t].getRowNode())}getRowByPosition(e){let t,{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null);break}return t}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}};lo([y("animationFrameService")],sn.prototype,"animationFrameService",void 0);lo([y("paginationProxy")],sn.prototype,"paginationProxy",void 0);lo([y("columnModel")],sn.prototype,"columnModel",void 0);lo([y("pinnedRowModel")],sn.prototype,"pinnedRowModel",void 0);lo([y("rowModel")],sn.prototype,"rowModel",void 0);lo([y("focusService")],sn.prototype,"focusService",void 0);lo([y("beans")],sn.prototype,"beans",void 0);lo([y("rowContainerHeightService")],sn.prototype,"rowContainerHeightService",void 0);lo([y("ctrlsService")],sn.prototype,"ctrlsService",void 0);lo([G],sn.prototype,"postConstruct",null);sn=lo([Y("rowRenderer")],sn);var CS=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],lr(this.entriesList,e)}getEntries(){return this.entriesList}};var F_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},kh=class extends L{formatValue(e,t,i,n,s=!0){let o=null,a,l=e.getColDef();if(n?a=n:s&&(a=l.valueFormatter),a){let c={value:i,node:t,data:t?t.data:null,colDef:l,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};typeof a=="function"?o=a(c):o=this.expressionService.evaluate(a,c)}else if(l.refData)return l.refData[i]||"";return o==null&&Array.isArray(i)&&(o=i.join(", ")),o}};F_([y("expressionService")],kh.prototype,"expressionService",void 0);kh=F_([Y("valueFormatterService")],kh);var yS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},eu=class extends L{init(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))}isEmpty(e){let t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return sr(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){let i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(sr(i))return 0;for(let n=0;n<i.length;n++){let s=i[n];if(s.rowTop+s.rowHeight-1>=e)return n}return i.length-1}setPinnedTopRowData(e){this.pinnedTopRows=this.createNodesFromData(e,!0);let t={type:w.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(e){this.pinnedBottomRows=this.createNodesFromData(e,!1);let t={type:w.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){let i=[];if(e){let n=0;e.forEach((s,o)=>{let a=new Ge(this.beans);a.data=s;let l=t?Ge.ID_PREFIX_TOP_PINNED:Ge.ID_PREFIX_BOTTOM_PINNED;a.id=l+o,a.rowPinned=t?"top":"bottom",a.setRowTop(n),a.setRowHeight(this.gridOptionsService.getRowHeightForNode(a).height),a.setRowIndex(o),n+=a.rowHeight,i.push(a)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){sr(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){sr(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;let t=je(e);return t.rowTop+t.rowHeight}};yS([y("beans")],eu.prototype,"beans",void 0);yS([G],eu.prototype,"init",null);eu=yS([Y("pinnedRowModel")],eu);var rl=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let n=0;n<e.childrenAfterGroup.length;n++){let s=e.childrenAfterGroup[n];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[n],t,i):i&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){let n={rowNode:t,children:null};this.mapToItems[t.id]=n,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(n=>this.nodeIdsToColumns[i.id][n.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){let s=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(s),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let i=this.nodeIdsToColumns[e.id];return t.filter(s=>i[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let i=this.nodeIdsToColumns[e.id];return t.filter(s=>!i[s.getId()])}};var Gh=(()=>{class r extends L{constructor(t){super(),this.state=r.STATE_WAITING_TO_LOAD,this.version=0,this.id=t}getId(){return this.id}load(){this.state=r.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=r.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(t){this.isRequestMostRecentAndLive(t)&&(this.state=r.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(t,i){this.successCommon(t,i)}pageLoaded(t,i,n){this.successCommon(t,{rowData:i,rowCount:n})}isRequestMostRecentAndLive(t){let i=t===this.version,n=this.isAlive();return i&&n}successCommon(t,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state=r.STATE_LOADED,this.processServerResult(i))}dispatchLoadCompleted(t=!0){let i={type:r.EVENT_LOAD_COMPLETE,success:t,block:this};this.dispatchEvent(i)}}return r.EVENT_LOAD_COMPLETE="loadComplete",r.STATE_WAITING_TO_LOAD="needsLoading",r.STATE_LOADING="loading",r.STATE_LOADED="loaded",r.STATE_FAILED="failed",r})();var vv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},LI=function(r,e){return function(t,i){e(t,i,r)}},mv,ra=mv=class extends L{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gridOptionsService.getNum("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Pe.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){let e=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener(Gh.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Pe.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:mv.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:mv.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()===Gh.STATE_WAITING_TO_LOAD).slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};ra.BLOCK_LOADED_EVENT="blockLoaded";ra.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";vv([y("rowModel")],ra.prototype,"rowModel",void 0);vv([G],ra.prototype,"postConstruct",null);vv([LI(0,Wt("loggerFactory"))],ra.prototype,"setBeans",null);ra=mv=vv([Y("rowNodeBlockLoader")],ra);var xS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tu=class extends L{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,t,i,n){let s=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return s&&this.calculatePages(),s}isPaginateChildRows(){return this.gridOptionsService.is("groupRemoveSingleChildren")||this.gridOptionsService.is("groupRemoveLowestSingleChildren")?!0:this.gridOptionsService.is("paginateChildRows")}onModelUpdated(e){this.calculatePages();let t={type:w.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}onPaginationPageSizeChanged(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages();let e={type:w.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}goToPage(e){if(!this.active||this.currentPage===e||typeof this.currentPage!="number")return;this.currentPage=e;let t={type:w.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(t)}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return Ce(this.topRowBounds)||Ce(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}isRowPresent(e){return this.rowModel.isRowPresent(e)?e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){let t=this.getPageFirstRow(),i=this.getPageLastRow();for(let n=t;n<=i;n++){let s=this.getRow(n);s&&e(s)}}getType(){return this.rowModel.getType()}getRowBounds(e){let t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPageSize(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(this.pageSize==null||this.pageSize<1)&&(this.pageSize=100)}calculatePages(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(V(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:w.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let n=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=n-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};xS([y("rowModel")],tu.prototype,"rowModel",void 0);xS([G],tu.prototype,"postConstruct",null);tu=xS([Y("paginationProxy")],tu);var P_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Bh=class extends L{processAllCellClasses(e,t,i,n){this.processClassRules(e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,n){if(e==null)return;let s=Object.keys(e),o={},a={};for(let l=0;l<s.length;l++){let c=s[l],d=e[c],u;typeof d=="string"?u=this.expressionService.evaluate(d,t):typeof d=="function"&&(u=d(t)),c.split(" ").forEach(h=>{h==null||h.trim()==""||(u?o[h]=!0:a[h]=!0)})}n&&Object.keys(a).forEach(n),Object.keys(o).forEach(i)}getStaticCellClasses(e,t){let{cellClass:i}=e;if(!i)return[];let n;return typeof i=="function"?n=i(t):n=i,typeof n=="string"&&(n=[n]),n||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(s=>{i(s)})}};P_([y("expressionService")],Bh.prototype,"expressionService",void 0);Bh=P_([Y("stylingService")],Bh);var Eg=class extends eo{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}};var _g=class extends hr{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}};var Tg=class extends _r{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));let e=Ni();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||e||this.eInput.focus()}),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}setMin(e){var t;let i=e instanceof Date?(t=zi(e??null,!1))!==null&&t!==void 0?t:void 0:e;return this.min===i?this:(this.min=i,$n(this.eInput,"min",i),this)}setMax(e){var t;let i=e instanceof Date?(t=zi(e??null,!1))!==null&&t!==void 0?t:void 0:e;return this.max===i?this:(this.max=i,$n(this.eInput,"max",i),this)}setStep(e){return this.step===e?this:(this.step=e,$n(this.eInput,"step",e),this)}getDate(){var e;if(this.eInput.validity.valid)return(e=ji(this.getValue()))!==null&&e!==void 0?e:void 0}setDate(e,t){this.setValue(zi(e??null,!1),t)}};var Rg=class extends hr{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();let{min:e,max:t,step:i}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>{let t=e.target.value;this.setValue(t)})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());let i=super.setValue(e,t);return this.eInput.value=e,i}};var I_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Vh=class extends oe{constructor(e,t){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e,this.wrapperEl=t}postConstruct(){this.addManagedListener(this.getGui(),"mouseup",this.onMouseUp.bind(this))}setState(e){let t="";this.params.valueFormatter&&(t=this.params.valueFormatter(e)),this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.value=e}highlightString(e){let{parsedValue:t}=this;if(!(this.params.cellRenderer||!V(t)))if(V(e)){let i=t?.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(i>=0){let n=i+e.length,s=Et(t.slice(0,i),!0),o=Et(t.slice(i,n),!0),a=Et(t.slice(n));this.renderValueWithoutRenderer(`${s}<span class="ag-rich-select-row-text-highlight">${o}</span>${a}`)}}else this.renderValueWithoutRenderer(t)}updateHighlighted(e){var t;let i=this.getGui(),n=`ag-rich-select-row-${this.getCompId()}`;if((t=i.parentElement)===null||t===void 0||t.setAttribute("id",n),e){let s=this.getParentComponent().getAriaElement();Of(s,n),this.wrapperEl.setAttribute("data-active-option",n)}ws(i.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,t){let i=this.gridOptionsService.getDocument(),n=this.getGui(),s=i.createElement("span");s.style.overflow="hidden",s.style.textOverflow="ellipsis";let o=Et(V(t)?t:e,!0);this.parsedValue=V(o)?o:null,n.appendChild(s),this.renderValueWithoutRenderer(o)}renderValueWithoutRenderer(e){let t=this.getGui().querySelector("span");t&&(t.innerHTML=V(e)?e:"&nbsp;")}populateWithRenderer(e,t){let i,n;return this.params.cellRenderer&&(n=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:t,api:this.gridOptionsService.api})),n&&(i=n.newAgStackInstance()),i&&Uf(i,this.getGui()),i?(i.then(s=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(s)})}),!0):!1}onMouseUp(){let e=this.getParentComponent(),t={type:w.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e?.dispatchEvent(t)}};I_([y("userComponentFactory")],Vh.prototype,"userComponentFactory",void 0);I_([G],Vh.prototype,"postConstruct",null);var co=class extends oe{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();let t=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:n=>{t.forEach(s=>n!=null?s.setAttribute("tabindex",n):s.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new qd({comp:i,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))}createTabGuard(e){let t=document.createElement("div"),i=e==="top"?dc.TAB_GUARD_TOP:dc.TAB_GUARD_BOTTOM;return t.classList.add(dc.TAB_GUARD,i),ut(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];$t(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t){Wa(e)||(e=e.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",e):super.appendChild(e,t)}};var Cv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},uo=class r extends co{constructor(e){super(r.getTemplate(e?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20;let{cssIdentifier:t="default",ariaRole:i="listbox",listName:n}=e||{};this.cssIdentifier=t,this.ariaRole=i,this.listName=n}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){let t=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),i=this.eContainer;ut(i,this.ariaRole),Er(i,t)}addResizeObserver(){let e=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),t=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(t)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){let t=e.target;return t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=Yy(t)-1),!1}onFocusOut(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1}handleKeyDown(e){switch(e.key){case B.UP:case B.DOWN:this.navigate(e.key===B.UP)&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(wr(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;let t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?!1:(this.focusRow(t),!0)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.ensureIndexVisible(e),window.setTimeout(()=>{if(!this.isAlive())return;let t=this.renderedRows.get(e);t&&t.eDiv.focus()},10)}getComponentAt(e){let t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,i)=>e(t.rowComponent,i))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.environment.getListItemHeight()}ensureIndexVisible(e,t=!0){let i=this.model.getRowCount();if(typeof e!="number"||e<0||e>=i)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;let n=e*this.rowHeight,s=n+this.rowHeight,o=this.getGui(),a=o.scrollTop,l=o.offsetHeight,c=a+l,d=t?0:this.rowHeight,u=a>n+d,h=c<s-d;if(u)return o.scrollTop=n,!0;if(h){let p=s-l;return o.scrollTop=p,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;let t=this.model.getRowCount();this.eContainer.style.height=`${t*this.rowHeight}px`,xf(()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;let t=this.getGui(),i=t.scrollTop,n=i+t.offsetHeight,s=Math.floor(i/this.rowHeight),o=Math.floor(n/this.rowHeight);this.ensureRowsRendered(s,o,e)}ensureRowsRendered(e,t,i){this.renderedRows.forEach((n,s)=>{(s<e||s>t)&&s!==this.lastFocusedRowIndex&&this.removeRow(s)}),i&&this.refreshRows();for(let n=e;n<=t;n++)this.renderedRows.has(n)||n<this.model.getRowCount()&&this.insertRow(n)}insertRow(e){let t=this.model.getRow(e),i=document.createElement("div");if(i.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),ut(i,this.ariaRole==="tree"?"treeitem":"option"),Ff(i,this.model.getRowCount()),Pf(i,e+1),i.setAttribute("tabindex","-1"),typeof this.model.isRowSelected=="function"){let s=this.model.isRowSelected(e);ws(i,!!s),ox(i,s)}i.style.height=`${this.rowHeight}px`,i.style.top=`${this.rowHeight*e}px`;let n=this.componentCreator(t,i);n.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),i.appendChild(n.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:n,eDiv:i,value:t})}removeRow(e){let t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){let e=this.model.getRowCount();this.renderedRows.forEach((t,i)=>{var n,s;if(i>=e)this.removeRow(i);else{let o=this.model.getRow(i);!((s=(n=this.model).areRowsEqual)===null||s===void 0)&&s.call(n,t.value,o)?this.componentUpdater(o,t.rowComponent):this.removeRow(i)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};Cv([y("resizeObserverService")],uo.prototype,"resizeObserverService",void 0);Cv([y("animationFrameService")],uo.prototype,"animationFrameService",void 0);Cv([Z("eContainer")],uo.prototype,"eContainer",void 0);Cv([G],uo.prototype,"postConstruct",null);var M_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},NI=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,iu=class extends Es{constructor(e){var t,i;super(Object.assign(Object.assign({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(t=e?.template)!==null&&t!==void 0?t:NI,modalPicker:!1},e),{maxPickerHeight:(i=e?.maxPickerHeight)!==null&&i!==void 0?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;let{cellRowHeight:n,value:s,valueList:o,searchStringCreator:a}=e||{};n!=null&&(this.cellRowHeight=n),s!=null&&(this.value=s),o!=null&&(this.values=o),a&&(this.searchStringCreator=a)}postConstruct(){var e;super.postConstruct(),this.createLoadingElement(),this.createListComponent();let{allowTyping:t,placeholder:i}=this.config;t?(this.eInput.setAutoComplete(!1).setInputPlaceholder(i),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=(e=this.gridOptionsService.getNum("tabIndex"))!==null&&e!==void 0?e:0;let{searchDebounceDelay:n=300}=this.config;this.clearSearchString=ar(this.clearSearchString,n),this.renderSelectedValue(),t&&(this.eInput.onValueChange(s=>this.searchTextFromString(s)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){let e=this.gridOptionsService.getDocument(),t=this.localeService.getLocaleTextFunc(),i=e.createElement("div");i.classList.add("ag-loading-text"),i.innerText=t("loadingOoo","Loading..."),this.eLoading=i}createListComponent(){this.listComponent=this.createBean(new uo({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,w.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});let{cellRowHeight:e}=this;e&&this.listComponent.setRowHeight(e);let t=this.listComponent.getGui(),i=this.listComponent.getAriaElement();this.addManagedListener(t,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(t,"mousedown",a=>a.preventDefault()),t.classList.add("ag-rich-select-list");let n=`ag-rich-select-list-${this.listComponent.getCompId()}`;i.setAttribute("id",n);let o=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);Er(i,o),ax(this.eWrapper,i)}renderSelectedValue(){let{value:e,eDisplayField:t,config:i}=this,n=this.config.valueFormatter?this.config.valueFormatter(e):e;if(i.allowTyping){this.eInput.setValue(n);return}let s;i.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.config,{value:e,valueFormatted:n,api:this.gridOptionsService.api}));let o;if(s&&(o=s.newAgStackInstance()),o)$t(t),Uf(o,t),o.then(a=>{this.addDestroyFunc(()=>this.getContext().destroyBean(a))});else if(V(this.value))t.innerText=n,t.classList.remove("ag-display-as-placeholder");else{let{placeholder:a}=i;V(a)?(t.innerHTML=`${Et(a)}`,t.classList.add("ag-display-as-placeholder")):$t(t)}}getCurrentValueIndex(){let{currentList:e,value:t}=this;if(t==null)return-1;for(let i=0;i<e.length;i++)if(e[i]===t)return i;return-1}highlightFilterMatch(){var e;(e=this.listComponent)===null||e===void 0||e.forEachRenderedRow((t,i)=>{t.highlightString(this.searchString)})}highlightSelectedValue(e){var t;e==null&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,(t=this.listComponent)===null||t===void 0||t.forEachRenderedRow((i,n)=>{let s=e===-1?!1:this.highlightedItem===n;i.updateHighlighted(s)})}setRowHeight(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)}createPickerComponent(){let{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueList(e){let{valueList:t,refresh:i}=e;this.listComponent&&this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:()=>t.length,getRow:n=>t[n]}),i&&(this.values?this.listComponent.refresh():(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker()}showCurrentValueInPicker(){var e,t;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}!((e=this.eLoading)===null||e===void 0)&&e.offsetParent&&((t=this.eLoading.parentElement)===null||t===void 0||t.removeChild(this.eLoading));let i=this.getCurrentValueIndex();i!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(i),this.listComponent.refresh(!0),this.highlightSelectedValue(i)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(e){this.eInput&&this.eInput.getFocusableElement().focus()}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===B.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!Ed(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){e==null&&(e=""),this.searchString=e,this.runSearch()}buildSearchStrings(e){let{valueFormatter:t=n=>n}=this.config,i;return typeof e[0]=="number"||typeof e[0]=="string"?i=e.map(n=>t(n)):typeof e[0]=="object"&&this.searchStringCreator&&(i=this.searchStringCreator(e)),i}getSuggestionsAndFilteredValues(e,t){let i=[],n=[];if(!e.length)return{suggestions:i,filteredValues:n};let{allowTyping:s,searchType:o="fuzzy",filterList:a}=this.config,l=a&&s;if(o==="fuzzy"){let c=Wl(this.searchString,t,!0);i=c.values;let d=c.indices;if(l&&d.length)for(let u=0;u<d.length;u++)n.push(this.values[d[u]])}else i=t.filter((c,d)=>{let u=c.toLocaleLowerCase(),h=this.searchString.toLocaleLowerCase(),p=o==="match"?u.startsWith(h):u.indexOf(h)!==-1;return l&&p&&n.push(this.values[d]),p});return{suggestions:i,filteredValues:n}}filterListModel(e){let{allowTyping:t,filterList:i}=this.config;!t||!i||this.setValueList({valueList:e,refresh:!0})}runSearch(){var e,t,i;let{values:n}=this,s=this.buildSearchStrings(n);if(!s){this.highlightSelectedValue(-1);return}let{suggestions:o,filteredValues:a}=this.getSuggestionsAndFilteredValues(this.searchString,s),{allowTyping:l,filterList:c,highlightMatch:d,searchType:u="fuzzy"}=this.config,h=a.length,p=!!(l&&c&&this.searchString!=="");if(p&&this.filterListModel(p?a:n),o.length){let g=p?0:s.indexOf(o[0]);this.selectListItem(g),d&&u!=="fuzzy"&&this.highlightFilterMatch()}else if(this.highlightSelectedValue(-1),!p||h)(e=this.listComponent)===null||e===void 0||e.ensureIndexVisible(0);else if(p){this.getAriaElement().removeAttribute("data-active-option");let g=(t=this.listComponent)===null||t===void 0?void 0:t.getAriaElement();g&&Of(g,null)}let f=(i=this.listComponent)===null||i===void 0?void 0:i.getGui();f?.classList.toggle("ag-hidden",p&&!h)}clearSearchString(){this.searchString=""}selectListItem(e,t,i){if(!this.isPickerDisplayed||!this.listComponent||e<0||e>=this.currentList.length)return;this.listComponent.ensureIndexVisible(e,!t)&&!i&&this.listComponent.refresh(!0),this.highlightSelectedValue(e)}setValue(e,t,i){let n=this.currentList.indexOf(e);return n===-1?this:(this.value=e,i||this.selectListItem(n),this.renderSelectedValue(),super.setValue(e,t))}createRowComponent(e){let t=new Vh(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(e);let{highlightMatch:i,searchType:n="fuzzy"}=this.config;return i&&n!=="fuzzy"&&t.highlightString(this.searchString),t}getRowForMouseEvent(e){let{listComponent:t}=this;if(!t)return-1;let n=(t?.getGui()).getBoundingClientRect(),s=t.getScrollTop(),o=e.clientY-n.top+s;return Math.floor(o/t.getRowHeight())}onPickerMouseMove(e){if(!this.listComponent)return;let t=this.getRowForMouseEvent(e);t!==-1&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0,!0))}onNavigationKeyDown(e,t){e.preventDefault();let i=t===B.DOWN;if(!this.isPickerDisplayed&&i){this.showPicker();return}let n=this.highlightedItem,o=n===-1?0:n+(i?1:-1);this.selectListItem(o,!1,!0)}onEnterKeyDown(e){this.isPickerDisplayed&&(e.preventDefault(),this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onListValueSelected(e,t){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,t),this.hidePicker()}dispatchPickerEvent(e,t){let i={type:w.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:e};this.dispatchEvent(i)}getFocusableElement(){let{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){let t=e.key,{allowTyping:i}=this.config;switch(t){case B.LEFT:case B.RIGHT:case B.PAGE_HOME:case B.PAGE_END:i||e.preventDefault();break;case B.PAGE_UP:case B.PAGE_DOWN:e.preventDefault();break;case B.DOWN:case B.UP:this.onNavigationKeyDown(e,t);break;case B.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),wr(e),this.hidePicker());break;case B.ENTER:this.onEnterKeyDown(e);break;default:i||this.buildSearchStringFromKeyboardEvent(e)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};M_([y("userComponentFactory")],iu.prototype,"userComponentFactory",void 0);M_([Z("eInput")],iu.prototype,"eInput",void 0);var yv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},na=class r extends Xl{constructor(e){super(e,r.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field")}onValueChange(e){let t=w.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,t,()=>{let i=parseFloat(this.eText.getValue());this.eSlider.setValue(i.toString(),!0),e(i||0)}),this.addManagedListener(this.eSlider,t,()=>{let i=this.eSlider.getValue();this.eText.setValue(i,!0),e(parseFloat(i))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:w.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};na.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;yv([Z("eLabel")],na.prototype,"eLabel",void 0);yv([Z("eSlider")],na.prototype,"eSlider",void 0);yv([Z("eText")],na.prototype,"eText",void 0);yv([G],na.prototype,"init",null);var fc=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},on=class r extends oe{constructor(e={}){super(r.getTemplate(e)),this.suppressEnabledCheckbox=!0,this.suppressOpenCloseIcons=!1;let{title:t,enabled:i,items:n,suppressEnabledCheckbox:s,suppressOpenCloseIcons:o}=e;this.title=t,this.cssIdentifier=e.cssIdentifier||"default",this.enabled=i??!0,this.items=n||[],this.alignItems=e.alignItems||"center",s!=null&&(this.suppressEnabledCheckbox=s),o!=null&&(this.suppressOpenCloseIcons=o)}static getTemplate(e){let t=e.cssIdentifier||"default",i=e.direction||"vertical";return`<div class="ag-group ag-${t}-group" role="presentation">
            <div class="ag-group-title-bar ag-${t}-group-title-bar ag-unselectable" ref="eTitleBar" role="button">
                <span class="ag-group-title-bar-icon ag-${t}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${t}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${t}-group-title"></span>
            </div>
            <div ref="eToolbar" class="ag-group-toolbar ag-${t}-group-toolbar">
                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
            </div>
            <div ref="eContainer" class="ag-group-container ag-group-container-${i} ag-${t}-group-container"></div>
        </div>`}postConstruct(){if(this.items.length){let t=this.items;this.items=[],this.addItems(t)}let e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()}setupExpandContract(){this.eGroupClosedIcon.appendChild(wn("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(wn("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",()=>this.toggleGroupExpand()),this.addManagedListener(this.eTitleBar,"keydown",e=>{switch(e.key){case B.ENTER:case B.SPACE:e.preventDefault(),this.toggleGroupExpand();break;case B.RIGHT:case B.LEFT:e.preventDefault(),this.toggleGroupExpand(e.key===B.RIGHT);break}})}refreshAriaStatus(){this.suppressOpenCloseIcons||Wr(this.eTitleBar,this.expanded)}refreshChildDisplay(){let e=!this.suppressOpenCloseIcons;ke(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),ke(this.eGroupOpenedIcon,e&&this.expanded),ke(this.eGroupClosedIcon,e&&!this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;let t=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(t),this}toggleGroupExpand(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),ke(this.eContainer,!0),this):(e=e??!this.expanded,this.expanded===e?this:(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),ke(this.eContainer,e),this.dispatchEvent({type:this.expanded?r.EVENT_EXPANDED:r.EVENT_COLLAPSED}),this))}addItems(e){e.forEach(t=>this.addItem(t))}addItem(e){let t=this.eContainer,i=e instanceof oe?e.getGui():e;i.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),t.appendChild(i),this.items.push(i)}hideItem(e,t){let i=this.items[t];ke(i,!e)}setTitle(e){return this.eTitle.innerText=e,this}addCssClassToTitleBar(e){this.eTitleBar.classList.add(e)}setEnabled(e,t){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),t||this.cbGroupEnabled.setValue(e),this}isEnabled(){return this.enabled}onEnableChange(e){return this.cbGroupEnabled.onValueChange(t=>{this.setEnabled(t,!0),e(t)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this}refreshDisabledStyles(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)}};on.EVENT_EXPANDED="expanded";on.EVENT_COLLAPSED="collapsed";fc([Z("eTitleBar")],on.prototype,"eTitleBar",void 0);fc([Z("eGroupOpenedIcon")],on.prototype,"eGroupOpenedIcon",void 0);fc([Z("eGroupClosedIcon")],on.prototype,"eGroupClosedIcon",void 0);fc([Z("eToolbar")],on.prototype,"eToolbar",void 0);fc([Z("cbGroupEnabled")],on.prototype,"cbGroupEnabled",void 0);fc([Z("eTitle")],on.prototype,"eTitle",void 0);fc([Z("eContainer")],on.prototype,"eContainer",void 0);fc([G],on.prototype,"postConstruct",null);var L_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ru=class r extends co{constructor(e=1){super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[]}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}onTabKeyDown(e){let t=this.getParentComponent(),i=t&&t.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case B.UP:case B.RIGHT:case B.DOWN:case B.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case B.ESCAPE:let t=this.findTopMenu();t&&this.focusService.focusInto(t.getGui());break}}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e?.forEach(t=>{t==="separator"?this.addSeparator():typeof t=="string"?console.warn(`AG Grid: unrecognised menu item ${t}`):this.addItem(t)})}addItem(e){let t=this.createManagedBean(new On(Object.assign(Object.assign({},e),{isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen())})));t.setParentComponent(this),Qy(t.getGui(),this.level),this.menuItems.push(t),this.appendChild(t.getGui()),this.addManagedListener(t,On.EVENT_MENU_ITEM_SELECTED,i=>{this.dispatchEvent(i)}),this.addManagedListener(t,On.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem})}activateFirstItem(){let e=this.menuItems.filter(t=>!t.isDisabled())[0];e&&e.activate()}addSeparator(){let e=`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`;this.appendChild(Yt(e))}findTopMenu(){let e=this.getParentComponent();if(!e&&this instanceof r)return this;for(;;){let t=e&&e.getParentComponent&&e.getParentComponent();if(!t||!(t instanceof r||t instanceof On))break;e=t}return e instanceof r?e:void 0}handleNavKey(e){switch(e){case B.UP:case B.DOWN:let i=this.findNextItem(e===B.UP);i&&i!==this.activeMenuItem&&i.activate();return}let t=this.gridOptionsService.is("enableRtl")?B.RIGHT:B.LEFT;e===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){let t=this.getParentComponent();t&&t instanceof On&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus())}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){let t=this.menuItems.filter(s=>!s.isDisabled());if(!t.length)return;if(!this.activeMenuItem)return e?je(t):t[0];e&&t.reverse();let i,n=!1;for(let s=0;s<t.length;s++){let o=t[s];if(!n){o===this.activeMenuItem&&(n=!0);continue}i=o;break}return i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};L_([y("focusService")],ru.prototype,"focusService",void 0);L_([G],ru.prototype,"postConstruct",null);var kI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Hh=class extends co{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===B.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){let e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}};kI([G],Hh.prototype,"postConstruct",null);var N_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},On=class r extends oe{constructor(e){super(),this.params=e,this.isActive=!1,this.subMenuIsOpen=!1,this.setTemplate(`<div class="${this.getClassName()}" tabindex="-1" role="treeitem"></div>`)}init(){this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();let e=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),Df(e,!0)):(this.addGuiEventListener("click",t=>this.onItemSelected(t)),this.addGuiEventListener("keydown",t=>{(t.key===B.ENTER||t.key===B.SPACE)&&(t.preventDefault(),this.onItemSelected(t))}),this.addGuiEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault()}),this.addGuiEventListener("mouseenter",()=>this.onMouseEnter()),this.addGuiEventListener("mouseleave",()=>this.onMouseLeave())),this.params.cssClasses&&this.params.cssClasses.forEach(t=>this.addCssClass(t))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){if(this.closeSubMenu(),!this.params.subMenu)return;let t=Yt('<div class="ag-menu" role="presentation"></div>'),i;if(this.params.subMenu instanceof Array){let l=$y(this.getGui()),c=isNaN(l)?1:l+1,d=this.createBean(new ru(c));d.setParentComponent(this),d.addMenuItems(this.params.subMenu),t.appendChild(d.getGui()),this.addManagedListener(d,r.EVENT_MENU_ITEM_SELECTED,u=>this.dispatchEvent(u)),d.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),i=()=>this.destroyBean(d),e&&setTimeout(()=>d.activateFirstItem(),0)}else{let{subMenu:l}=this.params,c=this.createBean(new Hh(l));c.setParentComponent(this);let d=c.getGui(),u="mouseenter",h=()=>this.cancelDeactivate();d.addEventListener(u,h),i=()=>d.removeEventListener(u,h),t.appendChild(d),l.afterGuiAttached&&setTimeout(()=>l.afterGuiAttached(),0)}let n=this.getGui(),s=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:n,ePopup:t}),o=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({modal:!0,eChild:t,positionCallback:s,anchorToElement:n,ariaLabel:o("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,Wr(n,!0),this.hideSubMenu=()=>{a&&a.hideFunc(),this.subMenuIsOpen=!1,Wr(n,!1),i()}}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,Wr(this.getGui(),!1))}isSubMenuOpen(){return this.subMenuIsOpen}activate(e){this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}addIcon(){if(!this.params.checked&&!this.params.icon&&this.params.isCompact)return;let e=Yt(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?e.appendChild(gt("check",this.gridOptionsService)):this.params.icon&&(Wa(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){if(!this.params.name&&this.params.isCompact)return;let e=Yt(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addTooltip(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new Xn(this)))}getTooltipParams(){return{location:"menu",value:this.tooltip}}addShortcut(){if(!this.params.shortcut&&this.params.isCompact)return;let e=Yt(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){if(!this.params.subMenu&&this.params.isCompact)return;let e=Yt(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){let i=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";Wr(t,!1),e.appendChild(gt(i,this.gridOptionsService))}t.appendChild(e)}onItemSelected(e){if(this.params.action?this.params.action():this.openSubMenu(e&&e.type==="keydown"),this.params.subMenu&&!this.params.action)return;let t={type:r.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e};this.dispatchEvent(t)}onItemActivated(){let e={type:r.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),r.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),r.ACTIVATION_DELAY):this.deactivate()}getClassName(e){let t=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?`${t}-${e}`:t}};On.EVENT_MENU_ITEM_SELECTED="menuItemSelected";On.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";On.ACTIVATION_DELAY=80;N_([y("popupService")],On.prototype,"popupService",void 0);N_([G],On.prototype,"init",null);var Ag=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ns=class r extends oe{constructor(e){super(r.getTemplate(e)),this.closable=!0,this.config=e}static getTemplate(e){let t=e&&e.cssIdentifier||"default";return`<div class="ag-panel ag-${t}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${t}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${t}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${t}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${t}-panel-content-wrapper"></div>
        </div>`}postConstruct(){let{component:e,closable:t,hideTitleBar:i,title:n,minWidth:s=250,width:o,minHeight:a=250,height:l,centered:c,popup:d,x:u,y:h}=this.config;this.positionableFeature=new $o(this.getGui(),{minWidth:s,width:o,minHeight:a,height:l,centered:c,x:u,y:h,popup:d,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);let p=this.getGui();e&&this.setBodyComponent(e),i?ke(this.eTitleBar,!1):(n&&this.setTitle(n),this.setClosable(t??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",f=>{let g=this.gridOptionsService.getDocument();if(p.contains(f.relatedTarget)||p.contains(g.activeElement)||this.eTitleBarButtons.contains(f.target)){f.preventDefault();return}let m=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");m&&m.focus()}),!(d&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){let e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){let t=this.closeButtonComp=new oe(r.CLOSE_BTN_TEMPLATE);this.getContext().createBean(t);let i=t.getGui(),n=gt("close",this.gridOptionsService);n.classList.add("ag-panel-title-bar-button-icon"),i.appendChild(n),this.addTitleBarButton(t),t.addManagedListener(i,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){let t=this.closeButtonComp.getGui();t.parentElement.removeChild(t),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){let i=this.eTitleBarButtons,n=i.children,s=n.length;t==null&&(t=s),t=Math.max(0,Math.min(t,s)),e.addCssClass("ag-panel-title-bar-button");let o=e.getGui();t===0?i.insertAdjacentElement("afterbegin",o):t===s?i.insertAdjacentElement("beforeend",o):n[t-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return Va(this.eContentWrapper)}getBodyWidth(){return bd(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));let e=this.getGui();e&&e.offsetParent&&this.close(),super.destroy()}};ns.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';Ag([Z("eContentWrapper")],ns.prototype,"eContentWrapper",void 0);Ag([Z("eTitleBar")],ns.prototype,"eTitleBar",void 0);Ag([Z("eTitleBarButtons")],ns.prototype,"eTitleBarButtons",void 0);Ag([Z("eTitle")],ns.prototype,"eTitle",void 0);Ag([G],ns.prototype,"postConstruct",null);var GI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Wh=class extends ns{constructor(e){super(Object.assign(Object.assign({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){let e=this.getGui(),{movable:t,resizable:i,maximizable:n}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",s=>{e.contains(s.relatedTarget)||this.popupService.bringPopupToFront(e)}),t&&this.setMovable(t),n&&this.setMaximizable(n),i&&this.setResizable(i)}renderComponent(){let e=this.getGui(),{alwaysOnTop:t,modal:i,title:n,afterGuiAttached:s}=this.config,o=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({modal:i,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:t,ariaLabel:n||o("ariaLabelDialog","Dialog"),afterGuiAttached:s});a&&(this.close=a.hideFunc)}toggleMaximize(){let e=this.positionableFeature.getPosition();if(this.isMaximized){let{x:t,y:i,width:n,height:s}=this.lastPosition;this.setWidth(n),this.setHeight(s),this.positionableFeature.offsetElement(t,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){ke(this.maximizeIcon,!this.isMaximized),ke(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}let t=this.eTitleBar;if(!t||e===this.isMaximizable)return;let i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){let e=this.maximizeButtonComp=this.createBean(new oe('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=gt("maximize",this.gridOptionsService),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=gt("minimize",this.gridOptionsService),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}};GI([y("popupService")],Wh.prototype,"popupService",void 0);var Dg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},SS,nu=function(r){return r[r.vertical=0]="vertical",r[r.horizontal=1]="horizontal",r}(nu||{}),BI=0,sa=SS=class extends L{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl,this.addManagedListener(this.gridCtrl,w.EVENT_KEYBOARD_FOCUS,()=>{this.popupList.forEach(t=>t.element.classList.add(zt.AG_KEYBOARD_FOCUS))}),this.addManagedListener(this.gridCtrl,w.EVENT_MOUSE_FOCUS,()=>{this.popupList.forEach(t=>t.element.classList.remove(zt.AG_KEYBOARD_FOCUS))})})}getPopupParent(){let e=this.gridOptionsService.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:i}=e,n=this.getPopupIndex(i);if(n!==-1){let f=this.popupList[n];f.alignedToElement=t}let s=t.getBoundingClientRect(),o=this.getParentRect(),a=this.keepXYWithinBounds(i,s.top-o.top,nu.vertical),l=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${l}px`;let d=o.right-o.left-l,u;this.gridOptionsService.is("enableRtl")?(u=p(),u<0&&(u=h(),this.setAlignedStyles(i,"left")),u>d&&(u=0,this.setAlignedStyles(i,"right"))):(u=h(),u>d&&(u=p(),this.setAlignedStyles(i,"right")),u<0&&(u=0,this.setAlignedStyles(i,"left"))),i.style.left=`${u}px`,i.style.top=`${a}px`;function h(){return s.right-o.left-2}function p(){return s.left-o.left-l}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,eventSource:o,alignSide:a="left",position:l="over",column:c,rowNode:d,type:u}=e,h=o.getBoundingClientRect(),p=this.getParentRect(),f=this.getPopupIndex(t);if(f!==-1){let m=this.popupList[f];m.alignedToElement=o}let g=()=>{let m=h.left-p.left;a==="right"&&(m-=t.offsetWidth-h.width);let v;return l==="over"?(v=h.top-p.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,h,p,e.nudgeY||0)==="under"?v=h.top-p.top+h.height:v=h.top-t.offsetHeight-(n||0)*2-p.top),{x:m,y:v}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(u,t,o,null,c,d)})}shouldRenderUnderOrAbove(e,t,i,n){let s=i.bottom-t.bottom,o=t.top-i.top,a=e.offsetHeight+n;return s>a?"under":o>a||o>s?"above":"under"}setAlignedStyles(e,t){let i=this.getPopupIndex(e);if(i===-1)return;let n=this.popupList[i],{alignedToElement:s}=n;!s||(["right","left","over","above","under"].forEach(a=>{s.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,n,s,o){let a=this.gridOptionsService.getCallback("postProcessPopup");a&&a({column:s,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:n})}positionPopup(e){let{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:s,skipObserver:o,updatePosition:a}=e,l={width:0,height:0},c=(d=!1)=>{let{x:u,y:h}=a();d&&t.clientWidth===l.width&&t.clientHeight===l.height||(l.width=t.clientWidth,l.height=t.clientHeight,n&&(u+=n),s&&(h+=s),i&&(u=this.keepXYWithinBounds(t,u,nu.horizontal),h=this.keepXYWithinBounds(t,h,nu.vertical)),t.style.left=`${u}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!o){let d=this.resizeObserverService.observeResize(t,()=>c(!0));setTimeout(()=>d(),SS.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=this.gridOptionsService.getDocument(),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Gf(t)}keepXYWithinBounds(e,t,i){let n=i===nu.vertical,s=n?"clientHeight":"clientWidth",o=n?"top":"left",a=n?"offsetHeight":"offsetWidth",l=n?"scrollTop":"scrollLeft",c=this.gridOptionsService.getDocument(),d=c.documentElement,u=this.getPopupParent(),h=u.getBoundingClientRect(),p=c.documentElement.getBoundingClientRect(),f=u===c.body,g=e[a],v=f?(n?kf:jl)(d)+d[l]:u[s];f&&(v-=Math.abs(p[o]-h[o]));let C=v-g;return Math.min(Math.max(t,0),Math.abs(C))}addPopup(e){let t=this.gridOptionsService.getDocument(),{eChild:i,ariaLabel:n,alwaysOnTop:s,positionCallback:o,anchorToElement:a}=e;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};let l=this.getPopupIndex(i);if(l!==-1)return{hideFunc:this.popupList[l].hideFunc};this.initialisePopupPosition(i);let c=this.createPopupWrapper(i,n,!!s),d=this.addEventListenersToPopup(Object.assign(Object.assign({},e),{wrapperEl:c}));return o&&o(),this.addPopupToPopupList(i,c,d,a),{hideFunc:d}}initialisePopupPosition(e){let i=this.getPopupParent().getBoundingClientRect();V(e.style.top)||(e.style.top=`${i.top*-1}px`),V(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){let n=this.getPopupParent(),s=document.createElement("div"),{allThemes:o}=this.environment.getTheme();return o.length&&s.classList.add(...o),s.classList.add("ag-popup"),e.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||ut(e,"dialog"),Er(e,t),this.focusService.isKeyboardMode()&&e.classList.add(zt.AG_KEYBOARD_FOCUS),s.appendChild(e),n.appendChild(s),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}addEventListenersToPopup(e){let t=this.gridOptionsService.getDocument(),i=this.getPopupParent(),{wrapperEl:n,eChild:s,click:o,closedCallback:a,afterGuiAttached:l,closeOnEsc:c,modal:d}=e,u=!1,h=m=>{if(!n.contains(t.activeElement))return;m.key===B.ESCAPE&&!dr(m)&&g({keyboardEvent:m})},p=m=>g({mouseEvent:m}),f=m=>g({touchEvent:m}),g=(m={})=>{let{mouseEvent:v,touchEvent:C,keyboardEvent:S}=m;this.isEventFromCurrentPopup({mouseEvent:v,touchEvent:C},s)||u||(u=!0,i.removeChild(n),t.removeEventListener("keydown",h),t.removeEventListener("mousedown",p),t.removeEventListener("touchstart",f),t.removeEventListener("contextmenu",p),this.eventService.removeEventListener(w.EVENT_DRAG_STARTED,p),a&&a(v||C||S),this.removePopupFromPopupList(s))};return l&&l({hidePopup:g}),window.setTimeout(()=>{c&&t.addEventListener("keydown",h),d&&(t.addEventListener("mousedown",p),this.eventService.addEventListener(w.EVENT_DRAG_STARTED,p),t.addEventListener("touchstart",f),t.addEventListener("contextmenu",p))},0),g}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:BI++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let i=this.getPopupIndex(e);if(i===-1)return;let n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(o=>o&&o()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;let s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=s,n.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:s}=e,o=n.getBoundingClientRect(),a=i.top-o.top,l=i.left-o.left,c=a,d=l,u=s.style.top,h=parseInt(u.substring(0,u.length-1),10),p=s.style.left,f=parseInt(p.substring(0,p.length-1),10);return new vi(g=>{this.getFrameworkOverrides().setInterval(()=>{let m=t.getBoundingClientRect(),v=n.getBoundingClientRect();if(v.top==0&&v.left==0&&v.height==0&&v.width==0){e.hidePopup();return}let S=m.top-v.top;if(S!=c){let T=this.keepXYWithinBounds(s,h+a-S,nu.vertical);s.style.top=`${T}px`}c=S;let b=m.left-v.left;if(b!=d){let T=this.keepXYWithinBounds(s,f+l-b,nu.horizontal);s.style.left=`${T}px`}d=b},200).then(m=>{g(()=>{m!=null&&window.clearInterval(m)})})})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:i,touchEvent:n}=e,s=i||n;if(!s)return!1;let o=this.getPopupIndex(t);if(o===-1)return!1;for(let a=o;a<this.popupList.length;a++){let l=this.popupList[a];if(mh(l.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){let t=this.gridOptionsService.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){let t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,s=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),o=s.length,a=this.getWrapper(e);if(!a||n<=1||!t.contains(e))return;let l=i.indexOf(a),c=a.querySelectorAll("div"),d=[];for(c.forEach(h=>{h.scrollTop!==0&&d.push([h,h.scrollTop])}),o?a.classList.contains("ag-always-on-top")?l!==n-1&&je(s).insertAdjacentElement("afterend",a):l!==n-o-1&&s[0].insertAdjacentElement("beforebegin",a):l!==n-1&&je(i).insertAdjacentElement("afterend",a);d.length;){let h=d.pop();h[0].scrollTop=h[1]}let u={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:a};this.eventService.dispatchEvent(u)}};sa.WAIT_FOR_POPUP_CONTENT_RESIZE=200;Dg([y("focusService")],sa.prototype,"focusService",void 0);Dg([y("ctrlsService")],sa.prototype,"ctrlsService",void 0);Dg([y("resizeObserverService")],sa.prototype,"resizeObserverService",void 0);Dg([G],sa.prototype,"postConstruct",null);sa=SS=Dg([Y("popupService")],sa);var xv=class extends oe{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){var t;let i=!1;if(V(e)){let n=(t=this.value)===null||t===void 0?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){i=!0,this.hasHighlighting=!0;let s=n+e.length,o=Et(this.value.slice(0,n)),a=Et(this.value.slice(n,s)),l=Et(this.value.slice(s));this.getGui().lastElementChild.innerHTML=`${o}<b>${a}</b>${l}`}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=(e=Et(this.value))!==null&&e!==void 0?e:"&nbsp;"}};var k_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},su=class r extends Rr{constructor(e){super(r.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new uo({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:t=>this.autocompleteEntries[t]});let e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",t=>t.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();let i=this.autocompleteEntries.indexOf(this.selectedValue),n=t===B.UP?i-1:i+1;this.checkSetSelectedValue(n)}setSearch(e){this.searchString=e,V(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let i,n=!1,s=e.toLocaleLowerCase(),o=t.filter(a=>{let c=a.toLocaleLowerCase().indexOf(s),d=c===0,u=c>=0;return u&&(!i||!n&&d||n===d&&a.length<i.length)&&(i=a,n=d),u});return!i&&o.length&&(i=o[0]),{topMatch:i,allMatches:o}}runSearch(){var e,t;let{autocompleteEntries:i}=this.params,n=i.map(c=>{var d;return(d=c.displayValue)!==null&&d!==void 0?d:c.key}),s,o;if(this.params.useFuzzySearch)s=Wl(this.searchString,n,!0).values,o=s.length?s[0]:void 0;else{let c=this.runContainsSearch(this.searchString,n);s=c.allMatches,o=c.topMatch}let a=i.filter(({key:c,displayValue:d})=>s.includes(d??c));if(!a.length&&this.selectedValue&&(!((t=(e=this.params)===null||e===void 0?void 0:e.forceLastSelection)===null||t===void 0)&&t.call(e,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!o)return;let l=s.indexOf(o);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){let t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((i,n)=>{i.updateSelected(e===n)}))}createRowComponent(e){var t;let i=new xv;return this.getContext().createBean(i),i.setState((t=e.displayValue)!==null&&t!==void 0?t:e.key,e===this.selectedValue),i}onMouseMove(e){let t=this.virtualList.getGui().getBoundingClientRect(),i=this.virtualList.getScrollTop(),n=e.clientY-t.top+i,s=Math.floor(n/this.virtualList.getRowHeight());this.checkSetSelectedValue(s)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!==null&&e!==void 0?e:null}};su.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;k_([Z("eList")],su.prototype,"eList",void 0);k_([G],su.prototype,"init",null);var wS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ps=class r extends oe{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){let t=Br(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:r.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var t,i,n,s;let o=(i=(t=this.listGenerator)===null||t===void 0?void 0:t.call(this,e,this.lastPosition))!==null&&i!==void 0?i:{enabled:!1};if((!o.type||o.type!==((n=this.autocompleteListParams)===null||n===void 0?void 0:n.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=o,!((s=this.autocompleteListParams)===null||s===void 0)&&s.enabled){this.isListOpen||this.openList();let{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){let t=e.key;switch(this.updateLastPosition(),t){case B.ENTER:this.onEnterKeyDown(e);break;case B.TAB:this.onTabKeyDown(e);break;case B.DOWN:case B.UP:this.onUpDownKeyDown(e,t);break;case B.LEFT:case B.RIGHT:case B.PAGE_HOME:case B.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case B.ESCAPE:this.onEscapeKeyDown(e);break;case B.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;let t=(e=this.autocompleteList)===null||e===void 0?void 0:e.getSelectedValue();t&&(this.closeList(),this.dispatchEvent({type:r.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:t,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){var i;e.preventDefault(),this.isListOpen?(i=this.autocompleteList)===null||i===void 0||i.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!==null&&e!==void 0?e:null)}setCaret(e,t){let i=this.gridOptionsService.getDocument();t&&i.activeElement===i.body&&this.eAutocompleteInput.getFocusableElement().focus(),this.eAutocompleteInput.getInputElement().setSelectionRange(e,e)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!==null&&e!==void 0?e:0}validate(e){var t;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((t=this.validationMessage)!==null&&t!==void 0?t:""),this.valid=!this.validationMessage,this.dispatchEvent({type:r.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new su({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));let e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.is("enableRtl")?"right":"left",keepWithinBounds:!0},i=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=i.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:r.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return Br(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){let{value:t,position:i,silent:n,updateListOnlyIfOpen:s,restoreFocus:o}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(i??this.lastPosition,o),n||this.updateValue(t),(!s||this.isListOpen)&&this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};Ps.EVENT_VALUE_CHANGED="eventValueChanged";Ps.EVENT_VALUE_CONFIRMED="eventValueConfirmed";Ps.EVENT_OPTION_SELECTED="eventOptionSelected";Ps.EVENT_VALID_CHANGED="eventValidChanged";wS([y("popupService")],Ps.prototype,"popupService",void 0);wS([Z("eAutocompleteInput")],Ps.prototype,"eAutocompleteInput",void 0);wS([G],Ps.prototype,"postConstruct",null);var VI=["mouseover","mouseout","mouseenter","mouseleave","mousemove"],HI=["touchstart","touchend","touchmove","touchcancel"],ou=class{constructor(){this.renderingEngine="vanilla",this.isOutsideAngular=e=>cr(VI,e)}setTimeout(e,t){window.setTimeout(e,t)}setInterval(e,t){return new vi(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,n){let s=cr(HI,t);e.addEventListener(t,i,{capture:!!n,passive:s})}dispatchEvent(e,t,i=!1){t()}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}};var Uh=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},oa=class extends L{getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let i=e===B.UP,n=e===B.DOWN,s=e===B.LEFT,o,a;if(i||n)a=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),o=t.column;else{let l=this.columnModel.getAllDisplayedColumns(),c=this.gridOptionsService.is("enableRtl");a=t.rowIndex,o=s!==c?l[0]:je(l)}return{rowIndex:a,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case B.UP:i=this.getCellAbove(i);break;case B.DOWN:i=this.getCellBelow(i);break;case B.RIGHT:this.gridOptionsService.is("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case B.LEFT:this.gridOptionsService.is("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+e);break}i?n=this.isCellGoodToFocusOn(i):n=!0}return i}isCellGoodToFocusOn(e){let t=e.column,i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;let t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let n=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(n);return s||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)return;let i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex),n=t?-1:1,s=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=i[s+n];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(e){let t=e.rowIndex,i=e.rowPinned;if(i?t===0:t===this.paginationProxy.getPageFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let s=this.rowModel.getRow(e.rowIndex),o=this.getNextStickyPosition(s,!0);return o||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.columnModel.getAllDisplayedColumns(),i=e.rowIndex,n=e.rowPinned,s=this.columnModel.getDisplayedColAfter(e.column);if(!s){s=t[0];let o=this.getRowBelow(e);if(Ce(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,n=o?o.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}getNextTabbedCellBackwards(e){let t=this.columnModel.getAllDisplayedColumns(),i=e.rowIndex,n=e.rowPinned,s=this.columnModel.getDisplayedColBefore(e.column);if(!s){s=je(t);let o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Ce(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,n=o?o.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}};Uh([y("columnModel")],oa.prototype,"columnModel",void 0);Uh([y("rowModel")],oa.prototype,"rowModel",void 0);Uh([y("rowRenderer")],oa.prototype,"rowRenderer",void 0);Uh([y("pinnedRowModel")],oa.prototype,"pinnedRowModel",void 0);Uh([y("paginationProxy")],oa.prototype,"paginationProxy",void 0);oa=Uh([Y("cellNavigationService")],oa);var Og=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WI=function(r,e){return function(t,i){e(t,i,r)}},nl=class extends L{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}init(){this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){if(this.consuming)return;let t=this.gridOptionsService.get("alignedGrids");t&&t.forEach(i=>{if(i.api){let n=i.api.__getAlignedGridService();e(n)}})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent(t=>{t.onColumnEvent(e)})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent(t=>{t.onScrollEvent(e)})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){let t=[];return e.columns?e.columns.forEach(i=>{t.push(i)}):e.column&&t.push(e.column),t}getColumnIds(e){let t=[];return e.columns?e.columns.forEach(i=>{t.push(i.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case w.EVENT_COLUMN_MOVED:case w.EVENT_COLUMN_VISIBLE:case w.EVENT_COLUMN_PINNED:case w.EVENT_COLUMN_RESIZED:let t=e;this.processColumnEvent(t);break;case w.EVENT_COLUMN_GROUP_OPENED:let i=e;this.processGroupOpenedEvent(i);break;case w.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){let t=e.columnGroup,i=null;if(t){let n=t.getGroupId();i=this.columnModel.getProvidedColumnGroup(n)}t&&!i||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(i,t.isExpanded(),"alignedGridChanged"))}processColumnEvent(e){var t;let i=e.column,n=null;if(i&&(n=this.columnModel.getPrimaryColumn(i.getColId())),i&&!n)return;let s=this.getMasterColumns(e);switch(e.type){case w.EVENT_COLUMN_MOVED:{let u=e,p=e.columnApi.getColumnState().map(f=>({colId:f.colId}));this.columnModel.applyColumnState({state:p,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} toIndex = ${u.toIndex}`)}break;case w.EVENT_COLUMN_VISIBLE:{let u=e,p=e.columnApi.getColumnState().map(f=>({colId:f.colId,hide:f.hide}));this.columnModel.applyColumnState({state:p},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} visible = ${u.visible}`)}break;case w.EVENT_COLUMN_PINNED:{let u=e,p=e.columnApi.getColumnState().map(f=>({colId:f.colId,pinned:f.pinned}));this.columnModel.applyColumnState({state:p},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} pinned = ${u.pinned}`)}break;case w.EVENT_COLUMN_RESIZED:let c=e,d={};s.forEach(u=>{this.logger.log(`onColumnEvent-> processing ${e.type} actualWidth = ${u.getActualWidth()}`),d[u.getId()]={key:u.getColId(),newWidth:u.getActualWidth()}}),(t=c.flexColumns)===null||t===void 0||t.forEach(u=>{d[u.getId()]&&delete d[u.getId()]}),this.columnModel.setColumnWidths(Object.values(d),!1,c.finished,"alignedGridChanged");break}let a=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),l=this.gridOptionsService.get("alignedGrids");l&&l.forEach(c=>{c.api&&c.api.setAlwaysShowVerticalScroll(a)})}};Og([y("columnModel")],nl.prototype,"columnModel",void 0);Og([y("ctrlsService")],nl.prototype,"ctrlsService",void 0);Og([WI(0,Wt("loggerFactory"))],nl.prototype,"setBeans",null);Og([G],nl.prototype,"init",null);nl=Og([Y("alignedGridsService")],nl);var Fg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},UI=function(r,e){return function(t,i){e(t,i,r)}},gc=class extends L{setBeans(e){this.logger=e.create("selectionService"),this.reset()}init(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",e=>this.groupSelectsChildren=e.currentValue),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",e=>this.rowSelection=e.currentValue),this.addManagedListener(this.eventService,w.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(e){var t;if(e.nodes.length===0)return 0;let{newValue:i,clearSelection:n,suppressFinishActions:s,rangeSelect:o,event:a,source:l="api"}=e;if(e.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;let c=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,d=e.nodes.map(h=>h.footer?h.sibling:h);if(o){if(e.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let h=this.getLastSelectedNode();if(h){let p=d[0];if(h!==p&&this.isMultiselect()){let g=this.selectRange(p,h,e.newValue,l);return this.setLastSelectedNode(p),g}}}let u=0;for(let h=0;h<d.length;h++){let p=d[h];c&&p.group||p.selectThisNode(i,e.event,l)&&u++,this.groupSelectsChildren&&(!((t=p.childrenAfterGroup)===null||t===void 0)&&t.length)&&(u+=this.selectChildren(p,i,c,l))}if(!s){if(i&&(n||!this.isMultiselect())&&(u+=this.clearOtherNodes(d[0],l)),u>0){this.updateGroupsFromChildrenSelections(l);let p={type:w.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(p)}i&&this.setLastSelectedNode(d[d.length-1])}return u}selectRange(e,t,i=!0,n){let s=this.rowModel.getNodesInRangeForSelection(e,t),o=0;s.forEach(l=>{if(l.group&&this.groupSelectsChildren||i===!1&&e===l)return;l.selectThisNode(i,void 0,n)&&o++}),this.updateGroupsFromChildrenSelections(n);let a={type:w.EVENT_SELECTION_CHANGED,source:n};return this.eventService.dispatchEvent(a),o}selectChildren(e,t,i,n){let s=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return Pe.missing(s)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:n,nodes:s})}setLastSelectedNode(e){this.lastSelectedNode=e}getLastSelectedNode(){return this.lastSelectedNode}getSelectedNodes(){let e=[];return ft(this.selectedNodes,(t,i)=>{i&&e.push(i)}),e}getSelectedRows(){let e=[];return ft(this.selectedNodes,(t,i)=>{i&&i.data&&e.push(i.data)}),e}getSelectionCount(){return Object.values(this.selectedNodes).length}filterFromSelection(e){let t={};Object.entries(this.selectedNodes).forEach(([i,n])=>{n&&e(n)&&(t[i]=n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let n=this.rowModel.getRootNode();t||(t=new rl(!0,n),t.setInactive());let s=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==n){let a=o.calculateSelectedFromChildren();s=o.selectThisNode(a===null?!1:a,void 0,e)||s}}),s}clearOtherNodes(e,t){let i={},n=0;return ft(this.selectedNodes,(s,o)=>{if(o&&o.id!==e.id){let a=this.selectedNodes[o.id];n+=a.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&o.parent&&(i[o.parent.id]=o.parent)}}),ft(i,(s,o)=>{let a=o.calculateSelectedFromChildren();o.selectThisNode(a===null?!1:a,void 0,t)}),n}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes[t.id]=t:delete this.selectedNodes[t.id])}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(V(t)&&e.id!==t.id&&t){let n=t.id;this.selectedNodes[n]==e&&(this.selectedNodes[t.id]=t)}}syncInNewRowNode(e){V(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)}reset(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let i=[];function n(s){for(let o=0,a=s.length;o<a;o++){let l=s[o];if(l.isSelected())i.push(l);else{let c=l;c.group&&c.children&&n(c.children)}}}return n(t),i}isEmpty(){let e=0;return ft(this.selectedNodes,(t,i)=>{i&&e++}),e===0}deselectAllRowNodes(e){let t=l=>l.selectThisNode(!1,void 0,n),i=this.rowModel.getType()==="clientSide",{source:n,justFiltered:s,justCurrentPage:o}=e;if(o||s){if(!i){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,o).forEach(t)}else ft(this.selectedNodes,(l,c)=>{c&&t(c)}),this.reset();i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n);let a={type:w.EVENT_SELECTION_CHANGED,source:n};this.eventService.dispatchEvent(a)}getSelectAllState(e,t){let i=0,n=0,s=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?i++:o.selectable&&n++)};return this.getNodesToSelect(e,t).forEach(s),i===0&&n===0?!1:i>0&&n>0?null:i>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let i=[];if(t)return this.paginationProxy.forEachNodeOnPage(s=>{if(!s.group){i.push(s);return}if(!s.expanded){let o=a=>{var l;i.push(a),!((l=a.childrenAfterFilter)===null||l===void 0)&&l.length&&a.childrenAfterFilter.forEach(o)};o(s);return}this.groupSelectsChildren||i.push(s)}),i;let n=this.rowModel;return e?(n.forEachNodeAfterFilter(s=>{i.push(s)}),i):(n.forEachNode(s=>{i.push(s)}),i)}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:t,justFiltered:i,justCurrentPage:n}=e,s=a=>a.selectThisNode(!0,void 0,t);this.getNodesToSelect(i,n).forEach(s),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);let o={type:w.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(o)}getServerSideSelectionState(){return null}setServerSideSelectionState(e){}};Fg([y("rowModel")],gc.prototype,"rowModel",void 0);Fg([y("paginationProxy")],gc.prototype,"paginationProxy",void 0);Fg([UI(0,Wt("loggerFactory"))],gc.prototype,"setBeans",null);Fg([G],gc.prototype,"init",null);gc=Fg([Y("selectionService")],gc);var bS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},au=class{sizeColumnsToFit(e){typeof e>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(e,"api")}setColumnGroupOpened(e,t){this.columnModel.setColumnGroupOpened(e,t,"api")}getColumnGroup(e,t){return this.columnModel.getColumnGroup(e,t)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,t){return this.columnModel.getDisplayNameForColumn(e,t)||""}getDisplayNameForColumnGroup(e,t){return this.columnModel.getDisplayNameForColumnGroup(e,t)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,t){this.columnModel.setColumnVisible(e,t,"api")}setColumnsVisible(e,t){this.columnModel.setColumnsVisible(e,t,"api")}setColumnPinned(e,t){this.columnModel.setColumnPinned(e,t,"api")}setColumnsPinned(e,t){this.columnModel.setColumnsPinned(e,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,t){this.columnModel.moveColumn(e,t,"api")}moveColumnByIndex(e,t){this.columnModel.moveColumnByIndex(e,t,"api")}moveColumns(e,t){this.columnModel.moveColumns(e,t,"api")}moveRowGroupColumn(e,t){this.columnModel.moveRowGroupColumn(e,t)}setColumnAggFunc(e,t){this.columnModel.setColumnAggFunc(e,t)}setColumnWidth(e,t,i=!0,n){this.columnModel.setColumnWidths([{key:e,newWidth:t}],!1,i,n)}setColumnWidths(e,t=!0,i){this.columnModel.setColumnWidths(e,!1,t,i)}setPivotMode(e){this.columnModel.setPivotMode(e)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,t){return this.columnModel.getSecondaryPivotColumn(e,t)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.columnModel.removeValueColumn(e,"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.columnModel.addValueColumn(e,"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.columnModel.removeRowGroupColumn(e,"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.columnModel.addRowGroupColumn(e,"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.columnModel.removePivotColumn(e,"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.columnModel.addPivotColumn(e,"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,t){return this.columnModel.autoSizeColumn(e,t,"api")}autoSizeColumns(e,t){this.columnModel.autoSizeColumns({columns:e,skipHeader:t})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns(e,"api")}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid(){setTimeout(Pe.removeAllReferences.bind(window,this,"Column API"),100)}getAllColumns(){return xn("28.0","getAllColumns","getColumns"),this.getColumns()}getPrimaryColumns(){return xn("28.0","getPrimaryColumns","getColumns"),this.getColumns()}getSecondaryColumns(){return xn("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()}setSecondaryColumns(e){xn("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(e)}getSecondaryPivotColumn(e,t){return xn("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(e,t)}};bS([y("columnModel")],au.prototype,"columnModel",void 0);bS([at],au.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null);au=bS([Y("columnApi")],au);var zh=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},aa=class extends L{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(w.EVENT_CELL_VALUE_CHANGED,e=>this.callColumnCellValueChangedHandler(e),this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValue(e,t,i=!1,n=!1){if(this.initialised||this.init(),!t)return;let s=e.getColDef(),o=s.field,a=e.getColId(),l=t.data,c,d=t.groupData&&t.groupData[a]!==void 0,u=!n&&t.aggData&&t.aggData[a]!==void 0,h=this.isSsrm&&n&&!!e.getColDef().aggFunc,p=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&s.filterValueGetter?c=this.executeFilterValueGetter(s.filterValueGetter,l,e,t):this.isTreeData&&u?c=t.aggData[a]:this.isTreeData&&s.valueGetter?c=this.executeValueGetter(s.valueGetter,l,e,t):this.isTreeData&&o&&l?c=Ba(l,o,e.isFieldContainsDots()):d?c=t.groupData[a]:u?c=t.aggData[a]:s.valueGetter?c=this.executeValueGetter(s.valueGetter,l,e,t):p?c=Ba(l,t.field,e.isFieldContainsDots()):o&&l&&!h&&(c=Ba(l,o,e.isFieldContainsDots())),this.cellExpressions&&typeof c=="string"&&c.indexOf("=")===0){let f=c.substring(1);c=this.executeValueGetter(f,l,e,t)}if(c==null){let f=this.getOpenedGroup(t,e);if(f!=null)return f}return c}getOpenedGroup(e,t){if(!this.gridOptionsService.is("showOpenedGroup")||!t.getColDef().showRowGroup)return;let n=t.getColDef().showRowGroup,s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(n===!0||n===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,n){let s=this.columnModel.getPrimaryColumn(t);if(!e||!s)return!1;Ce(e.data)&&(e.data={});let{field:o,valueSetter:a}=s.getColDef();if(Ce(o)&&Ce(a))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(s,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;let l={node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};l.newValue=i;let c;if(V(a)?typeof a=="function"?c=a(l):c=this.expressionService.evaluate(a,l):c=this.setValueUsingField(e.data,o,i,s.isFieldContainsDots()),c===void 0&&(c=!0),!c)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),l.newValue=this.getValue(s,e);let d={type:w.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:l.column,api:l.api,columnApi:l.columnApi,colDef:l.colDef,context:l.context,data:e.data,node:e,oldValue:l.oldValue,newValue:l.newValue,value:l.newValue,source:n};return this.eventService.dispatchEvent(d),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})}setValueUsingField(e,t,i,n){if(!t)return!1;let s=!1;if(!n)s=e[t]===i,s||(e[t]=i);else{let o=t.split("."),a=e;for(;o.length>0&&a;){let l=o.shift();o.length===0?(s=a[l]===i,s||(a[l]=i)):a=a[l]}}return!s}executeFilterValueGetter(e,t,i,n){let s={data:t,node:n,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,n)};return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,t,i,n){let s=i.getColId(),o=this.valueCache.getValue(n,s);if(o!==void 0)return o;let a={data:t,node:n,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,n)},l;return typeof e=="function"?l=e(a):l=this.expressionService.evaluate(e,a),this.valueCache.setValue(n,s,l),l}getValueCallback(e,t){let i=this.columnModel.getPrimaryColumn(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){let i=this.getValue(e,t),n=e.getColDef().keyCreator,s=i;if(n){let o={value:i,colDef:e.getColDef(),column:e,node:t,data:t.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};s=n(o)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&Ne(()=>{console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]")),s}};zh([y("expressionService")],aa.prototype,"expressionService",void 0);zh([y("columnModel")],aa.prototype,"columnModel",void 0);zh([y("valueCache")],aa.prototype,"valueCache",void 0);zh([y("dataTypeService")],aa.prototype,"dataTypeService",void 0);zh([G],aa.prototype,"init",null);aa=zh([Y("valueService")],aa);var G_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zI=function(r,e){return function(t,i){e(t,i,r)}},jh=class extends L{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};G_([zI(0,Wt("loggerFactory"))],jh.prototype,"setBeans",null);jh=G_([Y("expressionService")],jh);var jI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Pg=class extends L{constructor(){super(...arguments),this.templateCache={},this.waitingCallbacks={}}getTemplate(e,t){let i=this.templateCache[e];if(i)return i;let n=this.waitingCallbacks[e],s=this;if(!n){n=[],this.waitingCallbacks[e]=n;let o=new XMLHttpRequest;o.onload=function(){s.handleHttpResult(this,e)},o.open("GET",e),o.send()}return t&&n.push(t),null}handleHttpResult(e,t){if(e.status!==200||e.response===null){console.warn(`AG Grid: Unable to get template error ${e.status} - ${t}`);return}this.templateCache[t]=e.response||e.responseText;let i=this.waitingCallbacks[t];for(let n=0;n<i.length;n++){let s=i[n];s()}}};Pg=jI([Y("templateService")],Pg);var B_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},KI=function(r,e){return function(t,i){e(t,i,r)}},Kh=class extends L{setBeans(e){this.logging=e.is("debug")}create(e){return new lu(e,this.isLogging.bind(this))}isLogging(){return this.logging}};B_([KI(0,Wt("gridOptionsService"))],Kh.prototype,"setBeans",null);Kh=B_([Y("loggerFactory")],Kh);var lu=class{constructor(e,t){this.name=e,this.isLoggingFunc=t}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}};var $h=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ho=class extends L{setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:s=>s===yi.HeaderCell||s===yi.ToolPanel,getIconName:()=>qe.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Ya(this.view)),this.addRtlSupport(),this.addManagedListener(this,w.EVENT_KEYBOARD_FOCUS,()=>{this.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,w.EVENT_MOUSE_FOCUS,()=>{this.view.addOrRemoveKeyboardFocusClass(!1)});let n=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>n()),this.ctrlsService.registerGridCtrl(this)}isDetailGrid(){var e;let t=this.focusService.findTabbableParent(this.getGui());return((e=t?.getAttribute("row-id"))===null||e===void 0?void 0:e.startsWith("detail"))||!1}showDropZones(){return De.__isRegistered(he.RowGroupingModule,this.context.getGridId())}showSideBar(){return De.__isRegistered(he.SideBarModule,this.context.getGridId())}showStatusBar(){return De.__isRegistered(he.StatusBarModule,this.context.getGridId())}showWatermark(){return De.__isRegistered(he.EnterpriseCoreModule,this.context.getGridId())}onGridSizeChanged(){let e={type:w.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){let e=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.gridOptionsService.getDocument(),i=this.view.getFocusableContainers(),s=i.findIndex(o=>o.contains(t.activeElement))+(e?-1:1);return s<=0||s>=i.length?!1:this.focusService.focusInto(i[s])}focusInnerElement(e){let t=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(je(t),!0);let n=je(i);if(this.focusService.focusGridView(n,!0))return!0}return this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusGridView(i[0]):this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}};$h([y("focusService")],ho.prototype,"focusService",void 0);$h([y("resizeObserverService")],ho.prototype,"resizeObserverService",void 0);$h([y("columnModel")],ho.prototype,"columnModel",void 0);$h([y("ctrlsService")],ho.prototype,"ctrlsService",void 0);$h([y("mouseEventService")],ho.prototype,"mouseEventService",void 0);$h([y("dragAndDropService")],ho.prototype,"dragAndDropService",void 0);var Ig=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},la=class extends co{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),addOrRemoveKeyboardFocusClass:i=>this.addOrRemoveCssClass(zt.AG_KEYBOARD_FOCUS,i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new ho);let t=this.createTemplate();this.setTemplate(t),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i)})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(e,t){let i=this.eRootWrapperBody.classList;i.toggle(ci.AUTO_HEIGHT,t.autoHeight),i.toggle(ci.NORMAL,t.normal),i.toggle(ci.PRINT,t.print),this.addOrRemoveCssClass(ci.AUTO_HEIGHT,t.autoHeight),this.addOrRemoveCssClass(ci.NORMAL,t.normal),this.addOrRemoveCssClass(ci.PRINT,t.print)}createTemplate(){let e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",t=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",n=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${e}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${t}
                </div>
                ${i}
                <ag-pagination></ag-pagination>
                ${n}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){let e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(t=>Sn(t))}};Ig([y("loggerFactory")],la.prototype,"loggerFactory",void 0);Ig([Z("gridBody")],la.prototype,"gridBodyComp",void 0);Ig([Z("sideBar")],la.prototype,"sideBarComp",void 0);Ig([Z("rootWrapperBody")],la.prototype,"eRootWrapperBody",void 0);Ig([G],la.prototype,"postConstruct",null);var V_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Sv,cu=Sv=class extends L{progressSort(e,t,i){let n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}setSortForColumn(e,t,i,n){t!=="asc"&&t!=="desc"&&(t=null);let s=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=[e];if(s&&e.getColDef().showRowGroup){let l=this.columnModel.getSourceColumnsForGroupColumn(e),c=l?.filter(d=>d.getColDef().sortable);c&&(o=[e,...c])}o.forEach(l=>l.setSort(t,n)),(i||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort")||this.clearSortBarTheseColumns(o,n),this.updateSortIndex(e),this.dispatchSortChangedEvents(n)}updateSortIndex(e){let t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),n=t&&i||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(l=>l.setSortIndex(null));let o=s.filter(l=>l!==n);(n.getSort()?[...o,n]:o).forEach((l,c)=>l.setSortIndex(c))}onSortChanged(e){this.dispatchSortChangedEvents(e)}isSortActive(){let t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e){let t={type:w.EVENT_SORT_CHANGED,source:e};this.eventService.dispatchEvent(t)}clearSortBarTheseColumns(e,t){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(i=>{e.includes(i)||i.setSort(void 0,t)})}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?t=this.gridOptionsService.get("sortingOrder"):t=Sv.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${t}`),null;let i=t.indexOf(e.getSort()),n=i<0,s=i==t.length-1,o;return n||s?o=t[0]:o=t[i+1],Sv.DEFAULT_SORTING_ORDER.indexOf(o)<0?(console.warn("AG Grid: invalid sort type "+o),null):o}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){let o=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter(a=>{let l=!!a.getAggFunc(),c=!a.isPrimary(),d=o?this.columnModel.getGroupDisplayColumnForGroup(a.getId()):a.getColDef().showRowGroup;return l||c||d})}let t=this.columnModel.getRowGroupColumns().filter(o=>!!o.getSort()),i=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!t.length;i&&(e=[...new Set(e.map(o=>{var a;return(a=this.columnModel.getGroupDisplayColumnForGroup(o.getId()))!==null&&a!==void 0?a:o}))]);let n={};e.forEach((o,a)=>n[o.getId()]=a),e.sort((o,a)=>{let l=o.getSortIndex(),c=a.getSortIndex();if(l!=null&&c!=null)return l-c;if(l==null&&c==null){let d=n[o.getId()],u=n[a.getId()];return d>u?1:-1}else return c==null?-1:1});let s=new Map;return e.forEach((o,a)=>s.set(o,a)),i&&t.forEach(o=>{let a=this.columnModel.getGroupDisplayColumnForGroup(o.getId());s.set(o,s.get(a))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,n])=>t-n).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){let t=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=n[0].getSort();return n.every(a=>a.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};cu.DEFAULT_SORTING_ORDER=["asc","desc",null];V_([y("columnModel")],cu.prototype,"columnModel",void 0);cu=Sv=V_([Y("sortController")],cu);var $I=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},wv=class extends L{setMouseOver(e){this.selectedColumns=e;let t={type:w.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;let e={type:w.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};wv=$I([Y("columnHoverService")],wv);var ES=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Yh=class extends L{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active}start(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&(this.flush(),this.active=!1)}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(){let e=this.executeNextFuncs;this.executeNextFuncs=[];let t=this.executeLaterFuncs;this.executeLaterFuncs=[],!(e.length===0&&t.length===0)&&(window.setTimeout(()=>e.forEach(i=>i()),0),window.setTimeout(()=>t.forEach(i=>i()),300))}};ES([y("ctrlsService")],Yh.prototype,"ctrlsService",void 0);ES([G],Yh.prototype,"postConstruct",null);Yh=ES([Y("columnAnimationService")],Yh);var _S=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Xh=class extends L{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCon=e.centerRowContainerCtrl,this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.checkPageSize()})}notActive(){return!this.gridOptionsService.is("paginationAutoPageSize")||this.centerRowContainerCon==null}checkPageSize(){if(this.notActive())return;let e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let i=this.gridOptionsService.getRowHeightAsNumber(),n=Math.floor(e/i);this.gridOptionsService.set("paginationPageSize",n)};this.isBodyRendered?ar(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};_S([y("ctrlsService")],Xh.prototype,"ctrlsService",void 0);_S([G],Xh.prototype,"postConstruct",null);Xh=_S([Y("paginationAutoPageSizeService")],Xh);var H_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qh=class extends L{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}};H_([G],qh.prototype,"init",null);qh=H_([Y("valueCache")],qh);var bv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},YI="paste",du=class extends L{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,w.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){e.source!==YI&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gridOptionsService.is("suppressChangeDetection"))return;let i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let n=this.gridOptionsService.is("aggregateOnlyChangedColumns"),s=new rl(n,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(o=>{i.push(o)})}this.rowRenderer.refreshCells({rowNodes:i})}};bv([y("rowModel")],du.prototype,"rowModel",void 0);bv([y("rowRenderer")],du.prototype,"rowRenderer",void 0);bv([G],du.prototype,"init",null);du=bv([Y("changeDetectionService")],du);var W_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Mg=class extends L{adaptFunction(e,t){let i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(n){return!1}getGui(){return this.eGui}init(n){let s=e(n),o=typeof s;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Yt("<span>"+s+"</span>");return}if(s==null){this.eGui=Yt("<span></span>");return}this.eGui=s}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}};W_([y("componentMetadataProvider")],Mg.prototype,"componentMetadataProvider",void 0);Mg=W_([Y("agComponentUtils")],Mg);var TS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Zh=class extends L{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}}retrieve(e){return this.componentMetaData[e]}};TS([y("agComponentUtils")],Zh.prototype,"agComponentUtils",void 0);TS([G],Zh.prototype,"postConstruct",null);Zh=TS([Y("componentMetadataProvider")],Zh);var OS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},XI=25,U_=10,RS=8,qI=4,AS=4,DS=6,ZI={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:qI*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:RS*7,headerCellMinWidth:48,listItemHeight:RS*4,rowHeight:RS*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:AS*8,headerCellMinWidth:24,listItemHeight:AS*6,rowHeight:AS*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:DS*8,headerCellMinWidth:36,listItemHeight:DS*4,rowHeight:DS*7,chartMenuPanelWidth:240}},z_={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},uu=class extends L{constructor(){super(...arguments),this.calculatedSizes={}}postConstruct(){var e;let t=(e=this.getTheme().el)!==null&&e!==void 0?e:this.eGridDiv;this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){let e={type:w.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)}getSassVariable(e){let{themeFamily:t,el:i}=this.getTheme();if(!t||t.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={});let n=this.calculatedSizes[t][e];return n??(this.calculatedSizes[t][e]=this.calculateValueForSassProperty(e,t,i),this.calculatedSizes[t][e])}calculateValueForSassProperty(e,t,i){let n="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),s=ZI[n][e],o=this.gridOptionsService.getDocument();if(i||(i=this.eGridDiv),!z_[e])return s;let a=z_[e],l=o.createElement("div"),c=Array.from(i.classList);l.classList.add(t,...c),l.style.position="absolute";let d=a.reduce((h,p)=>{let f=o.createElement("div");return f.style.position="static",f.classList.add(p),h.appendChild(f),f},l),u=0;if(o.body){o.body.appendChild(l);let h=e.toLowerCase().indexOf("height")!==-1?"height":"width";u=parseInt(window.getComputedStyle(d)[h],10),o.body.removeChild(l)}return u||s}isThemeDark(){let{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){let e=/\bag-(material|(?:theme-([\w\-]*)))\b/g,t=this.eGridDiv,i=null,n=[];for(;t;)if(i=e.exec(t.className),!i)t=t.parentElement||void 0;else{let o=t.className.match(e);o&&(n=o);break}if(!i)return{allThemes:n};let s=i[0];return{theme:s,el:t,themeFamily:s.replace(/-dark$/,""),allThemes:n}}getFromTheme(e,t){var i;return(i=this.getSassVariable(t))!==null&&i!==void 0?i:e}getDefaultRowHeight(){return this.getFromTheme(XI,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gridOptionsService.getNum("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return-1;let i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getMinColWidth(){let e=this.getFromTheme(null,"headerCellMinWidth");return V(e)?Math.max(e,U_):U_}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};OS([y("eGridDiv")],uu.prototype,"eGridDiv",void 0);OS([G],uu.prototype,"postConstruct",null);uu=OS([Y("environment")],uu);var Ev=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},QI=function(r,e){return function(t,i){e(t,i,r)}},hu=class extends L{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=mx(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:w.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}};Ev([y("ctrlsService")],hu.prototype,"ctrlsService",void 0);Ev([QI(0,Wt("loggerFactory"))],hu.prototype,"agWire",null);Ev([G],hu.prototype,"postConstruct",null);hu=Ev([Y("rowContainerHeightService")],hu);var j_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Qh=class extends L{init(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")}updateSelectableAfterGrouping(e){if(this.isRowSelectableFunc){let t=i=>i.childrenAfterGroup;this.recurseDown(e.childrenAfterGroup,t)}}recurseDown(e,t){e&&e.forEach(i=>{if(!i.group)return;i.hasChildren()&&this.recurseDown(t(i),t);let n;if(this.groupSelectsChildren){let s=(t(i)||[]).find(o=>o.selectable===!0);n=V(s)}else n=this.isRowSelectableFunc?this.isRowSelectableFunc(i):!1;i.setRowSelectable(n)})}};j_([G],Qh.prototype,"init",null);Qh=j_([Y("selectableService")],Qh);var Is=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},jr=class extends oe{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){let e=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate());let{btFirst:t,btPrevious:i,btNext:n,btLast:s}=this;this.activateTabIndex([t,i,n,s]),t.insertAdjacentElement("afterbegin",gt(e?"last":"first",this.gridOptionsService)),i.insertAdjacentElement("afterbegin",gt(e?"next":"previous",this.gridOptionsService)),n.insertAdjacentElement("afterbegin",gt(e?"previous":"next",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",gt(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()}onPaginationChanged(){let t=this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,w.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:i}=e;this.addManagedListener(t,"click",i),this.addManagedListener(t,"keydown",n=>{(n.key===B.ENTER||n.key===B.SPACE)&&(n.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){let e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),i=e?t+1:0;this.lbCurrent.innerHTML=this.formatNumber(i)}formatNumber(e){let t=this.gridOptionsService.getCallback("paginationNumberFormatter");if(t)return t({value:e});let i=this.localeService.getLocaleTextFunc(),n=i("thousandSeparator",","),s=i("decimalSeparator",".");return W0(e,n,s)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),s=e("firstPage","First Page"),o=e("previousPage","Previous Page"),a=e("nextPage","Next Page"),l=e("lastPage","Last Page"),c=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${c}">
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${c}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${c}-to">${i}</span>
                    <span id="ag-${c}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${c}-of">${n}</span>
                    <span id="ag-${c}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${c}-start-page">${t}</span>
                        <span id="ag-${c}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${c}-of-page">${n}</span>
                        <span id="ag-${c}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${l}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){let e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let n=this.isZeroPagesToDisplay(),s=t&&e===i-1;this.nextButtonDisabled=s||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){Df(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){let e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,s,o;if(this.isZeroPagesToDisplay()?s=o=0:(s=t*e+1,o=s+t-1,i&&o>n&&(o=n)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(s),this.rowNodeBlockLoader.isLoading()){let a=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=a("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(o)}isZeroPagesToDisplay(){let e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&t===0}setTotalLabels(){let e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),i=e?this.paginationProxy.getMasterRowCount():null;if(i===1){let n=this.paginationProxy.getRow(0);if(n&&n.group&&!(n.groupData||n.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.innerHTML=this.formatNumber(t),this.lbRecordCount.innerHTML=this.formatNumber(i);else{let n=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=n,this.lbRecordCount.innerHTML=n}}setTotalLabelsToZero(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)}};Is([y("paginationProxy")],jr.prototype,"paginationProxy",void 0);Is([y("rowNodeBlockLoader")],jr.prototype,"rowNodeBlockLoader",void 0);Is([Z("btFirst")],jr.prototype,"btFirst",void 0);Is([Z("btPrevious")],jr.prototype,"btPrevious",void 0);Is([Z("btNext")],jr.prototype,"btNext",void 0);Is([Z("btLast")],jr.prototype,"btLast",void 0);Is([Z("lbRecordCount")],jr.prototype,"lbRecordCount",void 0);Is([Z("lbFirstRowOnPage")],jr.prototype,"lbFirstRowOnPage",void 0);Is([Z("lbLastRowOnPage")],jr.prototype,"lbLastRowOnPage",void 0);Is([Z("lbCurrent")],jr.prototype,"lbCurrent",void 0);Is([Z("lbTotal")],jr.prototype,"lbTotal",void 0);Is([G],jr.prototype,"postConstruct",null);var Jh=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Lg=function(r){return r[r.Loading=0]="Loading",r[r.NoRows=1]="NoRows",r}(Lg||{}),po=class r extends oe{constructor(){super(r.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1,this.manuallyDisplayed=!1}updateLayoutClasses(e,t){let i=this.eOverlayWrapper.classList;i.toggle(ci.AUTO_HEIGHT,t.autoHeight),i.toggle(ci.NORMAL,t.normal),i.toggle(ci.PRINT,t.print)}postConstruct(){this.createManagedBean(new Ya(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;t.toggle("ag-overlay-loading-wrapper",e===Lg.Loading),t.toggle("ag-overlay-no-rows-wrapper",e===Lg.NoRows)}showLoadingOverlay(){if(this.gridOptionsService.is("suppressLoadingOverlay"))return;let e={},i=this.userComponentFactory.getLoadingOverlayCompDetails(e).newAgStackInstance();this.showOverlay(i,Lg.Loading)}showNoRowsOverlay(){if(this.gridOptionsService.is("suppressNoRowsOverlay"))return;let e={},i=this.userComponentFactory.getNoRowsOverlayCompDetails(e).newAgStackInstance();this.showOverlay(i,Lg.NoRows)}showOverlay(e,t){this.inProgress||(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(i=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),$t(this.eOverlayWrapper))}hideOverlay(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}showOrHideOverlay(){let e=this.paginationProxy.isEmpty(),t=this.gridOptionsService.is("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};po.TEMPLATE=`
        <div class="ag-overlay" aria-hidden="true">
            <div class="ag-overlay-panel">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>
            </div>
        </div>`;Jh([y("userComponentFactory")],po.prototype,"userComponentFactory",void 0);Jh([y("paginationProxy")],po.prototype,"paginationProxy",void 0);Jh([y("gridApi")],po.prototype,"gridApi",void 0);Jh([y("columnModel")],po.prototype,"columnModel",void 0);Jh([Z("eOverlayWrapper")],po.prototype,"eOverlayWrapper",void 0);Jh([G],po.prototype,"postConstruct",null);var _v=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mc=class extends L{getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,i=this.pinnedRowModel.getPinnedBottomRowCount(),n=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):n&&(t="top",e=n-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(V(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}rowMax(e){let t;return e.forEach(i=>{(t===void 0||this.before(t,i))&&(t=i)}),t}rowMin(e){let t;return e.forEach(i=>{(t===void 0||this.before(i,t))&&(t=i)}),t}};_v([y("rowModel")],mc.prototype,"rowModel",void 0);_v([y("pinnedRowModel")],mc.prototype,"pinnedRowModel",void 0);_v([y("paginationProxy")],mc.prototype,"paginationProxy",void 0);mc=_v([Y("rowPositionUtils")],mc);var JI=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ng=class extends L{createId(e){let{rowIndex:t,rowPinned:i,column:n}=e;return this.createIdFromValues({rowIndex:t,column:n,rowPinned:i})}createIdFromValues(e){let{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${i??"null"}.${n.getId()}`}equals(e,t){let i=e.column===t.column,n=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return i&&n&&s}};Ng=JI([Y("cellPositionUtils")],Ng);var vc=class{constructor(e){this.cellValueChanges=e}},ep=class extends vc{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},FS=(()=>{class r{constructor(t){this.actionStack=[],this.maxStackSize=t||r.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(t){t.cellValueChanges&&t.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}}return r.DEFAULT_STACK_SIZE=10,r})();var ca=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ss=class extends L{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),n=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;let{rowPinned:o,rowIndex:a,column:l,oldValue:c,value:d}=e,u={rowPinned:o,rowIndex:a,columnId:l.getColId(),newValue:d,oldValue:c};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gridOptionsService.is("undoRedoCellEditing"))return;let e=this.gridOptionsService.getNum("undoRedoCellEditingLimit");e<=0||(this.undoStack=new FS(e),this.redoStack=new FS(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,w.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,w.EVENT_MODEL_UPDATED,t=>{t.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,w.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){let t={type:w.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(t);let i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),n={type:w.EVENT_UNDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(n)}redo(e){let t={type:w.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(t);let i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),n={type:w.EVENT_REDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(n)}undoRedo(e,t,i,n,s){if(!e)return!1;let o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,a=>a[n],s),o instanceof ep?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach(n=>{let{rowIndex:s,rowPinned:o,columnId:a}=n,l={rowIndex:s,rowPinned:o},c=this.getRowNode(l);c.displayed&&c.setDataValue(a,t(n),i)})}processRange(e){let t;this.rangeService.removeAllCellRanges(!0),e.forEach((i,n)=>{if(!i)return;let s=i.startRow,o=i.endRow;n===e.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));let a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};this.rangeService.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:i,rowPinned:n}=t,s={rowIndex:i,rowPinned:n},o=this.getRowNode(s),a={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a,!!this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:i,columnId:n,rowPinned:s}=e,o=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getGridColumn(n);if(!a)return;o.ensureIndexVisible(i),o.ensureColumnVisible(a);let l={rowIndex:i,column:a,rowPinned:s};this.focusService.setFocusedCell(Object.assign(Object.assign({},l),{forceBrowserFocus:!0})),t&&this.rangeService.setRangeToCell(l)}addRowEditingListeners(){this.addManagedListener(this.eventService,w.EVENT_ROW_EDITING_STARTED,e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,w.EVENT_ROW_EDITING_STOPPED,()=>{let e=new vc(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,w.EVENT_CELL_EDITING_STARTED,e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,w.EVENT_CELL_EDITING_STOPPED,e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let i=new vc(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,w.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,w.EVENT_PASTE_END,()=>{let e=new vc(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,w.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,w.EVENT_FILL_END,e=>{let t=new ep(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,w.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let e;this.rangeService&&this.gridOptionsService.is("enableRangeSelection")?e=new ep(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new vc(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}};ca([y("focusService")],ss.prototype,"focusService",void 0);ca([y("ctrlsService")],ss.prototype,"ctrlsService",void 0);ca([y("rowModel")],ss.prototype,"rowModel",void 0);ca([y("pinnedRowModel")],ss.prototype,"pinnedRowModel",void 0);ca([y("cellPositionUtils")],ss.prototype,"cellPositionUtils",void 0);ca([y("rowPositionUtils")],ss.prototype,"rowPositionUtils",void 0);ca([y("columnModel")],ss.prototype,"columnModel",void 0);ca([He("rangeService")],ss.prototype,"rangeService",void 0);ca([G],ss.prototype,"init",null);ss=ca([Y("undoRedoService")],ss);var PS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pu=class extends L{findHeader(e,t){let i,n,s;if(e.column instanceof Ut?(n=`getDisplayedGroup${t}`,i=this.columnModel[n](e.column)):(s=`getDisplayedCol${t}`,i=this.columnModel[s](e.column)),!i)return;let{headerRowIndex:o}=e;if(this.getHeaderRowType(o)===Gi.COLUMN_GROUP){let l=i;if(l.isPadding()&&this.isAnyChildSpanningHeaderHeight(l)){let{nextFocusColumn:c,nextRow:d}=this.getColumnVisibleChild(l,o,t);c&&(i=c,o=d)}}return{column:i,headerRowIndex:o}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let i=this.getHeaderRowType(t),n=i===Gi.FLOATING_FILTER,s=i===Gi.COLUMN,o=n?e:e.getParent(),a=t-1;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),a--;a<0&&(o=e,a=t)}return{nextFocusColumn:o,nextRow:a}}getColumnVisibleChild(e,t,i="After"){let n=this.getHeaderRowType(t),s=e,o=t+1;if(n===Gi.COLUMN_GROUP){let a=e.getLeafColumns(),l=i==="After"?a[0]:je(a);if(this.isAnyChildSpanningHeaderHeight(l.getParent())){s=l;let c=l.getParent();for(;c&&c!==e;)c=c.getParent(),o++}else s=e.getDisplayedChildren()[0]}return{nextFocusColumn:s,nextRow:o}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let i=this.columnModel.getAllDisplayedColumns(),n=i[t==="start"?0:i.length-1];if(!n)return;let o=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()).getRowType(e);if(o==Gi.COLUMN_GROUP){let a=this.columnModel.getColumnGroupAtLevel(n,e);return{headerRowIndex:e,column:a}}return{headerRowIndex:o==null?-1:e,column:n}}};PS([y("columnModel")],pu.prototype,"columnModel",void 0);PS([y("ctrlsService")],pu.prototype,"ctrlsService",void 0);pu=PS([Y("headerPositionUtils")],pu);var eM=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Tv=class{buildColumnDefs(e,t,i){let n=[],s={};return e.forEach(o=>{let a=this.createDefFromColumn(o,t,i),l=!0,c=a,d=o.getOriginalParent(),u=null;for(;d;){let h=null;if(d.isPadding()){d=d.getOriginalParent();continue}let p=s[d.getGroupId()];if(p){p.children.push(c),l=!1;break}if(h=this.createDefFromGroup(d),h&&(h.children=[c],s[h.groupId]=h,c=h,d=d.getOriginalParent()),d!=null&&u===d){l=!1;break}u=d}l&&n.push(c)}),n}createDefFromGroup(e){let t=yf(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){let n=yf(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}};Tv=eM([Y("columnDefFactory")],Tv);var IS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tp=class{getInitialRowClasses(e){let t=[];return V(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),N0(t,this.processClassesFromGridOptions(e.rowNode)),N0(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],i=o=>{typeof o=="string"?t.push(o):Array.isArray(o)&&o.forEach(a=>t.push(a))},n=this.gridOptionsService.get("rowClass");if(n){if(typeof n=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(n)}let s=this.gridOptionsService.getCallback("getRowClass");if(s){let o={data:e.data,node:e,rowIndex:e.rowIndex},a=s(o);i(a)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,i=>{t.push(i)},i=>{}),t}processRowClassRules(e,t,i){let n={data:e.data,node:e,rowIndex:e.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),n,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};IS([y("stylingService")],tp.prototype,"stylingService",void 0);IS([y("gridOptionsService")],tp.prototype,"gridOptionsService",void 0);tp=IS([Y("rowCssClassCalculator")],tp);var Rv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Cc=class extends L{init(){this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup())}doFullSort(e,t){let i=(s,o)=>({currentPos:o,rowNode:s}),n=e.map(i);return n.sort(this.compareRowNodes.bind(this,t)),n.map(s=>s.rowNode)}compareRowNodes(e,t,i){let n=t.rowNode,s=i.rowNode;for(let o=0,a=e.length;o<a;o++){let l=e[o],c=l.sort==="desc",d=this.getValue(n,l.column),u=this.getValue(s,l.column),h,p=this.getComparator(l,n);if(p?h=p(d,u,n,s,c):h=Pe.defaultComparator(d,u,this.isAccentedSort),!isNaN(h)&&h!==0)return l.sort==="asc"?h:h*-1}return t.currentPos-i.currentPos}getComparator(e,t){let i=e.column,n=i.getColDef().comparator;if(n!=null)return n;if(!i.getColDef().showRowGroup)return;let s=!t.group&&i.getColDef().field;if(!s)return;let o=this.columnModel.getPrimaryColumn(s);if(o)return o.getColDef().comparator}getValue(e,t){var i,n;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){if(t.getColDef().keyCreator)return e.key;let c=(i=e.allLeafChildren)===null||i===void 0?void 0:i[0];return c?this.valueService.getValue(t,c,!1,!1):void 0}let a=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return a?(n=e.groupData)===null||n===void 0?void 0:n[a.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}};Rv([y("valueService")],Cc.prototype,"valueService",void 0);Rv([y("columnModel")],Cc.prototype,"columnModel",void 0);Rv([G],Cc.prototype,"init",null);Cc=Rv([Y("rowNodeSorter")],Cc);var tM=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},MS,ip=MS=class extends L{constructor(){super(...arguments),this.ready=!1,this.readyCallbacks=[]}checkReady(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){let e=this.createReadyParams();this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0}}whenReady(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)}createReadyParams(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}}registerFakeHScrollComp(e){this.fakeHScrollComp=e,this.checkReady()}registerFakeVScrollComp(e){this.fakeVScrollComp=e,this.checkReady()}registerGridHeaderCtrl(e){this.gridHeaderCtrl=e,this.checkReady()}registerCenterRowContainerCtrl(e){this.centerRowContainerCtrl=e,this.checkReady()}registerLeftRowContainerCtrl(e){this.leftRowContainerCtrl=e,this.checkReady()}registerRightRowContainerCtrl(e){this.rightRowContainerCtrl=e,this.checkReady()}registerTopCenterRowContainerCtrl(e){this.topCenterRowContainerCtrl=e,this.checkReady()}registerTopLeftRowContainerCon(e){this.topLeftRowContainerCtrl=e,this.checkReady()}registerTopRightRowContainerCtrl(e){this.topRightRowContainerCtrl=e,this.checkReady()}registerStickyTopCenterRowContainerCtrl(e){this.stickyTopCenterRowContainerCtrl=e,this.checkReady()}registerStickyTopLeftRowContainerCon(e){this.stickyTopLeftRowContainerCtrl=e,this.checkReady()}registerStickyTopRightRowContainerCtrl(e){this.stickyTopRightRowContainerCtrl=e,this.checkReady()}registerBottomCenterRowContainerCtrl(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()}registerBottomLeftRowContainerCtrl(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()}registerBottomRightRowContainerCtrl(e){this.bottomRightRowContainerCtrl=e,this.checkReady()}registerHeaderContainer(e,t){switch(t){case"left":this.leftHeaderRowContainerCtrl=e;break;case"right":this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e;break}this.checkReady()}registerGridBodyCtrl(e){this.gridBodyCtrl=e,this.checkReady()}registerGridCtrl(e){this.gridCtrl=e,this.checkReady()}getFakeHScrollComp(){return this.fakeHScrollComp}getFakeVScrollComp(){return this.fakeVScrollComp}getGridHeaderCtrl(){return this.gridHeaderCtrl}getGridCtrl(){return this.gridCtrl}getCenterRowContainerCtrl(){return this.centerRowContainerCtrl}getTopCenterRowContainerCtrl(){return this.topCenterRowContainerCtrl}getBottomCenterRowContainerCtrl(){return this.bottomCenterRowContainerCtrl}getStickyTopCenterRowContainerCtrl(){return this.stickyTopCenterRowContainerCtrl}getGridBodyCtrl(){return this.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}}};ip.NAME="ctrlsService";ip=MS=tM([Y(MS.NAME)],ip);var iM=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Av=class extends L{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){let t=this.registry[e];if(t!=null)return new t}};Av=iM([Y("ctrlsFactory")],Av);var kg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fo=class extends oe{constructor(e,t){super(e),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,w.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Lf()||tn())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Ul(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=["mouseenter","mousedown","touchstart"],t=["mouseleave","touchend"],i=this.getGui();e.forEach(n=>this.addManagedListener(i,n,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),t.forEach(n=>this.addManagedListener(i,n,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL,e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,w.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(e){let t=this.getViewport();xf(()=>Sn(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedListener(this.getViewport(),"scroll",e)}};kg([Z("eViewport")],fo.prototype,"eViewport",void 0);kg([Z("eContainer")],fo.prototype,"eContainer",void 0);kg([y("scrollVisibleService")],fo.prototype,"scrollVisibleService",void 0);kg([y("ctrlsService")],fo.prototype,"ctrlsService",void 0);kg([y("animationFrameService")],fo.prototype,"animationFrameService",void 0);var Gg=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},da=class r extends fo{constructor(){super(r.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new no(t=>this.eContainer.style.width=`${t}px`))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.columnModel.getDisplayedColumnsRightWidth(),i=!this.enableRtl&&e,n=this.gridOptionsService.getScrollbarWidth();i&&(t+=n),ur(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let s=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(s+=n),ur(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=n)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gridOptionsService.is("suppressHorizontalScroll"),n=e&&this.gridOptionsService.getScrollbarWidth()||0,o=i?0:n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Ha(this.getGui(),o),Ha(this.eViewport,o),Ha(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Kl(this.getViewport(),this.enableRtl)}setScrollPosition(e){Sn(this.getViewport())||this.attemptSettingScrollPosition(e),$l(this.getViewport(),e,this.enableRtl)}};da.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;Gg([Z("eLeftSpacer")],da.prototype,"eLeftSpacer",void 0);Gg([Z("eRightSpacer")],da.prototype,"eRightSpacer",void 0);Gg([y("columnModel")],da.prototype,"columnModel",void 0);Gg([y("pinnedRowModel")],da.prototype,"pinnedRowModel",void 0);Gg([G],da.prototype,"postConstruct",null);var LS=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rp=class extends L{postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=this.gridOptionsService.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:w.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:w.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};LS([y("columnModel")],rp.prototype,"columnModel",void 0);LS([G],rp.prototype,"postConstruct",null);rp=LS([Y("pinnedWidthService")],rp);var Dv=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fu=class extends L{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let t=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(t)),this.dispatchExpandedDebounced()}};Dv([y("animationFrameService")],fu.prototype,"animationFrameService",void 0);Dv([y("rowModel")],fu.prototype,"rowModel",void 0);Dv([G],fu.prototype,"postConstruct",null);fu=Dv([Y("rowNodeEventThrottle")],fu);var yc=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},K_=function(r,e){return function(t,i){e(t,i,r)}},NS;function rM(r){if(typeof r=="number")return r;if(typeof r=="string")return parseInt(r,10)}function Ov(r){return r===!0||r==="true"}var os=NS=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Li,this.globalEventHandlerFactory=e=>(t,i)=>{if(this.destroyed)return;let n=NS.alwaysSyncGlobalEvents.has(t);if(n&&!e||!n&&e)return;let s=_t.getCallbackForEvent(t);typeof this.gridOptions[s]=="function"&&this.gridOptions[s](i)}}get context(){return this.gridOptions.context}agWire(e,t){this.gridOptions.api=e,this.gridOptions.columnApi=t,this.api=e,this.columnApi=t}init(){this.gridOptionLookup=new Set([..._t.ALL_PROPERTIES,..._t.EVENT_CALLBACKS]);let e=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.getScrollbarWidth()}destroy(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0}is(e){return Ov(this.gridOptions[e])}get(e){return this.gridOptions[e]}getNum(e){return rM(this.gridOptions[e])}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return V(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>{let n=i;return n.api=this.api,n.columnApi=this.columnApi,n.context=this.context,e(n)})}__setPropertyOnly(e,t){let i=this.gridOptions[e];return this.gridOptionLookup.has(e)&&(this.gridOptions[e]=t),i!==t}set(e,t,i=!1,n={},s=void 0){if(this.gridOptionLookup.has(e)){let o=this.gridOptions[e];if(i||o!==t){this.gridOptions[e]=t;let a=Object.assign({type:e,currentValue:t,previousValue:o,changeSet:s},n);this.propertyEventService.dispatchEvent(a)}}}addEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removeEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getGridId(){return this.api.getGridId()}getScrollbarWidth(){if(this.scrollbarWidth==null){let t=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:yx();t!=null&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:w.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&Ce(this.gridOptions.rowModelType)}isDomLayout(e){var t;return((t=this.gridOptions.domLayout)!==null&&t!==void 0?t:"normal")===e}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.is("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(e,t=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:i,estimated:!0};let s={node:e,data:e.data},o=this.getCallback("getRowHeight")(s);if(this.isNumeric(o))return o===0&&Ne(()=>console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),"invalidRowHeight"),{height:Math.max(1,o),estimated:!1}}return e.detail&&this.is("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Ce(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let e=this.environment.refreshRowHeightVariable();return e!==-1?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){let i=e[this.getDomDataKey()];return i?i[t]:void 0}setDomData(e,t,i){let n=this.getDomDataKey(),s=e[n];Ce(s)&&(s={},e[n]=s),s[t]=i}getDocument(){let e=null;return this.gridOptions.getDocument&&V(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&V(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getAsyncTransactionWaitMillis(){return V(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.is("ensureDomOrder")?!1:this.is("animateRows")}isGroupRowsSticky(){return!(this.is("suppressGroupRowsSticky")||this.is("paginateChildRows")||this.is("groupHideOpenParents"))}isColumnsSortingCoupledToGroup(){let e=this.gridOptions.autoGroupColumnDef;return this.isRowModelType("clientSide")&&!e?.comparator&&!this.is("treeData")}getGroupAggFiltering(){let e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(Ov(e))return()=>!0}isGroupIncludeFooterTrueOrCallback(){let e=this.gridOptions.groupIncludeFooter;return Ov(e)||typeof e=="function"}getGroupIncludeFooter(){let e=this.gridOptions.groupIncludeFooter;return typeof e=="function"?this.getCallback("groupIncludeFooter"):Ov(e)?()=>!0:()=>!1}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?_f("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")}isGroupUseEntireRow(e){return e?!1:this.gridOptions.groupDisplayType?_f("groupRows",this.gridOptions.groupDisplayType):!1}};os.alwaysSyncGlobalEvents=new Set([w.EVENT_GRID_PRE_DESTROYED]);yc([y("gridOptions")],os.prototype,"gridOptions",void 0);yc([y("eventService")],os.prototype,"eventService",void 0);yc([y("environment")],os.prototype,"environment",void 0);yc([y("eGridDiv")],os.prototype,"eGridDiv",void 0);yc([K_(0,Wt("gridApi")),K_(1,Wt("columnApi"))],os.prototype,"agWire",null);yc([G],os.prototype,"init",null);yc([at],os.prototype,"destroy",null);os=NS=yc([Y("gridOptionsService")],os);var nM=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Bg=class extends L{getLocaleTextFunc(){let e=this.gridOptionsService.getCallback("getLocaleText");if(e)return(i,n,s)=>e({key:i,defaultValue:n,variableValues:s});let t=this.gridOptionsService.get("localeText");return(i,n,s)=>{let o=t&&t[i];if(o&&s&&s.length){let a=0;for(;!(a>=s.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",s[a++])}return o??n}}};Bg=nM([Y("localeService")],Bg);var sM=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},np=class r extends fo{constructor(){super(r.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new nc(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,w.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.gridOptionsService.getScrollbarWidth()||0,n=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),ur(this.getGui(),n),ur(this.eViewport,n),ur(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let t=this.ctrlsService.getGridBodyCtrl().getBodyViewportElement();this.eViewport.scrollTop!=t.scrollTop&&(this.eViewport.scrollTop=t.scrollTop)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e){Sn(this.getViewport())||this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};np.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;sM([G],np.prototype,"postConstruct",null);var gu=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$_={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Y_=["january","february","march","april","may","june","july","august","september","october","november","december"],go=class extends L{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",()=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs("gridOptionsChanged")})}processDataTypeDefinitions(){var e;let t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach(([n,s])=>{this.dataTypeDefinitions[n]=Object.assign(Object.assign({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})});let i=(e=this.gridOptionsService.get("dataTypeDefinitions"))!==null&&e!==void 0?e:{};this.dataTypeMatchers={},Object.entries(i).forEach(([n,s])=>{let o=this.processDataTypeDefinition(s,i,[n],t);o&&(this.dataTypeDefinitions[n]=o,s.dataTypeMatcher&&(this.dataTypeMatchers[n]=s.dataTypeMatcher))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(n=>{let s=this.dataTypeMatchers[n];s&&delete this.dataTypeMatchers[n],this.dataTypeMatchers[n]=s??t[n].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let i=Object.assign(Object.assign({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,n){let s,o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=n[o];if(!this.validateDataTypeDefinition(e,a,o))return;s=this.mergeDataTypeDefinitions(a,e)}else{if(i.includes(o)){Ne(()=>console.warn('AG Grid: Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.'),"dataTypeExtendsCircularRef");return}let a=t[o];if(!this.validateDataTypeDefinition(e,a,o))return;let l=this.processDataTypeDefinition(a,t,[...i,o],n);if(!l)return;s=this.mergeDataTypeDefinitions(l,e)}return Object.assign(Object.assign({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(Ne(()=>console.warn('AG Grid: The "baseDataType" property of a data type definition must match that of its parent.'),"dataTypeBaseTypesMatch"),!1):!0:(Ne(()=>console.warn(`AG Grid: The data type definition ${i} does not exist.`),"dataTypeDefMissing"+i),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,n;if(!((i=t.node)===null||i===void 0)&&i.group){let s=t.column.getAggFunc();if(s){if(s==="first"||s==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&s!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(Object.assign(Object.assign({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(Object.assign(Object.assign({},t),{value:t.value.value}))}}}return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive())return typeof t.value!="string"||!((n=e.dataTypeMatcher)===null||n===void 0)&&n.call(e,t.value)?e.valueFormatter(t):void 0;return e.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(e,t,i){let{cellDataType:n}=t,{field:s}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(s,i):!1),!n){e.cellDataType=!1;return}let o=this.dataTypeDefinitions[n];if(!o){Ne(()=>console.warn(`AG Grid: Missing data type definition - "${n}"`),"dataTypeMissing"+n);return}return e.cellDataType=n,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,i),o.columnTypes}updateColDefAndGetColumnType(e,t,i){var n,s;let o=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,i),a=(s=(n=t.type)!==null&&n!==void 0?n:o)!==null&&s!==void 0?s:e.type;return e.type=a,a?this.convertColumnTypes(a):void 0}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let i=n=>{t.add(n.key)};e.addEventListener(Oe.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener(Oe.EVENT_STATE_UPDATED,i))}canInferCellDataType(e,t){var i;if(this.rowModel.getType()!=="clientSide")return!1;let n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,n))return!1;let s=t.type===null?e.type:t.type;if(s){let o=(i=this.gridOptionsService.get("columnTypes"))!==null&&i!==void 0?i:{};if(this.convertColumnTypes(s).some(l=>{let c=o[l.trim()];return c&&this.doColDefPropsPreventInference(c,n)}))return!1}return!this.doColDefPropsPreventInference(e,n)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>this.doesColDefPropPreventInference(e,t,i,n))}doesColDefPropPreventInference(e,t,i,n){if(!t[i])return!1;let s=e[i];return s===null?(t[i]=!1,!1):n===void 0?!!s:s===n}inferCellDataType(e,t){var i;if(!e)return;let n,s=this.getInitialData();if(s){let a=e.indexOf(".")>=0&&!this.gridOptionsService.is("suppressFieldDotNotation");n=Ba(s,e,a)}else this.initWaitForRowData(t);if(n==null)return;let[o]=(i=Object.entries(this.dataTypeMatchers).find(([a,l])=>l(n)))!==null&&i!==void 0?i:["object"];return o}getInitialData(){let e=this.gridOptionsService.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let i=this.addManagedListener(this.eventService,w.EVENT_ROW_DATA_UPDATE_STARTED,n=>{let{firstRowData:s}=n;if(!s)return;i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();let o={type:w.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(o)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(o=>o()),this.columnStateUpdateListenerDestroyFuncs=[];let n={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,a])=>{let l=this.columnModel.getGridColumn(o);if(!l)return;let c=l.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(l))return;let d=l.getColDef();if(t&&d.type&&d.type!==c.type){let u=this.getUpdatedColumnState(l,a);u.rowGroup&&u.rowGroupIndex==null&&(n[o]=u),u.pivot&&u.pivotIndex==null&&(s[o]=u),i.push(u)}}),t&&i.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(n,s)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let i=this.columnModel.getColumnStateFromColDef(e);return t.forEach(n=>{delete i[n],n==="rowGroup"?delete i.rowGroupIndex:n==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}convertColumnTypes(e){let t=[];return e instanceof Array?e.some(n=>typeof n!="string")?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'"),t}getDateStringTypeDefinition(){return this.dataTypeDefinitions.dateString}getDateParserFunction(){return this.getDateStringTypeDefinition().dateParser}getDateFormatterFunction(){return this.getDateStringTypeDefinition().dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))===null||t===void 0?void 0:t.baseDataType}checkType(e,t){var i;if(t==null)return!0;let n=(i=this.getDataTypeDefinition(e))===null||i===void 0?void 0:i.dataTypeMatcher;return n?n(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&Ne(()=>console.warn('AG Grid: Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),"dataTypeObjectValueFormatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&Ne(()=>console.warn('AG Grid: Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'),"dataTypeObjectValueParser"))}setColDefPropertiesForBaseDataType(e,t,i){let n=(l,c,d)=>{let u=l.getColDef().valueFormatter;return u===t.groupSafeValueFormatter&&(u=t.valueFormatter),this.valueFormatterService.formatValue(l,c,d,u)},s=De.__isRegistered(he.SetFilterModule,this.context.getGridId()),o=this.localeService.getLocaleTextFunc(),a=l=>{let{filterParams:c}=e;e.filterParams=typeof c=="object"?Object.assign(Object.assign({},c),l):l};switch(e.useValueFormatterForExport=!0,e.useValueParserForImport=!0,t.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",s&&a({comparator:(l,c)=>{let d=l==null?0:parseInt(l),u=c==null?0:parseInt(c);return d===u?0:d>u?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=l=>!!l.colDef.editable&&l.event.key===B.SPACE,a(s?{valueFormatter:l=>V(l.value)?o(String(l.value),l.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(l,c)=>c,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(l,c)=>c===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=l=>n(l.column,l.node,l.value),s&&a({valueFormatter:l=>{let c=n(l.column,l.node,l.value);return V(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(l,c)=>{if(c===1&&l!=null){let d=Y_[Number(l)-1];return o(d,$_[d])}return l??o("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=c=>n(c.column,c.node,c.value);let l=this.getDateParserFunction();a(s?{valueFormatter:c=>{let d=n(c.column,c.node,c.value);return V(d)?d:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:c=>{let d=l(c??void 0);return d?[String(d.getFullYear()),String(d.getMonth()+1),String(d.getDate())]:null},treeListFormatter:(c,d)=>{if(d===1&&c!=null){let u=Y_[Number(c)-1];return o(u,$_[u])}return c??o("blanks","(Blanks)")}}:{comparator:(c,d)=>{let u=l(d);return d==null||u<c?-1:u>c?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(l,c)=>{let d=this.columnModel.getPrimaryColumn(i),u=d?.getColDef();if(!d||!u)return 0;let h=l==null?"":n(d,null,l),p=c==null?"":n(d,null,c);return h===p?0:h>p?1:-1},e.keyCreator=l=>n(l.column,l.node,l.value),s?a({valueFormatter:l=>{let c=n(l.column,l.node,l.value);return V(c)?c:o("blanks","(Blanks)")}}):e.filterValueGetter=l=>n(l.column,l.node,this.valueService.getValue(l.column,l.node));break}}}getDefaultDataTypes(){let e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>i.newValue===""?null:Number(i.newValue),valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:Gl(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>i.newValue===""?null:String(i.newValue).toLowerCase()==="true",valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>ji(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>{var n;return i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):(n=zi(i.value,!1))!==null&&n!==void 0?n:""},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var n;return(n=ji(i))!==null&&n!==void 0?n:void 0},dateFormatter:i=>{var n;return(n=zi(i??null,!1))!==null&&n!==void 0?n:void 0},valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var n;return(n=Gl(i.value))!==null&&n!==void 0?n:""}}}}};gu([y("rowModel")],go.prototype,"rowModel",void 0);gu([y("columnModel")],go.prototype,"columnModel",void 0);gu([y("columnUtils")],go.prototype,"columnUtils",void 0);gu([y("valueService")],go.prototype,"valueService",void 0);gu([y("valueFormatterService")],go.prototype,"valueFormatterService",void 0);gu([G],go.prototype,"init",null);go=gu([Y("dataTypeService")],go);var X_=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sp=class extends L{parseValue(e,t,i,n){let s=e.getColDef(),o={node:t,data:t?.data,oldValue:n,newValue:i,colDef:s,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},a=s.valueParser;return V(a)?typeof a=="function"?a(o):this.expressionService.evaluate(a,o):i}};X_([y("expressionService")],sp.prototype,"expressionService",void 0);sp=X_([Y("valueParserService")],sp);var Vg=class{constructor(e,t,i){if(!t){console.error("AG Grid: no gridOptions provided to the grid");return}this.gridOptions=t,new Fv().create(e,t,n=>{let s=new la(e);n.createBean(s)},void 0,i)}destroy(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()}},oM=1,Fv=class{create(e,t,i,n,s){var o;let a=!!t.debug,l=(o=t.gridId)!==null&&o!==void 0?o:String(oM++),c=this.getRegisteredModules(s,l),d=this.createBeansList(t.rowModelType,c,l),u=this.createProvidedBeans(e,t,s);if(!d)return;let h={providedBeanInstances:u,beanClasses:d,debug:a,gridId:l},p=new lu("AG Grid",()=>t.debug),f=new lu("Context",()=>h.debug),g=new Sf(h,f),m=g.getBean("beans");this.registerModuleUserComponents(m,c),this.registerStackComponents(m,c),this.registerControllers(m,c),i(g),m.ctrlsService.whenReady(()=>{this.setColumnsAndData(m),this.dispatchGridReadyEvent(m);let v=De.__isRegistered(he.EnterpriseCoreModule,l);p.log(`initialised successfully, enterprise = ${v}`)}),n&&n(g)}registerControllers(e,t){t.forEach(i=>{i.controllers&&i.controllers.forEach(n=>e.ctrlsFactory.register(n))})}registerStackComponents(e,t){let i=this.createAgStackComponentsList(t);e.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(e,t){let i=e?e.modules:null,n=De.__getRegisteredModules(t),s=[],o={},a=(l,c,d)=>{(h=>{o[h.moduleName]||(o[h.moduleName]=!0,s.push(h),De.__register(h,l,d))})(c),c.dependantModules&&c.dependantModules.forEach(h=>a(l,h,d))};return i&&i.forEach(l=>a(!0,l,t)),n&&n.forEach(l=>a(!De.__isPackageBased(),l,void 0)),s}registerModuleUserComponents(e,t){this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]).forEach(n=>{e.userComponentRegistry.registerDefaultComponent(n.componentName,n.componentClass)})}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;Ce(n)&&(n=new ou);let s={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(s,i.providedBeanInstances),s}createAgStackComponentsList(e){let t=[{componentName:"AgCheckbox",componentClass:eo},{componentName:"AgRadioButton",componentClass:Rd},{componentName:"AgToggleButton",componentClass:Eg},{componentName:"AgInputTextField",componentClass:_r},{componentName:"AgInputTextArea",componentClass:_g},{componentName:"AgInputNumberField",componentClass:ja},{componentName:"AgInputDateField",componentClass:Tg},{componentName:"AgInputRange",componentClass:Rg},{componentName:"AgRichSelect",componentClass:iu},{componentName:"AgSelect",componentClass:Td},{componentName:"AgSlider",componentClass:na},{componentName:"AgGridBody",componentClass:Rn},{componentName:"AgHeaderRoot",componentClass:Zd},{componentName:"AgSortIndicator",componentClass:Tr},{componentName:"AgPagination",componentClass:jr},{componentName:"AgOverlayWrapper",componentClass:po},{componentName:"AgGroupComponent",componentClass:on},{componentName:"AgPanel",componentClass:ns},{componentName:"AgDialog",componentClass:Wh},{componentName:"AgRowContainer",componentClass:Zo},{componentName:"AgFakeHorizontalScroll",componentClass:da},{componentName:"AgFakeVerticalScroll",componentClass:np},{componentName:"AgAutocomplete",componentClass:Ps}],i=this.extractModuleEntity(e,n=>n.agStackComponents?n.agStackComponents:[]);return t=t.concat(i),t}createBeansList(e="clientSide",t,i){let n=t.filter(c=>!c.rowModel||c.rowModel===e),s={clientSide:he.ClientSideRowModelModule,infinite:he.InfiniteRowModelModule,serverSide:he.ServerSideRowModelModule,viewport:he.ViewportRowModelModule};if(!s[e]){console.error("AG Grid: could not find row model for rowModelType = "+e);return}if(!De.__assertRegistered(s[e],`rowModelType = '${e}'`,i))return;let o=[Be,mc,Ng,pu,Xh,rt,Gd,Mg,Zh,wg,Xo,hu,Qd,Bg,yd,eu,Bd,Rf,Li,os,sa,gc,bn,Ei,el,tu,sn,jh,Bl,Pg,nl,fr,qh,aa,Kh,Tf,il,tl,qe,au,zt,oc,uu,oa,kh,Bh,zd,cu,wv,Yh,Qh,vh,du,hc,ss,Af,Tv,tp,ra,Cc,ip,rp,fu,Av,go,sp,As],a=this.extractModuleEntity(n,c=>c.beans?c.beans:[]);o.push(...a);let l=[];return o.forEach(c=>{l.indexOf(c)<0&&l.push(c)}),l}extractModuleEntity(e,t){return[].concat(...e.map(t))}setColumnsAndData(e){let t=e.gridOptionsService.get("columnDefs");e.columnModel.setColumnDefs(t||[],"gridInitializing"),e.rowModel.start()}dispatchGridReadyEvent(e){let t={type:w.EVENT_GRID_READY};e.eventService.dispatchEvent(t)}};var Hg=class{wrap(e,t,i=[],n){let s=this.createWrapper(e,n);return t.forEach(o=>{this.createMethod(s,o,!0)}),i.forEach(o=>{this.createMethod(s,o,!1)}),s}unwrap(e){return e}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}};var op=typeof global>"u"?{}:global;op.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;op.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;op.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;op.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;op.Node=typeof Node>"u"?{}:Node;op.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var q_=(()=>{class r extends ou{constructor(t){super(),this._ngZone=t}setEmitterUsedCallback(t){this.isEmitterUsed=t}setTimeout(t,i){this._ngZone?this._ngZone.runOutsideAngular(()=>{window.setTimeout(()=>{t()},i)}):window.setTimeout(()=>{t()},i)}setInterval(t,i){return new vi(n=>{this._ngZone?this._ngZone.runOutsideAngular(()=>{n(window.setInterval(()=>{t()},i))}):n(window.setInterval(()=>{t()},i))})}addEventListener(t,i,n,s){this.isOutsideAngular(i)&&this._ngZone?this._ngZone.runOutsideAngular(()=>{t.addEventListener(i,n,s)}):t.addEventListener(i,n,s)}dispatchEvent(t,i,n=!1){this.isOutsideAngular(t)?this._ngZone?this._ngZone.runOutsideAngular(i):i():(this.isEmitterUsed(t)||n)&&(!ah.isInAngularZone()&&this._ngZone?this._ngZone.run(i):i())}isFrameworkComponent(t){if(!t)return!1;let i=t.prototype;return i&&"agInit"in i}}return r.\u0275fac=function(t){return new(t||r)(QE(ah))},r.\u0275prov=Wi({token:r,factory:r.\u0275fac}),r})(),Z_=(()=>{class r extends Hg{setViewContainerRef(t){this.viewContainerRef=t}setComponentFactoryResolver(t){this.componentFactoryResolver=t}createWrapper(t){let i=this;class n extends kS{init(a){super.init(a),this._componentRef.changeDetectorRef.detectChanges()}createComponent(){return i.createComponent(t)}hasMethod(a){return s.getFrameworkComponentInstance()[a]!=null}callMethod(a,l){let c=this.getFrameworkComponentInstance();return s.getFrameworkComponentInstance()[a].apply(c,l)}addMethod(a,l){s[a]=l}}let s=new n;return s}createComponent(t){let i=this.componentFactoryResolver.resolveComponentFactory(t);return this.viewContainerRef.createComponent(i)}}return r.\u0275fac=function(){let e;return function(i){return(e||(e=gi(r)))(i||r)}}(),r.\u0275prov=Wi({token:r,factory:r.\u0275fac}),r})(),kS=class{init(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},gr=(()=>{class r{constructor(t,i,n,s,o){this.viewContainerRef=i,this.angularFrameworkOverrides=n,this.frameworkComponentWrapper=s,this.componentFactoryResolver=o,this._initialised=!1,this._destroyed=!1,this._fullyReady=vi.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.serverSideStoreType=void 0,this.suppressServerSideInfiniteScroll=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new ue,this.toolPanelSizeChanged=new ue,this.cutStart=new ue,this.cutEnd=new ue,this.pasteStart=new ue,this.pasteEnd=new ue,this.columnVisible=new ue,this.columnPinned=new ue,this.columnResized=new ue,this.columnMoved=new ue,this.columnValueChanged=new ue,this.columnPivotModeChanged=new ue,this.columnPivotChanged=new ue,this.columnGroupOpened=new ue,this.newColumnsLoaded=new ue,this.gridColumnsChanged=new ue,this.displayedColumnsChanged=new ue,this.virtualColumnsChanged=new ue,this.columnEverythingChanged=new ue,this.componentStateChanged=new ue,this.cellValueChanged=new ue,this.cellEditRequest=new ue,this.rowValueChanged=new ue,this.cellEditingStarted=new ue,this.cellEditingStopped=new ue,this.rowEditingStarted=new ue,this.rowEditingStopped=new ue,this.undoStarted=new ue,this.undoEnded=new ue,this.redoStarted=new ue,this.redoEnded=new ue,this.rangeDeleteStart=new ue,this.rangeDeleteEnd=new ue,this.filterOpened=new ue,this.filterChanged=new ue,this.filterModified=new ue,this.advancedFilterBuilderVisibleChanged=new ue,this.chartCreated=new ue,this.chartRangeSelectionChanged=new ue,this.chartOptionsChanged=new ue,this.chartDestroyed=new ue,this.cellKeyDown=new ue,this.gridReady=new ue,this.gridPreDestroyed=new ue,this.firstDataRendered=new ue,this.gridSizeChanged=new ue,this.modelUpdated=new ue,this.virtualRowRemoved=new ue,this.viewportChanged=new ue,this.bodyScroll=new ue,this.bodyScrollEnd=new ue,this.dragStarted=new ue,this.dragStopped=new ue,this.paginationChanged=new ue,this.rowDragEnter=new ue,this.rowDragMove=new ue,this.rowDragLeave=new ue,this.rowDragEnd=new ue,this.columnRowGroupChanged=new ue,this.rowGroupOpened=new ue,this.expandOrCollapseAll=new ue,this.pinnedRowDataChanged=new ue,this.rowDataChanged=new ue,this.rowDataUpdated=new ue,this.asyncTransactionsFlushed=new ue,this.storeRefreshed=new ue,this.cellClicked=new ue,this.cellDoubleClicked=new ue,this.cellFocused=new ue,this.cellMouseOver=new ue,this.cellMouseOut=new ue,this.cellMouseDown=new ue,this.rowClicked=new ue,this.rowDoubleClicked=new ue,this.rowSelected=new ue,this.selectionChanged=new ue,this.cellContextMenu=new ue,this.rangeSelectionChanged=new ue,this.tooltipShow=new ue,this.tooltipHide=new ue,this.sortChanged=new ue,this.columnRowGroupChangeRequest=new ue,this.columnPivotChangeRequest=new ue,this.columnValueChangeRequest=new ue,this.columnAggFuncChangeRequest=new ue,this._nativeElement=t.nativeElement}ngAfterViewInit(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=_t.copyAttributesToGridOptions(this.gridOptions,this),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},new Vg(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this.gridPreDestroyed.observers.length>0&&console.warn('AG Grid: gridPreDestroyed event listener registered via (gridPreDestroyed)="method($event)" will be ignored! Please assign via gridOptions.gridPreDestroyed and pass to the grid as [gridOptions]="gridOptions"'),this._initialised=!0,this._fullyReady.resolveNow(null,t=>t)}ngOnChanges(t){this._initialised&&_t.processOnChange(t,this.api)}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}isEmitterUsed(t){let i=this[t],n=!!i&&i.observers&&i.observers.length>0,s=`on${t.charAt(0).toUpperCase()}${t.substring(1)}`,o=!!this.gridOptions&&!!this.gridOptions[s];return n||o}globalEventListener(t,i){if(this._destroyed)return;let n=this[t];n&&this.isEmitterUsed(t)&&(t==="gridReady"?this._fullyReady.then(s=>{n.emit(i)}):n.emit(i))}}return r.\u0275fac=function(t){return new(t||r)(Xs(sh),Xs(s1),Xs(q_),Xs(Z_),Xs(e1))},r.\u0275cmp=Ve({type:r,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",serverSideStoreType:"serverSideStoreType",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",gridPreDestroyed:"gridPreDestroyed",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[Go([q_,Z_]),f0],decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})(),Q_=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=nh({type:r}),r.\u0275inj=rh({}),r})();var Fw=Object.defineProperty,aM=Object.defineProperties,lM=Object.getOwnPropertyDescriptor,cM=Object.getOwnPropertyDescriptors,Zv=Object.getOwnPropertySymbols,dM=Object.getPrototypeOf,jT=Object.prototype.hasOwnProperty,KT=Object.prototype.propertyIsEnumerable,uM=Reflect.get,GS=(r,e)=>(e=Symbol[r])?e:Symbol.for("Symbol."+r),ni=Math.pow,J_=(r,e,t)=>e in r?Fw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,H=(r,e)=>{for(var t in e||(e={}))jT.call(e,t)&&J_(r,t,e[t]);if(Zv)for(var t of Zv(e))KT.call(e,t)&&J_(r,t,e[t]);return r},me=(r,e)=>aM(r,cM(e)),In=(r,e)=>{var t={};for(var i in r)jT.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&Zv)for(var i of Zv(r))e.indexOf(i)<0&&KT.call(r,i)&&(t[i]=r[i]);return t},ul=(r,e)=>{for(var t in e)Fw(r,t,{get:e[t],enumerable:!0})},x=(r,e,t,i)=>{for(var n=i>1?void 0:i?lM(e,t):e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(n=(i?o(e,t,n):o(n))||n);return i&&n&&Fw(e,t,n),n},hl=(r,e,t)=>uM(dM(r),t,e),ne=(r,e,t)=>new Promise((i,n)=>{var s=l=>{try{a(t.next(l))}catch(c){n(c)}},o=l=>{try{a(t.throw(l))}catch(c){n(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(r,e)).next())}),hM=function(r,e){this[0]=r,this[1]=e},pM=r=>{var e=r[GS("asyncIterator")],t=!1,i,n={};return e==null?(e=r[GS("iterator")](),i=s=>n[s]=o=>e[s](o)):(e=e.call(r),i=s=>n[s]=o=>{if(t){if(t=!1,s==="throw")throw o;return o}return t=!0,{done:!1,value:new hM(new Promise(a=>{var l=e[s](o);if(!(l instanceof Object))throw TypeError("Object expected");a(l)}),1)}}),n[GS("iterator")]=()=>n,i("next"),"throw"in e?i("throw"):n.throw=s=>{throw s},"return"in e&&i("return"),n};var fM={};ul(fM,{day:()=>eR,friday:()=>MM,hour:()=>JT,millisecond:()=>$T,minute:()=>ZT,monday:()=>OM,month:()=>iR,saturday:()=>LM,second:()=>XT,sunday:()=>tR,thursday:()=>IM,tuesday:()=>FM,utcDay:()=>ZM,utcHour:()=>YM,utcMinute:()=>jM,utcMonth:()=>eL,utcYear:()=>rL,wednesday:()=>PM,year:()=>rR});var mm=class{constructor(r,e,t){this._encode=r,this._decode=e,this._rangeCallback=t}floor(r){let e=new Date(r),t=this._encode(e);return this._decode(t)}ceil(r){let e=new Date(Number(r)-1),t=this._encode(e);return this._decode(t+1)}range(r,e,t){var i;let n=(i=this._rangeCallback)==null?void 0:i.call(this,r,e),s=this._encode(t?this.floor(r):this.ceil(r)),o=this._encode(t?this.ceil(e):this.floor(e));if(o<s)return[];let a=[];for(let l=s;l<=o;l++){let c=this._decode(l);a.push(c)}return n?.(),a}},fs=class extends mm{getOffset(r,e){let t=typeof r=="number"||r instanceof Date?this._encode(new Date(r)):0;return Math.floor(t)%e}every(r,e){let t=0,i,{snapTo:n="start"}=e??{};if(typeof n=="string"){let a=t;i=(l,c)=>{let d=n==="start"?l:c;return t=this.getOffset(d,r),()=>t=a}}else typeof n=="number"?t=this.getOffset(new Date(n),r):n instanceof Date&&(t=this.getOffset(n,r));let s=a=>{let l=this._encode(a);return Math.floor((l-t)/r)},o=a=>this._decode(a*r+t);return new mm(s,o,i)}};function gM(r){return r.getTime()}function mM(r){return new Date(r)}var $T=new fs(gM,mM),vM=$T;var Ru=1e3,an=Ru*60,fa=an*60,Tc=fa*24,jg=Tc*7,Wg=Tc*30,Pv=Tc*365,YT=new Date().getTimezoneOffset()*an;function CM(r){return Math.floor((r.getTime()-YT)/Ru)}function yM(r){return new Date(YT+r*Ru)}var XT=new fs(CM,yM),xM=XT,qT=new Date().getTimezoneOffset()*an;function SM(r){return Math.floor((r.getTime()-qT)/an)}function wM(r){return new Date(qT+r*an)}var ZT=new fs(SM,wM),bM=ZT,QT=new Date().getTimezoneOffset()*an;function EM(r){return Math.floor((r.getTime()-QT)/fa)}function _M(r){return new Date(QT+r*fa)}var JT=new fs(EM,_M),TM=JT;function RM(r){let e=r.getTimezoneOffset()*an;return Math.floor((r.getTime()-e)/Tc)}function AM(r){let e=new Date(1970,0,1);return e.setDate(e.getDate()+r),e}var eR=new fs(RM,AM),DM=eR;function Nu(r){let t=(7+r-4)%7;function i(s){let o=s.getTimezoneOffset()*an;return Math.floor((s.getTime()-o)/jg-t/7)}function n(s){let o=new Date(1970,0,1);return o.setDate(o.getDate()+s*7+t),o}return new fs(i,n)}var tR=Nu(0),OM=Nu(1),FM=Nu(2),PM=Nu(3),IM=Nu(4),MM=Nu(5),LM=Nu(6),NM=tR;function kM(r){return r.getFullYear()*12+r.getMonth()}function GM(r){let e=Math.floor(r/12),t=r-e*12;return new Date(e,t,1)}var iR=new fs(kM,GM),BM=iR;function VM(r){return r.getFullYear()}function HM(r){let e=new Date;return e.setFullYear(r),e.setMonth(0,1),e.setHours(0,0,0,0),e}var rR=new fs(VM,HM),WM=rR;function UM(r){return Math.floor(r.getTime()/an)}function zM(r){return new Date(r*an)}var jM=new fs(UM,zM);function KM(r){return Math.floor(r.getTime()/fa)}function $M(r){return new Date(r*fa)}var YM=new fs(KM,$M);function XM(r){return Math.floor(r.getTime()/Tc)}function qM(r){let e=new Date(0);return e.setUTCDate(e.getUTCDate()+r),e.setUTCHours(0,0,0,0),e}var ZM=new fs(XM,qM);function QM(r){return r.getUTCFullYear()*12+r.getUTCMonth()}function JM(r){let e=Math.floor(r/12),t=r-e*12;return new Date(Date.UTC(e,t,1))}var eL=new fs(QM,JM);function tL(r){return r.getUTCFullYear()}function iL(r){let e=new Date;return e.setUTCFullYear(r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}var rL=new fs(tL,iL),Qv={isEnterprise:!1},Pw=class{constructor(){this.destroyFns=[]}destroy(){for(let r of this.destroyFns)r()}},ma=[];function ua(r){let e=ma.find(t=>r.type===t.type&&r.optionsKey===t.optionsKey&&r.identifier===t.identifier);if(e){if(r.packageType==="enterprise"&&e.packageType==="community"){let t=ma.indexOf(e);ma.splice(t,1,r)}}else ma.push(r)}function gC(){return ma.some(r=>r.packageType==="enterprise")}var Iw=new Map;function nR(r,e){Iw.set(r,e)}function Sa(r){let{length:e}=r;if(e===0)return;let t=1/0,i=-1/0;for(let s=0;s<e;s++){let o=r[s];o instanceof Date&&(o=o.getTime()),typeof o=="number"&&(o<t&&(t=o),o>i&&(i=o))}let n=[t,i];if(!n.some(s=>!isFinite(s)))return n}function sR(r,e,t){return Im(r,e,t).extent}function Im(r,e,t){var i;let n=!1;return r.length>2&&(r=(i=Sa(r))!=null?i:[NaN,NaN]),isNaN(e)||(n||(n=e>r[0]),r=[e,r[1]]),isNaN(t)||(n||(n=t<r[1]),r=[r[0],t]),r[0]>r[1]&&(r=[]),{extent:r,clipped:n}}function dm(r,e){if(r==null||e==null||r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(Array.isArray(r[t])&&Array.isArray(e[t])){if(!dm(r[t],e[t]))return!1}else if(r[t]!==e[t])return!1;return!0}function Jv(r){return typeof r>"u"?[]:Array.isArray(r)?r:[r]}function nL(r){return Array.from(new Set(r))}var eT={};function tT(r,e){eT[e]||(r(),eT[e]=!0)}var be={log(...r){console.log(...r)},warn(r,...e){console.warn(`AG Charts - ${r}`,...e)},error(r,...e){typeof r=="object"?console.error("AG Charts error",r,...e):console.error(`AG Charts - ${r}`,...e)},table(...r){console.table(...r)},warnOnce(r,...e){tT(()=>be.warn(r,...e),`Logger.warn: ${r}`)},errorOnce(r,...e){tT(()=>be.error(r,...e),`Logger.error: ${r}`)}};function QS(r){let e=typeof window<"u"?window:void 0;return e?.[r]}var sL=2e3,iT=Date.now(),oL=()=>{let r=Date.now()-iT;if(r>sL){let e=(Math.floor(r/100)/10).toFixed(1);be.log(`**** ${e}s since last log message ****`)}iT=Date.now()},_i={create(...r){return(...e)=>{_i.check(...r)&&(typeof e[0]=="function"&&(e=Jv(e[0]())),oL(),be.log(...e))}},check(...r){return r.length===0&&r.push(!0),Jv(QS("agChartsDebug")).some(t=>r.includes(t))}},eC=Symbol("BREAK"),cp="__decorator_config";function aL(r,e){Object.getOwnPropertyDescriptor(r,cp)==null&&Object.defineProperty(r,cp,{value:{}});let t=r[cp],i=e.toString();if(typeof t[i]<"u")return t[i];let n=new WeakMap;t[i]={setters:[],getters:[],valuesMap:n};let s=Object.getOwnPropertyDescriptor(r,e),o=s?.set,a=s?.get;return Object.defineProperty(r,e,{set:function(d){let{setters:u}=t[i],h;u.some(p=>p.length>2)&&(h=a?a.call(this):n.get(this));for(let p of u)if(d=p(this,e,d,h),d===eC)return;o?o.call(this,d):n.set(this,d)},get:function(){let d=a?a.call(this):n.get(this);for(let u of t[i].getters)if(d=u(this,e,d),d===eC)return;return d},enumerable:!0,configurable:!1}),t[i]}function cl(r,e,t){return(i,n)=>{let s=aL(i,n);s.setters.push(r),e&&s.getters.unshift(e),t&&Object.assign(s,t)}}function mC(r){return typeof r<"u"&&cp in r}function dp(r){let e=new Set;for(;mC(r);)e.add(r?.[cp]),r=Object.getPrototypeOf(r);return Array.from(e).flatMap(t=>Object.keys(t))}function lL(r){return dp(r).reduce((e,t)=>{var i;return e[t]=(i=r[t])!=null?i:null,e},{})}function cL(r,e){let t=e.toString();for(;mC(r);){let i=r[cp];if(Object.hasOwn(i,t))return i[t];r=Object.getPrototypeOf(r)}}function Mw(){return(r,e)=>{let t=[`Property [${r}] is deprecated.`,e].filter(Boolean).join(" ");be.warnOnce(t)}}function dL(r,e){let t=Mw(),i=e?.default;return cl((n,s,o)=>(o!==i&&t(s.toString(),r),o))}function uL(r,e){let t=Mw();return cl((i,n,s)=>(s!==i[r]&&(t(n.toString(),`Use [${r}] instead.`),i[r]=e?e(s):s),eC),(i,n)=>(t(n.toString(),`Use [${r}] instead.`),i[r]))}var wc=(r=>(r[r.NONE=0]="NONE",r[r.TRIVIAL=1]="TRIVIAL",r[r.MINOR=2]="MINOR",r[r.MAJOR=3]="MAJOR",r))(wc||{});function hL(){try{return new Function("return true"),!0}catch{return!1}}var pL=hL();function _e(r){let{changeCb:e,convertor:t}=r??{};return function(i,n){let s=`__${n}`;i[n]||(pL&&e==null&&t==null?fL(i,n,s,r):gL(i,n,s,r))}}function fL(r,e,t,i){let{redraw:n=1,type:s="normal",checkDirtyOnAssignment:o=!1}=i??{},a=new Function("value",`
        const oldValue = this.${t};
        if (value !== oldValue) {
            this.${t} = value;
            ${s==="normal"?`this.markDirty(this, ${n});`:""}
            ${s==="transform"?`this.markDirtyTransform(${n});`:""}
            ${s==="path"?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}
            ${s==="font"?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}
        }
        ${o?"if (value != null && value._dirty > 0) { this.markDirty(value, value._dirty); }":""}
`),l=new Function(`return this.${t};`);Object.defineProperty(r,e,{set:a,get:l,enumerable:!0,configurable:!0})}function gL(r,e,t,i){let{redraw:n=1,type:s="normal",changeCb:o,convertor:a,checkDirtyOnAssignment:l=!1}=i??{};Object.defineProperty(r,e,{set:function(u){let h=this[t];u=a?a(u):u,u!==h&&(this[t]=u,s==="normal"&&this.markDirty(this,n),s==="transform"&&this.markDirtyTransform(n),s==="path"&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,n)),s==="font"&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,n)),o&&o(this)),l&&u!=null&&u._dirty>0&&this.markDirty(u,u._dirty)},get:function(){return this[t]},enumerable:!0,configurable:!0})}var oR=class{constructor(){this._dirty=3}markDirty(r,e=1){this._dirty>e||(this._dirty=e)}markClean(r){this._dirty=0}isDirty(){return this._dirty>0}};function vm(r){return r!=null}function ps(r){return Array.isArray(r)}function aR(r){return typeof r=="boolean"}function Lw(r){return r instanceof Date}function Nw(r){return Lw(r)&&!isNaN(Number(r))}function vC(r){return typeof r=="function"}function Ou(r){return typeof r=="object"&&r!==null&&!ps(r)}function mL(r){return typeof r=="object"&&r!==null}function Cp(r){return typeof r=="object"&&r!==null&&r.constructor===Object}function up(r){return typeof r=="string"}function va(r){return typeof r=="number"}function Mm(r){return va(r)&&Number.isFinite(r)}function lR(r){return typeof window<"u"&&r instanceof HTMLElement}var Yr=class extends oR{constructor(r){super(),this.className=r}set(r){let e=new Set(Object.keys(r));for(let t of dp(this))if(e.has(t)){let i=r[t],n=this;Ls(n[t])?n[t]=n[t]instanceof CC?n[t].reset(i):n[t].set(i):n[t]=i,e.delete(t)}for(let t of e){let{className:i=this.constructor.name}=this;be.warn(`unable to set [${t}] in ${i} - property is unknown`)}return this}isValid(){return dp(this).every(r=>{let{optional:e}=cL(this,r);return e||typeof this[r]<"u"})}toJson(){return dp(this).reduce((r,e)=>(r[e]=this[e],r),{})}},CC=class cR extends Array{constructor(e,...t){super(t.length),Object.defineProperty(this,"itemFactory",{value:e,enumerable:!1,configurable:!1}),this.set(t)}set(e){if(ps(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=new this.itemFactory().set(e[t])}return this}reset(e){return new cR(this.itemFactory,...e)}};function Ls(r){return r instanceof Yr||r instanceof CC}var Gv="class-instance";function ya(r,e){if(ps(e)){if(!ps(r)||r.length!==e.length||e.some((t,i)=>ya(r[i],t)!=null))return e}else if(Ou(e)){if(!Ou(r)||!Cp(e))return e;let t={},i=new Set([...Object.keys(r),...Object.keys(e)]);for(let n of i)if(r[n]!==e[n])if(typeof r[n]!=typeof e[n])t[n]=e[n];else{let s=ya(r[n],e[n]);s!==null&&(t[n]=s)}return Object.keys(t).length?t:null}else if(r!==e)return e;return null}function Cm(r){return ps(r)?r.map(Cm):Cp(r)?Object.entries(r).reduce((e,[t,i])=>(e[t]=Cm(i),e),{}):r}var Ns=Symbol("<delete-property>"),rT=Symbol("<unspecified-property>");function Ai(r,e){var t;let i=(t=e?.avoidDeepClone)!=null?t:[];if(r.map(a=>hp(a)).some(a=>a==="array")){let a=r[r.length-1];return Array.isArray(a)?a.map(l=>{let c=hp(l);return c==="array"?Ai([[],l],e):c==="object"?Ai([{},l],e):l}):a}let s={},o=new Set(r.map(a=>a!=null?Object.keys(a):[]).reduce((a,l)=>a.concat(l),[]));for(let a of o){let l=r.map(h=>h!=null&&typeof h=="object"&&a in h?h[a]:rT).filter(h=>h!==rT);if(l.length===0)continue;let c=l[l.length-1];if(c===Ns)continue;let d=l.map(h=>hp(h)),u=d[0];if(d.some(h=>h!==u)){s[a]=c;continue}(u==="array"||u==="object")&&!i.includes(a)?s[a]=Ai(l,e):u==="array"?s[a]=[...c]:s[a]=c}return s}function um(r,e,t={}){var i,n,s;let{path:o,matcherPath:a=o?o.replace(/(\[[0-9+]+])/i,"[]"):void 0,skip:l=[],constructors:c={},constructedArrays:d=new WeakMap,allowedTypes:u={},idx:h}=t;if(r==null)throw new Error(`AG Charts - target is uninitialised: ${o??"<root>"}`);if(e==null)return r;if(Ls(r))return r.set(e);let p=r;h!=null&&"_declarationOrder"in p&&(p._declarationOrder=h);let f=hp(r);for(let g in e){let m=`${a?a+".":""}${g}`;if(l.indexOf(m)>=0)continue;let v=e[g],C=`${o?o+".":""}${g}`,S=p.constructor,b=p[g],T=(i=c[m])!=null?i:c[g];try{let A=hp(b),E=hp(v);if(f===Gv&&!(g in r||Object.hasOwn(p,g))){be.warn(`unable to set [${C}] in ${S?.name} - property is unknown`);continue}let N=(n=u[m])!=null?n:[A];if(!(A===Gv&&E==="object")){if(A!=null&&E!=null&&!N.includes(E)){be.warn(`unable to set [${C}] in ${S?.name} - can't apply type of [${E}], allowed types are: [${N}]`);continue}}if(E==="array")if(T=(s=T??d.get(b))!=null?s:c[`${m}[]`],Ls(p[g]))p[g].set(v);else if(T!=null){let M=v;p[g]=M.map((k,W)=>um(new T,k,me(H({},t),{path:C,matcherPath:m+"[]",idx:W})))}else p[g]=v;else if(E===Gv)p[g]=v;else if(E==="object")if(b!=null)um(b,v,me(H({},t),{path:C,matcherPath:m,idx:void 0}));else if(Ls(p[g]))p[g].set(v);else if(T!=null){let M=new T;Ls(M)?p[g]=M.set(v):p[g]=um(M,v,me(H({},t),{path:C,matcherPath:m,idx:void 0}))}else p[g]=v;else Ls(p[g])?p[g].set(v):p[g]=v}catch(A){be.warn(`unable to set [${C}] in [${S?.name}]; nested error is: ${A.message}`)}}return r}function Fu(r,e,t,...i){var n;if(ps(r))e(r,...i),r.forEach((s,o)=>{Fu(s,e,t,...nT(i,o))});else if(Cp(r)){e(r,...i);for(let s of Object.keys(r)){if((n=t?.skip)!=null&&n.includes(s))continue;let o=r[s];(ps(o)||Cp(o))&&Fu(o,e,t,...nT(i,s))}}}function nT(r,e){return r.map(t=>t?.[e])}function hp(r){return r==null?null:lR(r)||Lw(r)?"primitive":ps(r)?"array":Ou(r)?Cp(r)?"object":Gv:vC(r)?"function":"primitive"}var Ca=Math.PI*2;function Kr(r){return r%=Ca,r+=Ca,r%=Ca,r}function vL(r){return r%=Ca,r+=Ca,r!==Ca&&(r%=Ca),r}function tC(r){return r%=Ca,r<-Math.PI?r+=Ca:r>=Math.PI&&(r-=Ca),r}function hs(r){return r/180*Math.PI}function CL(r){return r/Math.PI*180}function yL(r,e){return r=Kr(r),e=Kr(e),e-r+(r>e?2*Math.PI:0)}var Ln=(r,e)=>{let t=Symbol(String(e));r[t]=void 0,Object.defineProperty(r,e,{get(){return this[t]},set(i){this[t]!==i&&(this[t]=i,this.invalid=!0)},enumerable:!0,configurable:!1})};function BS(r,e,t){return Math.max(e,Math.min(t,r))}var xa=class{constructor(){this.type="band",this.invalid=!0,this.interval=1,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&be.warnOnce("Expected update to not invalidate scale"))}set domain(r){this.invalid=!0;let e=[];this.index=new Map;let t=this.index;r.forEach(i=>{t.get(i)===void 0&&t.set(i,e.push(i)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();let{interval:r=1}=this,e=Math.abs(Math.round(r));return this._domain.filter((t,i)=>i%e===0)}convert(r){this.refresh();let e=this.index.get(r);if(e===void 0)return NaN;let t=this.ordinalRange[e];return t===void 0?NaN:t}invert(r){this.refresh();let e=this.ordinalRange.findIndex(t=>t===r);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(r){r=BS(r,0,1),this._paddingInner=r,this._paddingOuter=r}get padding(){return this._paddingInner}set paddingInner(r){this._paddingInner=BS(r,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(r){this._paddingOuter=BS(r,0,1)}get paddingOuter(){return this._paddingOuter}update(){let r=this._domain.length;if(r===0)return;let e=this.round,t=this._paddingInner,i=this._paddingOuter,[n,s]=this.range,o=s-n,a=o/Math.max(1,r+2*i-t),l=e?Math.floor(a):a,c=l*(r-t),d=n+(o-c)/2,u=e?Math.round(d):d,h=l*(1-t),p=e?Math.round(h):h,f=a*(1-t),g=[];for(let m=0;m<r;m++)g.push(u+l*m);this._bandwidth=p,this._rawBandwidth=f,this._step=l,this.ordinalRange=g}};x([Ln],xa.prototype,"interval",2);x([Ln],xa.prototype,"range",2);x([Ln],xa.prototype,"round",2);function us(r,e,t){return Math.min(t,Math.max(r,e))}function iC(r,e){return us(Math.min(...e),r,Math.max(...e))}function rC(r,e,t=1e-10){return Math.abs(r-e)<t}function Lm(r){return Math.sign(r)<0||Object.is(r,-0)}function yC(r){return isFinite(r)&&!isNaN(r)}function kw(r,e=2){let t=Math.pow(10,e);return Math.round(r*t)/t}function Gw(r,e=2){let t=Math.floor(Math.log(Math.abs(r))/Math.LN10);return t>=0||!isFinite(t)?r.toFixed(e):r.toFixed(Math.abs(t)-1+e)}function nC(r){return yC(r)?r:0}function Bw(r,e){return r>=0?Math.floor(r%e):Math.floor(r%e+e)}var Vw=(r,e=10)=>{let t=(Math.abs(r)%1).toFixed(e);for(let i=t.length-1;i>=2;i-=1)if(t[i]!=="0")return e-(t.length-1-i);return 0},VS=r=>{let e=r<0?-1:1,t=Math.abs(r);return t<=.04045?r/12.92:e*ni((t+.055)/1.055,2.4)},HS=r=>{let e=r<0?-1:1,t=Math.abs(r);return t>.0031308?e*(1.055*ni(t,1/2.4)-.055):12.92*r},Hw=class mt{constructor(e,t,i,n=1){this.r=us(0,e||0,1),this.g=us(0,t||0,1),this.b=us(0,i||0,1),this.a=us(0,n||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!mt.parseHex(e):e.indexOf("rgb")>=0?!!mt.stringToRgba(e):!!mt.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return mt.fromHexString(e);let t=mt.nameToHex[e.toLowerCase()];if(t)return mt.fromHexString(t);if(e.indexOf("rgb")>=0)return mt.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return mt.fromString(e)}catch{return be.warnOnce(`invalid color string: '${e}'.`),mt.fromArray([0,0,0])}}static parseHex(e){e=e.replace(/ /g,"").slice(1);let t;switch(e.length){case 6:case 8:t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(`${e[i]}${e[i+1]}`,16));break;case 3:case 4:t=e.split("").map(i=>parseInt(i,16)).map(i=>i+i*16);break}if(t?.length>=3&&t.every(i=>i>=0))return t.length===3&&t.push(255),t}static fromHexString(e){let t=mt.parseHex(e);if(t){let[i,n,s,o]=t;return new mt(i/255,n/255,s/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let[t,i]=[NaN,NaN];for(let a=0;a<e.length;a++){let l=e[a];if(!t&&l==="(")t=a;else if(l===")"){i=a;break}}let n=t&&i&&e.substring(t+1,i);if(!n)return;let s=n.split(","),o=[];for(let a=0;a<s.length;a++){let l=s[a],c=parseFloat(l);if(isNaN(c))return;l.indexOf("%")>=0?(c=Math.max(0,Math.min(100,c)),c/=100):a===3?c=Math.max(0,Math.min(1,c)):(c=Math.max(0,Math.min(255,c)),c/=255),o.push(c)}return o}static fromRgbaString(e){let t=mt.stringToRgba(e);if(t){if(t.length===3)return new mt(t[0],t[1],t[2]);if(t.length===4)return new mt(t[0],t[1],t[2],t[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(e.length===4)return new mt(e[0],e[1],e[2],e[3]);if(e.length===3)return new mt(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,t,i,n=1){let s=mt.HSBtoRGB(e,t,i);return new mt(s[0],s[1],s[2],n)}static fromHSL(e,t,i,n=1){let s=mt.HSLtoRGB(e,t,i);return new mt(s[0],s[1],s[2],n)}static fromOKLCH(e,t,i,n=1){let s=mt.OKLCHtoRGB(e,t,i);return new mt(s[0],s[1],s[2],n)}static padHex(e){return e.length===1?"0"+e:e}toHexString(){let e="#"+mt.padHex(Math.round(this.r*255).toString(16))+mt.padHex(Math.round(this.g*255).toString(16))+mt.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(e+=mt.padHex(Math.round(this.a*255).toString(16))),e}toRgbaString(e=3){let t=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],i=Math.pow(10,e);return this.a!==1?(t.push(Math.round(this.a*i)/i),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return mt.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,i){let n=VS(e),s=VS(t),o=VS(i),a=Math.cbrt(.4122214708*n+.5363325363*s+.0514459929*o),l=Math.cbrt(.2119034982*n+.6806995451*s+.1073969566*o),c=Math.cbrt(.0883024619*n+.2817188376*s+.6299787005*o),d=.2104542553*a+.793617785*l-.0040720468*c,u=1.9779984951*a-2.428592205*l+.4505937099*c,h=.0259040371*a+.7827717662*l-.808675766*c,p=Math.atan2(h,u)*180/Math.PI,f=d,g=Math.hypot(u,h),m=p>=0?p:p+360;return[f,g,m]}static OKLCHtoRGB(e,t,i){let n=e,s=t*Math.cos(i*Math.PI/180),o=t*Math.sin(i*Math.PI/180),a=ni(n+.3963377774*s+.2158037573*o,3),l=ni(n-.1055613458*s-.0638541728*o,3),c=ni(n-.0894841775*s-1.291485548*o,3),d=4.0767416621*a-3.3077115913*l+.2309699292*c,u=-1.2684380046*a+2.6097574011*l-.3413193965*c,h=-.0041960863*a-.7034186147*l+1.707614701*c,p=HS(d),f=HS(u),g=HS(h);return[p,f,g]}static RGBtoHSL(e,t,i){let n=Math.min(e,t,i),s=Math.max(e,t,i),o=(s+n)/2,a,l;if(s===n)a=NaN,l=0;else{let c=s-n;l=o>.5?c/(2-s-n):c/(s+n),s===e?a=(t-i)/c+(t<i?6:0):s===t?a=(i-e)/c+2:a=(e-t)/c+4,a*=360/6}return[a,l,o]}static HSLtoRGB(e,t,i){if(t===0)return[i,i,i];let n=i<.5?i*(1+t):i+t-i*t,s=2*i-n;function o(d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?s+(n-s)*6*d:d<1/2?n:d<2/3?s+(n-s)*(2/3-d)*6:s}let a=o(e/360+1/3),l=o(e/360),c=o(e/360-1/3);return[a,l,c]}static RGBtoHSB(e,t,i){let n=Math.min(e,t,i),s=Math.max(e,t,i),o=s!==0?(s-n)/s:0,a=NaN;if(n!==s){let l=s-n,c=(s-e)/l,d=(s-t)/l,u=(s-i)/l;e===s?a=u-d:t===s?a=2+c-u:a=4+d-c,a/=6,a<0&&(a=a+1)}return[a*360,o,s]}static HSBtoRGB(e,t,i){isNaN(e)&&(e=0),e=(e%360+360)%360/360;let n=0,s=0,o=0;if(t===0)n=s=o=i;else{let a=(e-Math.floor(e))*6,l=a-Math.floor(a),c=i*(1-t),d=i*(1-t*l),u=i*(1-t*(1-l));switch(a>>0){case 0:n=i,s=u,o=c;break;case 1:n=d,s=i,o=c;break;case 2:n=c,s=i,o=u;break;case 3:n=c,s=d,o=i;break;case 4:n=u,s=c,o=i;break;case 5:n=i,s=c,o=d;break}}return[n,s,o]}derive(e,t,i,n){let s=mt.RGBtoHSB(this.r,this.g,this.b),o=s[2];o==0&&i>1&&(o=.05);let a=((s[0]+e)%360+360)%360,l=Math.max(Math.min(s[1]*t,1),0);o=Math.max(Math.min(o*i,1),0);let c=Math.max(Math.min(this.a*n,1),0),d=mt.HSBtoRGB(a,l,o);return d.push(c),mt.fromArray(d)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,t){let i=mt.tryParseFromString(e),n=mt.tryParseFromString(t);return s=>{let o=(l,c)=>l*(1-s)+c*s;return new mt(o(i.r,n.r),o(i.g,n.g),o(i.b,n.b),o(i.a,n.a)).toString()}}};Hw.didDebug=!1;Hw.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});var ga=Hw;function _(r,e={}){let{optional:t=!1}=e;return cl((i,n,s)=>{var o;let a=me(H({},e),{target:i,property:n});if(t&&typeof s>"u"||r(s,a))return Ls(i[n])&&!Ls(s)?(i[n].set(s),i[n]):s;let l=String(n).replace(/^_*/,""),c=(o=i.constructor.className)!=null?o:i.constructor.name.replace(/Properties$/,"");return be.warn(`Property [${l}] of [${c}] cannot be set to [${hm(s)}]${r.message?`; expecting ${Gm(r,a)}`:""}, ignoring.`),eC},void 0,{optional:t})}var Bs=(...r)=>{let e=[];return Gt((t,i)=>(e.length=0,r.every(n=>{let s=n(t,i);return s||e.push(Gm(n,i)),s})),()=>e.filter(Boolean).join(" AND "))},pl=(...r)=>Gt((e,t)=>r.some(i=>i(e,t)),e=>r.map(RL(e)).filter(Boolean).join(" OR ")),vt=OL(Gt((r,e)=>Ls(r)||Ou(r)&&Ls(e.target[e.property]),"an object")),Ze=Gt(aR,"a boolean"),wa=Gt(vC,"a function"),Se=Gt(up,"a string"),ei=DL(Gt(Mm,"a number")),Ep=Gt(r=>va(r)&&isNaN(r),"NaN"),ge=ei.restrict({min:0}),ri=ei.restrict({min:0,max:1}),_p=ei.restrict({min:-360,max:360}),Tp=pl(ei,Ep),Nm=AL(Gt(ps,"an array")),fl=(r,e)=>Gt((t,i)=>ps(t)&&t.every(n=>r(n,i)),t=>{var i;let n=(i=Gm(Nm,t))!=null?i:"";return e?`${n} of ${e}`:n}),sC=r=>Mm(r)||Nw(r),km=r=>Gt((e,t)=>!sC(e)||!sC(t.target[r])||e<t.target[r],`expected to be less than ${r}`),ku=r=>Gt((e,t)=>!sC(e)||!sC(t.target[r])||e>t.target[r],`expected to be greater than ${r}`),Ww=Gt(Nw,"Date object"),Uw=pl(Ww,ge),dR="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",yt=Gt(r=>up(r)&&ga.validColorString(r),`color String. ${dR}`),gl=Gt(fl(yt),`color strings. ${dR}`),xL=fl(Ze,"boolean values"),xC=fl(ei,"numbers"),uR=fl(Se,"strings"),SL=Gt(fl(Ww),"Date objects"),hR=Gt(fl(vt),"objects"),pR=Di(["butt","round","square"],"a line cap"),wL=Di(["round","bevel","miter"],"a line join"),Dc=Gt(fl(ge),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),zw=Di(["top","right","bottom","left"],"a position"),Oc=Di(["normal","italic","oblique"],"a font style"),Fc=pl(Di(["normal","bold","bolder","lighter"],"a font weight"),ei.restrict({min:1,max:1e3})),SC=Di(["never","always","hyphenate","on-space"],"a text wrap strategy"),fR=Di(["left","center","right"],"a text align"),bL=Di(["top","middle","bottom"],"a vertical align"),EL=Di(["ellipsis","hide"],"an overflow strategy"),gR=Di(["horizontal","vertical"],"a direction"),mR=Di(["inside","outside"],"a placement"),jw=pl(Di(["exact","nearest"],"interaction range"),ei);function Di(r,e="a"){return Gt(t=>r.includes(t),`${e} keyword such as ${TL(r)}`)}var vR=pl(Bs(ei.restrict({min:1}),km("maxSpacing")),Ep),_L=pl(Bs(ei.restrict({min:1}),ku("minSpacing")),Ep);function Gt(r,e){return r.message=e,r}function TL(r){let e=r.map(i=>`'${i}'`);if(e.length===1)return e[0];let t=e.pop();return`${e.join(", ")} or ${t}`}function Gm(r,e){return vC(r.message)?r.message(e):r.message}function RL(r){return e=>Gm(e,r)}function AL(r){return Object.assign(r,{restrict({length:e,minLength:t}={}){return Gt(i=>ps(i)&&(va(e)?i.length===e:!0)&&(va(t)?i.length>=t:!0),va(t)&&t>0?"a non-empty array":va(e)?`an array of length ${e}`:"an array")}})}function DL(r){return Object.assign(r,{restrict({min:e,max:t}={}){let i=["a number"],n=va(e),s=va(t);return n&&s?i.push(`between ${e} and ${t} inclusive`):n?i.push(`greater than or equal to ${e}`):s&&i.push(`less than or equal to ${t}`),Gt(o=>Mm(o)&&(n?o>=e:!0)&&(s?o<=t:!0),i.join(" "))}})}function OL(r){return Object.assign(r,{restrict(e){let t=i=>Ls(i)&&i instanceof e;return Gt((i,n)=>t(i)||Ou(i)&&t(n.target[n.property]),i=>{var n;return(n=Gm(r,i))!=null?n:"an object"})}})}function hm(r){if(typeof r=="number"){if(isNaN(r))return"NaN";if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity"}return JSON.stringify(r)}var CR=(r=>(r.X="x",r.Y="y",r))(CR||{}),oC={};function yR(){for(let r in oC)delete oC[r]}function ba(r){var e;let t=r.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);let n=((e=oC[i])!=null?e:0)+1;return oC[i]=n,i+"-"+n}function xR(r,e,t=1/0){let i={nearest:void 0,distanceSquared:t};for(let n of e){let s=n.distanceSquared(r);if(s===0)return{nearest:n,distanceSquared:0};s<i.distanceSquared&&(i.nearest=n,i.distanceSquared=s)}return i}function FL(r,e,t=1/0){let i=e.transformPoint(r.x,r.y),n={nearest:void 0,distanceSquared:t};for(let s of e.children){let{nearest:o,distanceSquared:a}=s.nearestSquared(i,n.distanceSquared);if(a===0)return{nearest:o,distanceSquared:a};a<n.distanceSquared&&(n.nearest=o,n.distanceSquared=a)}return n}var JS=class ew{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}clone(){let{x:e,y:t,width:i,height:n}=this;return new ew(e,t,i,n)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(e){if(this.containsPoint(e.x,e.y))return 0;let t=e.x-Math.max(this.x,Math.min(e.x,this.x+this.width)),i=e.y-Math.max(this.y,Math.min(e.y,this.y+this.height));return t*t+i*i}static nearestBox(e,t){return xR(e,t)}shrink(e,t){let i=(n,s)=>{switch(n){case"top":this.y+=s;case"bottom":this.height-=s;break;case"left":this.x+=s;case"right":this.width-=s;break;case"vertical":this.y+=s,this.height-=s*2;break;case"horizontal":this.x+=s,this.width-=s*2;break;case void 0:this.x+=s,this.width-=s*2,this.y+=s,this.height-=s*2;break;default:}};return typeof e=="number"?i(t,e):typeof e=="object"&&Object.entries(e).forEach(([n,s])=>i(n,s)),this}grow(e,t){if(typeof e=="number")this.shrink(-e,t);else{let i=H({},e);for(let n in i)i[n]*=-1;this.shrink(i)}return this}static merge(e){let t=1/0,i=1/0,n=-1/0,s=-1/0;return e.forEach(o=>{o.x<t&&(t=o.x),o.y<i&&(i=o.y),o.x+o.width>n&&(n=o.x+o.width),o.y+o.height>s&&(s=o.y+o.height)}),new ew(t,i,n-t,s-i)}};JS.zero=new JS(0,0,0,0);var it=JS,tw=class Kg{get e(){return[...this.elements]}constructor(e=[1,0,0,1,0,0]){this.elements=e}setElements(e){let t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){let e=this.elements;return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0}AxB(e,t,i){let n=e[0]*t[0]+e[2]*t[1],s=e[1]*t[0]+e[3]*t[1],o=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],l=e[0]*t[4]+e[2]*t[5]+e[4],c=e[1]*t[4]+e[3]*t[5]+e[5];i=i??e,i[0]=n,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){let t=new Array(6);return this.AxB(this.elements,e.elements,t),new Kg(t)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){let e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=1/(t*s-i*n);return t*=l,i*=l,n*=l,s*=l,new Kg([s,-i,-n,t,n*a-s*o,i*o-t*a])}inverseTo(e){let t=this.elements,i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=1/(i*o-n*s);return i*=c,n*=c,s*=c,o*=c,e.setElements([o,-n,-s,i,s*l-o*a,n*a-i*l]),this}invertSelf(){let e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=1/(t*s-i*n);return t*=l,i*=l,n*=l,s*=l,e[0]=s,e[1]=-i,e[2]=-n,e[3]=t,e[4]=n*a-s*o,e[5]=i*o-t*a,this}transformPoint(e,t){let i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){let i=this.elements,n=i[0],s=i[1],o=i[2],a=i[3],l=e.width*.5,c=e.height*.5,d=e.x+l,u=e.y+c,h=Math.abs(l*n)+Math.abs(c*o),p=Math.abs(l*s)+Math.abs(c*a);return t||(t=new it(0,0,0,0)),t.x=d*n+u*o+i[4]-h,t.y=d*s+u*a+i[5]-p,t.width=h+h,t.height=p+p,t}toContext(e){if(this.identity)return;let t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static flyweight(e){return Kg.instance.setElements(e.elements)}static updateTransformMatrix(e,t,i,n,s,o,a){let[l,c]=[0,0],d=t,u=i,h,p;d===1&&u===1?(h=0,p=0):(h=a?.scalingCenterX==null?l:a?.scalingCenterX,p=a?.scalingCenterY==null?c:a?.scalingCenterY);let f=n,g=Math.cos(f),m=Math.sin(f),v,C;f===0?(v=0,C=0):(v=a?.rotationCenterX==null?l:a?.rotationCenterX,C=a?.rotationCenterY==null?c:a?.rotationCenterY);let S=s,b=o,T=h*(1-d)-v,A=p*(1-u)-C;return e.setElements([g*d,m*d,-m*u,g*u,g*T-m*A+v+S,m*T+g*A+C+b]),e}static fromContext(e){let t=e.getTransform();return new Kg([t.a,t.b,t.c,t.d,t.e,t.f])}};tw.instance=new tw;var mo=tw,SR=(r=>(r[r.All=0]="All",r[r.None=1]="None",r))(SR||{}),wR=r=>{r.parent&&(r.parent.dirtyZIndex=!0),r.zIndexChanged()},Nn=class bR extends oR{constructor({isVirtual:e,tag:t}={}){super(),this.serialNumber=bR._nextSerialNumber++,this.id=ba(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new mo,this.inverseMatrix=new mo,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=e??!1,this.tag=t??NaN}get datum(){var e,t;return(t=this._datum)!=null?t:(e=this._parent)==null?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum),this._datum=e}_setLayerManager(e){this._layerManager=e,this._debug=e?.debug;for(let t of this._children)t._setLayerManager(e);for(let t of this._virtualChildren)t._setLayerManager(e)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(this._virtualChildren.length===0)return this._children;let e=[...this._children];for(let t of this._virtualChildren)e.push(...t.children);return e}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(e,t){let i=t??Object.keys(e);for(let n of i)this[n]=e[n];return this}append(e){Array.isArray(e)||(e=[e]);for(let t of e){if(t.parent)throw new Error(`${t} already belongs to another parent: ${t.parent}.`);if(t.layerManager)throw new Error(`${t} already belongs to a scene: ${t.layerManager}.`);if(this.childSet[t.id])throw new Error(`Duplicate ${t.constructor.name} node: ${t}`);t.isVirtual?this._virtualChildren.push(t):this._children.push(t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(e){return this.append(e),e}removeChild(e){let t=()=>{throw new Error("The node to be removed is not a child of this node.")};if(e.parent!==this&&t(),e.isVirtual){let i=this._virtualChildren.indexOf(e);i<0&&t(),this._virtualChildren.splice(i,1)}else{let i=this._children.indexOf(e);i<0&&t(),this._children.splice(i,1)}return delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,3),e}calculateCumulativeMatrix(){this.computeTransformMatrix();let e=mo.flyweight(this.matrix),t=this.parent;for(;t;)t.computeTransformMatrix(),e.preMultiplySelf(t.matrix),t=t.parent;return e}transformPoint(e,t){return this.calculateCumulativeMatrix().invertSelf().transformPoint(e,t)}inverseTransformPoint(e,t){return this.calculateCumulativeMatrix().transformPoint(e,t)}transformBBox(e){return this.calculateCumulativeMatrix().invertSelf().transformBBox(e)}inverseTransformBBox(e){return this.calculateCumulativeMatrix().transformBBox(e)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(e,t){return!1}pickNode(e,t){var i;if(!this.visible||this.pointerEvents===1||!this.containsPoint(e,t))return;let n=this.children;if(n.length>1e3)for(let s=n.length-1;s>=0;s--){let o=n[s],l=((i=o.computeTransformedBBox())==null?void 0:i.containsPoint(e,t))?o.pickNode(e,t):void 0;if(l)return l}else if(n.length)for(let s=n.length-1;s>=0;s--){let o=n[s].pickNode(e,t);if(o)return o}else if(!this.isContainerNode)return this}findNodes(e){let t=e(this)?[this]:[];for(let i of this.children){let n=i.findNodes(e);n&&t.push(...n)}return t}computeBBox(){}computeTransformedBBox(){let e=this.computeBBox();if(!e)return;this.computeTransformMatrix();let t=mo.flyweight(this.matrix),i=this.parent;for(;i;)i.computeTransformMatrix(),t.preMultiplySelf(i.matrix),i=i.parent;return t.transformBBox(e,e),e}computeTransformMatrix(){if(!this.dirtyTransform)return;let{matrix:e,scalingX:t,scalingY:i,rotation:n,translationX:s,translationY:o,scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}=this;mo.updateTransformMatrix(e,t,i,n,s,o,{scalingCenterX:a,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}),e.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(e){let{stats:t}=e;this._dirty=0,t&&t.nodesRendered++}clearBBox(e){let t=this.computeBBox();if(t==null)return;let{x:i,y:n,width:s,height:o}=t,a=this.transformPoint(i,n),l=this.transformPoint(i+s,n+o);e.clearRect(a.x,a.y,l.x-a.x,l.y-a.y)}markDirty(e,t=1,i=t){this._dirty>t||this._dirty===t&&t===i||(this._dirty=t,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(e){let{force:t=!1,recursive:i=!0}=e??{};if(!(this._dirty===0&&!t)){if(this._dirty=0,i!==!1)for(let n of this._virtualChildren)n.markClean({force:t});if(i===!0)for(let n of this._children)n.markClean({force:t})}}visibilityChanged(){}get nodeCount(){let e=1,t=this._dirty>=0||this.dirtyTransform?1:0,i=this.visible?1:0,n=s=>{let{count:o,visibleCount:a,dirtyCount:l}=s.nodeCount;e+=o,i+=a,t+=l};for(let s of this._children)n(s);for(let s of this._virtualChildren)n(s);return{count:e,visibleCount:i,dirtyCount:t}}zIndexChanged(){}};Nn._nextSerialNumber=0;x([_e({type:"transform"})],Nn.prototype,"scalingX",2);x([_e({type:"transform"})],Nn.prototype,"scalingY",2);x([_e({type:"transform"})],Nn.prototype,"scalingCenterX",2);x([_e({type:"transform"})],Nn.prototype,"scalingCenterY",2);x([_e({type:"transform"})],Nn.prototype,"rotationCenterX",2);x([_e({type:"transform"})],Nn.prototype,"rotationCenterY",2);x([_e({type:"transform"})],Nn.prototype,"rotation",2);x([_e({type:"transform"})],Nn.prototype,"translationX",2);x([_e({type:"transform"})],Nn.prototype,"translationY",2);x([_e({redraw:3,changeCb:r=>r.visibilityChanged()})],Nn.prototype,"visible",2);x([_e({redraw:1,changeCb:wR})],Nn.prototype,"zIndex",2);x([_e({redraw:1,changeCb:wR})],Nn.prototype,"zIndexSubOrder",2);var Rp=Nn;function ER(){if(typeof navigator>"u")return!1;let r=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(r==null)return!1;let e=r[1].split("_"),t=Number(e[0]);return t>16?!1:t===16?Number(e[1])<6:!0}var Kw=class iw{constructor(e){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;let{document:t,window:i,width:n=600,height:s=300,domLayer:o=!1,zIndex:a=0,name:l=void 0,overrideDevicePixelRatio:c=void 0}=e;this.document=t,this.window=i,iw.document=t,this.element=t.createElement("canvas"),this.element.width=n,this.element.height=s,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;let{style:d}=this.element;d.userSelect="none",d.display="block",o&&(d.position="absolute",d.zIndex=String(a),d.top="0",d.left="0",d.pointerEvents="none",d.opacity="1",l&&(this.element.id=l)),this.context=this.setPixelRatio(c),this.resize(n,s)}set container(e){this._container!==e&&(this.remove(),e&&e.appendChild(this.element),this._container=e)}get container(){return this._container}set enabled(e){this.element.style.display=e?"block":"none",this._enabled=!!e}get enabled(){return this._enabled}remove(){let{parentNode:e}=this.element;e?.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){let e=this.document.createElement("img");return e.src=this.getDataURL(),e}getDataURL(e){return this.element.toDataURL(e)}download(e,t="image/png"){e=(e??"").trim()||"image";let i=this.getDataURL(t),n=this.document,s=n.createElement("a");s.href=i,s.download=e,s.style.display="none",n.body.appendChild(s),s.click(),n.body.removeChild(s)}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let t=e??this.window.devicePixelRatio;return ER()&&(t=1),this._pixelRatio=t,iw.overrideScale(this.realContext,t)}set pixelated(e){this.element.style.imageRendering=e?"pixelated":"auto"}get pixelated(){return this.element.style.imageRendering==="pixelated"}get width(){return this._width}get height(){return this._height}resize(e,t){if(!(e>0&&t>0))return;let{element:i,context:n,pixelRatio:s}=this;i.width=Math.round(e*s),i.height=Math.round(t*s),i.style.width=e+"px",i.style.height=t+"px",n.resetTransform(),this._width=e,this._height=t}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;let e=this.document.createElement("canvas");return this._textMeasuringContext=e.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;let e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("width","100"),t.setAttribute("height","100"),t.classList?t.classList.add("text-measuring-svg"):t.setAttribute("class","text-measuring-svg"),t.style.position="absolute",t.style.top="-1000px",t.style.visibility="hidden";let i=document.createElementNS(e,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),t.appendChild(i),document.body.appendChild(t),this._svgText=i,i}static get has(){if(this._has)return this._has;let e=typeof navigator>"u"||navigator.userAgent.indexOf("Chrome")>-1,t=typeof navigator<"u"&&navigator.userAgent.indexOf("Firefox")>-1,i=!e&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:this.textMeasuringContext.measureText("test").actualBoundingBoxDescent!==void 0&&!t&&!i,getTransform:this.textMeasuringContext.getTransform!==void 0}),this._has}static measureText(e,t,i,n){let s=this.textMeasuringContext;return s.font=t,s.textBaseline=i,s.textAlign=n,s.measureText(e)}static getTextSize(e,t){if(this.has.textMetrics){let i=this.textMeasuringContext;i.font=t;let n=i.measureText(e);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}else return this.measureSvgText(e,t)}static measureSvgText(e,t){let i=this.textSizeCache,n=i[t];if(n){let l=n[e];if(l)return l}else i[t]={};let s=this.svgText;s.style.font=t,s.textContent=e;let o=s.getBBox(),a={width:o.width,height:o.height};return i[t][e]=a,a}static overrideScale(e,t){let i=0,n={save(){this.$save(),i++},restore(){if(i>0)this.$restore(),i--;else throw new Error("AG Charts - Unable to restore() past depth 0")},setTransform(s,o,a,l,c,d){typeof s=="object"?this.$setTransform(s):this.$setTransform(s*t,o*t,a*t,l*t,c*t,d*t)},resetTransform(){this.$setTransform(t,0,0,t,0,0)},verifyDepthZero(){if(i!==0)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(let s in n)Object.hasOwn(n,s)&&(e["$"+s]||(e["$"+s]=e[s]),e[s]=n[s]);return e}};Kw.document=globalThis.document;Kw.textSizeCache={};var wi=Kw,PL=class{constructor(){this.stops=[]}},IL=class extends PL{constructor(){super(...arguments),this.angle=0}createGradient(r,e){let{stops:i,angle:n}=this,s=Kr(hs(n+90)),o=Math.cos(s),a=Math.sin(s),l=e.width,c=e.height,d=e.x+l*.5,u=e.y+c*.5;if(l>0&&c>0){let h=Math.sqrt(c*c+l*l)/2,p=Math.atan2(c,l),f;s<Math.PI/2?f=s:s<Math.PI?f=Math.PI-s:s<3*Math.PI/2?f=s-Math.PI:f=2*Math.PI-s;let g=h*Math.abs(Math.cos(f-p)),m=r.createLinearGradient(d+o*g,u+a*g,d-o*g,u-a*g);return i.forEach(v=>{m.addColorStop(v.offset,v.color)}),m}return"black"}},ML=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,gs=class ha extends Rp{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=ha.defaultStyles.fill,this.stroke=ha.defaultStyles.stroke,this.strokeWidth=ha.defaultStyles.strokeWidth,this.lineDash=ha.defaultStyles.lineDash,this.lineDashOffset=ha.defaultStyles.lineDashOffset,this.lineCap=ha.defaultStyles.lineCap,this.lineJoin=ha.defaultStyles.lineJoin,this.opacity=ha.defaultStyles.opacity,this.fillShadow=ha.defaultStyles.fillShadow}restoreOwnStyles(){let e=this.constructor.defaultStyles,t=Object.getOwnPropertyNames(e);for(let i=0,n=t.length;i<n;i++){let s=t[i];this[s]=e[s]}}updateGradient(){let{fill:e}=this,t;if(e?.startsWith("linear-gradient")&&(t=ML.exec(e))){let i=parseFloat(t[1]),n=[],s=t[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,a;for(;a=o.exec(s);)n.push(a[0]);this.gradient=new IL,this.gradient.angle=i,this.gradient.stops=n.map((l,c)=>({offset:c/(n.length-1),color:l}))}else this.gradient=void 0}align(e,t){var i,n,s;let o=(s=(n=(i=this.layerManager)==null?void 0:i.canvas)==null?void 0:n.pixelRatio)!=null?s:1,a=Math.round(e*o)/o;return t==null?a:t===0?0:t<1?Math.ceil(t*o)/o:Math.round((t+e)*o)/o-a}fillStroke(e){this.renderFill(e),this.renderStroke(e)}renderFill(e){if(this.fill){let{globalAlpha:t}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),e.fill(),e.globalAlpha=t}e.shadowColor="rgba(0, 0, 0, 0)"}applyFill(e){this.gradient?e.fillStyle=this.gradient.createGradient(e,this.computeBBox()):e.fillStyle=this.fill}applyFillAlpha(e){let{globalAlpha:t}=e;e.globalAlpha=t*this.opacity*this.fillOpacity}applyShadow(e){var t,i;let n=(i=(t=this.layerManager)==null?void 0:t.canvas.pixelRatio)!=null?i:1,s=this.fillShadow;s?.enabled&&(e.shadowColor=s.color,e.shadowOffsetX=s.xOffset*n,e.shadowOffsetY=s.yOffset*n,e.shadowBlur=s.blur*n)}renderStroke(e){if(this.stroke&&this.strokeWidth){let{globalAlpha:t}=e;e.strokeStyle=this.stroke,e.globalAlpha=t*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),e.stroke(),e.globalAlpha=t}}containsPoint(e,t){return this.isPointInPath(e,t)}};gs.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0});x([_e({redraw:2})],gs.prototype,"fillOpacity",2);x([_e({redraw:2})],gs.prototype,"strokeOpacity",2);x([_e({redraw:2,changeCb:r=>r.updateGradient()})],gs.prototype,"fill",2);x([_e({redraw:2})],gs.prototype,"stroke",2);x([_e({redraw:2})],gs.prototype,"strokeWidth",2);x([_e({redraw:2})],gs.prototype,"lineDash",2);x([_e({redraw:2})],gs.prototype,"lineDashOffset",2);x([_e({redraw:2})],gs.prototype,"lineCap",2);x([_e({redraw:2})],gs.prototype,"lineJoin",2);x([_e({redraw:2,convertor:r=>Math.min(1,Math.max(0,r))})],gs.prototype,"opacity",2);x([_e({redraw:2,checkDirtyOnAssignment:!0})],gs.prototype,"fillShadow",2);var Gs=gs,rw="\u2026";function wC(r){let{redraw:e=3,changeCb:t}=r??{};return _e({redraw:e,type:"font",changeCb:t})}var Xr=class ls extends Gs{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=ls.defaultStyles.textAlign,this.textBaseline=ls.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=AR(this.text)}get font(){return(this._font==null||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Rc(this)),this._font}computeBBox(){return wi.has.textMetrics?_R(this.lines,this.x,this.y,this):TR(this.lines,this.x,this.y,this)}getLineHeight(e){var t,i;if(this.lineHeight)return this.lineHeight;if(wi.has.textMetrics){let n=wi.measureText(e,this.font,this.textBaseline,this.textAlign);return((t=n.fontBoundingBoxAscent)!=null?t:n.emHeightAscent)+((i=n.fontBoundingBoxDescent)!=null?i:n.emHeightDescent)}return wi.getTextSize(e,this.font).height}isPointInPath(e,t){let i=this.transformPoint(e,t),n=this.computeBBox();return n?n.containsPoint(i.x,i.y):!1}render(e){let{ctx:t,forceRender:i,stats:n}=e;if(this.dirty===0&&!i){n&&(n.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);let{fill:s,stroke:o,strokeWidth:a}=this;t.font=this.font,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;let l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:c}=t;if(s){t.fillStyle=s,t.globalAlpha=c*this.opacity*this.fillOpacity;let{fillShadow:d}=this;d?.enabled&&(t.shadowColor=d.color,t.shadowOffsetX=d.xOffset*l,t.shadowOffsetY=d.yOffset*l,t.shadowBlur=d.blur*l),this.renderLines((u,h,p)=>t.fillText(u,h,p))}if(o&&a){t.strokeStyle=o,t.lineWidth=a,t.globalAlpha=c*this.opacity*this.strokeOpacity;let{lineDash:d,lineDashOffset:u,lineCap:h,lineJoin:p}=this;d&&t.setLineDash(d),u&&(t.lineDashOffset=u),h&&(t.lineCap=h),p&&(t.lineJoin=p),this.renderLines((f,g,m)=>t.strokeText(f,g,m))}super.render(e)}renderLines(e){let{lines:t,x:i,y:n}=this,s=this.lines.map(l=>this.getLineHeight(l)),a=-(s.reduce((l,c)=>l+c,0)-s[0])*RR(this.textBaseline);for(let l=0;l<t.length;l++)e(t[l],i,n+a),a+=s[l]}static wrapLines(e,t,i,n,s,o){let a=o!=="hide",l=Rc(n),c=LL(l),d=e.split(/\r?\n/g);if(d.length===0)return{lines:void 0,truncated:!1};if(s==="never"){let{text:f,truncated:g}=ls.truncateLine(d[0],t,c,a?"auto":"never");return{lines:f!=null?[f]:void 0,truncated:g}}let u=[],h=0,p=!1;for(let f of d){let g=ls.wrapLine(f,t,i,c,n,s,h,a);if(g==null)return{lines:void 0,truncated:!1};if(u.push(...g.result),h=g.cumulativeHeight,g.truncated){p=!0;break}}return{lines:u,truncated:p}}static wrap(e,t,i,n,s,o="ellipsis"){let{lines:a,truncated:l}=ls.wrapLines(e,t,i,n,s,o);return{text:a!=null?a.join(`
`).trim():"",truncated:l}}static wrapLine(e,t,i,n,s,o,a,l){if(e=e.trim(),!e)return{result:[],truncated:!1,cumulativeHeight:a};let c=n.size(e);if(c.width<=t)return{result:[e],truncated:!1,cumulativeHeight:a+c.height};if(c.height>i||n.width("W")>t)return l?{result:[],truncated:!0,cumulativeHeight:a}:void 0;let d=e.split(/\s+/g),u=ls.wrapLineSequentially(d,t,i,n,s,o,a,l);if(u==null)return;a=u.cumulativeHeight;let{lines:h}=u;if(!(u.wordsBrokenOrTruncated||u.linesTruncated)){let f=u.lines.length,g=ls.wrapLineBalanced(d,t,n,f);g.length===h.length&&(h=g)}return{result:h.map(f=>f.join(" ")),truncated:u.linesTruncated,cumulativeHeight:a}}static breakWord(e,t,i,n,s){let o=p=>ls.punctuationMarks.includes(e[p]),a=n?s.width("-"):0,l=[],c=0,d=0;for(let p=0;p<e.length;p++){let f=e[p],g=s.width(f),m=d===0?t:i;c+g+a>m&&(l.push(p),c=0,d++),c+=g}let u=[],h=0;for(let p of l){let f=e.substring(h,p);n&&f.length>0&&!o(p-1)&&!o(p)&&(f+="-"),u.push(f),h=p}return u.push(e.substring(h)),u}static truncateLine(e,t,i,n){e=e.trimEnd();let s=i.width(e);if(s>t&&n==="never")return{text:void 0,truncated:!1};if(s<=t&&n!=="force")return{text:e,truncated:!1};let o=i.width(rw),a=e,l=s;for(;a.length>0&&l+o>t;)a=a.slice(0,-1).trimEnd(),l=i.width(a);return l+o<=t?{text:`${a}${rw}`,truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(e,t,i,n,s,o,a,l){let{fontSize:c=0,lineHeight:d=c*ls.defaultLineHeightRatio}=s,u=o==="always"||o==="hyphenate",h=o==="hyphenate",p=n.width(" "),f=!1,g=!1,m=[],v=[],C=0,S=()=>({lines:m,linesTruncated:g,wordsBrokenOrTruncated:f,cumulativeHeight:a}),b=()=>{if(!l)return;let A=v.join(" "),{text:E}=ls.truncateLine(A,t,n,"force");if(E!=null)return v.splice(0,v.length,E),g=!0,S()},T=()=>{let A=a+d;return A>=i?!1:(v=[],C=0,a=A,m.push(v),!0)};if(!T())return b();for(let A=0;A<e.length;A++){let E=e[A],N=n.width(E),M=v.length===0?0:p,k=C+M+N;if(k<=t){v.push(E),C=k;continue}if(N<=t){if(!T())return b();v.push(E),C=N;continue}if(f=!0,u){let W=t-C-M,ee=ls.breakWord(E,W,t,h,n);for(let te=0;te<ee.length;te++){let le=ee[te];if(le&&v.push(le),te===ee.length-1)C=n.width(le);else if(!T())return b()}}else if(l){if(!T())return b();let{text:W}=ls.truncateLine(E,t,n,"force");if(W==null)return;v.push(W),A<e.length-1&&(g=!0);break}else return}return S()}static wrapLineBalanced(e,t,i,n){let s=e.reduce((p,f)=>p+i.width(f),0),o=i.width(" "),a=o*(e.length-n-2),l=(s+a)/n,c=[],d=[],u=i.width(e[0]),h=!0;for(let p of e){let f=i.width(p);if(h){d=[],d.push(p),u=f,h=!1,c.push(d);continue}let g=u+o+f;g<=l?(d.push(p),u=g):g<=t?(d.push(p),h=!0):(d=[p],u=f,c.push(d))}return c}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}};Xr.className="Text";Xr.defaultLineHeightRatio=1.15;Xr.defaultStyles=Object.assign({},Gs.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"});Xr.ellipsis=rw;Xr.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"];x([_e({redraw:3})],Xr.prototype,"x",2);x([_e({redraw:3})],Xr.prototype,"y",2);x([_e({redraw:3,changeCb:r=>r._setLines()})],Xr.prototype,"text",2);x([wC()],Xr.prototype,"fontStyle",2);x([wC()],Xr.prototype,"fontWeight",2);x([wC()],Xr.prototype,"fontSize",2);x([wC()],Xr.prototype,"fontFamily",2);x([_e({redraw:3})],Xr.prototype,"textAlign",2);x([_e({redraw:3})],Xr.prototype,"textBaseline",2);x([_e({redraw:3})],Xr.prototype,"lineHeight",2);var Xt=Xr;function LL(r){let e=new Map,t=n=>wi.getTextSize(n,r);return{size:t,width:n=>{if(e.has(n))return e.get(n);let{width:s}=t(n);return e.set(n,s),s}}}function Rc(r){let{fontFamily:e,fontSize:t,fontStyle:i,fontWeight:n}=r;return[i??"",n??"",t+"px",e].join(" ").trim()}function NL(r,e,t,i){return wi.has.textMetrics?_R(r,e,t,i):TR(r,e,t,i)}function _R(r,e,t,i){var n,s;let o=0,a=0,l=0,c=0,d=0,u=Rc(i),{lineHeight:h,textBaseline:p=Xt.defaultStyles.textBaseline,textAlign:f=Xt.defaultStyles.textAlign}=i;for(let g=0;g<r.length;g++){let m=wi.measureText(r[g],u,p,f);o=Math.max(o,m.actualBoundingBoxLeft),l=Math.max(l,m.width),g==0?(a+=m.actualBoundingBoxAscent,c+=m.actualBoundingBoxAscent):d+=(n=m.fontBoundingBoxAscent)!=null?n:m.emHeightAscent,g==r.length-1?c+=m.actualBoundingBoxDescent:d+=(s=m.fontBoundingBoxDescent)!=null?s:m.emHeightDescent}return h!==void 0&&(d=(r.length-1)*h),c+=d,a+=d*RR(p),new it(e-o,t-a,l,c)}function TR(r,e,t,i){let n=0,s=0,o=0,a=Rc(i),{lineHeight:l,textBaseline:c=Xt.defaultStyles.textBaseline,textAlign:d=Xt.defaultStyles.textAlign}=i;if(r.length>0){let u=wi.getTextSize(r[0],a);n=u.width,s=u.height}for(let u=1;u<r.length;u++){let h=wi.getTextSize(r[u],a);n=Math.max(n,h.width),o+=l??h.height}switch(d){case"end":case"right":e-=n;break;case"center":e-=n/2}switch(c){case"alphabetic":t-=s*.7+o*.5;break;case"middle":t-=s*.45+o*.5;break;case"ideographic":t-=s+o;break;case"hanging":t-=s*.2+o*.5;break;case"bottom":t-=s+o;break}return new it(e,t,n,s+o)}function RR(r){switch(r){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}function AR(r){return typeof r=="string"?r.split(/\r?\n/g):[]}function kL(...r){let e=r[r.length-1];if(r.length===1)return cl((i,n,s)=>(i[e]=s,s),(i,n)=>i[e]);let t=i=>{let n=i;for(let s=0;s<r.length-1;s+=1)n=n[r[s]];return n};return cl((i,n,s)=>(t(i)[e]=s,s),(i,n)=>t(i)[e])}function GL(r){return cl((e,t,i)=>(e[r]=i,i))}function qt(r,e){return cl((t,i,n)=>(t[r][e??i]=n,n))}function qr(r){let{newValue:e,oldValue:t,changeValue:i}=r;return cl((n,s,o,a)=>(o!==a&&(a!==void 0&&t?.call(n,a),o!==void 0&&e?.call(n,o),i?.call(n,o,a)),o))}function $w(r,e){let t=r.createElement("style");t.innerHTML=e,r.head.insertBefore(t,r.head.querySelector("style"))}var di="ag-chart-tooltip",sT="ag-chart-dark-tooltip",BL=`
.${di} {
    transition: transform 0.1s ease;
    max-width: 100%;
    position: fixed;
    left: 0px;
    top: 0px;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: rgb(70, 70, 70);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
}

.${di}-wrap-always {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: none;
}

.${di}-wrap-hyphenate {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
}

.${di}-wrap-on-space {
    overflow-wrap: normal;
    word-break: normal;
}

.${di}-wrap-never {
    white-space: pre;
    text-overflow: ellipsis;
}

.${di}-no-interaction {
    pointer-events: none;
    user-select: none;
}

.${di}-no-animation {
    transition: none !important;
}

.${di}-hidden {
    visibility: hidden;
}

.${di}-title {
    overflow: hidden;
    position: relative;
    padding: 8px 14px;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    color: white;
    background-color: #888888;
    z-index: 1;
    text-overflow: inherit;
}

.${di}-title:only-child {
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
}

.${di}-content {
    overflow: hidden;
    padding: 6px 14px;
    line-height: 1.7em;
    background: white;
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    border: 1px solid rgba(0, 0, 0, 0.15);
    overflow: hidden;
    text-overflow: inherit;
}

.${di}-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid #d9d9d9;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${di}-arrow::after {
    content: "";

    position: absolute;
    top: calc(100% - 1px);
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid white;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${di}.${sT} {
    color: white;
    background: #15181c;
}

.${di}.${sT} .${di}-content {
    border-color: rgba(255, 255, 255, 0.15);
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`;function ym(r,e){var t,i,n;if(typeof r=="string")return r;let{content:s=(t=e?.content)!=null?t:"",title:o=e?.title,color:a=(i=e?.color)!=null?i:"white",backgroundColor:l=(n=e?.backgroundColor)!=null?n:"#888"}=r,c=o?`<div class="${di}-title"
        style="color: ${a}; background-color: ${l}">${o}</div>`:"",d=s?`<div class="${di}-content">${s}</div>`:"";return`${c}${d}`}var Bm=class extends Yr{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};x([_(Di(["pointer","node"],"a position type"))],Bm.prototype,"type",2);x([_(ei)],Bm.prototype,"xOffset",2);x([_(ei)],Bm.prototype,"yOffset",2);var Pc=class nw{constructor(e,t,i,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.lastVisibilityChange=Date.now(),this.position=new Bm,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=i;let s=t.createElement("div");if(this.element=this.tooltipRoot.appendChild(s),this.element.classList.add(di),this.canvasElement=e,typeof IntersectionObserver<"u"){let o=new IntersectionObserver(a=>{for(let l of a)l.target===this.canvasElement&&l.intersectionRatio===0&&this.toggle(!1)},{root:this.tooltipRoot});o.observe(this.canvasElement),this.observer=o}nw.tooltipDocuments.indexOf(t)<0&&($w(t,BL),nw.tooltipDocuments.push(t))}destroy(){let{parentNode:e}=this.element;e&&e.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){let{element:e}=this;return!e.classList.contains(di+"-hidden")}updateClass(e,t,i=!0){let{element:n,class:s,lastClass:o,enableInteraction:a,lastVisibilityChange:l}=this,c=this.isVisible(),d=!!e,u=1/0;if(c!==d){let m=Date.now();u=m-l,this.lastVisibilityChange=m}let h=(m,v)=>{let C=`${di}-${m}`;v?n.classList.add(C):n.classList.remove(C)},p=100,f=5,g=!c&&d&&u>p;u>f&&h("no-animation",g),h("no-interaction",!a),h("hidden",!e),h("arrow",!!t),this.updateWrapping(),i?(s!==o&&(o&&n.classList.remove(o),s&&n.classList.add(s)),this.lastClass=s):(o&&n.classList.remove(o),this.lastClass=void 0)}updateWrapping(){let{element:e,wrapping:t}=this,i={always:!1,hyphenate:!1,"on-space":!1,never:!1};i[t]=!0,Object.entries(i).forEach(([n,s])=>{e.classList.toggle(`${di}-wrap-${n}`,s)})}show(e,t,i=!1){var n,s,o,a,l,c,d;let{element:u,canvasElement:h}=this;if(t!==void 0)u.innerHTML=t;else if(!u.innerHTML){this.toggle(!1);return}let p=(W,ee,te)=>Math.max(Math.min(ee,te),W),f=(s=(n=e.position)==null?void 0:n.xOffset)!=null?s:0,g=(a=(o=e.position)==null?void 0:o.yOffset)!=null?a:0,m=h.getBoundingClientRect(),v=m.left+e.offsetX-u.clientWidth/2+f,C=m.top+e.offsetY-u.clientHeight-8+g,S=this.getWindowBoundingBox(),b=S.x+S.width-u.clientWidth-1,T=S.y+S.height-u.clientHeight,A=p(S.x,v,b),E=p(S.y,C,T),M=!(A!==v||E!==C)&&!f&&!g,k=(c=(l=e.showArrow)!=null?l:this.showArrow)!=null?c:M;if(this.updateShowArrow(k),u.style.transform=`translate(${Math.round(A)}px, ${Math.round(E)}px)`,this.enableInteraction=(d=e.enableInteraction)!=null?d:!1,this.delay>0&&!i){this.toggle(!1),this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0,e.addCustomClass)},this.delay);return}this.toggle(!0,e.addCustomClass)}getWindowBoundingBox(){return new it(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(e,t){e||this.window.clearTimeout(this.showTimeout),this.updateClass(e,this._showArrow,t)}pointerLeftOntoTooltip(e){var t;if(!this.enableInteraction)return!1;let i=(t=e.sourceEvent.relatedTarget)==null?void 0:t.classList,s=!!["","-title","-content"].filter(o=>i?.contains(`${di}${o}`));return i!==void 0&&s}updateShowArrow(e){this._showArrow=e}};Pc.tooltipDocuments=[];x([_(Ze)],Pc.prototype,"enabled",2);x([_(Ze,{optional:!0})],Pc.prototype,"showArrow",2);x([_(Se,{optional:!0})],Pc.prototype,"class",2);x([_(ge)],Pc.prototype,"delay",2);x([_(jw)],Pc.prototype,"range",2);x([_(SC)],Pc.prototype,"wrapping",2);var DR=Pc,ui=class extends Yr{constructor(){super(...arguments),this.id=ba(this),this.node=new Xt().setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}registerInteraction(r){return r.interactionManager.addListener("hover",e=>this.handleMouseMove(r,e))}computeTextWrap(r,e){var t,i;let{text:n,wrapping:s}=this,o=Math.min((t=this.maxWidth)!=null?t:1/0,r),a=(i=this.maxHeight)!=null?i:e;if(!isFinite(o)&&!isFinite(a)){this.node.text=n;return}let{text:l,truncated:c}=Xt.wrap(n??"",o,a,this,s);this.node.text=l,this.truncated=c}handleMouseMove(r,e){if(!this.enabled)return;let t=this.node.computeBBox(),{pageX:i,pageY:n,offsetX:s,offsetY:o}=e;if(!(this.node.visible&&t.containsPoint(s,o))){r.tooltipManager.removeTooltip(this.id);return}if(e.consume(),!this.truncated){r.tooltipManager.removeTooltip(this.id);return}r.tooltipManager.updateTooltip(this.id,{pageX:i,pageY:n,offsetX:s,offsetY:o,event:e,showArrow:!1,addCustomClass:!1},ym({content:this.text}))}};ui.SMALL_PADDING=10;ui.LARGE_PADDING=20;x([_(Ze)],ui.prototype,"enabled",2);x([_(Se,{optional:!0}),qt("node")],ui.prototype,"text",2);x([_(fR,{optional:!0}),qt("node")],ui.prototype,"textAlign",2);x([_(Oc,{optional:!0}),qt("node")],ui.prototype,"fontStyle",2);x([_(Fc,{optional:!0}),qt("node")],ui.prototype,"fontWeight",2);x([_(ge),qt("node")],ui.prototype,"fontSize",2);x([_(Se),qt("node")],ui.prototype,"fontFamily",2);x([_(yt,{optional:!0}),qt("node","fill")],ui.prototype,"color",2);x([_(ge,{optional:!0})],ui.prototype,"spacing",2);x([_(ge,{optional:!0})],ui.prototype,"lineHeight",2);x([_(ge,{optional:!0})],ui.prototype,"maxWidth",2);x([_(ge,{optional:!0})],ui.prototype,"maxHeight",2);x([_(SC)],ui.prototype,"wrapping",2);var xo=class{constructor(){this.enabled=!1,this.spacing=ui.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};x([_(Ze)],xo.prototype,"enabled",2);x([_(Se,{optional:!0})],xo.prototype,"text",2);x([_(ge,{optional:!0})],xo.prototype,"spacing",2);x([_(Oc,{optional:!0})],xo.prototype,"fontStyle",2);x([_(Fc,{optional:!0})],xo.prototype,"fontWeight",2);x([_(ge)],xo.prototype,"fontSize",2);x([_(Se)],xo.prototype,"fontFamily",2);x([_(yt,{optional:!0})],xo.prototype,"color",2);x([_(SC)],xo.prototype,"wrapping",2);x([_(wa,{optional:!0})],xo.prototype,"formatter",2);var xm={constructors:{},constructedArrays:new WeakMap};function OR(r,e){var t;(t=xm.constructedArrays)==null||t.set(r,e)}var oT={constructors:{"axes[].title":xo},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function VL(r){class e extends ui{constructor(){super(),this.registerInteraction(r)}}return{constructors:H(me(H({},oT.constructors),{title:e,subtitle:e,footnote:e}),xm.constructors),constructedArrays:xm.constructedArrays,allowedTypes:H({},oT.allowedTypes)}}var Ea=class sw{constructor(e,t){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=sw.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=t}static is(e){return e instanceof sw}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){let t=this.getDomain(),i=Math.max(...this.range),n=Math.abs(t[1]-t[0])/e+1,s=Math.floor(i),o=Math.min(n,s);return i/Math.max(1,o)}fromDomain(e){return typeof e=="number"?e:e instanceof Date?e.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,t){var i;let n=(i=t?.clampMode)!=null?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();let s=this.getDomain().map(u=>this.transform(u)),[o,a]=s,{range:l}=this,[c,d]=l;if(e=this.transform(e),n==="clamped"){let u=Math.min(this.fromDomain(o),this.fromDomain(a)),h=Math.max(this.fromDomain(o),this.fromDomain(a));if(this.fromDomain(e)<u)return c;if(this.fromDomain(e)>h)return d}return o===a?(c+d)/2:e===o?c:e===a?d:c+(this.fromDomain(e)-this.fromDomain(o))/(this.fromDomain(a)-this.fromDomain(o))*(d-c)}invert(e){this.refresh();let t=this.getDomain().map(h=>this.transform(h)),[i,n]=t,{range:s}=this,[o,a]=s,l=o>a,c=l?a:o,d=l?o:a,u;return e<c?l?n:i:e>d?l?i:n:(o===a?u=this.toDomain((this.fromDomain(i)+this.fromDomain(n))/2):u=this.toDomain(this.fromDomain(i)+(e-o)/(a-o)*(this.fromDomain(n)-this.fromDomain(i))),this.transformInvert(u))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&be.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){let e=this.range.slice().sort((t,i)=>t-i);return e[1]-e[0]}isDenseInterval({start:e,stop:t,interval:i,count:n}){let s=t-e,o=this.getPixelRange();return n??(n=s/(typeof i=="number"?i:1)),n>=o?(be.warn("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}};Ea.defaultTickCount=5;Ea.defaultMaxTickCount=6;x([Ln],Ea.prototype,"domain",2);x([Ln],Ea.prototype,"range",2);x([Ln],Ea.prototype,"nice",2);x([Ln],Ea.prototype,"interval",2);x([Ln],Ea.prototype,"tickCount",2);x([Ln],Ea.prototype,"minTickCount",2);x([Ln],Ea.prototype,"maxTickCount",2);var kt=Ea;function FR(r,e){let t=0;return typeof r=="number"&&typeof e=="number"?t=r-e:typeof r=="string"&&typeof e=="string"?t=r.localeCompare(e):r==null&&e==null||(r==null?t=-1:e==null?t=1:t=String(r).localeCompare(String(e))),t}function PR(r,e,t){let i=n=>typeof n=="function"?n():n;for(let n in r){let s=t(i(r[n]),i(e[n]));if(s!==0)return s}return 0}var Yw=class ow extends Rp{constructor(e){var t;super({isVirtual:e?.isVirtual}),this.opts=e,this.opacity=1,this.lastBBox=void 0;let{zIndex:i,zIndexSubOrder:n}=e??{};this.isContainerNode=!0,i!==void 0&&(this.zIndex=i),n!==void 0&&(this.zIndexSubOrder=n),this.name=(t=this.opts)==null?void 0:t.name}zIndexChanged(){var e;this.layer&&((e=this._layerManager)==null||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return this.layer!=null}_setLayerManager(e){var t,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(e),e&&((t=this.opts)!=null&&t.layer)){let{zIndex:n,zIndexSubOrder:s,name:o}=(i=this.opts)!=null?i:{},a=()=>this.getComputedOpacity(),l=()=>this.getVisibility();this.layer=e.addLayer({zIndex:n,zIndexSubOrder:s,name:o,getComputedOpacity:a,getVisibility:l})}}getComputedOpacity(){let e=1,t=this;do t instanceof ow&&(e*=t.opacity);while(t=t.parent);return e}getVisibility(){let e=this,t=this.visible;for(;e=e.parent;)e.visible||(t=e.visible);return t}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(e,t=1){if(this.isVirtual){super.markDirty(e,t);return}let i=t;(t<2||this.layer!=null)&&(i=1),super.markDirty(e,t,i)}containsPoint(e,t){return!0}computeBBox(){return this.computeTransformMatrix(),ow.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(e){var t,i;let{opts:{name:n=void 0}={},_debug:s=()=>{}}=this,{dirty:o,dirtyZIndex:a,layer:l,children:c,clipRect:d,dirtyTransform:u}=this,{ctx:h,forceRender:p,clipBBox:f}=e,{resized:g,stats:m}=e,v=h.getTransform(),C=o>=2||a||g,S=C,b=!1;for(let k of c)if(S||(S=k.layerManager==null&&k.dirty>=1),b||(b=k.layerManager!=null&&k.dirty>=1),S)break;if(n&&s({name:n,group:this,isDirty:C,isChildDirty:S,dirtyTransform:u,renderCtx:e,forceRender:p}),u)p="dirtyTransform";else if(l){let k=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(k))&&(p="dirtyTransform",this.lastBBox=k)}if(!C&&!S&&!b&&!p){n&&m&&s({name:n,result:"skipping",renderCtx:e,counts:this.nodeCount,group:this}),l&&m&&(m.layersSkipped++,m.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}let T=this.visible;if(l){if(h=l.context,h.save(),h.resetTransform(),p!=="dirtyTransform"&&(p=S||a),p&&l.clear(),f){let{width:k,height:W,x:ee,y:te}=f;s(()=>({name:n,clipBBox:f,ctxTransform:h.getTransform(),renderCtx:e,group:this})),this.clipCtx(h,ee,te,k,W)}h.setTransform(v)}else h.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(h),d){let{x:k,y:W,width:ee,height:te}=d;h.save(),s(()=>({name:n,clipRect:d,ctxTransform:h.getTransform(),renderCtx:e,group:this})),this.clipCtx(h,k,W,ee,te),f=this.matrix.transformBBox(d)}let A=this.hasVirtualChildren();a?(this.sortChildren(c),p!=="dirtyTransform"&&(p=!0)):A&&this.sortChildren(c);let N=p!==e.forceRender||f!==e.clipBBox||h!==e.ctx?me(H({},e),{ctx:h,forceRender:p,clipBBox:f}):e,M=0;for(let k of c){if(!k.visible||!T){k.markClean(),m&&(M+=k.nodeCount.count);continue}if(!p&&k.dirty===0){m&&(M+=k.nodeCount.count);continue}h.save(),k.render(N),h.restore()}if(m&&(m.nodesSkipped+=M),super.render(e),d&&h.restore(),A)for(let k of this.virtualChildren)k.markClean({recursive:"virtual"});l&&(m&&m.layersRendered++,h.restore(),p&&l.snapshot(),(i=(t=l.context).verifyDepthZero)==null||i.call(t)),n&&m&&s({name:n,result:"rendered",skipped:M,renderCtx:e,counts:this.nodeCount,group:this})}sortChildren(e){this.dirtyZIndex=!1,e.sort((t,i)=>{var n,s;return PR([t.zIndex,...(n=t.zIndexSubOrder)!=null?n:[void 0,void 0],t.serialNumber],[i.zIndex,...(s=i.zIndexSubOrder)!=null?s:[void 0,void 0],i.serialNumber],FR)})}clipCtx(e,t,i,n,s){e.beginPath(),e.moveTo(t,i),e.lineTo(t+n,i),e.lineTo(t+n,i+s),e.lineTo(t,i+s),e.closePath(),e.clip()}static computeBBox(e){let t=1/0,i=-1/0,n=1/0,s=-1/0;return e.forEach(o=>{if(!o.visible)return;let a=o.computeTransformedBBox();if(!a)return;let l=a.x,c=a.y;l<t&&(t=l),c<n&&(n=c),l+a.width>i&&(i=l+a.width),c+a.height>s&&(s=c+a.height)}),new it(t,n,i-t,s-n)}setClipRectInGroupCoordinateSpace(e){this.clipRect=e?this.transformBBox(e):void 0}};Yw.className="Group";x([_e({redraw:3,convertor:r=>Math.min(1,Math.max(0,r))})],Yw.prototype,"opacity",2);var We=Yw,_a=class extends Gs{constructor(r={}){super(r),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new it(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(r,e){return!1}render(r){var e;let{ctx:t,forceRender:i,stats:n}=r;if(this.dirty===0&&!i){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);let{x1:s,y1:o,x2:a,y2:l}=this;s=this.align(s),o=this.align(o),a=this.align(a),l=this.align(l);let{fill:c,opacity:d,isRange:u}=this;if(!!(u&&c)){let{fillOpacity:C}=this;t.fillStyle=c,t.globalAlpha=d*C,t.beginPath(),t.moveTo(s,o),t.lineTo(a,o),t.lineTo(a,l),t.lineTo(s,l),t.closePath(),t.fill()}let{stroke:p,strokeWidth:f,startLine:g,endLine:m}=this;if(!!((g||m)&&p&&f)){let{strokeOpacity:C,lineDash:S,lineDashOffset:b,lineCap:T,lineJoin:A}=this;t.strokeStyle=p,t.globalAlpha=d*C,t.lineWidth=f,S&&t.setLineDash(S),b&&(t.lineDashOffset=b),T&&(t.lineCap=T),A&&(t.lineJoin=A),t.beginPath(),g&&(t.moveTo(s,o),t.lineTo(a,o)),m&&(t.moveTo(a,l),t.lineTo(s,l)),t.stroke()}(e=this.fillShadow)==null||e.markClean(),super.render(r)}};_a.className="Range";_a.defaultStyles=me(H({},Gs.defaultStyles),{strokeWidth:1});x([_e({redraw:2})],_a.prototype,"x1",2);x([_e({redraw:2})],_a.prototype,"y1",2);x([_e({redraw:2})],_a.prototype,"x2",2);x([_e({redraw:2})],_a.prototype,"y2",2);x([_e({redraw:2})],_a.prototype,"startLine",2);x([_e({redraw:2})],_a.prototype,"endLine",2);x([_e({redraw:2})],_a.prototype,"isRange",2);var Fr=class extends Yr{constructor(){super(...arguments),this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Rc(this)}};x([_(Ze)],Fr.prototype,"enabled",2);x([_(yt)],Fr.prototype,"color",2);x([_(Oc,{optional:!0})],Fr.prototype,"fontStyle",2);x([_(Fc,{optional:!0})],Fr.prototype,"fontWeight",2);x([_(ge)],Fr.prototype,"fontSize",2);x([_(Se)],Fr.prototype,"fontFamily",2);x([_(wa,{optional:!0})],Fr.prototype,"formatter",2);function aC(r){let{parallelFlipRotation:e=0,regularFlipRotation:t=0}=r,i=r.rotation?Kr(hs(r.rotation)):0,n=!i&&e>=0&&e<=Math.PI?-1:1,s=!i&&t>=0&&t<=Math.PI?-1:1,o=0;return r.parallel?o=n*Math.PI/2:s===-1&&(o=Math.PI),{configuredRotation:i,defaultRotation:o,parallelFlipFlag:n,regularFlipFlag:s}}function HL(r,e){return isNaN(r)?e?0:10:r}function WL(r,e,t,i){return r&&!e?t*i===-1?"hanging":"bottom":"middle"}function WS(r,e,t,i,n){let s=e>0&&e<=Math.PI,o=t>0&&t<=Math.PI,a=s||o?-1:1;if(r)if(e||t){if(i*a===-1)return"end"}else return"center";else if(i*n===-1)return"end";return"start"}function UL(r,e,t,i,n){let{width:s,height:o}=e,a=new it(t,i,0,0);n.transformBBox(a,e);let{x:l=0,y:c=0}=e;return e.width=s,e.height=o,{point:{x:l,y:c,size:0},label:{width:s,height:o,text:r}}}var IR=(r=>(r[r.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",r[r.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",r[r.AXIS_ZINDEX=2]="AXIS_ZINDEX",r[r.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",r[r.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",r[r.AXIS_FOREGROUND_ZINDEX=5]="AXIS_FOREGROUND_ZINDEX",r[r.SERIES_CROSSHAIR_ZINDEX=6]="SERIES_CROSSHAIR_ZINDEX",r[r.SERIES_LABEL_ZINDEX=7]="SERIES_LABEL_ZINDEX",r[r.SERIES_CROSSLINE_LINE_ZINDEX=8]="SERIES_CROSSLINE_LINE_ZINDEX",r[r.LEGEND_ZINDEX=9]="LEGEND_ZINDEX",r))(IR||{}),zL={};ul(zL,{Arc:()=>Ra,BBox:()=>it,BandScale:()=>xa,Caption:()=>ui,Circle:()=>Du,ContinuousScale:()=>kt,Diamond:()=>iA,DropShadow:()=>Ta,Group:()=>We,HdpiCanvas:()=>wi,Image:()=>Ap,Label:()=>Fr,Line:()=>mr,LinearGradientFill:()=>EC,LinearScale:()=>Au,Marker:()=>Vs,Node:()=>Rp,Path:()=>ms,Path2D:()=>wm,PointerEvents:()=>SR,Rect:()=>Zr,RedrawType:()=>wc,Scene:()=>Zw,SceneChangeDetection:()=>_e,ScenePathChangeDetection:()=>xt,Sector:()=>So,Selection:()=>Ri,Shape:()=>Gs,Square:()=>xp,Text:()=>Xt,Tooltip:()=>DR,Triangle:()=>fp,easing:()=>Xw,getFont:()=>Rc,getMarker:()=>Ic,motion:()=>CN,nearestSquared:()=>xR,nearestSquaredInContainer:()=>FL,toRadians:()=>hs,toTooltipHtml:()=>ym});var MR={};ul(MR,{FROM_TO_MIXINS:()=>$r,NODE_UPDATE_PHASES:()=>UR,fromToMotion:()=>Ti,staticFromToMotion:()=>ml});function aw(r,e){let t={};if(Array.isArray(e))for(let i=0;i<r.length;i++)t[`${r[i]}`]=e[i];else for(let i=0;i<r.length;i++)t[`${r[i]}`]=e;return t}function $g(r,e){return t=>Number(r)*(1-t)+Number(e)*t}function jL(r,e){if(typeof r=="string")try{r=ga.fromString(r)}catch{r=ga.fromArray([0,0,0])}if(typeof e=="string")try{e=ga.fromString(e)}catch{e=ga.fromArray([0,0,0])}let t=$g(r.r,e.r),i=$g(r.g,e.g),n=$g(r.b,e.b),s=$g(r.a,e.a);return o=>ga.fromArray([t(o),i(o),n(o),s(o)]).toRgbaString()}var Xw={};ul(Xw,{easeIn:()=>KL,easeInOut:()=>$L,easeInOutQuad:()=>qL,easeInQuad:()=>YL,easeOut:()=>Sm,easeOutQuad:()=>XL,inverseEaseOut:()=>NR,linear:()=>LR});var LR=r=>r,KL=r=>1-Math.cos(r*Math.PI/2),Sm=r=>Math.sin(r*Math.PI/2),$L=r=>-(Math.cos(r*Math.PI)-1)/2,YL=r=>r*r,XL=r=>1-ni(1-r,2),qL=r=>r<.5?2*r*r:1-ni(-2*r+2,2)/2,NR=r=>2*Math.asin(r)/Math.PI,qw=.2,kR={animationDuration:1,animationDelay:0},GR={animationDuration:.25,animationDelay:0},BR={animationDuration:.5,animationDelay:.25},VR={animationDuration:.25,animationDelay:.75},Vm={animationDuration:qw,animationDelay:1},HR=(r=>(r.Loop="loop",r.Reverse="reverse",r))(HR||{});function ZL(r){return r.every(e=>e instanceof Rp)}function bC(r){return ZL(r)?{nodes:r,selections:[]}:{nodes:[],selections:r}}var WR=class{constructor(r){this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1;var e,t,i,n,s,o,a,l,c,d;this.id=r.id,this.groupId=r.groupId,this.autoplay=(e=r.autoplay)!=null?e:!0,this.delay=(t=r.delay)!=null?t:0,this.duration=(i=r.duration)!=null?i:1e3,this.ease=(n=r.ease)!=null?n:LR,this.repeat=(s=r.repeat)!=null?s:0,this.repeatType=(o=r.repeatType)!=null?o:"loop",this.onComplete=r.onComplete,this.onPlay=r.onPlay,this.onStop=r.onStop,this.onRepeat=r.onRepeat,this.onUpdate=r.onUpdate,this.interpolate=this.createInterpolator(r.from,r.to),r.skip===!0?((a=this.onUpdate)==null||a.call(this,r.to,!1,this),(l=this.onStop)==null||l.call(this,this),(c=this.onComplete)==null||c.call(this,this)):this.autoplay&&(this.play(),(d=this.onUpdate)==null||d.call(this,r.from,!0,this))}play(){var r;return this.isPlaying||(this.isPlaying=!0,(r=this.onPlay)==null||r.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var r;return this.isPlaying&&(this.isPlaying=!1,(r=this.onStop)==null||r.call(this,this)),this}reset(r){let e=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(e,r.to),this.elapsed=0,this.iteration=0,typeof r.delay=="number"&&(this.delay=r.delay),typeof r.duration=="number"&&(this.duration=r.duration),typeof r.ease=="function"&&(this.ease=r.ease),this}update(r){var e,t,i;if(this.elapsed+=r,this.elapsed<=this.delay)return this;let n=this.interpolate(this.isReverse?1-this.delta:this.delta);return(e=this.onUpdate)==null||e.call(this,n,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType==="reverse"&&(this.isReverse=!this.isReverse),(t=this.onRepeat)==null||t.call(this,this)):(this.stop(),(i=this.onComplete)==null||i.call(this,this))),this}get delta(){return this.ease(us(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(r,e){if(typeof e!="object")return this.interpolateValue(r,e);let t=[];for(let i in e){let n=this.interpolateValue(r[i],e[i]);n!=null&&t.push([i,n])}return i=>{let n={};for(let[s,o]of t)n[s]=o(i);return n}}interpolateValue(r,e){if(!(r===void 0||e===void 0)){try{switch(typeof r){case"number":return $g(r,e);case"string":return jL(r,e)}}catch{}throw new Error(`Unable to interpolate values: ${r}, ${e}`)}}},UR=["removed","updated","added"],$r={added:VR,updated:BR,removed:GR,unknown:kR};function Ti(r,e,t,i,n,s,o){let{defaultDuration:a}=t,{fromFn:l,toFn:c,intermediateFn:d}=n,{nodes:u,selections:h}=bC(i),p={added:{},removed:{}};s&&o&&(p.added=aw(o.added,!0),p.removed=aw(o.removed,!0));let f=(m,v)=>{var C,S;let b,T=0,A=0;for(let E of v){let N=m[T]===E,M={last:A>=v.length-1,lastLive:T>=m.length-1,prev:v[A-1],prevFromProps:b,prevLive:m[T-1],next:v[A+1],nextLive:m[T+(N?1:0)]},k=`${r}_${e}_${E.id}`;t.stopByAnimationId(k);let W="unknown";N?s&&o&&(W=QL(E,E.datum,s,p)):W="removed";let ee=l(E,E.datum,W,M),{animationDelay:te,animationDuration:le,start:Ye={},finish:Xe={}}=ee,Ke=In(ee,["animationDelay","animationDuration","start","finish"]),Je=c(E,E.datum,W,M),{animationDelay:et,animationDuration:St,start:wt={},finish:jt={}}=Je,er=In(Je,["animationDelay","animationDuration","start","finish"]);t.animate({id:k,groupId:r,from:Ke,to:er,ease:Sm,onPlay:()=>{E.setProperties(H(H({},Ye),wt))},onUpdate(Sr){E.setProperties(Sr),d&&E.setProperties(d(E,E.datum,W,M))},onStop:()=>{E.setProperties(H(H(H({},er),Xe),jt))},duration:((C=le??St)!=null?C:1)*a,delay:((S=te??et)!=null?S:0)*a}),N&&T++,A++,b=Ke}},g=0;for(let m of h){let v=m.nodes(),C=v.filter(S=>!m.isGarbage(S));f(C,v),t.animate({id:`${r}_${e}_selection_${g}`,groupId:r,from:0,to:1,ease:Sm,onStop(){m.cleanup()}}),g++}f(u,u)}function ml(r,e,t,i,n,s,o={}){let{nodes:a,selections:l}=bC(i),{animationDelay:c=0,animationDuration:d=1,start:u={},finish:h={}}=o,{defaultDuration:p}=t;t.animate({id:`${r}_${e}`,groupId:r,from:n,to:s,ease:Sm,onPlay:()=>{for(let f of a)f.setProperties(u);for(let f of l)for(let g of f.nodes())g.setProperties(u)},onUpdate(f){for(let g of a)g.setProperties(f);for(let g of l)for(let m of g.nodes())m.setProperties(f)},onStop:()=>{for(let f of a)f.setProperties(H(H({},s),h));for(let f of l)for(let g of f.nodes())g.setProperties(H(H({},s),h))},duration:d*p,delay:c*p})}function QL(r,e,t,i){let n=t(r,e);return i.added[n]?"added":i.removed[n]?"removed":"updated"}var zR={};ul(zR,{resetMotion:()=>qi});function qi(r,e){let{nodes:t,selections:i}=bC(r);for(let n of i){for(let s of n.nodes()){let o=e(s,s.datum);s.setProperties(o)}n.cleanup()}for(let n of t){let s=e(n,n.datum);n.setProperties(s)}}var Ta=class extends Yr{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};x([_(Ze),_e({redraw:3})],Ta.prototype,"enabled",2);x([_(yt),_e({redraw:3})],Ta.prototype,"color",2);x([_(ei),_e({redraw:3})],Ta.prototype,"xOffset",2);x([_(ei),_e({redraw:3})],Ta.prototype,"yOffset",2);x([_(ge),_e({redraw:3})],Ta.prototype,"blur",2);var aT=class{constructor({width:r=600,height:e=300,overrideDevicePixelRatio:t}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(r,e),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(t),this.resize(r,e)}static isSupported(){return typeof OffscreenCanvas<"u"&&OffscreenCanvas.prototype.transferToImageBitmap!=null}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(r){let e=r??window.devicePixelRatio;return ER()&&(e=1),this._pixelRatio=e,wi.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(r,e){if(!(r>0&&e>0))return;let{canvas:t,context:i,pixelRatio:n}=this;t.width=Math.round(r*n),t.height=Math.round(e*n),i.resetTransform(),this._width=r,this._height=e}},US="adv-composite",zS="dom-composite",Zw=class{constructor(r){this.id=ba(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=_i.create(!0,"scene");var e;let{document:t,window:i,mode:n=(e=QS("agChartsSceneRenderModel"))!=null?e:US,width:s,height:o,overrideDevicePixelRatio:a=void 0}=r;this.overrideDevicePixelRatio=a,this.opts={document:t,window:i,mode:n},this.canvas=new wi({document:t,window:i,width:s,height:o,overrideDevicePixelRatio:a})}set container(r){this.canvas.container=r}get container(){return this.canvas.container}download(r,e){this.canvas.download(r,e)}getDataURL(r){return this.canvas.getDataURL(r)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(r,e){r=Math.round(r),e=Math.round(e);let t=r<=0||e<=0,i=isNaN(r)||isNaN(e);return r===this.width&&e===this.height||i||t?!1:(this.pendingSize=[r,e],this.markDirty(),!0)}addLayer(r){var e;let{mode:t}=this.opts;if(!["composite",zS,US].includes(t))return;let{zIndex:n=this._nextZIndex++,name:s,zIndexSubOrder:o,getComputedOpacity:a,getVisibility:l}=r,{width:c,height:d,overrideDevicePixelRatio:u}=this,h=t===zS,f=!(t===US)||!aT.isSupported()?new wi({document:this.opts.document,window:this.opts.window,width:c,height:d,domLayer:h,zIndex:n,name:s,overrideDevicePixelRatio:u}):new aT({width:c,height:d,overrideDevicePixelRatio:u}),g={id:this._nextLayerId++,name:s,zIndex:n,zIndexSubOrder:o,canvas:f,getComputedOpacity:a,getVisibility:l};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(g),this.sortLayers(),h){let m=this.layers.map(S=>S.canvas).filter(S=>S instanceof wi),v=m.findIndex(S=>S===f);((e=m[v-1])!=null?e:this.canvas).element.insertAdjacentElement("afterend",f.element)}return this.debug("Scene.addLayer() - layers",this.layers),g.canvas}removeLayer(r){let e=this.layers.findIndex(t=>t.canvas===r);e>=0&&(this.layers.splice(e,1),r.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(r,e,t){let i=this.layers.find(n=>n.canvas===r);i&&(i.zIndex=e,i.zIndexSubOrder=t,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((r,e)=>{var t,i;return PR([r.zIndex,...(t=r.zIndexSubOrder)!=null?t:[void 0,void 0],r.id],[e.zIndex,...(i=e.zIndexSubOrder)!=null?i:[void 0,void 0],e.id],FR)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(r){var e;r!==this._root&&((e=this._root)==null||e._setLayerManager(),this._root=r,r&&r._setLayerManager({addLayer:t=>this.addLayer(t),moveLayer:(...t)=>this.moveLayer(...t),removeLayer:(...t)=>this.removeLayer(...t),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:_i.create("scene")}),this.markDirty())}get root(){return this._root}strip(){let{layers:r}=this;for(let e of r)e.canvas.destroy(),delete e.canvas;r.splice(0,r.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(r){return ne(this,null,function*(){var e,t;let{debugSplitTimes:i={start:performance.now()},extraDebugStats:n={}}=r??{},{canvas:s,canvas:{context:o},root:a,layers:l,pendingSize:c,opts:{mode:d}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach(p=>p.canvas.resize(...c)),this.pendingSize=void 0),a&&!a.visible){this._dirty=!1;return}if(a&&!this.dirty){this.debug("Scene.render() - no-op",{redrawType:wc[a.dirty],tree:this.buildTree(a)}),this.debugStats(i,o,void 0,n);return}let u={ctx:o,devicePixelRatio:(e=this.canvas.pixelRatio)!=null?e:1,forceRender:!0,resized:!!c,debugNodes:{}};_i.check("scene:stats:verbose")&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let h=!1;if((!a||a.dirty>=1)&&(h=!0,s.clear()),a){let{dirtyTree:p,paths:f}=this.buildDirtyTree(a);_i.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:p,paths:f})}a&&h&&(this.debug("Scene.render() - before",{redrawType:wc[a.dirty],canvasCleared:h,tree:this.buildTree(a)}),a.visible&&(o.save(),a.render(u),o.restore())),i["\u270D\uFE0F"]=performance.now(),d!==zS&&l.length>0&&h&&(this.sortLayers(),o.save(),o.setTransform(1/s.pixelRatio,0,0,1/s.pixelRatio,0,0),l.forEach(({canvas:{imageSource:p,enabled:f},getComputedOpacity:g,getVisibility:m})=>{!f||!m()||(o.globalAlpha=g(),o.drawImage(p,0,0))}),o.restore(),i["\u26D9"]=performance.now()),(t=o.verifyDepthZero)==null||t.call(o),this._dirty=!1,this.debugStats(i,o,u.stats,n),this.debugSceneNodeHighlight(o,u.debugNodes),a&&this.debug("Scene.render() - after",{redrawType:wc[a.dirty],canvasCleared:h,tree:this.buildTree(a)})})}debugStats(r,e,t,i={}){if(_i.check("scene:stats","scene:stats:verbose")){let n=performance.now(),s=r.start;r.end=performance.now();let o=(T,A)=>{let E=T+A;return`${T} / ${E} (${Math.round(100*T/E)}%)`},a=(T,A,E)=>`${T}: ${Math.round((E-A)*100)/100}ms`,{layersRendered:l=0,layersSkipped:c=0,nodesRendered:d=0,nodesSkipped:u=0}=t??{},h=0,p=Object.entries(r).filter(([T])=>T!=="end").map(([T,A],E)=>{let N=E>0?a(T,h,A):null;return h=A,N}).filter(T=>T!=null).join(" + "),f=Object.entries(i).map(([T,A])=>`${T}: ${A}`).join(" ; "),g=_i.check("scene:stats:verbose"),v=[`${a("\u23F1\uFE0F",s,n)} (${p})`,`${f}`,`Layers: ${g?o(l,c):this.layers.length}`,g?`Nodes: ${o(d,u)}`:null].filter(T=>T!=null).map(T=>[T,wi.getTextSize(T,e.font)]),C=Math.max(...v.map(([,{width:T}])=>T)),S=v.reduce((T,[,{height:A}])=>T+A,0);e.save(),e.fillStyle="white",e.fillRect(0,0,C,S),e.fillStyle="black";let b=0;for(let[T,A]of v)b+=A.height,e.fillText(T,2,b);e.restore()}}debugSceneNodeHighlight(r,e){var t;let i=o=>a=>o.test(a.id)?!0:a instanceof We&&a.name!=null&&o.test(a.name),n=o=>a=>o===a.id?!0:a instanceof We&&a.name!=null&&o===a.name,s=Jv(QS("agChartsSceneDebug")).flatMap(o=>o==="layout"?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:o);for(let o of s){if(typeof o=="string"&&e[o]!=null)continue;let a=typeof o=="string"?n(o):i(o),l=(t=this.root)==null?void 0:t.findNodes(a);if(!l||l.length===0){be.log(`Scene.render() - no debugging node with id [${o}] in scene graph.`);continue}for(let c of l)c instanceof We&&c.name?e[c.name]=c:e[c.id]=c}r.save();for(let[o,a]of Object.entries(e)){let l=a.computeTransformedBBox();if(!l){be.log(`Scene.render() - no bbox for debugged node [${o}].`);continue}r.globalAlpha=.8,r.strokeStyle="red",r.lineWidth=1,r.strokeRect(l.x,l.y,l.width,l.height),r.fillStyle="red",r.strokeStyle="white",r.font="16px sans-serif",r.textBaseline="top",r.textAlign="left",r.lineWidth=2,r.strokeText(o,l.x,l.y,l.width),r.fillText(o,l.x,l.y,l.width)}r.restore()}buildTree(r){var e,t;let i=(e=r instanceof We?r.name:null)!=null?e:r.id;return H(H({name:i,node:r,dirty:wc[r.dirty]},(t=r.parent)!=null&&t.isVirtual?{virtualParentDirty:wc[r.parent.dirty],virtualParent:r.parent}:{}),r.children.map(n=>this.buildTree(n)).reduce((n,s)=>{let{name:o}=s,{node:{visible:a,opacity:l,zIndex:c,zIndexSubOrder:d},node:u,virtualParent:h}=s;(!a||l<=0)&&(o=`(${o})`),u instanceof We&&u.isLayer()&&(o=`*${o}*`);let p=[`${o??"<unknown>"}`,`z: ${c}`,d&&`zo: ${d.map(m=>typeof m=="function"?`${m()} (fn)`:m).join(" / ")}`,h&&"(virtual parent)"].filter(m=>!!m).join(" "),f=p,g=1;for(;n[f]!=null&&g<100;)f=`${p} (${g++})`;return n[f]=s,n},{}))}buildDirtyTree(r){var e;if(r.dirty===0)return{dirtyTree:{},paths:[]};let t=r.children.map(s=>this.buildDirtyTree(s)).filter(s=>s.paths.length>0),i=(e=r instanceof We?r.name:null)!=null?e:r.id,n=t.length===0?[i]:t.map(s=>s.paths).reduce((s,o)=>s.concat(o),[]).map(s=>`${i}.${s}`);return{dirtyTree:H({name:i,node:r,dirty:wc[r.dirty]},t.map(s=>s.dirtyTree).filter(s=>s.dirty!==void 0).reduce((s,o)=>{var a;return s[(a=o.name)!=null?a:"<unknown>"]=o,s},{})),paths:n}}};Zw.className="Scene";var Ri=class Cu{constructor(e,t,i=!0){this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=_i.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Rp,t)?()=>new t:t}static select(e,t,i=!0){return new Cu(e,t,i)}static selectAll(e,t){let i=[],n=s=>{t(s)&&i.push(s),s.children.forEach(n)};return n(e),i}static selectByClass(e,t){return Cu.selectAll(e,i=>i instanceof t)}static selectByTag(e,t){return Cu.selectAll(e,i=>i.tag===t)}createNode(e,t,i){let n=this.nodeFactory(e);return n.datum=e,t?.(n),i!=null?this._nodes.splice(i,0,n):this._nodes.push(n),this.parentNode.appendChild(n),n}update(e,t,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),i){let n=new Map(e.map((s,o)=>[i(s),[s,o]]));for(let[s,o]of this._nodesMap.entries())if(n.has(o)){let[a]=n.get(o);s.datum=a,this.garbageBin.delete(s),n.delete(o)}else this.garbageBin.add(s);for(let[s,[o,a]]of n.entries())this._nodesMap.set(this.createNode(o,t,a),s)}else{let n=Math.max(e.length,this.data.length);for(let s=0;s<n;s++)s>=e.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(e[s],t):(this._nodes[s].datum=e[s],this.garbageBin.delete(this._nodes[s]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(e=>this.garbageBin.has(e)?(this._nodesMap.delete(e),this.garbageBin.delete(e),this.parentNode.removeChild(e),!1):!0),this)}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){return this._nodes.forEach((t,i)=>e(t,t.datum,i)),this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){let t=this._nodes[e],i=this._nodes[e].datum;yield{node:t,datum:i,index:e}}}select(e){return Cu.selectAll(this.parentNode,e)}selectByClass(e){return Cu.selectByClass(this.parentNode,e)}selectByTag(e){return Cu.selectByTag(this.parentNode,e)}nodes(){return this._nodes}};function JL(r,e){let t=-e/r;return r!==0&&t>=0&&t<=1?[t]:[]}function eN(r,e,t){if(r===0)return JL(e,t);let i=e*e-4*r*t,n=[];if(i===0){let s=-e/(2*r);s>=0&&s<=1&&n.push(s)}else if(i>0){let s=Math.sqrt(i),o=(-e-s)/(2*r),a=(-e+s)/(2*r);o>=0&&o<=1&&n.push(o),a>=0&&a<=1&&n.push(a)}return n}function tN(r,e,t,i){if(r===0)return eN(e,t,i);let n=e/r,s=t/r,o=i/r,a=(3*s-n*n)/9,l=(9*n*s-27*o-2*n*n*n)/54,c=a*a*a+l*l,d=1/3,u=[];if(c>=0){let h=Math.sqrt(c),p=Math.sign(l+h)*Math.pow(Math.abs(l+h),d),f=Math.sign(l-h)*Math.pow(Math.abs(l-h),d),g=Math.abs(Math.sqrt(3)*(p-f)/2),m=-d*n+(p+f);if(m>=0&&m<=1&&u.push(m),g===0){let v=-d*n-(p+f)/2;v>=0&&v<=1&&u.push(v)}}else{let h=Math.acos(l/Math.sqrt(-a*a*a)),p=d*n,f=2*Math.sqrt(-a),g=f*Math.cos(d*h)-p,m=f*Math.cos(d*(h+2*Math.PI))-p,v=f*Math.cos(d*(h+4*Math.PI))-p;g>=0&&g<=1&&u.push(g),m>=0&&m<=1&&u.push(m),v>=0&&v<=1&&u.push(v)}return u}function pm(r,e,t,i,n,s,o,a){let l=(t-r)*(a-s)-(i-e)*(o-n);if(l===0)return null;let c=((o-n)*(e-s)-(r-n)*(a-s))/l,d=((t-r)*(e-s)-(i-e)*(r-n))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:r+c*(t-r),y:e+c*(i-e)}:null}function iN(r,e,t,i,n,s,o,a,l,c,d,u){let h=[],p=c-u,f=d-l,g=l*(u-c)-c*(d-l),m=lT(r,t,n,o),v=lT(e,i,s,a),C=p*m[0]+f*v[0],S=p*m[1]+f*v[1],b=p*m[2]+f*v[2],T=p*m[3]+f*v[3]+g,A=tN(C,S,b,T);for(let E of A){let N=E*E,M=E*N,k=m[0]*M+m[1]*N+m[2]*E+m[3],W=v[0]*M+v[1]*N+v[2]*E+v[3],ee;l!==d?ee=(k-l)/(d-l):ee=(W-c)/(u-c),ee>=0&&ee<=1&&h.push({x:k,y:W})}return h}function lT(r,e,t,i){return[-r+3*e-3*t+i,3*r-6*e+3*t,-3*r+3*e,r]}function jR(r,e,t,i,n,s,o,a,l,c){let d=(c-a)/(l-o),u=a-d*o,h=Math.pow(d,2)+1,p=2*(d*(u-e)-r),f=Math.pow(r,2)+Math.pow(u-e,2)-Math.pow(t,2),g=Math.pow(p,2)-4*h*f;if(g<0)return[];let m=(-p+Math.sqrt(g))/2/h,v=(-p-Math.sqrt(g))/2/h,C=[];return[m,v].forEach(S=>{if(!(S>=Math.min(o,l)&&S<=Math.max(o,l)))return;let T=d*S+u,A=Kr(i),E=Kr(n),N=Kr(Math.atan2(T,S));E<=A&&(E+=2*Math.PI),N<A&&(N+=2*Math.PI),s!==(N>=A&&N<=E)&&C.push({x:S,y:T})}),C}var wm=class{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let r=0;r<this.commands.length;r++)if(this.commands[r]!==this.previousCommands[r])return!0;for(let r=0;r<this.params.length;r++)if(this.params[r]!==this.previousParams[r])return!0;return!1}draw(r){let e=this.commands,t=this.params,i=0;r.beginPath();for(let n of e)switch(n){case 0:r.moveTo(t[i++],t[i++]);break;case 1:r.lineTo(t[i++],t[i++]);break;case 3:r.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);break;case 2:r.arc(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]===1);break;case 4:r.closePath();break}e.length===0&&r.closePath()}moveTo(r,e){this.xy?(this.xy[0]=r,this.xy[1]=e):this.xy=[r,e],this.commands.push(0),this.params.push(r,e)}lineTo(r,e){this.xy?(this.commands.push(1),this.params.push(r,e),this.xy[0]=r,this.xy[1]=e):this.moveTo(r,e)}rect(r,e,t,i){this.moveTo(r,e),this.lineTo(r+t,e),this.lineTo(r+t,e+i),this.lineTo(r,e+i),this.closePath()}roundRect(r,e,t,i,n){n=Math.min(n,t/2,i/2),this.moveTo(r,e+n),this.arc(r+n,e+n,n,Math.PI,3*Math.PI/2),this.lineTo(r+n,e),this.lineTo(r+t-n,e),this.arc(r+t-n,e+n,n,3*Math.PI/2,2*Math.PI),this.lineTo(r+t,e+n),this.lineTo(r+t,e+i-n),this.arc(r+t-n,e+i-n,n,0,Math.PI/2),this.lineTo(r+t-n,e+i),this.lineTo(r+n,e+i),this.arc(r+ +n,e+i-n,n,Math.PI/2,Math.PI),this.lineTo(r,e+i-n),this.closePath()}arc(r,e,t,i,n,s=!1){let o=r+t*Math.cos(n),a=e+t*Math.sin(n);this.xy?(this.xy[0]=o,this.xy[1]=a):this.xy=[o,a],this.commands.push(2),this.params.push(r,e,t,i,n,s?1:0)}cubicCurveTo(r,e,t,i,n,s){this.xy||this.moveTo(r,e),this.commands.push(3),this.params.push(r,e,t,i,n,s),this.xy&&(this.xy[0]=n,this.xy[1]=s)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(4),this._closedPath=!0)}clear({trackChanges:r}={trackChanges:!1}){r?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(r,e){let t=this.commands,i=this.params,n=t.length,s=-1e4,o=-1e4,a=NaN,l=NaN,c=0,d=0,u=0;for(let h=0,p=0;h<n;h++)switch(t[h]){case 0:!isNaN(a)&&pm(a,l,c,d,s,o,r,e)&&u++,c=i[p++],a=c,d=i[p++],l=d;break;case 1:pm(c,d,i[p++],i[p++],s,o,r,e)&&u++,c=i[p-2],d=i[p-1];break;case 3:u+=iN(c,d,i[p++],i[p++],i[p++],i[p++],i[p++],i[p++],s,o,r,e).length,c=i[p-2],d=i[p-1];break;case 2:let f=i[p++],g=i[p++],m=i[p++],v=i[p++],C=i[p++],S=!!i[p++];u+=jR(f,g,m,v,C,S,s,o,r,e).length,c=f+Math.cos(C)*m,d=g+Math.sin(C)*m;break;case 4:!isNaN(a)&&pm(a,l,c,d,s,o,r,e)&&u++;break}return u%2===1}getPoints(){let{commands:r,params:e}=this,t=[],i=0;for(let n=0;n<r.length;n++)switch(r[n]){case 0:case 1:t.push({x:e[i++],y:e[i++]});break;case 3:i+=4,t.push({x:e[i++],y:e[i++]});break;case 2:t.push({x:e[i++],y:e[i++]}),i+=4;break;case 4:break}return t}};function xt(r){let{redraw:e=3,changeCb:t,convertor:i}=r??{};return _e({redraw:e,type:"path",convertor:i,changeCb:t})}var ms=class extends Gs{constructor(){super(...arguments),this.path=new wm,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(r){this._dirtyPath!==r&&(this._dirtyPath=r,r&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var r,e,t,i;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((e=(r=this.fillShadow)==null?void 0:r.isDirty())!=null?e:!1)||((i=(t=this.clipPath)==null?void 0:t.isDirty())!=null?i:!1))}isPointInPath(r,e){let t=this.transformPoint(r,e);return this.path.closedPath&&this.path.isPointInPath(t.x,t.y)}isDirtyPath(){return!1}updatePath(){}clip(r,e){let t=r.getTransform(),i=this.clipScalingX!==1||this.clipScalingY!==1;i&&r.scale(this.clipScalingX,this.clipScalingY),e(),i&&r.setTransform(t)}render(r){var e;let{ctx:t,forceRender:i,stats:n}=r;if(this.dirty===0&&!i){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&this.clipMode!=null?(t.save(),this.clipMode==="normal"&&this.clip(t,()=>{var s;(s=this.clipPath)==null||s.draw(t),t.clip()}),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(t),this.fillStroke(t)),this.clipMode==="punch-out"&&this.clip(t,()=>{var s,o;(s=this.clipPath)==null||s.draw(t),t.clip();let{x:a=-1e4,y:l=-1e4,width:c=2e4,height:d=2e4}=(o=this.computeBBox())!=null?o:{};t.clearRect(a,l,c,d)}),t.restore()):(this.path.draw(t),this.fillStroke(t)),(e=this.fillShadow)==null||e.markClean(),super.render(r)}};ms.className="Path";x([xt()],ms.prototype,"clipPath",2);x([xt()],ms.prototype,"clipMode",2);x([xt()],ms.prototype,"clipScalingX",2);x([xt()],ms.prototype,"clipScalingY",2);var Ra=class extends ms{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return rC(Kr(this.startAngle),Kr(this.endAngle))}updatePath(){let r=this.path;r.clear(),r.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?r.closePath():this.type===2&&!this.fullPie&&(r.lineTo(this.centerX,this.centerY),r.closePath())}computeBBox(){return new it(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(r,e){let t=this.transformPoint(r,e),i=this.computeBBox();return this.type!==0&&i.containsPoint(t.x,t.y)&&this.path.isPointInPath(t.x,t.y)}};Ra.className="Arc";Ra.defaultStyles=Object.assign({},Gs.defaultStyles,{lineWidth:1,fillStyle:null});x([xt()],Ra.prototype,"centerX",2);x([xt()],Ra.prototype,"centerY",2);x([xt()],Ra.prototype,"radius",2);x([xt()],Ra.prototype,"startAngle",2);x([xt()],Ra.prototype,"endAngle",2);x([xt()],Ra.prototype,"counterClockwise",2);x([xt()],Ra.prototype,"type",2);var mr=class extends Gs{constructor(r={}){super(r),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(r){this.x1=r,this.x2=r}set y(r){this.y1=r,this.y2=r}computeBBox(){return new it(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(r,e){if(this.x1===this.x2||this.y1===this.y2){let{x:t,y:i}=this.transformPoint(r,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(t,i)}return!1}render(r){var e;let{ctx:t,forceRender:i,stats:n,devicePixelRatio:s}=r;if(this.dirty===0&&!i){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);let{x1:o,y1:a,x2:l,y2:c}=this;if(o===l){let{strokeWidth:d}=this,u=Math.round(o*s)/s+Math.trunc(d*s)%2/(s*2);o=u,l=u}else if(a===c){let{strokeWidth:d}=this,u=Math.round(a*s)/s+Math.trunc(d*s)%2/(s*2);a=u,c=u}t.beginPath(),t.moveTo(o,a),t.lineTo(l,c),this.fillStroke(t),(e=this.fillShadow)==null||e.markClean(),super.render(r)}};mr.className="Line";mr.defaultStyles=Object.assign({},Gs.defaultStyles,{fill:void 0,strokeWidth:1});x([_e({redraw:3})],mr.prototype,"x1",2);x([_e({redraw:3})],mr.prototype,"y1",2);x([_e({redraw:3})],mr.prototype,"x2",2);x([_e({redraw:3})],mr.prototype,"y2",2);var cT=r=>{let e=ga.fromString(r),[t,i,n]=ga.RGBtoOKLCH(e.r,e.g,e.b);return{l:t,c:i,h:n,a:e.a}},rN=(r,e,t)=>{t=Math.min(Math.max(t,0),1);let i,n;if(Number.isNaN(r.h)&&Number.isNaN(e.h))i=0,n=0;else if(Number.isNaN(r.h))i=e.h,n=e.c;else if(Number.isNaN(e.h))i=r.h,n=r.c;else{let a=r.h,l=e.h,c=e.h-r.h;c>180?l-=360:c<-180&&(l+=360),i=a*(1-t)+l*t,n=r.c*(1-t)+e.c*t}let s=r.l*(1-t)+e.l*t,o=r.a*(1-t)+e.a*t;return ga.fromOKLCH(s,n,i,o)},Gu=class{constructor(){this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(cT)}update(){let{domain:r,range:e}=this;r.length<2&&(be.warnOnce("`colorDomain` should have at least 2 values."),r.length===0?r.push(0,1):r.length===1&&r.push(r[0]+1));for(let t=1;t<r.length;t++){let i=r[t-1],n=r[t];if(i>=n){be.warnOnce("`colorDomain` values should be supplied in ascending order."),r.sort((s,o)=>s-o);break}}if(e.length<r.length)for(let t=e.length;t<r.length;t++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(cT)}convert(r){this.refresh();let{domain:e,range:t,parsedRange:i}=this,n=e[0],s=e[e.length-1],o=t[0],a=t[t.length-1];if(r<=n)return o;if(r>=s)return a;let l,c;if(e.length===2){let h=(r-n)/(s-n),p=1/(t.length-1);l=t.length<=2?0:Math.min(Math.floor(h*(t.length-1)),t.length-2),c=(h-l*p)/p}else{for(l=0;l<e.length-2&&!(r<e[l+1]);l++);let h=e[l],p=e[l+1];c=(r-h)/(p-h)}let d=i[l],u=i[l+1];return rN(d,u,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&be.warnOnce("Expected update to not invalidate scale"))}};x([Ln],Gu.prototype,"domain",2);x([Ln],Gu.prototype,"range",2);var EC=class extends Gs{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(r){this._mask!=null&&this.removeChild(this._mask),r!=null&&this.appendChild(r),this._mask=r}isPointInPath(r,e){var t,i;return(i=(t=this.mask)==null?void 0:t.isPointInPath(r,e))!=null?i:!1}computeBBox(){var r;return(r=this.mask)==null?void 0:r.computeBBox()}render(r){let{mask:e,stops:t}=this,{ctx:i,devicePixelRatio:n}=r,s=1/n,o=e?.computeTransformedBBox();if(e==null||t==null||o==null)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),i.save(),i.beginPath(),e.path.draw(i),i.clip(),i.resetTransform();let a=Math.floor(o.x),l=Math.ceil(o.x+o.width),c=Math.floor(o.y),d=Math.ceil(o.y+o.height),u=new Gu,[h,p]=this.direction==="to-right"?[a,l]:[c,d];if(u.domain=t.map((f,g)=>h+(p-h)*g/(t.length-1)),u.range=t,u.update(),this.direction==="to-right"){let f=d-c;for(let g=a;g<=l;g+=s)i.fillStyle=u.convert(g),i.fillRect(g,c,s,f)}else{let f=l-a;for(let g=c;g<=d;g+=s)i.fillStyle=u.convert(g),i.fillRect(a,g,f,s)}i.restore()}};x([_e({redraw:3})],EC.prototype,"direction",2);x([_e({redraw:3})],EC.prototype,"stops",2);x([_e({redraw:3})],EC.prototype,"_mask",2);var dT=1e-6,Iv=(r,e,t,i,n)=>{let s=!1,o=!1,a=i-Math.sqrt(Math.max(ni(n,2)-ni(t,2),0)),l=0,c=0,d=t-Math.sqrt(Math.max(ni(n,2)-ni(i,2),0));return a>r?(s=!0,a=r,l=t-Math.sqrt(Math.max(ni(n,2)-ni(i-r,2)))):a<dT&&(a=0),d>e?(o=!0,c=i-Math.sqrt(Math.max(ni(n,2)-ni(t-e,2))),d=e):d<dT&&(d=0),{leading0:a,leading1:l,trailing0:c,trailing1:d,leadingClipped:s,trailingClipped:o}},Mv=(r,{x0:e,y0:t,x1:i,y1:n,cx:s,cy:o},a,l)=>{if(l&&r.moveTo(e,t),e!==i||t!==n){let c=Math.atan2(t-o,e-s),d=Math.atan2(n-o,i-s);r.arc(s,o,a,c,d)}else r.lineTo(e,t)},jS=(r,e,t,i,n,s,o)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:d}=s,u=Math.max(a+d,l+c),h=Math.max(a+l,d+c);if(u<=0&&h<=0){r.rect(e,t,i,n);return}else if(o==null&&a===l&&a===c&&a===d){r.roundRect(e,t,i,n,a);return}if(i<0&&(e+=i,i=Math.abs(i)),n<0&&(t+=n,n=Math.abs(n)),o!=null){let E=Math.max(e,o.x),N=Math.min(e+i,o.x+o.width),M=Math.max(t,o.y),k=Math.min(t+n,o.y+o.height);e=E,t=M,i=N-E,n=k-M}if(i<=0||n<=0)return;o??(o=new it(e,t,i,n));let p=Math.max(u/o.height,h/o.width,1);p>1&&(a/=p,l/=p,c/=p,d/=p);let f=!0,g=!0,m=!0,v=!0,C,S,b,T;if(f){let E=Iv(n,i,Math.max(o.x+a-e,0),Math.max(o.y+a-t,0),a);E.leadingClipped&&(v=!1),E.trailingClipped&&(g=!1);let N=Math.max(e+E.leading1,e),M=Math.max(t+E.leading0,t),k=Math.max(e+E.trailing1,e),W=Math.max(t+E.trailing0,t),ee=o.x+a,te=o.y+a;C={x0:N,y0:M,x1:k,y1:W,cx:ee,cy:te}}if(g){let E=Iv(i,n,Math.max(o.y+l-t,0),Math.max(e+i-(o.x+o.width-l),0),l);E.leadingClipped&&(f=!1),E.trailingClipped&&(m=!1);let N=Math.min(e+i-E.leading0,e+i),M=Math.max(t+E.leading1,t),k=Math.min(e+i-E.trailing0,e+i),W=Math.max(t+E.trailing1,t),ee=o.x+o.width-l,te=o.y+l;S={x0:N,y0:M,x1:k,y1:W,cx:ee,cy:te}}if(m){let E=Iv(n,i,Math.max(e+i-(o.x+o.width-c),0),Math.max(t+n-(o.y+o.height-c),0),c);E.leadingClipped&&(g=!1),E.trailingClipped&&(v=!1);let N=Math.min(e+i-E.leading1,e+i),M=Math.min(t+n-E.leading0,t+n),k=Math.min(e+i-E.trailing1,e+i),W=Math.min(t+n-E.trailing0,t+n),ee=o.x+o.width-c,te=o.y+o.height-c;b={x0:N,y0:M,x1:k,y1:W,cx:ee,cy:te}}if(v){let E=Iv(i,n,Math.max(t+n-(o.y+o.height-d),0),Math.max(o.x+d-e,0),d);E.leadingClipped&&(m=!1),E.trailingClipped&&(f=!1);let N=Math.max(e+E.leading0,e),M=Math.min(t+n-E.leading1,t+n),k=Math.max(e+E.trailing0,e),W=Math.min(t+n-E.trailing1,t+n),ee=o.x+d,te=o.y+o.height-d;T={x0:N,y0:M,x1:k,y1:W,cx:ee,cy:te}}let A=!1;f&&C!=null&&(Mv(r,C,a,!A),A||(A=!0)),g&&S!=null&&(Mv(r,S,l,!A),A||(A=!0)),m&&b!=null&&(Mv(r,b,c,!A),A||(A=!0)),v&&T!=null&&(Mv(r,T,d,!A),A||(A=!0)),r.closePath()},Zr=class extends ms{constructor(){super(...arguments),this.borderPath=new wm,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.cornerRadiusBbox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Gs.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Gs.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}set cornerRadius(r){this.topLeftCornerRadius=r,this.topRightCornerRadius=r,this.bottomRightCornerRadius=r,this.bottomLeftCornerRadius=r}isDirtyPath(){var r;return this.lastUpdatePathStrokeWidth!==this.strokeWidth?!0:!!(this.path.isDirty()||this.borderPath.isDirty()||(r=this.clipPath)!=null&&r.isDirty())}updatePath(){var r,e,t;let{path:i,borderPath:n,crisp:s,topLeftCornerRadius:o,topRightCornerRadius:a,bottomRightCornerRadius:l,bottomLeftCornerRadius:c}=this,{x:d,y:u,width:h,height:p,strokeWidth:f,cornerRadiusBbox:g}=this,v=1/((e=(r=this.layerManager)==null?void 0:r.canvas.pixelRatio)!=null?e:1),C=1;if(i.clear({trackChanges:!0}),n.clear({trackChanges:!0}),s&&(h<=v&&(C*=h/v),p<=v&&(C*=p/v),h=this.align(d,h),p=this.align(u,p),d=this.align(d),u=this.align(u),g=g!=null?new it(this.align(g.x),this.align(g.y),this.align(g.x,g.width),this.align(g.y,g.height)):void 0),f)if(h<v){let S=d+v/2;n.moveTo(S,u),n.lineTo(S,u+p),f=v,this.borderClipPath=void 0}else if(p<v){let S=u+v/2;n.moveTo(d,S),n.lineTo(d+h,S),f=v,this.borderClipPath=void 0}else if(f<h&&f<p){let S=f/2;d+=S,u+=S,h-=f,p-=f;let b=g?.clone().shrink(S),T={topLeft:o>0?o-f:0,topRight:a>0?a-f:0,bottomRight:l>0?l-f:0,bottomLeft:c>0?c-f:0};this.borderClipPath=void 0,jS(i,d,u,h,p,T,b),jS(n,d,u,h,p,T,b)}else this.borderClipPath=(t=this.borderClipPath)!=null?t:new wm,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(d,u,h,p),n.rect(d,u,h,p);else{let S={topLeft:o,topRight:a,bottomRight:l,bottomLeft:c};this.borderClipPath=void 0,jS(i,d,u,h,p,S,g)}this.effectiveStrokeWidth=f,this.lastUpdatePathStrokeWidth=f,this.microPixelEffectOpacity=C}computeBBox(){let{x:r,y:e,width:t,height:i}=this;return new it(r,e,t,i)}isPointInPath(r,e){let t=this.transformPoint(r,e);return this.computeBBox().containsPoint(t.x,t.y)}applyFillAlpha(r){let{fillOpacity:e,microPixelEffectOpacity:t,opacity:i}=this,{globalAlpha:n}=r;r.globalAlpha=n*i*e*t}renderStroke(r){let{stroke:e,effectiveStrokeWidth:t,borderPath:i,borderClipPath:n,opacity:s,microPixelEffectOpacity:o}=this;if(!!e&&!!t){let{strokeOpacity:l,lineDash:c,lineDashOffset:d,lineCap:u,lineJoin:h}=this;n&&(n.draw(r),r.clip()),i.draw(r);let{globalAlpha:p}=r;r.strokeStyle=e,r.globalAlpha=p*s*l*o,r.lineWidth=t,c&&r.setLineDash(c),d&&(r.lineDashOffset=d),u&&(r.lineCap=u),h&&(r.lineJoin=h),r.stroke(),r.globalAlpha=p}}};Zr.className="Rect";x([xt()],Zr.prototype,"x",2);x([xt()],Zr.prototype,"y",2);x([xt()],Zr.prototype,"width",2);x([xt()],Zr.prototype,"height",2);x([xt()],Zr.prototype,"topLeftCornerRadius",2);x([xt()],Zr.prototype,"topRightCornerRadius",2);x([xt()],Zr.prototype,"bottomRightCornerRadius",2);x([xt()],Zr.prototype,"bottomLeftCornerRadius",2);x([xt()],Zr.prototype,"cornerRadiusBbox",2);x([xt()],Zr.prototype,"crisp",2);function KR(r,e,t){let i=Math.sqrt(Math.pow(r,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:s}=t;if(t.startAngle===t.endAngle||i<Math.min(n,s)||i>Math.max(n,s))return!1;let o=tC(t.startAngle),a=tC(t.endAngle),l=Math.atan2(e,r);return o<a?l<=a&&l>=o:l<=a&&l>=-Math.PI||l>=o&&l<=Math.PI}function uT(r,e){let{startAngle:t,endAngle:i,innerRadius:n,outerRadius:s}=e,o={x:s*Math.cos(t),y:s*Math.sin(t)},a={x:s*Math.cos(i),y:s*Math.sin(i)},l=n===0?{x:0,y:0}:{x:n*Math.cos(t),y:n*Math.sin(t)},c=n===0?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)};return pm(r.start.x,r.start.y,r.end.x,r.end.y,o.x,o.y,l.x,l.y)!=null||pm(r.start.x,r.start.y,r.end.x,r.end.y,a.x,a.y,c.x,c.y)!=null||jR(0,0,s,t,i,!0,r.start.x,r.start.y,r.end.x,r.end.y).length>0}function nN(r,e){let t={x:r.x,y:r.y},i={x:r.x+r.width,y:r.y},n={x:r.x,y:r.y+r.height},s={x:r.x+r.width,y:r.y+r.height};return uT({start:t,end:i},e)||uT({start:n,end:s},e)}var So=class extends ms{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.angleOffset=0,this.inset=0}computeBBox(){let r=this.outerRadius;return new it(this.centerX-r,this.centerY-r,r*2,r*2)}updatePath(){let r=this.path,{angleOffset:e,inset:t}=this,i=this.startAngle+e,n=this.endAngle+e,s=i<=n?n-i:Math.PI*2-(i-n),o=Math.max(Math.min(this.innerRadius,this.outerRadius)+t,0),a=Math.max(Math.max(this.innerRadius,this.outerRadius)-t,0),l=s>=2*Math.PI,c=this.centerX,d=this.centerY;if(r.clear(),l)r.arc(c,d,a,i,n),o>t&&(r.moveTo(c+o*Math.cos(n),d+o*Math.sin(n)),r.arc(c,d,o,n,i,!0));else{let u=o>0?t/o:0,h=a>0?t/a:0;if(s<2*h)return;let f=o<=t||s<2*u;if(f){let g=s<Math.PI*.5?t*(1+Math.cos(s))/Math.sin(s):NaN,m;g>0&&g<a?m=Math.max(Math.hypot(t,g),o):m=o;let v=i+s*.5;r.moveTo(c+m*Math.cos(v),d+m*Math.sin(v))}else r.moveTo(c+o*Math.cos(i+u),d+o*Math.sin(i+u));r.arc(c,d,a,i+h,n-h),f||(o>0?r.arc(c,d,o,n-u,i+u,!0):r.lineTo(c,d))}r.closePath(),this.dirtyPath=!1}isPointInPath(r,e){let{angleOffset:t}=this,i=this.startAngle+t,n=this.endAngle+t,s=Math.min(this.innerRadius,this.outerRadius),o=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(r,e);return KR(a.x,a.y,{startAngle:i,endAngle:n,innerRadius:s,outerRadius:o})}};So.className="Sector";x([xt()],So.prototype,"centerX",2);x([xt()],So.prototype,"centerY",2);x([xt()],So.prototype,"innerRadius",2);x([xt()],So.prototype,"outerRadius",2);x([xt()],So.prototype,"startAngle",2);x([xt()],So.prototype,"endAngle",2);x([xt()],So.prototype,"angleOffset",2);x([xt()],So.prototype,"inset",2);var pp=r=>`(${r})`,ol=r=>`${pp(r)}?`,hT=r=>ol(`?:${r}`),sN=(()=>{let r=".",e="[<>=^]",t="[+\\-( ]",i="[$\u20AC\xA3\xA5\u20A3\u20B9#]",n="0",s="\\d+",o=",",a="\\d+",l="~",c="[%a-z]";return new RegExp(["^",hT(`${ol(r)}${pp(e)}`),ol(t),ol(i),ol(n),ol(s),ol(o),hT(`\\.${pp(a)}`),ol(l),ol(c),"$"].join(""),"i")})(),oN=(()=>{let r=".*?",e=".+?",t=".*?";return new RegExp(["^",pp(r),`#\\{${pp(e)}\\}`,pp(t),"$"].join(""))})();function $R(r){let e,t,i=oN.exec(r);i&&([,e,r,t]=i);let n=sN.exec(r);if(!n)throw new Error(`The number formatter is invalid: ${r}`);let[,s,o,a,l,c,d,u,h,p,f]=n;return{fill:s,align:o,sign:a,symbol:l,zero:c,width:parseInt(d),comma:u,precision:parseInt(h),trim:!!p,type:f,prefix:e,suffix:t}}function YR(r){let e=typeof r=="string"?$R(r):r,{fill:t,align:i,sign:n="-",symbol:s,zero:o,width:a,comma:l,type:c,prefix:d="",suffix:u="",precision:h}=e,{trim:p}=e,f=h===void 0||isNaN(h),g;if(!c)g=ds.g,p=!0;else if(c in ds&&c in lp)g=f?lp[c]:ds[c];else if(c in ds)g=ds[c];else if(c in lp)g=lp[c];else throw new Error(`The number formatter type is invalid: ${c}`);let m;return h==null||f?m=c?6:12:m=h,v=>{let C=g(v,m);return p&&(C=aN(C)),l&&(C=lN(C,l)),C=hN(v,C,n),s&&s!=="#"&&(C=`${s}${C}`),s==="#"&&c==="x"&&(C=`0x${C}`),c==="s"&&(C=`${C}${cN(v)}`),(c==="%"||c==="p")&&(C=`${C}%`),a!=null&&!isNaN(a)&&(C=pN(C,a,t??o,i)),C=`${d}${C}${u}`,C}}var Lv=r=>Math.floor(Math.abs(r)),lp={b:r=>Lv(r).toString(2),c:r=>String.fromCharCode(r),d:r=>Math.round(Math.abs(r)).toFixed(0),o:r=>Lv(r).toString(8),x:r=>Lv(r).toString(16),X:r=>lp.x(r).toUpperCase(),n:r=>lp.d(r),"%":r=>`${Lv(r*100).toFixed(0)}`},ds={e:(r,e)=>Math.abs(r).toExponential(e),E:(r,e)=>ds.e(r,e).toUpperCase(),f:(r,e)=>Math.abs(r).toFixed(e),F:(r,e)=>ds.f(r,e).toUpperCase(),g:(r,e)=>{if(r===0)return"0";let t=Math.abs(r),i=Math.floor(Math.log10(t));return i>=-4&&i<e?t.toFixed(e-1-i):t.toExponential(e-1)},G:(r,e)=>ds.g(r,e).toUpperCase(),n:(r,e)=>ds.g(r,e),p:(r,e)=>ds.r(r*100,e),r:(r,e)=>{if(r===0)return"0";let t=Math.abs(r),n=Math.floor(Math.log10(t))-(e-1);if(n<=0)return t.toFixed(-n);let s=Math.pow(10,n);return(Math.round(t/s)*s).toFixed()},s:(r,e)=>{let t=XR(r);return ds.r(r/Math.pow(10,t),e)},"%":(r,e)=>ds.f(r*100,e)};function aN(r){return r.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function lN(r,e){let t=r.indexOf(".");t<0&&(t=r.length);let i=r.substring(0,t).split(""),n=r.substring(t);for(let s=i.length-3;s>0;s-=3)i.splice(s,0,e);return`${i.join("")}${n}`}function cN(r){return dN[XR(r)]}function XR(r){let e=Math.log10(Math.abs(r)),t=Math.floor(e/3)*3;return Math.max(qR,Math.min(ZR,t))}var qR=-24,ZR=24,dN={[qR]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[ZR]:"Y"},uN="\u2212";function hN(r,e,t=""){if(t==="(")return r>=0?e:`(${e})`;let i=t==="+"?"+":"";return`${r>=0?i:uN}${e}`}function pN(r,e,t=" ",i=">"){let n=r;if(i===">"||!i)n=n.padStart(e,t);else if(i==="<")n=n.padEnd(e,t);else if(i==="^"){let s=Math.max(0,e-n.length),o=Math.ceil(s/2),a=Math.floor(s/2);n=n.padStart(o+n.length,t),n=n.padEnd(a+n.length,t)}return n}function QR(r,e){let t=$R(e??",f"),{precision:i}=t;(i==null||isNaN(i))&&(t.type==="f"||t.type==="%"?t.precision=Math.max(...r.map(s=>{if(typeof s!="number"||s===0)return 0;let o=Math.floor(Math.log10(Math.abs(s))),a=t.type?6:12,l=s.toExponential(a-1).replace(/\.?0+e/,"e"),c=l.indexOf(".");if(c<0)return o>=0?0:-o;let d=l.indexOf("e")-c;return Math.max(0,d-o-1)})):(!t.type||t.type in ds)&&(t.precision=Math.max(...r.map(s=>{if(typeof s!="number")return 0;let o=s.toExponential((t.type?6:12)-1).replace(/\.?0+e/,"e");return o.substring(0,o.indexOf("e")).replace(".","").length}))));let n=YR(t);return s=>n(Number(s))}var bm=(r,e=[])=>Object.assign(e,{fractionDigits:r});function _C(r,e,t,i,n){if(t<2)return Em(r,e,e-r);let s=yp(r,e,t,i,n);return isNaN(s)?bm(0):(r=Math.ceil(r/s)*s,e=Math.floor(e/s)*s,Em(r,e,s))}var JR=[1,2,5,10];function yp(r,e,t,i=0,n=1/0){let s=Math.abs(e-r),o=s/t,a=Math.floor(Math.log10(o)),l=Math.pow(10,a),c=JR.map(d=>{let u=d*l,h=Math.ceil(s/u),p=h>=i&&h<=n,f=Math.abs(h-t);return{multiplier:d,isWithinBounds:p,diffCount:f}}).sort((d,u)=>d.isWithinBounds!==u.isWithinBounds?d.isWithinBounds?-1:1:d.diffCount-u.diffCount)[0].multiplier;return!c||isNaN(c)?NaN:c*l}function fN(r,e){let t=Math.abs(e-r),i=Math.floor(Math.log10(t)),n=Math.pow(10,i),s=r>e?Math.ceil:Math.floor,o=e<r?Math.floor:Math.ceil;return JR.map(a=>{let l=a*n,c=s(r/l)*l,d=o(e/l)*l;return{error:1-t/Math.abs(d-c),domain:[c,d]}}).sort((a,l)=>a.error-l.error)[0].domain}function Em(r,e,t){let i=Math.min(r,e),n=Math.max(r,e),s=Vw(t),o=Math.pow(10,s),a=Math.ceil((n-i)/t),l=bm(s);for(let c=0;c<=a;c++){let d=i+t*c;l.push(Math.round(d*o)/o)}return l}var Au=class extends kt{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(r){return r}ticks(){var r;let e=(r=this.tickCount)!=null?r:kt.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(s=>!isFinite(s)))return[];this.refresh();let[t,i]=this.getDomain(),{interval:n}=this;if(n){let s=Math.abs(n);if(!this.isDenseInterval({start:t,stop:i,interval:s}))return Em(t,i,s)}return _C(t,i,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(r,e){var t,i;let n=(t=this.tickCount)!=null?t:kt.defaultTickCount;return(i=this.interval)!=null?i:yp(r,e,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var r;let e=(r=this.tickCount)!=null?r:kt.defaultTickCount;if(e<1){this.niceDomain=[...this.domain];return}let[t,i]=this.domain;if(e===1)[t,i]=fN(t,i);else{let n=t>i?Math.ceil:Math.floor,s=i<t?Math.floor:Math.ceil,o=4;for(let a=0;a<o;a++){let l=t,c=i,d=this.getTickStep(t,i),[u,h]=this.domain;if(d>=1)t=n(u/d)*d,i=s(h/d)*d;else{let p=1/d;t=n(u*p)/p,i=s(h*p)/p}if(t===l&&i===c)break}}this.niceDomain=[t,i]}tickFormat({ticks:r,specifier:e}){return QR(r??this.ticks(),e)}},Vs=class extends ms{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){let{x:r,y:e,size:t}=this,i=t/2;return new it(r-i,e-i,t,t)}applyPath(r,e){let{path:t}=this,{x:i,y:n}=this;t.clear();for(let{x:s,y:o,t:a}of e)i+=s*r,n+=o*r,a==="move"?t.moveTo(i,n):t.lineTo(i,n);t.closePath()}};x([xt()],Vs.prototype,"x",2);x([xt()],Vs.prototype,"y",2);x([xt({convertor:Math.abs})],Vs.prototype,"size",2);var Du=class extends Vs{updatePath(){let{x:r,y:e,path:t,size:i}=this,n=i/2;t.clear(),t.arc(r,e,n,0,Math.PI*2),t.closePath()}};Du.className="Circle";var Qw=class eA extends Vs{updatePath(){let e=this.size/4.2;super.applyPath(e,eA.moves)}};Qw.className="Cross";Qw.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var gN=Qw,Jw=class tA extends Vs{updatePath(){let e=this.size/2;super.applyPath(e,tA.moves)}};Jw.className="Diamond";Jw.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var iA=Jw,rA=class extends Vs{rad(r){return r/180*Math.PI}updatePath(){let{x:r,path:e,size:t,rad:i}=this,n=t/4,s=this.y+n/2;e.clear(),e.arc(r-n,s-n,n,i(130),i(330)),e.arc(r+n,s-n,n,i(220),i(50)),e.lineTo(r,s+n),e.closePath()}};rA.className="Heart";var eb=class nA extends Vs{updatePath(){let e=this.size/3;super.applyPath(e,nA.moves)}};eb.className="Plus";eb.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var mN=eb,xp=class extends Vs{updatePath(){let{path:r,x:e,y:t}=this,i=this.size/2;r.clear(),r.moveTo(this.align(e-i),this.align(t-i)),r.lineTo(this.align(e+i),this.align(t-i)),r.lineTo(this.align(e+i),this.align(t+i)),r.lineTo(this.align(e-i),this.align(t+i)),r.closePath()}};xp.className="Square";var tb=class sA extends Vs{updatePath(){let e=this.size*1.1;super.applyPath(e,sA.moves)}};tb.className="Triangle";tb.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var fp=tb,oA={circle:Du,cross:gN,diamond:iA,heart:rA,plus:mN,square:xp,triangle:fp},vN=Object.keys(oA);function aA(r){return typeof r=="string"&&vN.includes(r)}function Ic(r=xp){return aA(r)?oA[r]:typeof r=="function"?r:xp}var Ap=class extends Rp{constructor(r){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=r}render(r){let{ctx:e,forceRender:t,stats:i}=r;if(this.dirty===0&&!t){i&&i.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(e);let n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(r)}};x([_e({redraw:3})],Ap.prototype,"x",2);x([_e({redraw:3})],Ap.prototype,"y",2);x([_e({redraw:3})],Ap.prototype,"width",2);x([_e({redraw:3})],Ap.prototype,"height",2);x([_e({redraw:3})],Ap.prototype,"opacity",2);var CN=H(H({},MR),zR),ib=r=>typeof r=="string",lA=r=>!!r&&Object.hasOwn(r,"toString")&&ib(r.toString()),yN=r=>r instanceof Date&&!isNaN(+r);function cA(r){return ib(r)||lA(r)}function rb(r){let e=i=>!!i&&Object.hasOwn(i,"valueOf")&&Fn(i.valueOf()),t=i=>i instanceof Date&&!isNaN(+i);return Fn(r)||e(r)||t(r)}function _m(r,e){if(e&&rb(r))return r;if(!e)return cA(r)?r:String(r)}var Fn=r=>typeof r=="number"&&Number.isFinite(r),nb=r=>r==="value"?Gt((e,t)=>t.target.type==="line",e=>e.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Gt((e,t)=>t.target.type==="range",e=>e.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),dA=(r,e,t,i)=>{let n=r==="line"&&e!==void 0,s=r==="range"&&t!==void 0;if(!n&&!s)return!0;let[o,a]=t??[e,void 0],l=kt.is(i),c=_m(o,l)!=null&&!isNaN(i.convert(o)),d=_m(a,l)!=null&&!isNaN(i.convert(a));if(n&&c||s&&c&&d)return!0;let u=["Expecting crossLine"];return s?(c||u.push(`range start ${hm(o)}`),d||u.push(`${c?"":"and "}range end ${hm(a)}`)):u.push(`value ${hm(o)}`),u.push("to match the axis scale domain."),be.warnOnce(u.join(" ")),!1},xN={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},SN={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function pT({yDirection:r,padding:e=0,position:t="top",bbox:i}){let n=r?xN:SN,{xTranslationDirection:s,yTranslationDirection:o}=n[t],a=r?i.width:i.height,l=r?i.height:i.width,c=s*(e+a/2),d=o*(e+l/2);return{xTranslation:c,yTranslation:d}}function wN({yDirection:r,bbox:e,padding:t=0,position:i="top"}){let n={};return i.startsWith("inside")||(i==="top"&&!r?n.top=t+e.height:i==="bottom"&&!r?n.bottom=t+e.height:i==="left"&&r?n.left=t+e.width:i==="right"&&r&&(n.right=t+e.width)),n}var lw=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e/2,y:t}:{x:e,y:isNaN(i)?t:(t+i)/2},fT=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:n})=>r?{x:e,y:isNaN(n)?i:(i+n)/2}:{x:t/2,y:i},gT=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e,y:isNaN(i)?t:(t+i)/2}:{x:e/2,y:isNaN(i)?t:i},mT=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:n})=>r?{x:t/2,y:isNaN(n)?i:n}:{x:e,y:isNaN(n)?i:(i+n)/2},bN=({xEnd:r,yStart:e,yEnd:t})=>({x:r/2,y:isNaN(t)?e:(e+t)/2}),vT=({yDirection:r,xStart:e,xEnd:t,yStart:i})=>r?{x:e/2,y:i}:{x:t,y:i},CT=({yDirection:r,xStart:e,yStart:t,yEnd:i})=>r?{x:e,y:isNaN(i)?t:i}:{x:e,y:t},yT=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e,y:t}:{x:e,y:isNaN(i)?t:i},xT=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:n})=>r?{x:t,y:isNaN(n)?i:n}:{x:e,y:isNaN(n)?i:n},EN={top:{c:lw},bottom:{c:mT},left:{c:fT},right:{c:gT},topLeft:{c:vT},topRight:{c:yT},bottomLeft:{c:CT},bottomRight:{c:xT},inside:{c:bN},insideLeft:{c:fT},insideRight:{c:gT},insideTop:{c:lw},insideBottom:{c:mT},insideTopLeft:{c:vT},insideBottomLeft:{c:CT},insideTopRight:{c:yT},insideBottomRight:{c:xT}},_N=Di(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),Hs=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};x([_(Ze,{optional:!0})],Hs.prototype,"enabled",2);x([_(Se,{optional:!0})],Hs.prototype,"text",2);x([_(Oc,{optional:!0})],Hs.prototype,"fontStyle",2);x([_(Fc,{optional:!0})],Hs.prototype,"fontWeight",2);x([_(ge)],Hs.prototype,"fontSize",2);x([_(Se)],Hs.prototype,"fontFamily",2);x([_(ei)],Hs.prototype,"padding",2);x([_(yt,{optional:!0})],Hs.prototype,"color",2);x([_(_N,{optional:!0})],Hs.prototype,"position",2);x([_(_p,{optional:!0})],Hs.prototype,"rotation",2);x([_(Ze,{optional:!0})],Hs.prototype,"parallel",2);var cn=class Yg{constructor(){this.id=ba(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Hs,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new We({name:`${this.id}`,layer:!0,zIndex:Yg.LINE_LAYER_ZINDEX}),this.labelGroup=new We({name:`${this.id}`,layer:!0,zIndex:Yg.LABEL_LAYER_ZINDEX}),this.crossLineRange=new _a,this.crossLineLabel=new Xt,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;let{group:e,labelGroup:t,crossLineRange:i,crossLineLabel:n}=this;e.append(i),t.append(n),i.pointerEvents=1}update(e){let{enabled:t,data:i,type:n,value:s,range:o,scale:a}=this;if(!n||!a||!t||!e||!dA(n,s,o,a)||i.length===0){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=e,this.labelGroup.visible=e,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(e,t){if(!e||!this.createNodeData(t))return;let{sideFlag:n,gridLength:s,data:o}=this,a=[],l=0,c=n*s,d=o[0],u=o[1],h=new it(Math.min(l,c),Math.min(d,u),Math.abs(l-c),Math.abs(d-u));a.push(h);let p=this.computeLabelBBox();return p&&a.push(p),it.merge(a)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(e){var t,i,n;let{scale:s,gridLength:o,sideFlag:a,direction:l,label:{position:c="top"},clippedRange:d,strokeWidth:u=0}=this;if(this.data=[],!s)return!1;let h=(t=s.bandwidth)!=null?t:0,p=(i=s.step)!=null?i:0,f=(e?-1:1)*(s instanceof xa?(p-h)/2:0),[g,m]=[0,a*o],[v,C]=this.getRange(),[S,b]=[Number(s.convert(v,{clampMode:"clamped"}))-f,s.convert(C,{clampMode:"clamped"})+h+f];S=iC(S,d),b=iC(b,d),[v,C]=[Number(s.convert(v)),s.convert(C)+h];let T=(v===S||C===b||S!==b)&&Math.abs(b-S)>0;if(T&&S>b&&([S,b]=[b,S],[v,C]=[C,v]),v-f>=S&&(v-=f),C+f<=b&&(C+=f),this.isRange=T,this.startLine=u>0&&v>=S&&v<=S+f,this.endLine=u>0&&C>=b-h-f&&C<=b,!T&&!this.startLine&&!this.endLine)return!1;if(this.data=[S,b],this.label.enabled){let A=l==="y",{c:E=lw}=(n=EN[c])!=null?n:{},{x:N,y:M}=E({yDirection:A,xStart:g,xEnd:m,yStart:S,yEnd:b});this.labelPoint={x:N,y:M}}return!0}updateRangeNode(){var e;let{crossLineRange:t,sideFlag:i,gridLength:n,data:s,startLine:o,endLine:a,isRange:l,fill:c,fillOpacity:d,stroke:u,strokeWidth:h,lineDash:p}=this;t.x1=0,t.x2=i*n,t.y1=s[0],t.y2=s[1],t.startLine=o,t.endLine=a,t.isRange=l,t.fill=c,t.fillOpacity=d??1,t.stroke=u,t.strokeWidth=h??1,t.strokeOpacity=(e=this.strokeOpacity)!=null?e:1,t.lineDash=p}updateLabel(){let{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){let{crossLineLabel:e,labelPoint:{x:t=void 0,y:i=void 0}={},label:{parallel:n,rotation:s,position:o="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(t===void 0||i===void 0)return;let{defaultRotation:u,configuredRotation:h}=aC({rotation:s,parallel:n,regularFlipRotation:d,parallelFlipRotation:c});e.rotation=u+h,e.textBaseline="middle",e.textAlign="center";let p=e.computeTransformedBBox();if(!p)return;let f=l==="y",{xTranslation:g,yTranslation:m}=pT({yDirection:f,padding:a,position:o,bbox:p});e.translationX=t+g,e.translationY=i+m}getZIndex(e=!1){return e?Yg.RANGE_LAYER_ZINDEX:Yg.LINE_LAYER_ZINDEX}getRange(){var e;let{value:t,range:i,scale:n}=this,s=kt.is(n),o=(e=i?.[0])!=null?e:t,a=i?.[1];return!s&&a===void 0&&(a=o),s&&o===a&&(a=void 0),[o,a]}computeLabelBBox(){let{label:e}=this;if(!e.enabled)return;let t=new Xt;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text;let{labelPoint:{x:i=void 0,y:n=void 0}={},label:{parallel:s,rotation:o,position:a="top",padding:l=0},direction:c,parallelFlipRotation:d,regularFlipRotation:u}=this;if(i===void 0||n===void 0)return;let{configuredRotation:h}=aC({rotation:o,parallel:s,regularFlipRotation:u,parallelFlipRotation:d});t.rotation=h,t.textBaseline="middle",t.textAlign="center";let p=t.computeTransformedBBox();if(!p)return;let f=c==="y",{xTranslation:g,yTranslation:m}=pT({yDirection:f,padding:l,position:a,bbox:p});return t.translationX=i+g,t.translationY=n+m,t.computeTransformedBBox()}calculatePadding(e){var t,i,n,s,o,a,l,c;let{isRange:d,startLine:u,endLine:h,direction:p,label:{padding:f=0,position:g="top"}}=this;if(!d&&!u&&!h)return;let m=this.computeLabelBBox(),v=m?.x,C=m?.y;if(!m||v==null||C==null)return;let S=wN({yDirection:p==="y",padding:f,position:g,bbox:m});e.left=Math.max((t=e.left)!=null?t:0,(i=S.left)!=null?i:0),e.right=Math.max((n=e.right)!=null?n:0,(s=S.right)!=null?s:0),e.top=Math.max((o=e.top)!=null?o:0,(a=S.top)!=null?a:0),e.bottom=Math.max((l=e.bottom)!=null?l:0,(c=S.bottom)!=null?c:0)}};cn.LINE_LAYER_ZINDEX=8;cn.RANGE_LAYER_ZINDEX=3;cn.LABEL_LAYER_ZINDEX=7;cn.className="CrossLine";x([_(Ze,{optional:!0})],cn.prototype,"enabled",2);x([_(Di(["range","line"],"a crossLine type"),{optional:!0})],cn.prototype,"type",2);x([_(Bs(nb("range"),Nm.restrict({length:2})),{optional:!0})],cn.prototype,"range",2);x([_(nb("value"),{optional:!0})],cn.prototype,"value",2);x([_(yt,{optional:!0})],cn.prototype,"fill",2);x([_(ri,{optional:!0})],cn.prototype,"fillOpacity",2);x([_(yt,{optional:!0})],cn.prototype,"stroke",2);x([_(ei,{optional:!0})],cn.prototype,"strokeWidth",2);x([_(ri,{optional:!0})],cn.prototype,"strokeOpacity",2);x([_(Dc,{optional:!0})],cn.prototype,"lineDash",2);var cw=cn,uA=class{constructor(){this.moduleMap=new Map}addModule(r,e){if(this.moduleMap.has(r.optionsKey))throw new Error(`AG Charts - module already initialised: ${r.optionsKey}`);this.moduleMap.set(r.optionsKey,e(r))}removeModule(r){var e;let t=up(r)?r:r.optionsKey;(e=this.moduleMap.get(t))==null||e.destroy(),this.moduleMap.delete(t)}isModuleEnabled(r){return this.moduleMap.has(up(r)?r:r.optionsKey)}getModule(r){return this.moduleMap.get(up(r)?r:r.optionsKey)}get modules(){return this.moduleMap.values()}mapValues(r){return Array.from(this.moduleMap.values()).map(r)}destroy(){for(let r of this.moduleMap.keys())this.removeModule({optionsKey:r})}},Hm=class{constructor(r,e,t){this.states=e,this.preTransitionCb=t,this.debug=_i.create(!0,"animation"),this.state=r,this.debug(`%c${this.constructor.name} | init -> ${r}`,"color: green")}transition(r,e){var t,i;let n=this.states[this.state],s=n?.[r];if(!s){this.debug(`%c${this.constructor.name} | ${this.state} -> ${r} -> ${this.state}`,"color: grey");return}let o=this.state;return typeof s=="string"?o=s:typeof s=="object"&&(o=s.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${r} -> ${o}`,"color: green"),(t=this.preTransitionCb)==null||t.call(this,this.state,o),this.state=o,typeof s=="function"?s(e):typeof s=="object"&&((i=s.action)==null||i.call(s,e)),this.state}},ST=r=>r,hA=class pA extends kt{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=ST,this.basePow=ST,this.log=e=>Math.min(this.domain[0],this.domain[1])>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(this.domain[0],this.domain[1])>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return Math.min(this.domain[0],this.domain[1])>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(this.domain[0],this.domain[1])>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,be.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){let{base:e}=this,t;if(e===10)t=Math.log10;else if(e===Math.E)t=Math.log;else if(e===2)t=Math.log2;else{let i=Math.log(e);t=n=>Math.log(n)/i}this.baseLog=t}updatePowFn(){let{base:e}=this,t;e===10?t=pA.pow10:e===Math.E?t=Math.exp:t=i=>Math.pow(e,i),this.basePow=t}updateNiceDomain(){let[e,t]=this.domain,i=e>t?Math.ceil:Math.floor,n=t<e?Math.floor:Math.ceil,s=this.pow(i(this.log(e))),o=this.pow(n(this.log(t)));this.niceDomain=[s,o]}static pow10(e){return e>=0?Math.pow(10,e):1/Math.pow(10,-e)}ticks(){var e;let t=(e=this.tickCount)!=null?e:10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();let i=this.base,[n,s]=this.getDomain(),o=Math.min(n,s),a=Math.max(n,s),l=this.log(o),c=this.log(a);if(this.interval){let C=Math.abs(this.interval),S=Math.abs(c-l),b=Em(l,c,Math.min(S,C));if(b=bm(b.fractionDigits,b.map(T=>this.pow(T)).filter(T=>T>=o&&T<=a)),!this.isDenseInterval({start:o,stop:a,interval:C,count:b.length}))return b}let d=i%1===0,u=c-l>=t;if(!d||u){let C=_C(l,c,Math.min(c-l,t));return C=bm(C.fractionDigits,C.map(S=>this.pow(S))),C}let h=[],p=o>0;l=Math.floor(l)-1,c=Math.round(c)+1;let f=Math.min(...this.range),m=(Math.max(...this.range)-f)/t,v=1/0;for(let C=l;C<=c;C++){let S=this.convert(this.pow(C+1));for(let b=1;b<i;b++){let T=p?b:i-b+1,A=this.pow(C)*T,E=this.convert(A),N=Math.abs(v-E),M=Math.abs(E-S),k=N>=m&&M>=m;A>=o&&A<=a&&(b===1||k)&&(h.push(A),v=E)}}return h}tickFormat({count:e,ticks:t,specifier:i}){let{base:n}=this;return i==null&&(i=n===10?".0e":","),typeof i=="string"&&(i=YR(i)),e===1/0?i:(t==null&&this.ticks(),s=>i(s))}};x([Ln],hA.prototype,"base",2);var sb=hA,Nv={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function ob(r,e=new Date(r.getFullYear(),0,1)){let t=r.getTimezoneOffset()-e.getTimezoneOffset(),i=r.getTime()-e.getTime()+t*6e4,n=36e5*24;return Math.floor(i/n)}function wT(r,e){let i=new Date(r.getFullYear(),0,1).getDay(),n=(e-i+7)%7,s=new Date(r.getFullYear(),0,n+1);return s<=r?Math.floor(ob(r,s)/7)+1:0}var TN=0,fA=1,bT=4;function gA(r,e=r.getFullYear()){let i=new Date(e,0,1).getDay(),n=(bT-i+7)%7,s=new Date(e,0,n-(bT-fA)+1);return s<=r?Math.floor(ob(r,s)/7)+1:gA(r,e-1)}function RN(r){let e=r.getTimezoneOffset(),t=Math.abs(e);return`${e>0?"-":"+"}${Dr(Math.floor(t/60),2,"0")}${Dr(Math.floor(t%60),2,"0")}`}var AN={a:r=>Nv.shortDays[r.getDay()],A:r=>Nv.days[r.getDay()],b:r=>Nv.shortMonths[r.getMonth()],B:r=>Nv.months[r.getMonth()],c:"%x, %X",d:(r,e)=>Dr(r.getDate(),2,e??"0"),e:"%_d",f:(r,e)=>Dr(r.getMilliseconds()*1e3,6,e??"0"),H:(r,e)=>Dr(r.getHours(),2,e??"0"),I:(r,e)=>{let t=r.getHours()%12;return t===0?"12":Dr(t,2,e??"0")},j:(r,e)=>Dr(ob(r)+1,3,e??"0"),m:(r,e)=>Dr(r.getMonth()+1,2,e??"0"),M:(r,e)=>Dr(r.getMinutes(),2,e??"0"),L:(r,e)=>Dr(r.getMilliseconds(),3,e??"0"),p:r=>r.getHours()<12?"AM":"PM",Q:r=>String(r.getTime()),s:r=>String(Math.floor(r.getTime()/1e3)),S:(r,e)=>Dr(r.getSeconds(),2,e??"0"),u:r=>{let e=r.getDay();return e<1&&(e+=7),String(e%7)},U:(r,e)=>Dr(wT(r,TN),2,e??"0"),V:(r,e)=>Dr(gA(r),2,e??"0"),w:(r,e)=>Dr(r.getDay(),2,e??"0"),W:(r,e)=>Dr(wT(r,fA),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(r,e)=>Dr(r.getFullYear()%100,2,e??"0"),Y:(r,e)=>Dr(r.getFullYear(),4,e??"0"),Z:r=>RN(r),"%":()=>"%"},DN={_:" ",0:"0","-":""};function Dr(r,e,t){let i=String(Math.floor(r));return i.length>=e?i:`${t.repeat(e-i.length)}${i}`}function dw(r){let e=[];for(;r.length>0;){let t=r.indexOf("%");if(t!==0){let a=t>0?r.substring(0,t):r;e.push(a)}if(t<0)break;let i=r[t+1],n=DN[i];n!=null&&t++;let s=r[t+1],o=AN[s];if(typeof o=="function")e.push([o,n]);else if(typeof o=="string"){let a=dw(o);e.push([a,n])}else e.push(`${n??""}${s}`);r=r.substring(t+2)}return t=>{let i=typeof t=="number"?new Date(t):t;return e.map(n=>typeof n=="string"?n:n[0](i,n[1])).join("")}}var mu={0:".%L",1:":%S",2:"%I:%M",3:"%I %p",4:"%a",5:"%b %d",6:"%B",7:"%y",8:"%Y"};function as(r){return r instanceof Date?r.getTime():r}var ab=class extends kt{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.year=WM,this.month=BM,this.week=NM,this.day=DM,this.hour=TM,this.minute=bM,this.second=xM,this.millisecond=vM,this.tickIntervals=[[this.second,1,Ru],[this.second,5,5*Ru],[this.second,15,15*Ru],[this.second,30,30*Ru],[this.minute,1,an],[this.minute,5,5*an],[this.minute,15,15*an],[this.minute,30,30*an],[this.hour,1,fa],[this.hour,3,3*fa],[this.hour,6,6*fa],[this.hour,12,12*fa],[this.day,1,Tc],[this.day,2,2*Tc],[this.week,1,jg],[this.week,2,2*jg],[this.week,3,3*jg],[this.month,1,Wg],[this.month,2,2*Wg],[this.month,3,3*Wg],[this.month,4,4*Wg],[this.month,6,6*Wg],[this.year,1,Pv]]}toDomain(r){return new Date(r)}calculateDefaultTickFormat(r=[]){let e=8,t=l=>{l<e&&(e=l)};for(let l of r){let c=this.getLowestGranularityFormat(l);t(c)}let i=as(r[0]),n=as(r[r.length-1]),s=new Date(i).getFullYear(),a=new Date(n).getFullYear()-s>0;return this.buildFormatString(e,a)}buildFormatString(r,e){let t=[mu[r]],i=0,n=this.getDomain(),s=Math.min(...n.map(as)),a=Math.max(...n.map(as))-s;switch(r){case 1:a/an>1&&t.push(mu[2]);case 2:a/fa>1&&t.push(mu[3]);case 3:i=t.length,a/Tc>1&&t.push(mu[4]);case 4:if(a/jg>1||e){let l=t.indexOf(mu[4]);l>-1&&t.splice(l,1,mu[5])}case 5:case 6:(a/Pv>1||e)&&t.push(mu[8]);default:break}return i<t.length&&(t=[...t.slice(0,i),t.slice(i).join(" ")]),i>0&&(t=[...t.slice(0,i).reverse(),...t.slice(i)],i<t.length&&t.splice(i,0," ")),t.join("")}getLowestGranularityFormat(r){return this.second.floor(r)<r?0:this.minute.floor(r)<r?1:this.hour.floor(r)<r?2:this.day.floor(r)<r?3:this.month.floor(r)<r?this.week.floor(r)<r?4:5:this.year.floor(r)<r?6:8}defaultTickFormat(r){let e=this.calculateDefaultTickFormat(r);return t=>dw(e)(t)}getTickInterval({start:r,stop:e,count:t,minCount:i,maxCount:n}){let{tickIntervals:s}=this,o,a,l=t??kt.defaultTickCount,c=Math.abs(e-r)/Math.max(l,1),d=0;for(;d<s.length&&c>s[d][2];)d++;if(d===0)a=Math.max(yp(r,e,l,i,n),1),o=this.millisecond;else if(d===s.length){let u=r/Pv,h=e/Pv;a=yp(u,h,l,i,n),o=this.year}else{let u=c-s[d-1][2],h=s[d][2]-c,p=u<h?d-1:d;[o,a]=s[p]}return o.every(a)}invert(r){return new Date(super.invert(r))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();let[r,e]=this.getDomain().map(as),t=Math.min(r,e),i=Math.max(r,e);if(this.interval!==void 0)return this.getTicksForInterval({start:t,stop:i});if(this.nice){let{tickCount:n}=this;if(n===2)return this.niceDomain;if(n===1)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:i})}getDefaultTicks({start:r,stop:e}){let t=this.getTickInterval({start:r,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return t?t.range(new Date(r),new Date(e)):[]}getTicksForInterval({start:r,stop:e}){let{interval:t,tickIntervals:i}=this;if(!t)return[];if(t instanceof mm){let d=t.range(new Date(r),new Date(e));return this.isDenseInterval({start:r,stop:e,interval:t,count:d.length})?this.getDefaultTicks({start:r,stop:e}):d}let n=Math.abs(t);if(this.isDenseInterval({start:r,stop:e,interval:n}))return this.getDefaultTicks({start:r,stop:e});let s=[...i];s.reverse();let o=s.find(d=>n%d[2]===0);if(o)return o[0].every(n/(o[2]/o[1])).range(new Date(r),new Date(e));let a=new Date(r),l=new Date(e),c=[];for(;a<=l;)c.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+n);return c}tickFormat({ticks:r,specifier:e}){return e==null?this.defaultTickFormat(r):dw(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,t]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(e,t);let[n,s]=this.niceDomain;if(as(e)===as(n)&&as(t)===as(s))break;e=n,t=s}}updateNiceDomainIteration(r,e){let t=Math.min(as(r),as(e)),i=Math.max(as(r),as(e)),n=r>e,{interval:s}=this,o;if(s instanceof mm)o=s;else{let a=typeof s=="number"?(i-t)/Math.max(s,1):this.tickCount;o=this.getTickInterval({start:t,stop:i,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(o){let a=o.range(new Date(t),new Date(i),!0),l=n?[...a].reverse():a,c=l[0],d=l[l.length-1];this.niceDomain=[c,d]}}},ON={};ul(ON,{Color:()=>ga,DELETE:()=>Ns,Logger:()=>be,Padding:()=>Mc,angleBetween:()=>yL,checkDatum:()=>_m,clamp:()=>us,clampArray:()=>iC,countFractionDigits:()=>Vw,createId:()=>ba,extent:()=>Sa,isContinuous:()=>rb,isDate:()=>yN,isDiscrete:()=>cA,isEqual:()=>rC,isNegative:()=>Lm,isNumber:()=>Fn,isNumberEqual:()=>rC,isReal:()=>yC,isString:()=>ib,isStringObject:()=>lA,jsonApply:()=>um,jsonClone:()=>Cm,jsonDiff:()=>ya,jsonMerge:()=>Ai,jsonWalk:()=>Fu,mod:()=>Bw,normalisedExtent:()=>sR,normalisedExtentWithMetadata:()=>Im,normalizeAngle180:()=>tC,normalizeAngle360:()=>Kr,normalizeAngle360Inclusive:()=>vL,range:()=>Em,resetIds:()=>yR,round:()=>kw,sanitizeHtml:()=>si,tickFormat:()=>QR,tickStep:()=>yp,ticks:()=>_C,toDegrees:()=>CL,toFixed:()=>Gw,toRadians:()=>hs,toReal:()=>nC,zipObject:()=>aw});var Mc=class{constructor(r=0,e=r,t=r,i=e){this.top=r,this.right=e,this.bottom=t,this.left=i}clear(){this.top=this.right=this.bottom=this.left=0}};x([_(ge)],Mc.prototype,"top",2);x([_(ge)],Mc.prototype,"right",2);x([_(ge)],Mc.prototype,"bottom",2);x([_(ge)],Mc.prototype,"left",2);var Ug=null;function si(r){if(r!=null)return r===""?"":(Ug??(Ug=document.createElement("div")),Ug.textContent=String(r),Ug.innerHTML)}function FN(r,e){return r.length===e.length&&r.every((t,i)=>Number(t)===Number(e[i]))}function PN(r,e,t,i,n){let s=r.x;r.x<e?s=e:r.x>e+i&&(s=e+i);let o=r.y;r.y<t?o=t:r.y>t+n&&(o=t+n);let a=r.x-s,l=r.y-o;return Math.sqrt(a*a+l*l)<=r.size*.5}function mA(r,e,t,i,n){let s=r.x+r.width>e&&r.x<e+i,o=r.y+r.height>t&&r.y<t+n;return s&&o}function IN(r,e,t,i,n){return e+i<r.x+r.width&&e>r.x&&t>r.y&&t+n<r.y+r.height}function MN(r){return r!=null&&typeof r.point=="object"&&typeof r.label=="object"}function LN(r,e,t=5){let i=[];r=r.map(n=>n.slice().sort((s,o)=>o.point.size-s.point.size));for(let n=0;n<r.length;n++){let s=i[n]=[],o=r[n];if(o?.length&&o[0].label)for(let a=0,l=o.length;a<l;a++){let c=o[a],d=c.label,u=c.point.size*.5,h=c.point.x-d.width*.5,p=c.point.y-u-d.height-t,{width:f,height:g}=d;!(!e||IN(e,h,p,f,g))||r.some(S=>S.some(b=>PN(b.point,h,p,f,g)))||i.some(S=>S.some(b=>mA(b,h,p,f,g)))||s.push({index:a,text:d.text,x:h,y:p,width:f,height:g,datum:c})}}return i}function NN(r,e){let t=[];for(let i=0;i<r.length;i++){let n=r[i],{point:{x:s,y:o},label:{text:a}}=n,{label:{width:l,height:c}}=n;if(l+=e??0,c+=e??0,t.some(u=>mA(u,s,o,l,c)))return!0;t.push({index:i,text:a,x:s,y:o,width:l,height:c,datum:n})}return!1}var kN=["stroke","lineDash"],GN=fl(r=>Ou(r)&&Object.keys(r).every(e=>kN.includes(e)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),TC=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};x([_(Ze)],TC.prototype,"enabled",2);x([_(ge)],TC.prototype,"width",2);x([_(GN)],TC.prototype,"style",2);function vl(r,e=[void 0]){return cl((t,i,n)=>e.includes(n)?r:n)}var Vi=class{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Rc(this)}};x([_(Ze)],Vi.prototype,"enabled",2);x([_(Ze,{optional:!0})],Vi.prototype,"autoWrap",2);x([_(ge,{optional:!0})],Vi.prototype,"maxWidth",2);x([_(ge,{optional:!0})],Vi.prototype,"maxHeight",2);x([_(Oc,{optional:!0})],Vi.prototype,"fontStyle",2);x([_(Fc,{optional:!0})],Vi.prototype,"fontWeight",2);x([_(ei.restrict({min:1}))],Vi.prototype,"fontSize",2);x([_(Se)],Vi.prototype,"fontFamily",2);x([_(ge)],Vi.prototype,"padding",2);x([_(Tp),vl(NaN)],Vi.prototype,"minSpacing",2);x([_(yt,{optional:!0})],Vi.prototype,"color",2);x([_(_p,{optional:!0})],Vi.prototype,"rotation",2);x([_(Ze)],Vi.prototype,"avoidCollisions",2);x([_(Ze)],Vi.prototype,"mirrored",2);x([_(Ze)],Vi.prototype,"parallel",2);x([_(Se,{optional:!0})],Vi.prototype,"format",2);var Wm=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}};x([_(Ze)],Wm.prototype,"enabled",2);x([_(ge)],Wm.prototype,"width",2);x([_(yt,{optional:!0})],Wm.prototype,"color",2);var BN=Gt(r=>Mm(r)&&r>0||r instanceof mm,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),wo=class{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}};x([_(Ze)],wo.prototype,"enabled",2);x([_(ge)],wo.prototype,"width",2);x([_(ge)],wo.prototype,"size",2);x([_(yt,{optional:!0})],wo.prototype,"color",2);x([_(BN,{optional:!0})],wo.prototype,"interval",2);x([_(Nm,{optional:!0})],wo.prototype,"values",2);x([_(vR),vl(NaN)],wo.prototype,"minSpacing",2);function uw(r){let e=Math.min(...r.range),t=Math.max(...r.range),i=Math.floor(e),n=Math.ceil(t);return{min:i,max:n,visible:i!==n}}var hw=Math.PI*2,VN=hw/2;function HN(r,e){return Math.abs(e-r)<VN?e:r>e?e+hw:e-hw}function vA(r){let e=(a,l)=>{let c=l!=null?Math.min(...l):r.min,d=l!=null?Math.max(...l):r.max;return a<c||a>d},t=(a,l,c)=>c!=="removed"&&e(a.translationY,a.datum.range)?"removed":c!=="added"&&e(l.translationY,l.range)?"added":c;return{tick:{fromFn(a,l,c){let d=a.y1+a.translationY,u=a.opacity;return(c==="added"||e(a.datum.translationY,a.datum.range))&&(d=l.translationY,u=0),H({y:0,translationY:d,opacity:u},$r[c])},toFn(a,l,c){let d=l.translationY,u=1;return c==="removed"&&(u=0),{y:0,translationY:d,opacity:u,finish:{y:d,translationY:0}}},intermediateFn(a,l,c){return{visible:!e(a.y)}}},line:{fromFn(a,l){var c;return H(H({},(c=a.previousDatum)!=null?c:l),$r.updated)},toFn(a,l){return H({},l)}},label:{fromFn(a,l,c){var d;let u=(d=a.previousDatum)!=null?d:l;c=t(a,l,c);let h=u.x,p=u.y,f=u.rotationCenterX,g=Math.round(a.translationY),m=u.rotation,v=a.opacity;return c==="removed"||e(u.y,u.range)||(c==="added"||e(a.datum.y,a.datum.range))&&(g=Math.round(u.translationY),v=0,m=l.rotation),H({x:h,y:p,rotationCenterX:f,translationY:g,rotation:m,opacity:v},$r[c])},toFn(a,l,c){var d,u;let h=l.x,p=l.y,f=l.rotationCenterX,g=Math.round(l.translationY),m=0,v=1;return c=t(a,l,c),c==="added"?(v=1,m=l.rotation):c==="removed"?(v=0,m=l.rotation):m=HN((u=(d=a.previousDatum)==null?void 0:d.rotation)!=null?u:l.rotation,l.rotation),{x:h,y:p,rotationCenterX:f,translationY:g,rotation:m,opacity:v,finish:{rotation:l.rotation}}}},group:{fromFn(a,l){let{rotation:c,translationX:d,translationY:u}=a;return H({rotation:c,translationX:d,translationY:u},$r.updated)},toFn(a,l){let{rotation:c,translationX:d,translationY:u}=l;return{rotation:c,translationX:d,translationY:u}}}}}function CA(){return(r,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function yA(r){let{visible:e,min:t,max:i}=r;return(n,s)=>{let o=s.translationY,a=e&&o>=t&&o<=i;return{y:o,translationY:0,opacity:1,visible:a}}}function xA(){return(r,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function SA(){return(r,e)=>H({},e)}var wA=(r=>(r[r.TickLine=0]="TickLine",r[r.TickLabel=1]="TickLabel",r[r.GridLine=2]="GridLine",r[r.GridArc=3]="GridArc",r[r.AxisLine=4]="AxisLine",r))(wA||{}),Dp=class bA{constructor(e,t){this.moduleCtx=e,this.scale=t,this.id=ba(this),this.nice=!0,this.reverse=void 0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new We({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new mr),this.tickLineGroup=this.axisGroup.appendChild(new We({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new We({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new We({name:`${this.id}-CrossLines`}),this.gridGroup=new We({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new We({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=Ri.select(this.tickLineGroup,mr,!1),this.tickLabelGroupSelection=Ri.select(this.tickLabelGroup,Xt,!1),this.gridLineGroupSelection=Ri.select(this.gridLineGroup,mr,!1),this.line=new Wm,this.tick=this.createTick(),this.gridLine=new TC,this.label=this.createLabel(),this.defaultTickMinSpacing=bA.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new ui,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new uA,this.refreshScale(),this._titleCaption.registerInteraction(this.moduleCtx),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.interactionManager.addListener("hover",n=>this.checkAxisHover(n))),this.animationManager=e.animationManager,this.animationState=new Hm("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:n=>this.animateReadyUpdate(n),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let i;this.destroyFns.push(e.layoutService.addListener("layout-complete",n=>{i!=null&&ya(n.chart,i)!=null&&this.animationState.transition("resize"),i=H({},n.chart)})),this.destroyFns.push(e.updateService.addListener("update-complete",n=>{this.minRect=n.minRect}))}get type(){var e;return(e=this.constructor.type)!=null?e:""}set crossLines(e){var t,i;(t=this._crossLines)==null||t.forEach(n=>this.detachCrossLine(n)),e&&this.assignCrossLineArrayConstructor(e),this._crossLines=e,(i=this._crossLines)==null||i.forEach(n=>{this.attachCrossLine(n),this.initCrossLine(n)})}get crossLines(){return this._crossLines}attachCrossLine(e){this.crossLineGroup.appendChild(e.group),this.crossLineGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineGroup.removeChild(e.group),this.crossLineGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}refreshScale(){var e;this.range=this.scale.range.slice(),(e=this.crossLines)==null||e.forEach(t=>{this.initCrossLine(t)})}updateRange(){var e;let{range:t,visibleRange:i,scale:n}=this,s=(t[1]-t[0])/(i[1]-i[0]),o=s*i[0],a=t[0]-o;n.range=[a,a+s],(e=this.crossLines)==null||e.forEach(l=>{l.clippedRange=[t[0],t[1]]})}setCrossLinesVisible(e){this.crossLineGroup.visible=e}attachAxis(e,t){t.appendChild(this.gridGroup),e.appendChild(this.axisGroup),e.appendChild(this.crossLineGroup)}detachAxis(e,t){t.removeChild(this.gridGroup),e.removeChild(this.axisGroup),e.removeChild(this.crossLineGroup)}inRange(e,t=0,i=0){let n=Math.min(...this.range),s=Math.max(...this.range);return e+t>=n-i&&e<=s+i}onLabelFormatChange(e,t){let{scale:i,fractionDigits:n}=this,o=!(i instanceof sb)&&n>0?a=>typeof a=="number"?a.toFixed(n):String(a):a=>String(a);if(t&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:e,specifier:t})}catch{this.labelFormatter=o,be.warnOnce(`the axis label format string ${t} is invalid. No formatting will be applied`)}else this.labelFormatter=o}setDomain(){let{scale:e,dataDomain:{domain:t}}=this;e.domain=t}setTickInterval(e){var t;this.scale.interval=(t=this.tick.interval)!=null?t:e}setTickCount(e,t,i){let{scale:n}=this;if(e&&kt.is(n)){if(typeof e=="number"){n.tickCount=e,n.minTickCount=t??0,n.maxTickCount=i??1/0;return}n instanceof ab&&this.setTickInterval(e)}}set gridLength(e){var t;(this._gridLength&&!e||!this._gridLength&&e)&&this.gridLineGroupSelection.clear(),this._gridLength=e,(t=this.crossLines)==null||t.forEach(i=>{this.initCrossLine(i)})}get gridLength(){return this._gridLength}createTick(){return new wo}createLabel(){return new Vi}checkAxisHover(e){this.computeBBox().containsPoint(e.offsetX,e.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(e){if(!this.tickGenerationResult)return;let{rotation:t,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),s=this.label.getSideFlag();this.updatePosition();let o=this.getAxisLineCoordinates(),a=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:d,textAlign:u}=a,h=In(a,["tickData","combinedRotation","textBaseline","textAlign"]),p=this.tickLabelGroupSelection.nodes().map(f=>f.datum.tickId);if(this.updateSelections(o,l.ticks,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{let f=this.calculateUpdateDiff(p,l);this.animationState.transition("update",f)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(s),this.updateTickLines(),this.updateTitle({anyTickVisible:l.ticks.length>0}),this.updateCrossLines({rotation:t,parallelFlipRotation:i,regularFlipRotation:n}),this.updateLayoutState(),e=h.primaryTickCount,e}getAxisLineCoordinates(){let{range:[e,t]}=this,i=0,n=Math.min(e,t),s=Math.max(e,t);return{x:i,y1:n,y2:s}}getTickLineCoordinates(e){let{label:t}=this,n=t.getSideFlag()*this.getTickSize(),s=Math.min(0,n),o=s+Math.abs(n),a=e.translationY;return{x1:s,x2:o,y:a}}getTickLabelProps(e,t){let{label:i}=this,{combinedRotation:n,textBaseline:s,textAlign:o,range:a}=t,l=e.tickLabel,d=i.getSideFlag()*(this.getTickSize()+i.padding+this.seriesAreaPadding),u=l!==""&&l!=null;return{tickId:e.tickId,translationY:e.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:n,rotationCenterX:d,text:l,textAlign:o,textBaseline:s,visible:u,x:d,y:0,range:a}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(e,t){var i;let{title:n}=this;if(!n){e.enabled=!1;return}if(e.color=n.color,e.fontFamily=n.fontFamily,e.fontSize=n.fontSize,e.fontStyle=n.fontStyle,e.fontWeight=n.fontWeight,e.enabled=n.enabled,e.wrapping=n.wrapping,n.enabled){let s=e.node,o=((i=n.spacing)!=null?i:0)+t.spacing,a=this.label.getSideFlag(),l=Kr(this.rotation),c=a===-1&&l>Math.PI&&l<Math.PI*2?-1:1,d=c*a*Math.PI/2,u=c===1?"bottom":"top",{range:h}=this,p=Math.floor(c*a*(h[0]+h[1])/2),f=Math.floor(a===-1?c*-o:-o),{callbackCache:g}=this.moduleCtx,{formatter:m=C=>C.defaultValue}=n,v=g.call(m,this.getTitleFormatterParams());s.setProperties({rotation:d,text:v,textBaseline:u,visible:!0,x:p,y:f})}}calculateLayout(e){var t;let{rotation:i,parallelFlipRotation:n,regularFlipRotation:s}=this.calculateRotations(),o=this.label.getSideFlag(),a=o*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:e,parallelFlipRotation:n,regularFlipRotation:s,labelX:a,sideFlag:o}),this.updateLayoutState();let l=this.tickGenerationResult,{tickData:c,combinedRotation:d,textBaseline:u,textAlign:h}=l,p=In(l,["tickData","combinedRotation","textBaseline","textAlign"]),f=[],{x:g,y1:m,y2:v}=this.getAxisLineCoordinates(),C=new it(g+Math.min(o*this.seriesAreaPadding,0),m,this.seriesAreaPadding,v-m);f.push(C);let{tick:S}=this;S.enabled&&c.ticks.forEach(k=>{let{x1:W,x2:ee,y:te}=this.getTickLineCoordinates(k),le=new it(W,te,ee-W,0);f.push(le)});let{label:b}=this;if(b.enabled){let k=new Xt;c.ticks.forEach(W=>{let ee=this.getTickLabelProps(W,{combinedRotation:d,textAlign:h,textBaseline:u,range:this.scale.range});if(!ee.visible)return;k.setProperties(me(H({},ee),{translationY:Math.round(W.translationY)}));let te=k.computeTransformedBBox();te&&f.push(te)})}let T=k=>{let W=new mo,{rotation:ee,translationX:te,translationY:le,rotationCenterX:Ye,rotationCenterY:Xe}=this.getAxisTransform();return mo.updateTransformMatrix(W,1,1,ee,te,le,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:Ye,rotationCenterY:Xe}),W.transformBBox(k)},{title:A}=this;if(A?.enabled){let k=new ui,W=it.merge(f).width;this.setTitleProps(k,{spacing:W});let te=k.node.computeTransformedBBox();te&&f.push(te)}let E=it.merge(f),N=T(E),M=this.isAnySeriesActive();return(t=this.crossLines)==null||t.forEach(k=>{var W;k.sideFlag=-o,k.direction=i===-Math.PI/2?"x":"y",k instanceof cw&&(k.label.parallel=(W=k.label.parallel)!=null?W:this.label.parallel),k.parallelFlipRotation=n,k.regularFlipRotation=s,k.calculateLayout(M,this.reverse)}),e=p.primaryTickCount,{primaryTickCount:e,bbox:N}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);let{scale:e,nice:t}=this;kt.is(e)&&(e.nice=t,e.update())}calculateRotations(){let e=hs(this.rotation),t=Kr(e),i=Kr(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}generateTicks({primaryTickCount:e,parallelFlipRotation:t,regularFlipRotation:i,labelX:n,sideFlag:s}){var o;let{scale:a,tick:l,label:{parallel:c,rotation:d,fontFamily:u,fontSize:h,fontStyle:p,fontWeight:f}}=this,g=e!==void 0,{defaultRotation:m,configuredRotation:v,parallelFlipFlag:C,regularFlipFlag:S}=aC({rotation:d,parallel:c,regularFlipRotation:i,parallelFlipRotation:t}),b=v+m,T=new mo,{maxTickCount:A}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:(o=l.maxSpacing)!=null?o:NaN}),N=!kt.is(a)||isNaN(A)?10:A,M=WS(c,v,0,s,S),k=WL(c,v,s,C),W={fontFamily:u,fontSize:h,fontStyle:p,fontWeight:f,textBaseline:k,textAlign:M},ee={rawTicks:[],ticks:[],labelCount:0},te=0,le=0,Ye=!0,Xe=!1;for(;Ye&&te<=N&&!Xe;){le=0,M=WS(c,v,0,s,S);let Je=this.getTickStrategies({secondaryAxis:g,index:te});for(let et of Je){({tickData:ee,index:te,autoRotation:le,terminate:Xe}=et({index:te,tickData:ee,textProps:W,labelOverlap:Ye,terminate:Xe,primaryTickCount:e}));let St=v!==0||le!==0,wt=b+le;M=WS(c,v,le,s,S),Ye=this.checkLabelOverlap(wt,St,T,ee.ticks,n,me(H({},W),{textAlign:M}))}}let Ke=m+v+le;return!g&&ee.rawTicks.length>0&&(e=ee.rawTicks.length),{tickData:ee,primaryTickCount:e,combinedRotation:Ke,textBaseline:k,textAlign:M}}getTickStrategies({index:e,secondaryAxis:t}){let{scale:i,label:n,tick:s}=this,o=kt.is(i),a=n.enabled&&n.avoidCollisions,l=!o&&e!==0&&a,c=n.autoRotate===!0&&n.rotation===void 0,d=[],u;this.tick.values?u=3:t?u=1:l?u=2:u=0;let h=({index:p,tickData:f,primaryTickCount:g,terminate:m})=>this.createTickData(u,p,f,m,g);if(d.push(h),!o&&!isNaN(s.minSpacing)){let p=({index:f,tickData:g,primaryTickCount:m,terminate:v})=>this.createTickData(2,f,g,v,m);d.push(p)}if(!a)return d;if(n.autoWrap){let p=({index:f,tickData:g,textProps:m})=>this.wrapLabels(g,f,m);d.push(p)}else if(c){let p=({index:f,tickData:g,labelOverlap:m,terminate:v})=>({index:f,tickData:g,autoRotation:this.getAutoRotation(m),terminate:v});d.push(p)}return d}createTickData(e,t,i,n,s){var o;let{scale:a,tick:l}=this,{maxTickCount:c,minTickCount:d,defaultTickCount:u}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:(o=l.maxSpacing)!=null?o:NaN}),h=kt.is(a),p=!h||isNaN(c)?10:c,f=h?Math.max(u-t,d):c,g=l.interval===void 0&&l.values===void 0&&f>d&&(h||e===2),m=!0;for(;m&&t<=p;){let C=i.rawTicks;f=h?Math.max(u-t,d):c;let{rawTicks:S,ticks:b,labelCount:T}=this.getTicks({tickGenerationType:e,previousTicks:C,tickCount:f,minTickCount:d,maxTickCount:c,primaryTickCount:s});i.rawTicks=S,i.ticks=b,i.labelCount=T,m=g?FN(S,C):!1,t++}let v=l.interval!==void 0||l.values!==void 0;return n||(n=v),{tickData:i,index:t,autoRotation:0,terminate:n}}checkLabelOverlap(e,t,i,n,s,o){mo.updateTransformMatrix(i,1,1,e,0,0);let a=this.createLabelData(n,s,o,i),l=HL(this.label.minSpacing,t);return NN(a,l)}createLabelData(e,t,i,n){let s=[];for(let o of e){let{tickLabel:a,translationY:l}=o;if(a===""||a==null)continue;let c=AR(a),{width:d,height:u}=NL(c,t,l,i),h=new it(t,l,d,u),p=UL(a,h,t,l,n);s.push(p)}return s}getAutoRotation(e){var t;return e?Kr(hs((t=this.label.autoRotateAngle)!=null?t:0)):0}getTicks({tickGenerationType:e,previousTicks:t,tickCount:i,minTickCount:n,maxTickCount:s,primaryTickCount:o}){var a;let{range:l,scale:c,visibleRange:d}=this,u=[];switch(e){case 3:if(kt.is(c)){let C=c.getDomain(),S=c.fromDomain(C[0]),b=c.fromDomain(C[1]),T=Math.min(S,b),A=Math.max(S,b);u=this.tick.values.filter(E=>E>=T&&E<=A).sort((E,N)=>E-N)}else u=this.tick.values;break;case 1:u=this.updateSecondaryAxisTicks(o);break;case 2:u=this.filterTicks(t,i);break;default:u=this.createTicks(i,n,s);break}this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0,this.onLabelFormatChange(u,this.label.format);let h=((a=c.bandwidth)!=null?a:0)/2,p=[],f=0,g=new Map,m=Math.max(0,Math.floor(d[0]*u.length)),v=Math.min(u.length,Math.ceil(d[1]*u.length));for(let C=m;C<v;C++){let S=u[C],b=c.convert(S)+h;if(l.length>0&&!this.inRange(b,0,.001))continue;let T=this.formatTick(S,C),A=T;if(g.has(A)){let E=g.get(A);g.set(A,E+1),A=`${A}_${E}`}else g.set(A,1);p.push({tick:S,tickId:A,tickLabel:T,translationY:b}),!(T===""||T==null)&&f++}return{rawTicks:u,ticks:p,labelCount:f}}filterTicks(e,t){var i;let s=!isNaN(this.tick.minSpacing)||!isNaN((i=this.tick.maxSpacing)!=null?i:NaN)?Math.ceil(e.length/t):2;return e.filter((o,a)=>a%s===0)}createTicks(e,t,i){var n,s,o;return this.setTickCount(e,t,i),(o=(s=(n=this.scale).ticks)==null?void 0:s.call(n))!=null?o:[]}estimateTickCount({minSpacing:e,maxSpacing:t}){let{minRect:i}=this,n=this.calculateRangeWithBleed(),s=Math.max(this.defaultTickMinSpacing,n/kt.defaultMaxTickCount),o=!isNaN(t);isNaN(e)&&(e=s),isNaN(t)&&(t=n),e>t&&(e===s?e=t:t=e);let a=i?this.direction==="x"?i.width:i.height:1;o&&(o=a<s);let l=us(1,Math.floor(n/e),o?Math.floor(n/a):1/0),c=Math.min(l,Math.ceil(n/t)),d=us(c,kt.defaultTickCount,l);return{minTickCount:c,maxTickCount:l,defaultTickCount:d}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:e,parallelFlipRotation:t,regularFlipRotation:i}){var n;let s=this.label.getSideFlag(),o=this.isAnySeriesActive();(n=this.crossLines)==null||n.forEach(a=>{var l;a.sideFlag=-s,a.direction=e===-Math.PI/2?"x":"y",a instanceof cw&&(a.label.parallel=(l=a.label.parallel)!=null?l:this.label.parallel),a.parallelFlipRotation=t,a.regularFlipRotation=i,a.update(o)})}updateTickLines(){let{tick:e,label:t}=this,i=t.getSideFlag();this.tickLineGroupSelection.each(n=>{n.strokeWidth=e.width,n.stroke=e.color,n.x1=i*this.getTickSize(),n.x2=0})}calculateAvailableRange(){let{range:e}=this,t=Math.min(...e);return Math.max(...e)-t}calculateRangeWithBleed(){let{visibleRange:e}=this,t=1/(e[1]-e[0]);return kw(this.calculateAvailableRange()*t,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{let t=this.boundSeries.filter(s=>this.includeInvisibleDomains||s.isEnabled()).flatMap(s=>s.getDomain(this.direction)),{domain:i,clipped:n}=this.normaliseDataDomain(t);this.dataDomain={domain:this.reverse?[...i].reverse():i,clipped:n}}}getAxisTransform(){return{rotation:hs(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){let{crossLineGroup:e,axisGroup:t,gridGroup:i,translation:n,gridLineGroupSelection:s,gridPadding:o,gridLength:a}=this,{rotation:l}=this.calculateRotations(),c=this.label.getSideFlag(),d=Math.floor(n.x),u=Math.floor(n.y);e.setProperties({rotation:l,translationX:d,translationY:u}),t.datum=this.getAxisTransform(),i.setProperties({rotation:l,translationX:d,translationY:u}),s.each(h=>{h.x1=o,h.x2=-c*a+o})}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,t,i){this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?t:[],n=>n.append(new mr({tag:2})),n=>n.tickId),this.tickLineGroupSelection.update(t,n=>n.appendChild(new mr({tag:0})),n=>n.tickId),this.tickLabelGroupSelection.update(t.map(n=>this.getTickLabelProps(n,i)),n=>n.appendChild(new Xt({tag:1})),n=>n.tickId)}updateAxisLine(){let{line:e}=this,t=e.enabled?e.width:0;this.lineNode.setProperties({stroke:e.color,strokeWidth:t})}updateGridLines(e){let{gridLine:{style:t,width:i},gridPadding:n,gridLength:s}=this;s===0||t.length===0||this.gridLineGroupSelection.each((o,a,l)=>{let{stroke:c,lineDash:d}=t[l%t.length];o.setProperties({x1:n,x2:-e*s+n,fill:void 0,stroke:c,strokeWidth:i,lineDash:d})})}updateLabels(){let{label:e}=this;e.enabled&&this.tickLabelGroupSelection.each((t,i)=>{t.setProperties(i,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(e,t,i){let{parallel:n,maxWidth:s,maxHeight:o}=this.label,a=this.maxThickness,l=Math.round(this.calculateAvailableRange()/e.labelCount);return n&&([a,l]=[l,a]),e.ticks.forEach(c=>{let{text:d}=Xt.wrap(c.tickLabel,s??a,o??l,i,"hyphenate");c.tickLabel=d}),{tickData:e,index:t,autoRotation:0,terminate:!0}}updateTitle(e){let{rotation:t,title:i,_titleCaption:n,lineNode:s,tickLineGroup:o,tickLabelGroup:a}=this;if(!i){n.enabled=!1;return}let l=0;if(i.enabled&&e.anyTickVisible){let c=We.computeBBox([o,a,s]),d=t===0?c.width:c.height;l+=d+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(n,{spacing:l})}formatTick(e,t){var i,n;let{label:s,labelFormatter:o,fractionDigits:a,moduleCtx:{callbackCache:l}}=this;if(s.formatter){let c=a>0?e:String(e);return(i=l.call(s.formatter,{value:c,index:t,fractionDigits:a,formatter:o}))!=null?i:c}else if(o)return(n=l.call(o,e))!=null?n:String(e);return String(e)}formatDatum(e){return String(e)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,t,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new it(e,t,i,n))}clipGrid(e,t,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new it(e,t,i,n))}calculatePadding(e,t,i){let n=i?t:e;return[Math.abs(n*.01),Math.abs(n*.01)]}getTitleFormatterParams(){var e;let t=this.boundSeries.reduce((i,n)=>{let s=n.getKeys(this.direction),o=n.getNames(this.direction);for(let a=0;a<s.length;a++)i.push({key:s[a],name:o[a]});return i},[]);return{direction:this.direction,boundSeries:t,defaultValue:(e=this.title)==null?void 0:e.text}}normaliseDataDomain(e){return{domain:e,clipped:!1}}getLayoutState(){return H({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize()},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var e;return(e=this.axisContext)!=null||(this.axisContext=this.createAxisContext()),me(H({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:kt.is(this.scale),keys:()=>this.boundSeries.flatMap(e=>e.getKeys(this.direction)),scaleValueFormatter:e=>{var t,i;return(i=(t=this.scale).tickFormat)==null?void 0:i.call(t,{specifier:e})},scaleBandwidth:()=>{var e;return(e=this.scale.bandwidth)!=null?e:0},scaleConvert:e=>this.scale.convert(e),scaleInvert:e=>{var t,i;return(i=(t=this.scale).invert)==null?void 0:i.call(t,e)}}}animateReadyUpdate(e){let{animationManager:t}=this.moduleCtx,i=uw(this),n=vA(i);Ti(this.id,"axis-group",t,[this.axisGroup],n.group),Ti(this.id,"line",t,[this.lineNode],n.line),Ti(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(s,o)=>o.tickId,e),Ti(this.id,"tick-labels",t,[this.tickLabelGroupSelection],n.label,(s,o)=>o.tickId,e)}resetSelectionNodes(){let{gridLineGroupSelection:e,tickLineGroupSelection:t,tickLabelGroupSelection:i,lineNode:n}=this,s=uw(this);qi([this.axisGroup],CA()),qi([e,t],yA(s)),qi([i],xA()),qi([n],SA())}calculateUpdateDiff(e,t){let i=new Set,n=new Set,s={},o=Math.max(e.length,t.ticks.length);for(let a=0;a<o;a++){let l=t.ticks[a],c=e[a],d=l?.tickId;s[d??c]=l,c!==d&&(n.has(d)?n.delete(d):d&&i.add(d),i.has(c)?i.delete(c):c&&n.add(c))}return{changed:i.size>0||n.size>0,added:[...i.values()],removed:[...n.values()]}}isReversed(){return!!this.reverse}};Dp.defaultTickMinSpacing=50;x([_(Ze)],Dp.prototype,"nice",2);x([_(Ze,{optional:!0})],Dp.prototype,"reverse",2);x([_(uR)],Dp.prototype,"keys",2);x([_(Gt(r=>typeof r=="object","Title object"),{optional:!0})],Dp.prototype,"title",2);var lb=Dp,cb=class extends Vi{constructor(){super(...arguments),this.autoRotateAngle=335}};x([_(Ze,{optional:!0})],cb.prototype,"autoRotate",2);x([_(_p)],cb.prototype,"autoRotateAngle",2);var Bu=class extends lb{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(r){return this.updateDirection(),super.update(r)}calculateLayout(r){return this.updateDirection(),super.calculateLayout(r)}createAxisContext(){return me(H({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(r){OR(r,cw)}createLabel(){return new cb}};x([_(ge)],Bu.prototype,"thickness",2);x([_(zw)],Bu.prototype,"position",2);var dl=class extends Bu{constructor(r){super(r,new xa),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(r){this._paddingOverrideEnabled=!0,this.scale.paddingInner=r}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(r){this.scale.paddingOuter=r}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(r){let e=[],t=new Set;for(let i of r){let n=i instanceof Date?i.getTime():i;t.has(n)||(t.add(n),e.push(i))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){let r=this.boundSeries.map(e=>{var t;return(t=e.getBandScalePadding)==null?void 0:t.call(e)}).filter(e=>e!=null);r.length>0&&(this.scale.paddingInner=Math.min(...r.map(e=>e.inner)),this.scale.paddingOuter=Math.max(...r.map(e=>e.outer)))}return super.calculateDomain()}};dl.className="CategoryAxis";dl.type="category";x([_(ri)],dl.prototype,"groupPaddingInner",2);var EA=class{constructor(r="",e,t=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=r,this.parent=e,this.depth=e?e.depth+1:0,this.number=t}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((r,e)=>e!==this.number):[]}};function WN(r,e=!0){let t=new EA,i=0;return e&&r.forEach(n=>i=Math.max(i,n.labels.length)),r.forEach(n=>{if(e)for(;n.labels.length<i;)n.labels.unshift("");UN(t,n)}),t}function UN(r,e){let t=e.labels.slice().reverse(),i=t.length-1;t.forEach((n,s)=>{let o=r.children,a=o.find(c=>c.label===n),l=s!==i;if(a&&l)r=a;else{let c=new EA(n,r);c.number=o.length,o.push(c),l&&(r=c)}})}function zN(r,e,t){let i=e.number-r.number,n=t/i;e.change-=n,e.shift+=t,r.change+=n,e.prelim+=t,e.mod+=t}function jN(r,e,t){return e.getSiblings().indexOf(r.ancestor)>=0?r.ancestor:t}function KN(r){let e=r.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){let s=e[n];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}}function $N(r,e,t){let i=r.getLeftSibling();if(i){let n=r,s=r,o=i,a=s.getLeftmostSibling(),l=s.mod,c=n.mod,d=o.mod,u=a.mod;for(;o.nextRight()&&s.nextLeft();){o=o.nextRight(),s=s.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=r;let h=o.prelim+d-(s.prelim+l)+t;h>0&&(zN(jN(o,r,e),r,h),l+=h,c+=h),d+=o.mod,l+=s.mod,u+=a.mod,c+=n.mod}o.nextRight()&&!n.nextRight()?(n.thread=o.nextRight(),n.mod+=d-c):(s.nextLeft()&&!a.nextLeft()&&(a.thread=s.nextLeft(),a.mod+=l-u),e=r)}return e}function _A(r,e){let t=r.children;if(t.length){let i=t[0];t.forEach(o=>{_A(o,e),i=$N(o,i,e)}),KN(r);let n=(t[0].prelim+t[t.length-1].prelim)/2,s=r.getLeftSibling();s?(r.prelim=s.prelim+e,r.mod=r.prelim-n):r.prelim=n}else{let i=r.getLeftSibling();r.prelim=i?i.prelim+e:0}}var ET=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(r,e){let{x:t,y:i}=e(r);t>this.right&&(this.right=t),t<this.left&&(this.left=t),i>this.bottom&&(this.bottom=i),i<this.top&&(this.top=i)}};function TA(r,e,t){r.x=r.prelim+e,r.y=r.depth,t.update(r),r.children.forEach(i=>TA(i,e+r.mod,t))}function RA(r){let e=r.children,t=0;e.forEach(i=>{RA(i),i.children.length?t+=i.leafCount:t++}),r.leafCount=t,e.length?(r.subtreeLeft=e[0].subtreeLeft,r.subtreeRight=e[r.children.length-1].subtreeRight,r.x=(r.subtreeLeft+r.subtreeRight)/2):(r.subtreeLeft=r.x,r.subtreeRight=r.x)}function YN(r){let e=new XN;return _A(r,1),TA(r,-r.prelim,e),RA(r),e}var XN=class{constructor(){this.dimensions=new ET,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(r){this.dimensions.update(r,e=>({x:e.x,y:e.y})),r.children.length?this.nonLeafNodes.push(r):(this.leafCount++,this.leafNodes.push(r)),r.depth>this.depth&&(this.depth=r.depth),this.nodes.push(r)}resize(r,e,t=0,i=0,n=!1){let s=this.leafCount-1,o=this.depth,a=this.dimensions,l=1,c=1;if(r>0&&s){let p=(a.right-a.left)/s;l=r/s/p,n&&(l=-l)}if(e>0&&o){let p=(a.bottom-a.top)/o;c=e/o/p}let d=new ET;this.nodes.forEach(p=>{p.screenX=p.x*l,p.screenY=p.y*c,d.update(p,f=>({x:f.screenX,y:f.screenY}))});let u=-d.left,h=-d.top;this.nodes.forEach(p=>{p.screenX+=u+t,p.screenY+=h+i})}},AA=class extends Vi{constructor(){super(...arguments),this.grid=!1}};x([_(Ze)],AA.prototype,"grid",2);var Pu=class extends Bu{constructor(r){super(r,new xa),this.tickScale=new xa,this.line=new Wm,this.label=new AA,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;let{tickLineGroup:e,tickLabelGroup:t,gridLineGroup:i,tickScale:n,scale:s}=this;s.paddingOuter=.1,s.paddingInner=s.paddingOuter*2,this.range=s.range.slice(),this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=Ri.select(i,mr),this.axisLineSelection=Ri.select(e,mr),this.separatorSelection=Ri.select(e,mr),this.labelSelection=Ri.select(t,Xt)}updateRange(){let{range:r,visibleRange:e,scale:t}=this,i=(r[1]-r[0])/(e[1]-e[0]),n=i*e[0],s=r[0]-n;this.tickScale.range=t.range=[s,s+i],this.resizeTickTree()}resizeTickTree(){var r;let e=this.scale,t=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,i=this.tickTreeLayout,n=this.lineHeight;i&&i.resize(Math.abs(t[1]-t[0]),i.depth*n,(Math.min(t[0],t[1])||0)+((r=e.bandwidth)!=null?r:0)/2,-i.depth*n,t[1]-t[0]<0)}get lineHeight(){return this.label.fontSize*1.5}set gridLength(r){(this._gridLength&&!r||!this._gridLength&&r)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=r}get gridLength(){return this._gridLength}calculateDomain(){var r;let{direction:e}=this,t=[],i;this.boundSeries.filter(c=>c.visible).forEach(c=>{if(e==="x")if(i===void 0){let d=c.getDomain(e);t.push(d),i=typeof d[0]=="number"}else i&&t.push(c.getDomain(e));else t.push(c.getDomain(e))});let n=new Array().concat(...t),s=(r=Sa(n))!=null?r:n,o=this.reverse?[...s].reverse():s,{domain:a,clipped:l}=this.normaliseDataDomain(o);this.dataDomain={domain:a,clipped:l},this.scale.domain=a}normaliseDataDomain(r){let e=r.filter((n,s,o)=>o.indexOf(n)===s),t=WN(e);this.tickTreeLayout=YN(t);let i=e.slice();return i.push(""),this.tickScale.domain=i,this.resizeTickTree(),{domain:e,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){let{_titleCaption:r}=this;r.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;let{tickLabelLayout:r}=this.computedLayout;this.labelSelection.update(r).each((t,i)=>{t.setProperties(i)})}updateSeparators(){if(!this.computedLayout)return;let{separatorLayout:r}=this.computedLayout,{range:e}=this,t=1e-7;this.separatorSelection.update(r).each((n,s)=>{n.x1=s.x1,n.x2=s.x2,n.y1=s.y,n.y2=s.y,n.visible=s.y>=e[0]-t&&s.y<=e[1]+t,n.stroke=this.tick.color,n.fill=void 0,n.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;let{axisLineLayout:r}=this.computedLayout;this.axisLineSelection.update(r).each((t,i)=>{t.setProperties(me(H({},i),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=i.x,t.x2=i.x,t.y1=i.y1,t.y2=i.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color})}updateCategoryGridLines(){let{gridLength:r,gridLine:e,label:t,range:i,tickScale:n}=this,s=n.ticks(),o=t.getSideFlag(),a=this.gridLineSelection.update(r?s:[]);if(r){let{width:l,style:c}=e,d=c.length;a.each((u,h,p)=>{let f=Math.round(n.convert(h));u.x1=0,u.x2=-o*r,u.y1=f,u.y2=f,u.visible=f>=i[0]&&f<=i[1];let{stroke:g,lineDash:m}=c[p%d];u.stroke=g,u.strokeWidth=l,u.lineDash=m,u.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();let{scale:r,label:e,label:{parallel:t},moduleCtx:{callbackCache:i},range:n,title:s,title:{formatter:o=we=>we.defaultValue}={}}=this,a=r.range[0],l=r.range[1],d=Math.abs(l-a)/r.domain.length||0,u=hs(this.rotation),h=Math.abs(Math.cos(u))<1e-8,p=e.getSideFlag(),f=this.lineHeight,g=this.tickTreeLayout,m=r.ticks(),v=g?g.nodes:[],C=g?g.depth>1:!1,{defaultRotation:S,configuredRotation:b,parallelFlipFlag:T}=aC({rotation:e.rotation,parallel:t,regularFlipRotation:Kr(u-Math.PI/2),parallelFlipRotation:Kr(u)}),A=[],E=we=>({fill:we.fill,fontFamily:we.fontFamily,fontSize:we.fontSize,fontStyle:we.fontStyle,fontWeight:we.fontWeight,rotation:we.rotation,rotationCenterX:we.rotationCenterX,rotationCenterY:we.rotationCenterY,text:we.text,textAlign:we.textAlign,textBaseline:we.textBaseline,translationX:we.translationX,translationY:we.translationY,visible:we.visible,x:we.x,y:we.y}),N=new Map,M=0,k=new Xt,W=(we,Ct)=>{var dt;if(k.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:T===-1?"bottom":"hanging",translationX:we.screenY-e.fontSize*.25,translationY:we.screenX}),Ct===0){if(!(s?.enabled&&m.length>0))return!1;let st=i.call(o,this.getTitleFormatterParams());k.setProperties({fill:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,text:st,textBaseline:"hanging",translationX:we.screenY-e.fontSize*.25,translationY:we.screenX})}else{if(!(we.screenX>=n[0]&&we.screenX<=n[1]))return!1;e.formatter?k.text=(dt=i.call(e.formatter,{value:String(we.label),index:Ct}))!=null?dt:String(we.label):k.text=String(we.label)}return!0};v.forEach((we,Ct)=>{if(W(we,Ct)){let ii=k.computeTransformedBBox();ii&&(N.set(Ct,ii),!we.children.length&&ii.width>M&&(M=ii.width))}});let ee=p*e.padding,te=this.label.grid,le=[];v.forEach((we,Ct)=>{let dt=W(we,Ct),ii=Ct;k.x=ee,k.rotationCenterX=ee;let st=!we.children.length;if(st){k.rotation=b,k.textAlign="end",k.textBaseline="middle";let Lt=N.get(ii);Lt&&Lt.height>d&&(dt=!1,N.delete(ii))}else{k.translationX-=M-f+this.label.padding;let Lt=we.leafCount*d,Hn=N.get(ii);Hn&&Hn.width>Lt?(dt=!1,N.delete(ii)):h?k.rotation=S:k.rotation=-Math.PI/2}if(we.parent&&C){let Lt=st?we.screenX-d/2:we.screenX-we.leafCount*d/2;if(st)(we.number!==we.children.length-1||te)&&le.push({y:Lt,x1:0,x2:-M-this.label.padding*2});else{let Hn=-M-this.label.padding*2+we.screenY;le.push({y:Lt,x1:Hn+f,x2:Hn})}}let bi;if(dt){let Lt=k.computeTransformedBBox();Lt&&N.set(Ct,Lt),bi=me(H({},E(k)),{visible:dt})}else N.delete(Ct),bi={visible:dt};A.push(bi)});let Ye=0;le.forEach(we=>Ye=Math.min(Ye,we.x2)),le.push({y:Math.max(a,l),x1:0,x2:Ye});let Xe=[],Ke=[],Je=1e-7;le.forEach(we=>{if(we.y>=n[0]-Je&&we.y<=n[1]+Je){let{x1:Ct,x2:dt,y:ii}=we,st=new it(Math.min(Ct,dt),ii,Math.abs(Ct-dt),0);Ke.push(st),Xe.push({x1:Ct,x2:dt,y:ii})}});let et=[],St=[],wt=g?g.depth+1:1;for(let we=0;we<wt;we++){let Ct=m.length>0&&(we===0||te&&C),dt=we>0?-M-this.label.padding*2-(we-1)*f:0,ii=new it(dt,Math.min(...n),0,Math.abs(n[1]-n[0]));St.push(ii),et.push({x:dt,y1:n[0],y2:n[1],visible:Ct})}let jt=we=>{let Ct=new mo,{rotation:dt,translationX:ii,translationY:st,rotationCenterX:bi,rotationCenterY:Lt}=this.getAxisTransform();return mo.updateTransformMatrix(Ct,1,1,dt,ii,st,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:bi,rotationCenterY:Lt}),Ct.transformBBox(we)},er=it.merge([...N.values(),...Ke,...St]);return{bbox:jt(er),tickLabelLayout:A,separatorLayout:Xe,axisLineLayout:et}}calculateLayout(){let{axisLineLayout:r,separatorLayout:e,tickLabelLayout:t,bbox:i}=this.computeLayout();return this.computedLayout={axisLineLayout:r,separatorLayout:e,tickLabelLayout:t},{bbox:i,primaryTickCount:void 0}}};Pu.className="GroupedCategoryAxis";Pu.type="grouped-category";x([_(yt,{optional:!0})],Pu.prototype,"labelColor",2);function qN(r){return new Promise(e=>{setTimeout(()=>e(void 0),r)})}var ZN=class{constructor(){this.cache=new WeakMap}call(r,...e){let t,i=this.cache.get(r),n=()=>{try{let s=r(...e);return i&&t!=null&&i.set(t,s),s}catch(s){be.warnOnce("User callback errored, ignoring",s);return}};try{t=JSON.stringify(e)}catch{return n()}return i==null&&(i=new Map,this.cache.set(r,i)),i.has(t)?i.get(t):n()}invalidateCache(){this.cache=new WeakMap}},QN=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(r){return new Promise(e=>{this.acquireQueue.push([r,e]),this.available&&this.dispatchNext()})}acquireImmediately(r){return ne(this,null,function*(){return this.available?(yield this.acquire(r),!0):!1})}waitForClearAcquireQueue(){return ne(this,null,function*(){return this.acquire(()=>ne(this,null,function*(){}))})}dispatchNext(){return ne(this,null,function*(){var r,e;this.available=!1;let[t,i]=(r=this.acquireQueue.shift())!=null?r:[];for(;t;){try{yield t(),i?.()}catch(n){be.error("mutex callback error",n),i?.()}[t,i]=(e=this.acquireQueue.shift())!=null?e:[]}this.available=!0})}},DA=class{constructor(){this.eventListeners=new Map}addEventListener(r,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");let t=this.eventListeners.get(r);t?t.add(e):this.eventListeners.set(r,new Set([e]))}removeEventListener(r,e){var t;(t=this.eventListeners.get(r))==null||t.delete(e),this.eventListeners.size===0&&this.eventListeners.delete(r)}hasEventListener(r){return this.eventListeners.has(r)}clearEventListeners(){this.eventListeners.clear()}fireEvent(r){var e;(e=this.eventListeners.get(r.type))==null||e.forEach(t=>t(r))}};function JN(r){return OA((e,t)=>requestAnimationFrame(e),r)}function ek(r){return OA((e,t=0)=>setTimeout(e,t),r)}function OA(r,e){let t=0,i=!1,n,s,o=()=>i,a=()=>{i=!1,s?.(),s=void 0,n=void 0,t>0&&r(l)},l=()=>{let c=t;t=0,i=!0;let d=e({count:c});if(!d){a();return}d.then(a).catch(a)};return{schedule(c){t===0&&!o()&&r(l,c),t++},await(){return ne(this,null,function*(){if(o())for(n==null&&(n=new Promise(c=>{s=c}));o();)yield n})}}}var Sp=class{static init(r){var e;if(typeof ResizeObserver<"u")this.resizeObserver=new ResizeObserver(t=>{for(let i of t){let{width:n,height:s}=i.contentRect;this.checkSize(this.elements.get(i.target),i.target,n,s)}});else{let t=()=>{this.elements.forEach((i,n)=>{this.checkClientSize(n,i)})};this.pollerHandler=(e=r.defaultView)==null?void 0:e.setInterval(t,100)}this.ownerDocument=r,this.ready=!0,this.documentReady=r.readyState!=="loading",!this.documentReady&&(this.readyEventFn=()=>{let t=r.readyState!=="loading",i=this.documentReady;if(this.documentReady=t,!!t&&t!==i){for(let[n,s]of this.queuedObserveRequests)this.observe(n,s);this.queuedObserveRequests.length=0}},r.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var r,e;this.pollerHandler!=null&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&((r=this.ownerDocument)==null||r.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),(e=this.resizeObserver)==null||e.disconnect(),this.resizeObserver=void 0,this.ready=!1,this.ownerDocument=void 0}static checkSize(r,e,t,i){r&&(!r.size||t!==r.size.width||i!==r.size.height)&&(r.size={width:t,height:i},r.cb(r.size,e))}static observe(r,e){if(this.ready||this.init(r.ownerDocument),!this.documentReady){this.queuedObserveRequests.push([r,e]);return}this.unobserve(r,!1),this.resizeObserver&&this.resizeObserver.observe(r),this.elements.set(r,{cb:e})}static unobserve(r,e=!0){this.resizeObserver&&this.resizeObserver.unobserve(r),this.elements.delete(r),this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t===r),e&&this.elements.size===0&&this.destroy()}static checkClientSize(r,e){var t,i;let n=(t=r.clientWidth)!=null?t:0,s=(i=r.clientHeight)!=null?i:0;this.checkSize(e,r,n,s)}};Sp.elements=new Map;Sp.ready=!1;Sp.documentReady=!1;Sp.queuedObserveRequests=[];var FA=class{constructor(){this.range="tooltip"}};x([_(Di(["tooltip","node"],"a range"))],FA.prototype,"range",2);var Tm=(r=>(r[r.FULL=0]="FULL",r[r.PROCESS_DATA=1]="PROCESS_DATA",r[r.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",r[r.SERIES_UPDATE=3]="SERIES_UPDATE",r[r.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",r[r.SCENE_RENDER=5]="SCENE_RENDER",r[r.NONE=6]="NONE",r))(Tm||{}),KS=class{constructor(r){this.type=r,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(r){this.type==="discrete"?this.discreteDomain.add(r):this.type==="continuous"&&(this.continuousDomain[0]>r&&(this.continuousDomain[0]=r),this.continuousDomain[1]<r&&(this.continuousDomain[1]=r))}getDomain(){if(this.type==="discrete")return this.discreteDomain;if(this.type==="continuous")return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}};function Xg(r,e=[1/0,-1/0]){for(let t of r)typeof t=="number"&&(t<e[0]&&(e[0]=t),t>e[1]&&(e[1]=t));return e}function tk(r){return r.map(e=>e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"?e:typeof e=="object"?JSON.stringify(e):e).join("-")}function ik(r){return Number.isInteger(r)?r:Math.abs(r)>1e4?Math.trunc(r):Math.round(r*1e4)/1e4}function rk(r){if(r===void 0)return[];let[e,t]=r;return e=+e,t=+t,e===0&&t===0?[0,1]:e===1/0&&t===-1/0?[]:(e===1/0&&(e=0),t===-1/0&&(t=0),Fn(e)&&Fn(t)?[e,t]:[])}function ln(r,e){var t;let i=rk(r);if(i.length===0)return i;let[n,s]=i;if(n===s){let[o,a]=(t=e?.calculatePadding(n,s,e.isReversed()))!=null?t:[1,1];n-=o,s+=a}return[n,s]}var vu=Symbol("invalid"),PA=class{constructor(r){let{props:e,mode:t="standalone"}=r;this.mode=t;let i=!0;for(let o of e){if(o.type==="key"&&!i)throw new Error("AG Charts - internal config error: keys must come before values.");o.type==="value"&&i&&(i=!1)}this.opts=H({dataVisible:!0},r),this.keys=e.filter(o=>o.type==="key").map((o,a)=>me(H({},o),{index:a,missing:0})),this.values=e.filter(o=>o.type==="value").map((o,a)=>me(H({},o),{index:a,missing:0})),this.aggregates=e.filter(o=>o.type==="aggregate").map((o,a)=>me(H({},o),{index:a})),this.groupProcessors=e.filter(o=>o.type==="group-value-processor").map((o,a)=>me(H({},o),{index:a})),this.propertyProcessors=e.filter(o=>o.type==="property-value-processor").map((o,a)=>me(H({},o),{index:a})),this.reducers=e.filter(o=>o.type==="reducer").map((o,a)=>me(H({},o),{index:a})),this.processors=e.filter(o=>o.type==="processor").map((o,a)=>me(H({},o),{index:a}));for(let o of this.values)if(o.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(o)}`);let n=({matchGroupIds:o})=>{for(let a of o??[])if(!this.values.some(l=>l.groupId===a))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${a}).`)},s=({matchIds:o})=>{for(let a of o??[])if(!this.values.some(l=>{var c;return(c=l.ids)==null?void 0:c.some(([d,u])=>d===a[0]&&u===a[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${a}).`)};for(let o of[...this.groupProcessors,...this.aggregates])s(o),n(o)}resolveProcessedDataIndexById(r,e){var t;let{index:i,def:n}=(t=this.resolveProcessedDataDefById(r,e))!=null?t:{};return{index:i,def:n}}resolveProcessedDataIndicesById(r,e){return this.resolveProcessedDataDefsById(r,e).map(({index:t,def:i})=>({index:t,def:i}))}resolveProcessedDataDefById(r,e){return this.resolveProcessedDataDefsById(r,e)[0]}resolveProcessedDataDefsByIds(r,e){let t=[];for(let i of e)t.push([i,this.resolveProcessedDataDefsById(r,i)]);return t}resolveProcessedDataDefsValues(r,{keys:e,values:t}){let i={};for(let[n,[{index:s,def:o}]]of r){let a=o.type==="key"?e:t;i[n]=a[s]}return i}resolveProcessedDataDefsById(r,e){let{keys:t,values:i,aggregates:n,groupProcessors:s,reducers:o}=this,a=d=>{let{ids:u,scopes:h}=d;return u==null||r!=null&&!h?.some(p=>p===r.id)?!1:u.some(([p,f])=>p===r.id&&(typeof e=="string"?f===e:e.test(f)))},l=[t,i,n,s,o],c=[];for(let d of l)c.push(...d.filter(a).map(u=>({index:u.index,def:u})));if(c.length>0)return c;throw new Error(`AG Charts - didn't find property definition for [${e}, ${r.id}]`)}getDomain(r,e,t="value",i){var n,s,o,a;let l;try{l=this.resolveProcessedDataIndicesById(r,e)}catch(h){if(typeof e!="string"&&/didn't find property definition/.test(h.message))return[];throw h}let c;switch(t){case"key":c="keys";break;case"value":c="values";break;case"aggregate":c="aggValues";break;case"group-value-processor":c="groups";break;default:return[]}let d=(s=(n=i.domain[c])==null?void 0:n[l[0].index])!=null?s:[];if(l.length===1)return d;let u=[...d];for(let h of l.slice(1))Xg((a=(o=i.domain[c])==null?void 0:o[h.index])!=null?a:[],u);return u}processData(r,e){let{opts:{groupByKeys:t,groupByFn:i},aggregates:n,groupProcessors:s,reducers:o,processors:a,propertyProcessors:l}=this,c=performance.now();for(let h of[...this.keys,...this.values])h.missing=0;if(t&&this.keys.length===0)return;let d=this.extractData(r,e);t?d=this.groupData(d):i&&(d=this.groupData(d,i(d))),s.length>0&&this.postProcessGroups(d),n.length>0&&this.aggregateData(d),l.length>0&&this.postProcessProperties(d),o.length>0&&this.reduceData(d),a.length>0&&this.postProcessData(d);for(let h of[...this.keys,...this.values])r.length>0&&h.missing>=r.length&&be.warnOnce(`the key '${h.property}' was not found in any data element.`);let u=performance.now();return d.time=u-c,_i.check(!0,"data-model")&&nk(d),d}valueGroupIdxLookup({matchGroupIds:r,matchIds:e}){return this.values.map((t,i)=>({def:t,index:i})).filter(({def:t})=>r&&(t.groupId==null||!r.includes(t.groupId))?!1:e?t.ids==null?!1:e.some(([i,n])=>{var s;return(s=t.ids)==null?void 0:s.some(([o,a])=>o===i&&a===n)}):!0).map(({index:t})=>t)}valueIdxLookup(r,e){let t=r==null||r.length===0,i=a=>{if(a==null)return!0;let c=a==null||a.length===0;return t===c?!0:a?.some(d=>r.includes(d))},n=typeof e=="string"?e:e.id,s=([a,l])=>i([a])&&l===n,o=this.values.findIndex(a=>{var l;return i(a.scopes)&&(((l=a.ids)==null?void 0:l.some(c=>s(c)))||a.property===n||a.id===n)});if(o>=0)return o;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(r)}`)}extractData(r,e){var t,i,n,s,o,a;let{keys:l,values:c,opts:{dataVisible:d}}=this,{dataDomain:u,processValue:h,scopes:p,allScopesHaveSameDefs:f}=this.initDataDomainProcessor(),g=new Array(d?r.length:0),m=0,v=0;for(let[S,b]of r.entries()){let T={},A=p.size>0?new Set(p):void 0,E=d?new Array(l.length):void 0,N=0,M;for(let te of l){if(M=h(te,b,M),M===vu)break;E&&(E[N++]=M)}if(M===vu)continue;let k=d&&c.length>0?new Array(c.length):void 0,W,ee={};for(let te of e??[])ee[te.id]=te;for(let[te,le]of c.entries()){for(let Ye of(t=le.scopes)!=null?t:p){let Xe=ee[Ye],Ke=(i=Xe?.data[S])!=null?i:b;W=h(le,Ke,W),!(W===vu||!k)&&(Xe!==void 0&&((s=T[n=Xe.id])!=null||(T[n]={}),T[Xe.id][le.property]=W),le.useScopedValues?((o=k[te])!=null||(k[te]={}),k[te][Ye]=W):k[te]=W)}if(W===vu){if(f)break;for(let Ye of(a=le.scopes)!=null?a:p)A?.delete(Ye);if(A?.size===0)break}}if(!(W===vu&&f)&&A?.size!==0&&d){let te={datum:H(H({},b),T),keys:E,values:k};!f&&A&&A.size<p.size&&(v++,te.validScopes=[...A]),g[m++]=te}}g.length=m;let C=S=>{let b=u.get(S).getDomain();return Array.isArray(b)&&b[0]>b[1]?[]:[...b]};return{type:"ungrouped",input:{count:r.length},data:g,domain:{keys:l.map(S=>C(S)),values:c.map(S=>C(S))},defs:{allScopesHaveSameDefs:f,keys:l,values:c},partialValidDataCount:v,time:0}}groupData(r,e){var t,i,n,s;let o=new Map;for(let d of r.data){let{keys:u,values:h,datum:p,validScopes:f}=d,g=e?e(d):u,m=tk(g);if(o.has(m)){let v=o.get(m);if(v.values.push(h),v.datum.push(p),f!=null)for(let C=0;C<((i=(t=v.validScopes)==null?void 0:t.length)!=null?i:0);C++){let S=(n=v.validScopes)==null?void 0:n[C];f.some(b=>b===S)||(s=v.validScopes)==null||s.splice(C,1)}}else o.set(m,{keys:g,values:[h],datum:[p],validScopes:f})}let a=new Array(o.size),l=new Array(o.size),c=0;for(let[,{keys:d,values:u,datum:h,validScopes:p}]of o.entries())p?.length!==0&&(l[c]=d,a[c++]={keys:d,values:u,datum:h,validScopes:p});return me(H({},r),{type:"grouped",data:a,domain:me(H({},r.domain),{groups:l})})}aggregateData(r){var e,t,i,n,s,o,a,l;let{aggregates:c}=this;if(!c)return;let d=c.map(()=>[1/0,-1/0]),u=c.map(g=>this.valueGroupIdxLookup(g)),h=c.map(g=>g.aggregateFunction),p=c.map(g=>g.groupAggregateFunction),f=c.map(g=>g.finalFunction);for(let g of r.data){let{values:m}=g,{validScopes:v}=g;(e=g.aggValues)!=null||(g.aggValues=new Array(u.length)),r.type==="ungrouped"&&(m=[m]);let C=0;for(let S of u){if(!((t=v?.some(E=>{var N;return(N=c[C].matchScopes)==null?void 0:N.some(M=>E===M)}))!=null?t:!0)){C++;continue}let T=(n=(i=p[C])==null?void 0:i.call(p))!=null?n:Xg([]);for(let E of m){let N=S.map(k=>E[k]),M=h[C](N,g.keys);M&&(T=(o=(s=p[C])==null?void 0:s.call(p,M,T))!=null?o:Xg(M,T))}let A=((l=(a=f[C])==null?void 0:a.call(f,T))!=null?l:T).map(E=>ik(E));Xg(A,d[C]),g.aggValues[C++]=A}}r.domain.aggValues=d}postProcessGroups(r){var e,t,i,n,s;let{groupProcessors:o}=this;if(!o)return;let a=new Set,l=new Map,c=new Map,d=new Map;for(let h of o){let p=this.valueGroupIdxLookup(h);c.set(h,p),d.set(h,h.adjust());for(let f of p){let g=this.values[f];a.add(f),l.set(f,new KS(g.valueType==="category"?"discrete":"continuous"))}}let u=h=>{var p;for(let f of a)(p=l.get(f))==null||p.extend(h[f])};for(let h of r.data){for(let p of o){if(!((t=(e=h.validScopes)==null?void 0:e.some(v=>{var C;return(C=p.matchScopes)==null?void 0:C.some(S=>v===S)}))!=null?t:!0))continue;let g=(i=c.get(p))!=null?i:[],m=(s=(n=d.get(p))==null?void 0:n())!=null?s:()=>{};if(r.type==="grouped"){for(let v of h.values)v&&m(v,g);continue}h.values&&m(h.values,g)}if(r.type==="grouped")for(let p of h.values)u(p);else u(h.values)}for(let[h,p]of l)r.domain.values[h]=[...p.getDomain()]}postProcessProperties(r){let{propertyProcessors:e}=this;if(e)for(let{adjust:t,property:i,scopes:n}of e)t()(r,this.valueIdxLookup(n??[],i))}reduceData(r){var e,t,i;let{reducers:n}=this,s=n.map(l=>l.scopes),o=n.map(l=>l.reducer()),a=n.map(l=>l.initialValue);for(let l of r.data){let c=0;for(let d of o){if(!((t=(e=l.validScopes)==null?void 0:e.some(h=>{var p;return(p=s[c])==null?void 0:p.some(f=>h===f)}))!=null?t:!0)){c++;continue}a[c]=d(a[c],l),c++}}for(let l=0;l<a.length;l++)(i=r.reduced)!=null||(r.reduced={}),r.reduced[n[l].property]=a[l]}postProcessData(r){var e;let{processors:t}=this;for(let i of t)(e=r.reduced)!=null||(r.reduced={}),r.reduced[i.property]=i.calculate(r)}initDataDomainProcessor(){var r;let{keys:e,values:t}=this,i=new Set;for(let h of t)for(let p of(r=h.scopes)!=null?r:[])i.add(p);let n=i.size,s=new Map,o=new Map,a=!0,l=(h,p,f=s)=>{var g;p==="category"?f.set(h,new KS("discrete")):(f.set(h,new KS("continuous")),a&&(a=((g=h.scopes)!=null?g:[]).length===n))},c=()=>{e.forEach(h=>l(h,h.valueType)),t.forEach(h=>l(h,h.valueType))};c();let d=this.buildAccessors(...e,...t);return{dataDomain:s,processValue:(h,p,f)=>{var g,m,v,C;let S=h.property in d,b=!1,T;if(S){try{T=d[h.property](p)}catch{}b=T!==void 0}else b=h.property in p,T=b?p[h.property]:h.missingValue;h.forceValue!=null&&(T=b&&Lm(T)?-1*h.forceValue:h.forceValue,b=!0);let A="missingValue"in h;if(!b&&!A&&h.missing++,s.has(h)||c(),b&&!((m=(g=h.validation)==null?void 0:g.call(h,T,p))!=null?m:!0))if("invalidValue"in h)T=h.invalidValue;else return this.mode!=="integrated"&&be.warnOnce(`invalid value of type [${typeof T}] ignored:`,`[${T}]`),vu;return h.processor&&(o.has(h)||o.set(h,h.processor()),T=(v=o.get(h))==null?void 0:v(T,f!==vu?f:void 0)),(C=s.get(h))==null||C.extend(T),T},initDataDomain:c,scopes:i,allScopesHaveSameDefs:a}}buildAccessors(...r){let e={};if(this.mode==="integrated")return e;for(let t of r){if(!(t.property.indexOf(".")>=0||t.property.indexOf("[")>=0))continue;let n;t.property.startsWith("[")?n=`return datum${t.property};`:n=`return datum.${t.property};`,e[t.property]=new Function("datum",n)}return e}};function nk(r){var e,t;let i=(n,s)=>{s.length>0&&(be.log(`DataModel.processData() - ${n}`),be.table(s))};if(be.log("DataModel.processData() - processedData",r),i("Key Domains",r.domain.keys),i("Group Domains",(e=r.domain.groups)!=null?e:[]),i("Value Domains",r.domain.values),i("Aggregate Domains",(t=r.domain.aggValues)!=null?t:[]),r.type==="grouped"){let n=r.data.reduce((s,o)=>{var a,l;let c=(a=o.keys)!=null?a:[],d=(l=o.aggValues)!=null?l:[],u=o.keys.map(()=>{}),h=d?.map(()=>{});return s.push(...o.values.map((p,f)=>[...f===0?c:u,...p??[],...f==0?d:h])),s},[]);i("Values",n)}else{let n=r.data.reduce((s,o)=>{var a;let l=(a=o.aggValues)!=null?a:[];return s.push([...o.keys,...o.values,...l]),s},[]);i("Values",n)}}var IA=class{constructor(r){this.mode=r,this.debug=_i.create(!0,"data-model"),this.requested=[],this.status="setup"}request(r,e,t){return ne(this,null,function*(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((i,n)=>{this.requested.push({id:r,opts:t,data:e,resultCb:i,reject:n})})})}execute(){return ne(this,null,function*(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let{valid:r,invalid:e}=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",r);let t=this.mergeRequested(r);this.debug("DataController.execute() - merged",t);let i=_i.check(!0,"data-model");i&&(window.processedData=[]);let n=r.some(s=>s.data!=null);for(let{opts:s,data:o,resultCbs:a,rejects:l,ids:c}of t){let d=n||s.props.some(u=>{var h;return u.type!=="value"&&u.type!=="key"?!1:(h=u.useScopedValues)!=null?h:!1});try{let u=new PA(me(H({},s),{mode:this.mode})),h=u.processData(o,r);i&&window.processedData.push(h),h&&h.partialValidDataCount===0?a.forEach((p,f)=>{let g=c[f],m=h;d&&(m=this.extractScopedData(g,h)),p({dataModel:u,processedData:m})}):h?this.splitResult(u,h,c,a):l.forEach(p=>p(new Error("AG Charts - no processed data generated")))}catch(u){l.forEach(h=>h(u))}}e.forEach(({error:s,reject:o})=>o(s))})}extractScopedData(r,e){let t=n=>Array.isArray(n)?n.map(t):H(H({},n),n[r]),i=n=>{var s;return Array.isArray(n)?n.map(i):(s=n?.[r])!=null?s:n};return me(H({},e),{data:e.data.map(n=>me(H({},n),{datum:t(n.datum),values:n.values.map(i)}))})}validateRequests(r){let e=[],t=[];for(let[i,n]of r.entries())i>0&&n.data.length!==r[0].data.length&&n.opts.groupByData===!1?t.push(me(H({},n),{error:new Error("all series[].data arrays must be of the same length and have matching keys.")})):e.push(n);return{valid:e,invalid:t}}mergeRequested(r){let e=[],t=l=>l.filter(c=>c.type==="key").map(c=>c.property).join(";"),i=({opts:l,data:c})=>d=>(l.groupByData===!1||d[0].data===c)&&d[0].opts.groupByKeys===l.groupByKeys&&d[0].opts.dataVisible===l.dataVisible&&d[0].opts.groupByFn===l.groupByFn&&t(d[0].opts.props)===t(l.props),n=l=>c=>{var d;if(c.type!==l.type)return!1;let u=(d=ya(c,l))!=null?d:{};return delete u.scopes,delete u.id,delete u.ids,"useScopedValues"in u&&delete u.useScopedValues,Object.keys(u).length===0},s=l=>{var c;if(l.type!=="key"&&l.type!=="value")return;let d=new Set((c=l.scopes)!=null?c:[]);l.useScopedValues=d.size>1},o=l=>me(H({},l[0]),{props:l.reduce((c,d)=>{var u,h,p,f,g,m;for(let v of d.props){v.id!=null&&((u=v.ids)!=null||(v.ids=[]),(h=v.scopes)==null||h.forEach(S=>{var b;return(b=v.ids)==null?void 0:b.push([S,v.id])}));let C=c.find(n(v));if(!C){s(v),c.push(v);continue}(p=C.scopes)!=null||(C.scopes=[]),C.scopes.push(...(f=v.scopes)!=null?f:[]),s(v),!(C.type!=="key"&&C.type!=="value")&&((m=C.ids)==null||m.push(...(g=v.ids)!=null?g:[]))}return c},[])}),a=l=>({ids:l.map(({id:c})=>c),resultCbs:l.map(({resultCb:c})=>c),rejects:l.map(({reject:c})=>c),data:l[0].data,opts:o(l.map(({opts:c})=>c))});for(let l of r){let c=e.find(i(l));c?c.push(l):e.push([l])}return e.map(a)}splitResult(r,e,t,i){for(let n=0;n<t.length;n++){let s=t[n],o=i[n];o({dataModel:r,processedData:me(H({},e),{data:e.data.filter(({validScopes:a})=>a==null||a.some(l=>l===s))})})}}},RC=class{constructor(){this.registeredListeners=new Map}addListener(r,e,t){let i={symbol:Symbol(r),handler:e,meta:t};return this.registeredListeners.has(r)?this.registeredListeners.get(r).push(i):this.registeredListeners.set(r,[i]),()=>this.removeListener(i.symbol)}removeListener(r){for(let[e,t]of this.registeredListeners.entries()){let i=t.findIndex(n=>n.symbol===r);if(i>=0){t.splice(i,1),t.length===0&&this.registeredListeners.delete(e);break}}}dispatch(r,...e){for(let t of this.getListenersByType(r))try{t.handler(...e)}catch(i){be.errorOnce(i)}}dispatchWrapHandlers(r,e,...t){for(let i of this.getListenersByType(r))try{e(i.handler,i.meta,...t)}catch(n){be.errorOnce(n)}}getListenersByType(r){var e;return(e=this.registeredListeners.get(r))!=null?e:[]}},Um=class{constructor(){this.listeners=new RC}addListener(r,e,t){return this.listeners.addListener(r,e,t)}removeListener(r){this.listeners.removeListener(r)}},_T=[!0,"animation"],MA=class extends Um{constructor(r,e){super(),this.interactionManager=r,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new TT,this.debug=_i.create(..._T),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(r){var e=r,{disableInteractions:t=!0,immutable:i=!0}=e,n=In(e,["disableInteractions","immutable"]),s,o;let{batch:a}=this;try{if(n.id!=null&&a.controllers.has(n.id)){if(!i)return a.controllers.get(n.id).reset(n);a.controllers.get(n.id).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${n.id}`),this.batch.skip()}}catch(d){this.failsafeOnError(d);return}let l=(s=n.id)!=null?s:Math.random().toString(),c=this.isSkipped();return c&&this.debug("AnimationManager - skipping animation"),new WR(me(H({},n),{id:l,skip:c,autoplay:this.isPlaying?n.autoplay:!1,duration:(o=n.duration)!=null?o:this.defaultDuration,onPlay:d=>{var u;a.controllers.set(l,d),this.requestAnimation(),t&&this.interactionManager.pause("animation"),(u=n.onPlay)==null||u.call(d,d)},onStop:d=>{var u;a.controllers.delete(l),t&&this.interactionManager.resume("animation"),(u=n.onStop)==null||u.call(d,d)}}))}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");for(let r of this.batch.controllers.values())try{r.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");for(let r of this.batch.controllers.values())try{r.pause()}catch(e){this.failsafeOnError(e)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()");for(let r of this.batch.controllers.values())try{r.stop()}catch(e){this.failsafeOnError(e,!1)}}stopByAnimationId(r){var e;try{r!=null&&this.batch.controllers.has(r)&&((e=this.batch.controllers.get(r))==null||e.stop())}catch(t){this.failsafeOnError(t);return}}stopByAnimationGroupId(r){for(let e of this.batch.controllers.values())e.groupId===r&&this.stopByAnimationId(e.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(r=!0){this.skipAnimations=r}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){_i.check(..._T)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(r){this.requestId=requestAnimationFrame(r)}requestAnimation(){if(!this.batch.isActive()||this.requestId!==null)return;let r,e=t=>ne(this,null,function*(){let i=()=>ne(this,null,function*(){let n=t-(r??t);r=t,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size});for(let s of this.batch.controllers.values())try{s.update(n)}catch(o){this.failsafeOnError(o)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:n})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(i):yield this.chartUpdateMutex.acquire(i),this.batch.isActive()&&this.scheduleAnimationFrame(e)});this.scheduleAnimationFrame(e)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(r,e=!0){be.error("Error during animation, skipping animations",r),e&&this.cancelAnimation()}startBatch(r){this.debug(`AnimationManager - startBatch() with skipAnimations=${r}.`),this.reset(),this.batch.destroy(),this.batch=new TT,r===!0&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}},TT=class{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(r=!0){if(this.skipAnimations===!1&&r===!0){for(let e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=r}isSkipped(){return this.skipAnimations}destroy(){}},LA=class extends Um{legendItemClick(r,e,t,i){let n={type:"legend-item-click",series:r,itemId:e,enabled:t,legendItemName:i};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(r,e,t,i,n){let s={type:"legend-item-double-click",series:r,itemId:e,enabled:t,legendItemName:n,numVisibleItems:i};this.listeners.dispatch("legend-item-double-click",s)}axisHover(r,e){let t={type:"axis-hover",axisId:r,direction:e};this.listeners.dispatch("axis-hover",t)}},NA=class{constructor(r){this.states={},this.element=r}updateCursor(r,e){delete this.states[r],e!=null&&(this.states[r]={style:e}),this.applyStates()}applyStates(){let r="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:t}])=>r=t),this.element.style.cursor=r}getCursor(){return this.element.style.cursor}},kA=class extends Um{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(r,e){this.highlightStates.delete(r),e!=null&&this.highlightStates.set(r,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(r,e){this.pickedStates.delete(r),e!=null&&this.pickedStates.set(r,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){let{activeHighlight:r}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,r)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:r})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(r,e){return r===e||r?.series===e?.series&&r?.itemId===e?.itemId&&r?.datum===e?.datum}},RT=["pagehide","mousemove","mouseup"],AT=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"],sk=`
.ag-chart-wrapper {
    touch-action: none;
}
`,db=class qg extends Um{constructor(e,t,i){super(),this.eventHandler=n=>this.processEvent(n),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=t.body,this.element=e,this.window=i;for(let n of AT)n.startsWith("touch")?e.addEventListener(n,this.eventHandler,{passive:!0}):n==="wheel"?e.addEventListener(n,this.eventHandler,{passive:!1}):e.addEventListener(n,this.eventHandler);for(let n of RT)this.window.addEventListener(n,this.eventHandler);qg.interactionDocuments.includes(t)||($w(t,sk),qg.interactionDocuments.push(t))}destroy(){for(let e of RT)this.window.removeEventListener(e,this.eventHandler);for(let e of AT)this.element.removeEventListener(e,this.eventHandler)}resume(e){this.pausers[e]--}pause(e){this.pausers[e]++}processEvent(e){let t=this.decideInteractionEventTypes(e);t.length>0&&this.dispatchEvent(e,t).catch(i=>be.errorOnce(i))}dispatchEvent(e,t){return ne(this,null,function*(){let i=this.calculateCoordinates(e);if(i==null)return;let n=Object.entries(this.pausers).filter(([,s])=>s>0).map(([s])=>s);for(let s of t)this.listeners.dispatchWrapHandlers(s,(o,a,l)=>{var c;n.length>0&&!((c=a?.bypassPause)!=null&&c.some(d=>n.includes(d)))||l.consumed||o(l)},this.buildEvent(H({type:s,event:e,pauses:n},i)))})}decideInteractionEventTypes(e){let t="drag-start";switch(e.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=e.target,[t];case"touchstart":return this.touchDown=!0,this.dragStartElement=e.target,[t];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(e)?[]:(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(e)?[]:(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]);case"mouseout":case"touchcancel":return["leave"];case"mouseenter":let i=e instanceof MouseEvent&&(e.buttons&1)===1;return this.mouseDown!==i?(this.mouseDown=i,[i?t:"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(e){var t;return e.target===this.element||((t=e.target)==null?void 0:t.parentElement)===this.element}calculateCoordinates(e){var t;if(e instanceof MouseEvent){let{clientX:i,clientY:n,pageX:s,pageY:o,offsetX:a,offsetY:l}=e;return this.fixOffsets(e,{clientX:i,clientY:n,pageX:s,pageY:o,offsetX:a,offsetY:l})}else if(typeof TouchEvent<"u"&&e instanceof TouchEvent){let i=(t=e.touches[0])!=null?t:e.changedTouches[0],{clientX:n,clientY:s,pageX:o,pageY:a}=i;return me(H({},qg.NULL_COORDS),{clientX:n,clientY:s,pageX:o,pageY:a})}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:qg.NULL_COORDS}fixOffsets(e,t){let i=n=>{let s=0,o=0;for(;n;)s+=n.offsetLeft,o+=n.offsetTop,n=n.offsetParent;return{x:s,y:o}};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){let n=i(this.dragStartElement),s=i(e.target);t.offsetX-=n.x-s.x,t.offsetY-=n.y-s.y}return t}buildEvent(e){let{type:t,event:i,clientX:n,clientY:s,pauses:o}=e,{offsetX:a,offsetY:l,pageX:c,pageY:d}=e;if(!Fn(a)||!Fn(l)){let h=this.element.getBoundingClientRect();a=n-h.left,l=s-h.top}if(!Fn(c)||!Fn(d)){let h=this.rootElement.getBoundingClientRect();c=n-h.left,d=s-h.top}let u={type:t,offsetX:a,offsetY:l,pageX:c,pageY:d,sourceEvent:i,consumed:!1,pauses:o,consume(){u.consumed=!0}};return u}};db.interactionDocuments=[];db.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var GA=db,pw=class{constructor(r,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=r,this.destroyFns.push(e.addListener("hover",t=>this.checkExclusiveRects(t)))}getRange(){return this.tooltip.range}updateTooltip(r,e,t){var i;t==null&&(t=(i=this.states[r])==null?void 0:i.content),this.states[r]={content:t,meta:e},this.applyStates()}updateExclusiveRect(r,e){e?this.exclusiveAreas[r]=e:delete this.exclusiveAreas[r]}removeTooltip(r){delete this.states[r],this.applyStates()}getTooltipMeta(r){var e;return(e=this.states[r])==null?void 0:e.meta}destroy(){for(let r of this.destroyFns)r()}checkExclusiveRects(r){let e;for(let[t,i]of Object.entries(this.exclusiveAreas))if(i.containsPoint(r.offsetX,r.offsetY)){e=t;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var r;let e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states),t,i;if(e.reverse(),e.slice(0,1).forEach(n=>{var s;let{content:o,meta:a}=(s=this.states[n])!=null?s:{};t=o,i=a}),i===void 0||t===void 0){this.appliedState=void 0,this.tooltip.toggle(!1);return}if(((r=this.appliedState)==null?void 0:r.content)===t){let n=this.tooltip.isVisible();this.tooltip.show(i,void 0,n)}else this.tooltip.show(i,t);this.appliedState={content:t,meta:i}}static makeTooltipMeta(r,e,t,i){var n,s,o,a;let{pageX:l,pageY:c,offsetX:d,offsetY:u}=r,{tooltip:h}=t.series.properties,p={xOffset:h.position.xOffset,yOffset:h.position.yOffset},f={pageX:l,pageY:c,offsetX:d,offsetY:u,event:r,showArrow:h.showArrow,position:p},g=(s=(n=t.yBar)==null?void 0:n.upperPoint)!=null?s:t.midPoint;if(h.position.type==="node"&&g){let{x:m,y:v}=g,C=t.series.contentGroup.inverseTransformPoint(m,v),S=e.element.getBoundingClientRect();return me(H({},f),{pageX:Math.round(S.left+i.scrollX+C.x),pageY:Math.round(S.top+i.scrollY+C.y),offsetX:Math.round(C.x),offsetY:Math.round(C.y)})}return f.enableInteraction=(a=(o=h.interaction)==null?void 0:o.enabled)!=null?a:!1,f}},BA=class extends Um{constructor(){super(...arguments),this.axes={}}updateAxes(r){var e;let t=new Set(Object.keys(this.axes));r.forEach(i=>{var n,s,o;t.delete(i.id),(o=(n=this.axes)[s=i.id])!=null||(n[s]=new ok(i))}),t.forEach(i=>{delete this.axes[i]}),(e=this.initialZoom)!=null&&e.newZoom&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(r,e){if(Object.keys(this.axes).length===0){this.initialZoom={callerId:r,newZoom:e};return}Object.values(this.axes).forEach(t=>{t.updateZoom(r,e?.[t.getDirection()])}),this.applyStates()}updateAxisZoom(r,e,t){var i;(i=this.axes[e])==null||i.updateZoom(r,t),this.applyStates()}getZoom(){let r,e;if(Object.values(this.axes).forEach(t=>{t.getDirection()==="x"?r=t.getZoom():t.getDirection()==="y"&&(e=t.getZoom())}),r||e)return{x:r,y:e}}getAxisZoom(r){var e;return(e=this.axes[r])==null?void 0:e.getZoom()}getAxisZooms(){let r={};for(let[e,t]of Object.entries(this.axes))r[e]={direction:t.getDirection(),zoom:t.getZoom()};return r}applyStates(){if(!Object.values(this.axes).map(i=>i.applyStates()).some(Boolean))return;let e=this.getZoom(),t={};for(let[i,n]of Object.entries(this.axes))t[i]=n.getZoom();this.listeners.dispatch("zoom-change",me(H({type:"zoom-change"},e??{}),{axes:t}))}},ok=class{constructor(r){this.states={},this.axis=r;let[e=0,t=1]=r.visibleRange;this.currentZoom={min:e,max:t},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(r,e){delete this.states[r],e!=null&&(this.states[r]=H({},e))}getZoom(){return this.currentZoom}applyStates(){var r,e;let t=this.currentZoom,i=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=H({},this.states[i]),t?.min!==((r=this.currentZoom)==null?void 0:r.min)||t?.max!==((e=this.currentZoom)==null?void 0:e.max)}},VA=class extends RC{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(r,e){if(this.isLayoutStage(r)||this.isLayoutComplete(r))return super.addListener(r,e);throw new Error(`AG Charts - unsupported listener type: ${r}`)}dispatchPerformLayout(r,e){return this.isLayoutStage(r)?this.getListenersByType(r).reduce((t,i)=>{try{return i.handler(t)}catch(n){return be.errorOnce(n),t}},e):e}dispatchLayoutComplete(r){this.dispatch(this.layoutComplete,r)}isLayoutStage(r){return r!==this.layoutComplete}isLayoutComplete(r){return r===this.layoutComplete}};function ak({orientation:r,bboxes:e,maxHeight:t,maxWidth:i,itemPaddingY:n=0,itemPaddingX:s=0,forceResult:o=!1}){let a=r==="horizontal",l={max:a?i:t,fn:a?h=>h.width:h=>h.height,padding:a?s:n},c={max:a?t:i,fn:a?h=>h.height:h=>h.width,padding:a?n:s},d=0,u=[];for(;d<e.length;){let h=e.slice(d),p=lk(h,d,l,c,o);if(!p)return;d+=p.processedBBoxCount,u.push(p.pageIndices)}return dk(u,r,e,n,s)}function lk(r,e,t,i,n){let o=hk(r,t);if(o<1){if(!n)return;o=1}for(let a=o;a>=1;a--){let l=ck(r,e,a,t,i,n);if(l==null&&a<=1)return;if(l==null)continue;if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function ck(r,e,t,i,n,s){var o;let a=[],l=0,c=0,d=[],u=[];for(let h=0;h<r.length;h++){let p=(h+t)%t;p===0&&(l+=c,c=0,d.length>0&&a.push(d),d=[]);let f=i.fn(r[h])+i.padding;u[p]=Math.max((o=u[p])!=null?o:0,f),c=Math.max(c,n.fn(r[h])+n.padding);let g=l+c,m=!s||a.length>0;if(g>n.max&&m){d=[];break}if(u.reduce((C,S)=>C+S,0)>i.max&&!s)return u.length<t?u.length:void 0;d.push(h+e)}return d.length>0&&a.push(d),a.length>0?a:void 0}function dk(r,e,t,i,n){let s=0,o=0;return{pages:r.map(l=>{e==="horizontal"&&(l=uk(l));let c=0,d=l.map(p=>{let f=p.map(v=>(c=Math.max(v,c),t[v])),g=0,m=0;return f.forEach(v=>{g+=v.height+i,m=Math.max(m,v.width+n)}),{indices:p,bboxes:f,columnHeight:Math.ceil(g),columnWidth:Math.ceil(m)}}),u=0,h=0;return d.forEach(p=>{u+=p.columnWidth,h=Math.max(h,p.columnHeight)}),s=Math.max(u,s),o=Math.max(h,o),{columns:d,startIndex:l[0][0],endIndex:c,pageWidth:u,pageHeight:h}}),maxPageWidth:s,maxPageHeight:o}}function uk(r){let e=[];for(let t of r[0])e.push([]);return r.forEach((t,i)=>{t.forEach((n,s)=>{e[s][i]=n})}),e}function hk(r,e){let t=r.length,i=0;for(let n=0;n<t;n++)if(i+=e.fn(r[n])+e.padding,i>e.max)return t/n<2?Math.ceil(t/2):n;return t}var Bi=class extends We{constructor(){super({name:"markerLabelGroup"}),this.label=new Xt,this.line=new mr,this._marker=new xp,this._markerSize=15,this._spacing=8;let{marker:r,label:e,line:t}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=wi.has.textMetrics?1:0,this.append([t,r,e]),this.update()}set marker(r){this._marker!==r&&(this.removeChild(this._marker),this._marker=r,this.appendChild(r),this.update())}get marker(){return this._marker}set markerSize(r){this._markerSize!==r&&(this._markerSize=r,this.update())}get markerSize(){return this._markerSize}set spacing(r){this._spacing!==r&&(this._spacing=r,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(r){let e=this.marker.size/2+r;this.line.x1=-e,this.line.x2=e,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){this.marker.size=this.markerSize;let r=this.line.visible?this.line.x2:-1/0,e=this.markerSize/2;this.label.x=Math.max(r,e)+this.spacing}render(r){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(r)}};Bi.className="MarkerLabel";x([qt("label")],Bi.prototype,"text",2);x([qt("label")],Bi.prototype,"fontStyle",2);x([qt("label")],Bi.prototype,"fontWeight",2);x([qt("label")],Bi.prototype,"fontSize",2);x([qt("label")],Bi.prototype,"fontFamily",2);x([qt("label","fill")],Bi.prototype,"color",2);x([qt("marker","fill")],Bi.prototype,"markerFill",2);x([qt("marker","stroke")],Bi.prototype,"markerStroke",2);x([qt("marker","strokeWidth")],Bi.prototype,"markerStrokeWidth",2);x([qt("marker","fillOpacity")],Bi.prototype,"markerFillOpacity",2);x([qt("marker","strokeOpacity")],Bi.prototype,"markerStrokeOpacity",2);x([qt("marker","visible")],Bi.prototype,"markerVisible",2);x([qt("line","stroke")],Bi.prototype,"lineStroke",2);x([qt("line","strokeWidth")],Bi.prototype,"lineStrokeWidth",2);x([qt("line","strokeOpacity")],Bi.prototype,"lineStrokeOpacity",2);x([qt("line","lineDash")],Bi.prototype,"lineLineDash",2);x([qt("line","visible")],Bi.prototype,"lineVisible",2);var Op=class{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};x([_(yt)],Op.prototype,"color",2);x([_(Oc,{optional:!0})],Op.prototype,"fontStyle",2);x([_(Fc,{optional:!0})],Op.prototype,"fontWeight",2);x([_(ge)],Op.prototype,"fontSize",2);x([_(Se)],Op.prototype,"fontFamily",2);var ll=class{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};x([_(ge)],ll.prototype,"size",2);x([_(yt,{optional:!0})],ll.prototype,"fill",2);x([_(ri,{optional:!0})],ll.prototype,"fillOpacity",2);x([_(yt,{optional:!0})],ll.prototype,"stroke",2);x([_(ge)],ll.prototype,"strokeWidth",2);x([_(ri)],ll.prototype,"strokeOpacity",2);var AC=class{constructor(r){this.parent=r,this.shape=fp,this.size=15,this.padding=8}};x([qr({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],AC.prototype,"shape",2);x([_(ge)],AC.prototype,"size",2);x([_(ge)],AC.prototype,"padding",2);var HA=class{constructor(r,e,t,i){this.chartUpdateCallback=r,this.pageUpdateCallback=e,this.interactionManager=t,this.cursorManager=i,this.id=ba(this),this.group=new We({name:"pagination"}),this.labelNode=new Xt,this.marker=new AC(this),this.activeStyle=new ll,this.inactiveStyle=new ll,this.highlightStyle=new ll,this.label=new Op,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new fp,this._previousButton=new fp;let{labelNode:n}=this;n.textBaseline="middle",n.fontSize=12,n.fontFamily="Verdana, sans-serif",n.fill="black",n.y=wi.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,n]),this.interactionManager.addListener("click",s=>this.onPaginationClick(s)),this.interactionManager.addListener("hover",s=>this.onPaginationMouseMove(s)),this.update(),this.updateMarkers()}set visible(r){this._visible=r,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(r){this._enabled=r,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(r){switch(this._orientation=r,r){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(r){this._nextButton!==r&&(this.group.removeChild(this._nextButton),this._nextButton=r,this.group.appendChild(r))}get nextButton(){return this._nextButton}set previousButton(r){this._previousButton!==r&&(this.group.removeChild(this._previousButton),this._previousButton=r,this.group.appendChild(r))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:r,padding:e}=this.marker;this.nextButton.size=r,this.previousButton.size=r,this.labelNode.x=r/2+e}updateNextButtonPosition(){let r=this.labelNode.computeBBox();this.nextButton.translationX=r.x+r.width+this.marker.size/2+this.marker.padding}updateLabel(){let{currentPage:r,totalPages:e,labelNode:t,label:{color:i,fontStyle:n,fontWeight:s,fontSize:o,fontFamily:a}}=this;t.text=`${r+1} / ${e}`,t.fill=i,t.fontStyle=n,t.fontWeight=s,t.fontSize=o,t.fontFamily=a}updateMarkers(){let{nextButton:r,previousButton:e,nextButtonDisabled:t,previousButtonDisabled:i,activeStyle:n,inactiveStyle:s,highlightStyle:o,highlightActive:a}=this,l=(c,d)=>d?s:c===a?o:n;this.updateMarker(r,l("next",t)),this.updateMarker(e,l("previous",i))}updateMarker(r,e){var t;let{size:i}=this.marker;r.size=i,r.fill=e.fill,r.fillOpacity=(t=e.fillOpacity)!=null?t:1,r.stroke=e.stroke,r.strokeWidth=e.strokeWidth,r.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){let{currentPage:r,totalPages:e}=this,t=e===0,i=r===e-1,n=r===0;this.nextButtonDisabled=i||t,this.previousButtonDisabled=n||t}nextButtonContainsPoint(r,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(r,e)}previousButtonContainsPoint(r,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(r,e)}onPaginationClick(r){let{offsetX:e,offsetY:t}=r;this.nextButtonContainsPoint(e,t)?(this.incrementPage(),this.onPaginationChanged(),r.consume()):this.previousButtonContainsPoint(e,t)&&(this.decrementPage(),this.onPaginationChanged(),r.consume())}onPaginationMouseMove(r){let{offsetX:e,offsetY:t}=r;this.nextButtonContainsPoint(e,t)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,t)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(5)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){let r=Ic(this.marker.shape||fp);this.previousButton=new r,this.nextButton=new r,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(5)}attachPagination(r){r.append(this.group)}computeBBox(){return this.group.computeBBox()}};HA.className="Pagination";var Lc=class{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}};x([_(ge,{optional:!0})],Lc.prototype,"maxLength",2);x([_(yt)],Lc.prototype,"color",2);x([_(Oc,{optional:!0})],Lc.prototype,"fontStyle",2);x([_(Fc,{optional:!0})],Lc.prototype,"fontWeight",2);x([_(ge)],Lc.prototype,"fontSize",2);x([_(Se)],Lc.prototype,"fontFamily",2);x([_(wa,{optional:!0})],Lc.prototype,"formatter",2);var zm=class{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0,this.enabled=!0}set shape(r){var e;this._shape=r,(e=this.parent)==null||e.onMarkerShapeChange()}get shape(){return this._shape}};x([_(ge)],zm.prototype,"size",2);x([_(ge)],zm.prototype,"padding",2);x([_(ge,{optional:!0})],zm.prototype,"strokeWidth",2);x([_(Ze,{optional:!0})],zm.prototype,"enabled",2);var ub=class{constructor(){this.strokeWidth=void 0,this.length=void 0}};x([_(ge,{optional:!0})],ub.prototype,"strokeWidth",2);x([_(ge,{optional:!0})],ub.prototype,"length",2);var Fp=class{constructor(){this.marker=new zm,this.label=new Lc,this.line=new ub,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1}};x([_(ge,{optional:!0})],Fp.prototype,"maxWidth",2);x([_(ge)],Fp.prototype,"paddingX",2);x([_(ge)],Fp.prototype,"paddingY",2);x([_(Ze)],Fp.prototype,"toggleSeriesVisible",2);x([_(Ze)],Fp.prototype,"showSeriesStroke",2);var WA=class{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}};x([_(wa,{optional:!0})],WA.prototype,"legendItemClick",2);var bo=class{constructor(r){this.ctx=r,this.id=ba(this),this.group=new We({name:"legend",layer:!0,zIndex:9}),this.itemSelection=Ri.select(this.group,Bi),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new Fp,this.listeners=new WA,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.preventHidingAll=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new HA(t=>r.updateService.update(t),t=>this.updatePageNumber(t),r.interactionManager,r.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;let e={bypassPause:["animation"]};this.destroyFns.push(r.interactionManager.addListener("click",t=>this.checkLegendClick(t),e),r.interactionManager.addListener("dblclick",t=>this.checkLegendDoubleClick(t),e),r.interactionManager.addListener("hover",t=>this.handleLegendMouseMove(t)),r.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect)),()=>this.detachLegend())}set data(r){this._data=r,this.updateGroupVisibility()}get data(){return this._data}set enabled(r){this._enabled=r,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(r=>r())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getCharacterWidths(r){let{characterWidths:e}=this;if(e.has(r))return e.get(r);let t={"...":wi.getTextSize("...",r).width};return e.set(r,t),t}set visible(r){this._visible=r,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(r){r.append(this.group)}detachLegend(){var r;(r=this.group.parent)==null||r.removeChild(this.group)}getItemLabel(r){let{ctx:{callbackCache:e}}=this,{formatter:t}=this.item.label;return t?e.call(t,{itemId:r.itemId,value:r.label.text,seriesId:r.seriesId}):r.label.text}performLayout(r,e){let{paddingX:t,paddingY:i,label:n,maxWidth:s,marker:{size:o,padding:a,shape:l},label:{maxLength:c=1/0,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p},line:f,showSeriesStroke:g}=this.item,m=[...this.data];this.reverseOrder&&m.reverse(),this.itemSelection.update(m);let v=[],C=Rc(n),b=s??r*.8,T=o+a+t;if(this.itemSelection.each((te,le)=>{var Ye,Xe,Ke;let Je=Ic(l??le.marker.shape),et=(Ye=le.marker.enabled)!=null?Ye:this.item.marker.enabled;te.marker&&te.marker instanceof Je||(te.marker=new Je),te.markerSize=o,te.spacing=a,te.fontStyle=d,te.fontWeight=u,te.fontSize=h,te.fontFamily=p;let St=(Xe=le.itemId)!=null?Xe:le.id,wt=this.getItemLabel(le),jt=(wt??"<unknown>").replace(/\r?\n/g," ");te.text=this.truncate(jt,c,b,T,C,St),g&&le.line!==void 0?(te.lineVisible=!0,te.markerVisible=et,te.setSeriesStrokeOffset((Ke=f.length)!=null?Ke:5)):(te.lineVisible=!1,te.markerVisible=!0),v.push(te.computeBBox())}),r=Math.max(1,r),e=Math.max(1,e),!isFinite(r))return!1;let A=this.size,E=this.oldSize;A[0]=r,A[1]=e,(A[0]!==E[0]||A[1]!==E[1])&&(E[0]=A[0],E[1]=A[1]);let{pages:N,maxPageHeight:M,maxPageWidth:k}=this.updatePagination(v,r,e);this.pages=N,this.maxPageSize=[k-t,M-i];let W=this.pagination.currentPage,ee=this.pages[W];if(this.pages.length<1||!ee){this.visible=!1;return}this.visible=!0,this.updatePositions(W),this.update()}truncate(r,e,t,i,n,s){let o="...",a=r.split(""),l=!1;if(r.length>e&&(r=`${r.substring(0,e)}`,l=!0),Math.floor(i+wi.getTextSize(r,n).width)>t){let d="",u=this.getCharacterWidths(n),h=i+u[o];for(let p of a){if(u[p]||(u[p]=wi.getTextSize(p,n).width),h+=u[p],h>t)break;d+=p}r=d,l=!0}return l?(r+=o,this.truncatedItems.add(s)):this.truncatedItems.delete(s),r}updatePagination(r,e,t){let i=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,r.length);this.pagination.orientation=i,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:s,maxPageHeight:o,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(r,e,t),d=s.findIndex(C=>C.endIndex>=n);this.pagination.currentPage=Math.min(Math.max(d,0),s.length-1);let{paddingX:u,paddingY:h}=this.item,p=8,f=a-u,g=o-h,m=0,v=-l.y-this.item.marker.size/2;return c?v+=g+p:(m+=-l.x+f+p,v+=(g-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:o,maxPageWidth:a,pages:s}}calculatePagination(r,e,t){var i,n,s;let{paddingX:o,paddingY:a}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position),d=this.pagination.computeBBox(),u=new it(0,0,0,0),h=[],p=0,f=0,g=0,m=C=>{let{width:S,height:b}=C;return S===d.width&&b===d.height},v=this.maxWidth!==void 0||this.maxHeight!==void 0;do{if(g++>10){be.warn("unable to find stable legend layout.");break}d=u;let C=e-(c?0:d.width),S=t-(c?d.height:0),b=ak({orientation:l,bboxes:r,maxHeight:S,maxWidth:C,itemPaddingY:a,itemPaddingX:o,forceResult:v});h=(i=b?.pages)!=null?i:[],p=(n=b?.maxPageWidth)!=null?n:0,f=(s=b?.maxPageHeight)!=null?s:0;let T=h.length;if(this.pagination.visible=T>1,this.pagination.totalPages=T,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!m(u));return{maxPageWidth:p,maxPageHeight:f,pages:h,paginationBBox:d,paginationVertical:c}}updatePositions(r=0){let{item:{paddingY:e},itemSelection:t,pages:i}=this;if(i.length<1||!i[r])return;let{columns:n,startIndex:s,endIndex:o}=i[r],a=0,l=0,c=n.length,d=n[0].indices.length,u=this.getOrientation()==="horizontal",h=n[0].bboxes[0].height+e,p=[];t.each((f,g,m)=>{var v,C;if(m<s||m>o){f.visible=!1;return}let S=m-s,b=0,T=0;u?(b=S%c,T=Math.floor(S/c)):(b=Math.floor(S/d),T=S%d),f.visible=!0;let A=n[b];A&&(l=h*T,a=(v=p[T])!=null?v:0,p[T]=((C=p[T])!=null?C:0)+A.columnWidth,f.translationX=Math.floor(a),f.translationY=Math.floor(l))})}updatePageNumber(r){let{pages:e}=this,{startIndex:t,endIndex:i}=e[r];t===0?this.paginationTrackingIndex=0:r===e.length-1?this.paginationTrackingIndex=i:this.paginationTrackingIndex=Math.floor((t+i)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(r),this.ctx.updateService.update(5)}update(){let{label:{color:r},marker:e,line:t,showSeriesStroke:i}=this.item;this.itemSelection.each((n,s)=>{var o,a;let l=s.marker;n.markerFill=l.fill,n.markerStroke=l.stroke,n.markerStrokeWidth=(o=e.strokeWidth)!=null?o:Math.min(2,l.strokeWidth),n.markerFillOpacity=l.fillOpacity,n.markerStrokeOpacity=l.strokeOpacity,n.opacity=s.enabled?1:.5,n.color=r;let{line:c}=s;i&&c!==void 0&&(n.lineStroke=c.stroke,n.lineStrokeOpacity=c.strokeOpacity,n.lineStrokeWidth=(a=t.strokeWidth)!=null?a:Math.min(2,c.strokeWidth),n.lineLineDash=c.lineDash)})}getDatumForPoint(r,e){let t=[],i={dist:1/0,datum:void 0};for(let s of this.group.children){if(!s.visible||!(s instanceof Bi))continue;let o=s.computeBBox();if(o.grow(this.item.paddingX/2,"horizontal"),o.grow(this.item.paddingY/2,"vertical"),o.containsPoint(r,e))return s.datum;let a=r-o.x-this.item.paddingX/2,l=e-o.y-this.item.paddingY/2,c=ni(a,2)+ni(l,2);a>=0&&l>=0&&c<i.dist&&(i.dist=c,i.datum=s.datum),t.push(o)}if(it.merge(t).containsPoint(r,e))return i.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){let r=this.group.computeBBox();if(this.pages.length<=1)return r;let[e,t]=this.maxPageSize;return r.height=Math.max(t,r.height),r.width=Math.max(e,r.width),r}checkLegendClick(r){let{listeners:{legendItemClick:e},ctx:{chartService:t,highlightManager:i},item:{toggleSeriesVisible:n},preventHidingAll:s}=this,{offsetX:o,offsetY:a}=r,l=this.computeBBox(),c=this.group.visible&&l.containsPoint(o,a),d=this.getDatumForPoint(o,a);if(!c||!d)return;let{id:u,itemId:h,enabled:p}=d,f=t.series.find(m=>m.id===u);if(!f)return;r.consume();let g=p;n&&(g=!p,s&&!g&&t.series.flatMap(v=>v.getLegendData("category")).filter(v=>v.enabled).length<2&&(g=!0),this.ctx.chartEventManager.legendItemClick(f,h,g,d.legendItemName)),g?i.updateHighlight(this.id,{series:f,itemId:h,datum:void 0}):i.updateHighlight(this.id),this.ctx.updateService.update(1,{forceNodeDataRefresh:!0}),e?.({type:"click",enabled:g,itemId:h,seriesId:f.id})}checkLegendDoubleClick(r){var e;let{listeners:{legendItemDoubleClick:t},ctx:{chartService:i},item:{toggleSeriesVisible:n}}=this,{offsetX:s,offsetY:o}=r;if(i.mode==="integrated")return;let a=this.computeBBox(),l=this.group.visible&&a.containsPoint(s,o),c=this.getDatumForPoint(s,o);if(!l||!c)return;let{id:d,itemId:u,seriesId:h}=c,p=i.series.find(f=>f.id===d);if(p){if(r.consume(),n){let f=i.series.flatMap(v=>v.getLegendData("category")),g=f.filter(v=>v.enabled).length,m=f.find(v=>v.itemId===u&&v.seriesId===h);this.ctx.chartEventManager.legendItemDoubleClick(p,u,(e=m?.enabled)!=null?e:!1,g,m?.legendItemName)}this.ctx.updateService.update(1,{forceNodeDataRefresh:!0}),t?.({type:"dblclick",enabled:!0,itemId:u,seriesId:p.id})}}handleLegendMouseMove(r){var e;let{enabled:t,item:{toggleSeriesVisible:i},listeners:n}=this;if(!t)return;let s=this.computeBBox(),{pageX:o,pageY:a,offsetX:l,offsetY:c}=r,d=this.group.visible&&s.containsPoint(l,c);if(!d){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.ctx.tooltipManager.removeTooltip(this.id);return}r.consume();let u=this.getDatumForPoint(l,c);if(!(d&&u!==void 0)){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}let p=u?this.ctx.chartService.series.find(f=>f.id===u?.id):void 0;u&&this.truncatedItems.has((e=u.itemId)!=null?e:u.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:o,pageY:a,offsetX:l,offsetY:c,event:r,showArrow:!1,addCustomClass:!1},ym({content:this.getItemLabel(u)})):this.ctx.tooltipManager.removeTooltip(this.id),(i||n.legendItemClick!=null||n.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),u?.enabled&&p?this.ctx.highlightManager.updateHighlight(this.id,{series:p,itemId:u?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(r){let e=r.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};let[t,i]=this.calculateLegendDimensions(r);this.group.translationX=0,this.group.translationY=0,this.performLayout(t,i);let n=this.computePagedBBox(),s=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return r.height-n.height;case"right":default:return r.width-n.width}};if(this.visible){let o,a;switch(this.position){case"top":case"bottom":o=(r.width-n.width)/2,a=s(),e.shrink(n.height,this.position);break;case"left":case"right":default:o=s(),a=(r.height-n.height)/2,e.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+r.x+o),this.group.translationY=Math.floor(-n.y+r.y+a)}if(this.visible&&this.enabled&&this.data.length){let o=this.spacing;e.shrink(o,this.position);let a=n.clone();a.x+=this.group.translationX,a.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,a)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(r){let{width:e,height:t}=r,i=e/t,n=.5,s=.2,o=.25,a,l;switch(this.position){case"top":case"bottom":let c=i<1?Math.min(n,s*(1/i)):s;a=this.maxWidth?Math.min(this.maxWidth,e):e,l=this.maxHeight?Math.min(this.maxHeight,t):Math.round(t*c);break;case"left":case"right":default:let d=i>1?Math.min(n,o*i):o;a=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*d),l=this.maxHeight?Math.min(this.maxHeight,t):t}return[a,l]}};bo.className="Legend";x([_(Ze)],bo.prototype,"_enabled",2);x([_(zw)],bo.prototype,"position",2);x([_(ge,{optional:!0})],bo.prototype,"maxWidth",2);x([_(ge,{optional:!0})],bo.prototype,"maxHeight",2);x([_(Ze,{optional:!0})],bo.prototype,"reverseOrder",2);x([_(Di(["horizontal","vertical"],"an orientation"),{optional:!0})],bo.prototype,"orientation",2);x([_(Ze,{optional:!0})],bo.prototype,"preventHidingAll",2);x([_(ge)],bo.prototype,"spacing",2);var lC=class{constructor(r,e){this.className=r,this.parentElement=e}show(r){var e,t;this.element||(this.element=this.createElement("div"),this.element.className=this.className);let{element:i}=this;if(i.style.position="absolute",i.style.left=`${r.x}px`,i.style.top=`${r.y}px`,i.style.width=`${r.width}px`,i.style.height=`${r.height}px`,this.renderer)i.innerHTML=this.renderer();else{let n=this.createElement("div");n.style.alignItems="center",n.style.boxSizing="border-box",n.style.display="flex",n.style.justifyContent="center",n.style.margin="8px",n.style.height="100%",n.style.font="12px Verdana, sans-serif",n.innerText=(e=this.text)!=null?e:"No data to display",i.replaceChildren(n)}(t=this.parentElement)==null||t.append(i)}hide(){var r;(r=this.element)==null||r.remove(),this.element=void 0}createElement(r,e){return this.parentElement.ownerDocument.createElement(r,e)}};x([_(wa,{optional:!0})],lC.prototype,"renderer",2);x([_(Se,{optional:!0})],lC.prototype,"text",2);var pk=class{constructor(r){this.noData=new lC("ag-chart-no-data-overlay",r),this.noVisibleSeries=new lC("ag-chart-no-visible-series",r),this.noVisibleSeries.text="No visible series"}destroy(){this.noData.hide(),this.noVisibleSeries.hide()}};function cs(r,e){if(DT(r)&&DT(e)){let t={};return Object.keys(r).forEach(i=>{i in e?t[i]=cs(r[i],e[i]):t[i]=r[i]}),Object.keys(e).forEach(i=>{i in r||(t[i]=e[i])}),t}return Array.isArray(r)&&!Array.isArray(e)||fw(r)&&!fw(e)?r:e}function fw(r){return typeof r=="object"&&r!==null}function gw(r){return fw(r)&&!Array.isArray(r)}function DT(r){return gw(r)&&r.constructor===Object}function Mn(...r){var e;let t={};for(let i of r){if(!i)continue;let n=mC(i)?dp(i):Object.keys(i);for(let s of n)gw(t[s])&&gw(i[s])?t[s]=Mn(t[s],i[s]):(e=t[s])!=null||(t[s]=i[s])}return t}function fk(r,e,t){if(t===void 0)return e;for(let i of r){let n=t[i];n!==void 0&&(e[i]=n)}return e}function DC(r,e=[0,0]){for(let t of r)typeof t=="number"&&(t<0&&(e[0]+=t),t>0&&(e[1]+=t));return e}function gk(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>DC(n)}}function UA(r,e,t){return{id:e,scopes:[r.id],type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:i=>DC(i),groupAggregateFunction:(i,n=[0,0])=>{var s,o;return n[0]+=(s=i?.[0])!=null?s:0,n[1]+=(o=i?.[1])!=null?o:0,n}}}function zA(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>Xg(n)}}function mk(r,e){return{id:e,scopes:[r.id],type:"aggregate",aggregateFunction:()=>[0,1]}}function mw(r,e){return{id:e,scopes:[r.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,i=[0,0])=>{var n,s;return i[0]+=(n=t?.[0])!=null?n:0,i[1]+=(s=t?.[1])!=null?s:0,i}}}function vk(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>DC(n).map(s=>s/n.length)}}function jA(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:n=>DC(n),groupAggregateFunction:(n,s=[0,0,-1])=>{var o,a;return s[0]+=(o=n?.[0])!=null?o:0,s[1]+=(a=n?.[1])!=null?a:0,s[2]++,s},finalFunction:(n=[0,0,0])=>{let s=n[0]+n[1];return s>=0?[0,s/n[2]]:[s/n[2],0]}}}function vw(r,e,t,i){let n={id:e,scopes:[r.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(s,o=[])=>{let a=o[1]-o[0];return t.aggregateFunction(s).map(l=>l/a)}};return t.groupAggregateFunction&&(n.groupAggregateFunction=t.groupAggregateFunction),n}function KA(r){return()=>{let e=0;return t=>typeof t!="number"||isNaN(t)?t:(e+=r?Math.max(0,t):t,e)}}function $A(){return()=>{let r=0;return e=>{if(typeof e!="number"||isNaN(e))return e;let t=r;return r+=e,t}}}var zg=new Map;function cC(r,e){var t,i,n;let s=JSON.stringify(r,null,0);return zg.has(e)||zg.set(e,new Map),(t=zg.get(e))!=null&&t.has(s)||(i=zg.get(e))==null||i.set(s,e(r)),(n=zg.get(e))==null?void 0:n.get(s)}var Cw={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let r=NaN;return(e=1/0,t)=>{let i=t.keys[0],n=Math.abs(i-r);return r=i,!isNaN(n)&&n>0&&n<e?n:e}}},Ck={type:"processor",property:"aggValuesExtent",calculate:r=>{var e,t,i,n;let s=[...(t=(e=r.domain.aggValues)==null?void 0:e[0])!=null?t:[0,0]];for(let[o,a]of(n=(i=r.domain.aggValues)==null?void 0:i.slice(1))!=null?n:[])o<s[0]&&(s[0]=o),a>s[1]&&(s[1]=a);return s}},YA={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:r}})=>{if(r!=null)return[...r].sort((e,t)=>{for(let i=0;i<e.length;i++){let n=e[i]-t[i];if(n!==0)return n}return 0})}};function yk({normaliseTo:r,mode:e}){let t=(i,n)=>{let s=i*r/n;return s>=0?Math.min(r,s):Math.max(-r,s)};return()=>()=>(i,n)=>{let s=[0,0];for(let a of n){let l=i[a],c=l<0?0:1;e==="sum"?s[c]+=l:c===0?s[c]=Math.min(s[c],l):s[c]=Math.max(s[c],l)}let o=Math.max(Math.abs(s[0]),s[1]);for(let a of n)i[a]=t(i[a],o)}}function dC(r,e,t,i="sum"){return{scopes:[r.id],type:"group-value-processor",matchGroupIds:e,adjust:cC({normaliseTo:t,mode:i},yk)}}function xk({normaliseTo:r,zeroDomain:e,rangeMin:t,rangeMax:i}){let n=r[1]-r[0],s=(o,a,l)=>{let c=r[0]+(o-a)/l*n;return l===0?e:c>=r[1]?r[1]:c<r[0]?r[0]:c};return()=>(o,a)=>{let[l,c]=o.domain.values[a];t!=null&&(l=t),i!=null&&(c=i);let d=c-l;o.domain.values[a]=[r[0],r[1]];for(let u of o.data){let h=u.values;o.type==="ungrouped"&&(h=[h]);for(let p of h)p[a]=s(p[a],l,d)}}}function yw(r,e,t,i,n,s){return{scopes:[r.id],type:"property-value-processor",property:e,adjust:cC({normaliseTo:t,rangeMin:n,rangeMax:s,zeroDomain:i},xk)}}function jm(r,e=[]){return{type:"processor",scopes:[r.id],property:"animationValidation",calculate(t){var i;let{keys:n,values:s}=t.defs,{input:o,data:a}=t,l=!0,c=!0,d=[];for(let h=0;h<s.length;h++)(i=s[h].scopes)!=null&&i.some(p=>p===r.id)&&e.some(p=>s[h].id===p)&&d.push([h,s[h]]);let u=(h,p,f)=>{var g;if(p.valueType==="category"){let v=t.domain[f][h];l&&(l=v.length===o.count);return}let m=(g=a[0])==null?void 0:g[f][h];for(let v=1;(l||c)&&v<a.length;v++){let C=a[v][f][h];c&&(c=m<=C),l&&(l=m!==C),m=C}};for(let h=0;(l||c)&&h<n.length;h++)u(h,n[h],"keys");for(let h=0;(l||c)&&h<d.length;h++){let[p,f]=d[h];u(p,f,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function Sk({mode:r,separateNegative:e}){return()=>()=>(t,i)=>{let n=[0,0];for(let s of i){let o=t[s],a=Lm(o)&&e?0:1;typeof o!="number"||isNaN(o)||(r==="normal"&&(n[a]+=o),t[s]=n[a],r==="trailing"&&(n[a]+=o))}}}function wk({mode:r,sum:e}){return()=>{let t=[],i=!0;return()=>(n,s)=>{let o=0;for(let a of s){let l=n[a],c=i&&e==="current"?0:t[a];t[a]=l;let d=e==="current"?l:c;if(typeof l!="number"||isNaN(l)){n[a]=o;continue}if(typeof c!="number"||isNaN(c)){n[a]=o;continue}r==="normal"&&(o+=d),n[a]=o,r==="trailing"&&(o+=d)}i=!1}}}function XA(r,e,t,i,n=!1){let s;if(t.startsWith("window")){let o=t.endsWith("-trailing")?"trailing":"normal";s=cC({mode:o,sum:i},wk)}else s=cC({mode:t,separateNegative:n},Sk);return{scopes:[r.id],type:"group-value-processor",matchGroupIds:[e],adjust:s}}function Pp(r,e=!0){return{type:"processor",property:"diff",calculate:t=>{let i={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,s=new Map,o=new Map,a=new Map,l=new Map,c=new Map,d=new Map;for(let u=0;u<Math.max(r.data.length,t.data.length);u++){let h=r.data[u],p=t.data[u],f=h?wp(h.keys):"",g=p?wp(p.keys):"";if(f===g){dm(h.values,p.values)||(o.set(g,p),c.set(g,u));continue}a.has(g)?((e||!dm(a.get(g).values,p.values))&&(o.set(g,p),c.set(g,u),n.set(g,p)),a.delete(g),d.delete(g)):p&&(s.set(g,p),l.set(g,u)),s.has(f)?((e||!dm(s.get(f).values,h.values))&&(o.set(f,h),c.set(f,u),n.set(f,h)),s.delete(f),l.delete(f)):h&&(o.delete(f),c.delete(f),a.set(f,h),d.set(f,u))}return i.added=Array.from(s.keys()),i.updated=Array.from(o.keys()),i.removed=Array.from(a.keys()),i.moved=Array.from(n.keys()),i.addedIndices=Array.from(l.values()),i.updatedIndices=Array.from(c.values()),i.removedIndices=Array.from(d.values()),i.changed=i.added.length>0||i.updated.length>0||i.removed.length>0,i}}}function wp(r){return r.join("___")}var qA=(r=>(r[r.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",r[r.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",r[r.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",r[r.NEAREST_NODE=3]="NEAREST_NODE",r))(qA||{});function hb(r){return _m(r,!0)!=null}function ZA(r){return _m(r,!1)!=null}function Pn(r,e,t,i={}){return H({scopes:[r.id],property:e,type:"key",valueType:t?"range":"category",validation:t?hb:ZA},i)}function oi(r,e,t,i={}){return H({scopes:[r.id],property:e,type:"value",valueType:t?"range":"category",validation:t?hb:ZA},i)}function QA(r,e,t={}){let i=t,{min:n=-1/0,max:s=1/0}=i,o=In(i,["min","max"]);return H({scopes:[r.id],type:"value",property:e,valueType:"range",validation:hb,processor:()=>a=>typeof a!="number"||isNaN(a)?a:Math.min(Math.max(a,n),s)},o)}function bk(r,e,t,i={}){return me(H({},oi(r,e,t,i)),{processor:JA()})}function JA(){return()=>{let r=0;return e=>{let t=r;return r=e,t}}}function eD(r,e,t,i={}){let n=i,{onlyPositive:s}=n,o=In(n,["onlyPositive"]);return me(H({},oi(r,e,t,o)),{processor:KA(s)})}function Ek(r,e,t,i={}){return me(H({},oi(r,e,t,i)),{processor:$A()})}function bc(r,e,t,i,n="current",s){return[oi(r,e,t,s),XA(r,s.groupId,i,n,s.separateNegative),...s.rangeId!=null?[zA(r,s.rangeId,s.groupId)]:[]]}var OC=class{constructor(r,e,{datum:t},i){this.type=r,this.event=e,this.datum=t,this.seriesId=i.id}},Ip=class extends DA{constructor(r){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeClickEvent=OC,this.internalId=ba(this),this.rootGroup=new We({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new uA,this._declarationOrder=-1,this.seriesListeners=new RC;let{moduleCtx:e,useLabelLayer:t=!1,pickModes:i=[1],directionKeys:n={},directionNames:s={},contentGroupVirtual:o=!0,canHaveAxes:a=!1}=r;this.ctx=e,this.directionKeys=n,this.directionNames=s,this.canHaveAxes=a,this.contentGroup=this.rootGroup.appendChild(new We({name:`${this.internalId}-content`,layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new We({name:`${this.internalId}-highlight`,layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new We({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new We({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new We({name:`${this.internalId}-series-labels`,layer:t,zIndex:7})),this.annotationGroup=new We({name:`${this.id}-annotation`,layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var r,e;return(e=(r=this.properties)==null?void 0:r.id)!=null?e:this.internalId}get type(){var r;return(r=this.constructor.type)!=null?r:""}set data(r){this._data=r,this.onDataChange()}get data(){var r;return(r=this._data)!=null?r:this._chartData}set visible(r){this.properties.visible=r,this.visibleChanged()}get visible(){return this.properties.visible}onDataChange(){this.nodeDataRefresh=!0}setChartData(r){this._chartData=r,this.data===r&&this.onDataChange()}hasData(){let{data:r}=this;return r&&(!Array.isArray(r)||r.length>0)}onSeriesGroupingChange(r,e){let{internalId:t,type:i,visible:n,rootGroup:s,highlightGroup:o,annotationGroup:a}=this;r&&this.ctx.seriesStateManager.deregisterSeries({id:t,type:i}),e&&this.ctx.seriesStateManager.registerSeries({id:t,type:i,visible:n,seriesGrouping:e}),this.rootGroup.parent!=null&&this.ctx.seriesLayerManager.changeGroup({internalId:t,type:i,rootGroup:s,highlightGroup:o,annotationGroup:a,getGroupZIndexSubOrder:l=>this.getGroupZIndexSubOrder(l),seriesGrouping:e,oldGrouping:r})}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(r,e=0){let t=0;switch(r){case"data":case"paths":break;case"labels":t+=2e4;break;case"marker":t+=1e4;break;case"highlight":e+=15e3;break;case"annotation":t+=15e3;break}return[()=>this._declarationOrder+t,e]}addListener(r,e){return this.seriesListeners.addListener(r,e)}dispatch(r,e){this.seriesListeners.dispatch(r,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(r=>r()),this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(r,e){let t=this.resolveKeyDirection(r),i=e?.[t],n=[];if(!i)return n;let s=(...o)=>{for(let a of o)Array.isArray(a)?s(...a):typeof a=="object"?s(...Object.values(a)):n.push(a)};return s(...i.map(o=>this.properties[o])),n}getKeys(r){return this.getDirectionValues(r,this.directionKeys)}getNames(r){return this.getDirectionValues(r,this.directionNames)}resolveKeyDirection(r){return r}getDomain(r){let e=this.getSeriesDomain(r),t=this.moduleMap.mapValues(i=>i.getDomain(r));return e.concat(t.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){let{dimOpacity:e=1,enabled:t=!0}=this.properties.highlightStyle.series;if(!t||e===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return e}}getStrokeWidth(r){let{strokeWidth:e,enabled:t=!0}=this.properties.highlightStyle.series;if(!t||e===void 0)return r;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return r}}isItemIdHighlighted(){var r,e;let{series:t}=(e=(r=this.ctx.highlightManager)==null?void 0:r.getActiveHighlight())!=null?e:{};return t==null?0:t!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapValues(e=>e.getTooltipParams()).reduce((e,t)=>H(H({},t),e),{})}pickNode(r,e){let{pickModes:t,visible:i,rootGroup:n}=this;if(!(!i||!n.visible))for(let s of t){if(e&&!e.includes(s))continue;let o;switch(s){case 0:o=this.pickNodeExactShape(r);break;case 1:case 2:o=this.pickNodeMainAxisFirst(r,s===2);break;case 3:o=this.pickNodeClosestDatum(r);break}if(o)return{pickMode:s,match:o.datum,distance:o.distance}}}pickNodeExactShape(r){let e=this.contentGroup.pickNode(r.x,r.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(r){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(r,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(r,e){this.fireEvent(new this.NodeClickEvent("nodeClick",r,e,this))}fireNodeDoubleClickEvent(r,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",r,e,this))}toggleSeriesItem(r,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:r,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return me(H({},this.ctx),{series:this})}getLabelText(r,e,t=String){var i;return r.formatter&&(i=this.ctx.callbackCache.call(r.formatter,H({seriesId:this.id},e)))!=null?i:t(e.value)}getMarkerStyle(r,e,t=r.getStyle()){var i,n;let s={size:(n=(i=e.datum.point)==null?void 0:i.size)!=null?n:0},o=Mn(s,t);if(r.formatter){let a=this.ctx.callbackCache.call(r.formatter,me(H(H({seriesId:this.id},o),e),{datum:e.datum.datum}));return Mn(a,o)}return o}updateMarkerStyle(r,e,t,i=e.getStyle(),{applyTranslation:n=!0}={}){let{point:s}=t.datum,o=this.getMarkerStyle(e,t,i),a=this.visible&&o.size>0&&s&&!isNaN(s.x)&&!isNaN(s.y);n?r.setProperties(me(H({visible:a},o),{translationX:s?.x,translationY:s?.y})):r.setProperties(H({visible:a},o)),typeof e.shape=="function"&&!r.dirtyPath&&(r.path.clear({trackChanges:!0}),r.updatePath(),r.checkPathDirty())}getMinRect(){}get nodeDataDependencies(){var r;return(r=this._nodeDataDependencies)!=null?r:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(r){let{width:e,height:t}=r??{width:NaN,height:NaN},i=r?{seriesRectWidth:e,seriesRectHeight:t}:void 0,n=ya(this.nodeDataDependencies,i)!=null;return n&&(this._nodeDataDependencies=i,this.markNodeDataDirty()),n}};Ip.highlightedZIndex=1e12;x([qr({changeValue:function(r,e){this.onSeriesGroupingChange(e,r)}})],Ip.prototype,"seriesGrouping",2);var OT=30,_k=class{constructor(r){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=r}setSeriesCount(r){this.expectedSeriesCount=r}requestGroup(r){var e,t,i,n;let{internalId:s,type:o,rootGroup:a,highlightGroup:l,annotationGroup:c,seriesGrouping:d}=r,{groupIndex:u=s}=d??{};if(this.series[s]!=null)throw new Error(`AG Charts - series already has an allocated layer: ${this.series[s]}`);Object.keys(this.series).length===0&&(this.mode=this.expectedSeriesCount>=OT?"aggressive-grouping":"normal"),(t=(e=this.groups)[o])!=null||(e[o]={});let h=this.lookupIdx(u),p=this.groups[o][h];return p||(p=(n=(i=this.groups[o])[h])!=null?n:i[h]={seriesIds:[],group:this.rootGroup.appendChild(new We({name:`${o}-content`,layer:!0,zIndex:4,zIndexSubOrder:r.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new We({name:`${o}-highlight`,layer:!0,zIndex:4,zIndexSubOrder:r.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new We({name:`${o}-annotation`,layer:!0,zIndex:4,zIndexSubOrder:r.getGroupZIndexSubOrder("annotation")}))}),this.series[s]={layerState:p,seriesConfig:r},p.seriesIds.push(s),p.group.appendChild(a),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(r){var e,t;let{internalId:i,seriesGrouping:n,type:s,rootGroup:o,highlightGroup:a,annotationGroup:l,oldGrouping:c}=r,{groupIndex:d=i}=n??{};(t=(e=this.groups[s])==null?void 0:e[d])!=null&&t.seriesIds.includes(i)||(this.series[i]!=null&&this.releaseGroup({internalId:i,seriesGrouping:c,type:s,rootGroup:o,highlightGroup:a,annotationGroup:l}),this.requestGroup(r))}releaseGroup(r){var e,t,i,n,s;let{internalId:o,seriesGrouping:a,rootGroup:l,highlightGroup:c,annotationGroup:d,type:u}=r,{groupIndex:h=o}=a??{};if(this.series[o]==null)throw new Error(`AG Charts - series doesn't have an allocated layer: ${o}`);let p=this.lookupIdx(h),f=(i=(e=this.groups[u])==null?void 0:e[p])!=null?i:(t=this.series[o])==null?void 0:t.layerState;if(f&&(f.seriesIds=f.seriesIds.filter(g=>g!==o),f.group.removeChild(l),f.highlight.removeChild(c),f.annotation.removeChild(d)),f?.seriesIds.length===0)this.rootGroup.removeChild(f.group),this.rootGroup.removeChild(f.highlight),this.rootGroup.removeChild(f.annotation),delete this.groups[u][p],delete this.groups[u][o];else if(f?.seriesIds.length>0){let g=(s=this.series[(n=f?.seriesIds)==null?void 0:n[0]])==null?void 0:s.seriesConfig;f.group.zIndexSubOrder=g?.getGroupZIndexSubOrder("data"),f.highlight.zIndexSubOrder=g?.getGroupZIndexSubOrder("highlight"),f.annotation.zIndexSubOrder=g?.getGroupZIndexSubOrder("annotation")}delete this.series[o]}lookupIdx(r){return this.mode==="normal"?r:typeof r=="string"&&(r=Number(r.split("-").slice(-1)[0]),!r)?0:Math.floor(Math.max(Math.min(r/this.expectedSeriesCount,1),0)*OT)}destroy(){for(let r of Object.values(this.groups))for(let e of Object.values(r))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}},Tk=class{constructor(){this.groups={}}registerSeries({id:r,seriesGrouping:e,visible:t,type:i}){var n,s;e&&((s=(n=this.groups)[i])!=null||(n[i]={}),this.groups[i][r]={grouping:e,visible:t})}deregisterSeries({id:r,type:e}){this.groups[e]&&delete this.groups[e][r],this.groups[e]&&Object.keys(this.groups[e]).length===0&&delete this.groups[e]}getVisiblePeerGroupIndex({type:r,seriesGrouping:e}){var t;if(!e)return{visibleGroupCount:1,index:0};let i=[...Object.entries((t=this.groups[r])!=null?t:{}).filter(([n,s])=>s.visible).reduce((n,[s,o])=>(o.visible&&n.add(o.grouping.groupIndex),n),new Set).values()];return i.sort((n,s)=>n-s),{visibleGroupCount:i.length,index:i.indexOf(e.groupIndex)}}},Rk=class{constructor(r,e){this.chartLike=r,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",t=>this.layoutComplete(t)),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)))}destroy(){this.destroyFns.forEach(r=>r())}layoutComplete({clipSeries:r,series:{paddedRect:e}}){let{seriesArea:t,seriesRoot:i}=this.chartLike;t.clip||r?i.setClipRectInGroupCoordinateSpace(e):i.setClipRectInGroupCoordinateSpace()}positionPadding(r){let{padding:e}=this.chartLike;return r.shrink(e.left,"left"),r.shrink(e.top,"top"),r.shrink(e.right,"right"),r.shrink(e.bottom,"bottom"),{shrinkRect:r}}positionCaptions(r){var e,t,i,n;let{title:s,subtitle:o,footnote:a}=this.chartLike,l=r.clone(),c=p=>{var f;let g=r.height/10,m=(f=p.lineHeight)!=null?f:p.fontSize*Xt.defaultLineHeightRatio,v=r.width,C=Math.max(m,g);p.computeTextWrap(v,C)},d=p=>p==="left"?l.x:p==="right"?l.x+l.width:(p!=="center"&&be.error(`invalid textAlign value: ${p}`),l.x+l.width/2),u=(p,f)=>{let g=l.y;p.node.x=d(p.textAlign),p.node.y=g,p.node.textBaseline="top",c(p);let m=p.node.computeBBox(),v=Math.ceil(m.y-g+m.height+f);l.shrink(v,"top")},h=(p,f)=>{let g=l.y+l.height;p.node.x=d(p.textAlign),p.node.y=g,p.node.textBaseline="bottom",c(p);let m=p.node.computeBBox(),v=Math.ceil(g-m.y+f);l.shrink(v,"bottom")};if(o&&(o.node.visible=(e=o.enabled)!=null?e:!1),s&&(s.node.visible=s.enabled,s.node.visible)){let p=o?.node.visible?ui.SMALL_PADDING:ui.LARGE_PADDING,f=(t=s.spacing)!=null?t:p;u(s,f)}return o&&o.node.visible&&u(o,(i=o.spacing)!=null?i:0),a&&(a.node.visible=a.enabled,a.node.visible&&h(a,(n=a.spacing)!=null?n:0)),{shrinkRect:l}}},tD=class extends RC{constructor(r){super(),this.updateCallback=r}update(r=0,{forceNodeDataRefresh:e=!1,skipAnimations:t=!1}={}){this.updateCallback(r,{forceNodeDataRefresh:e,skipAnimations:t})}dispatchUpdateComplete(r){let e={type:"update-complete",minRect:r};this.dispatch("update-complete",e)}};function Ak(r){let e;if(r.window!=null)e=r.window;else if(typeof window<"u")e=window;else if(typeof global<"u")e=global.window;else throw new Error("AG Charts - unable to resolve global window");let t;if(r.document!=null)t=r.document;else if(typeof document<"u")t=document;else if(typeof global<"u")t=global.document;else throw new Error("AG Charts - unable to resolve global document");return{document:t,window:e,overrideDevicePixelRatio:r.overrideDevicePixelRatio,sceneMode:r.sceneMode}}var xw=class{constructor(){this.clip=void 0,this.padding=new Mc(0)}};x([_(Ze,{optional:!0})],xw.prototype,"clip",2);var Sw=new WeakMap,vs=class extends DA{constructor(r,e){var t;super(),this.id=ba(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new We({name:`${this.id}-Series-root`}),this.debug=_i.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new Mc(20),this._seriesArea=new xw,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules=new Map,this.legends=new Map,this.processors=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=6,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new QN,this.updateRequestors={},this.performUpdateTrigger=ek(c=>ne(this,[c],function*({count:d}){this._destroyed||this.updateMutex.acquire(()=>ne(this,null,function*(){try{yield this.performUpdate(d)}catch(u){this._lastPerformUpdateError=u,be.error("update error",u)}}))})),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=JN(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=c=>{let d=me(H({},c),{type:"seriesNodeClick"});Object.defineProperty(d,"series",{enumerable:!1,get:()=>c.series}),this.fireEvent(d)},this.onSeriesNodeDoubleClick=c=>{let d=me(H({},c),{type:"seriesNodeDoubleClick"});this.fireEvent(d)},this.specialOverrides=Ak(r);let{window:i,document:n}=this.specialOverrides,s=e?.scene,o=(t=e?.element)!=null?t:n.createElement("div"),a=e?.container,l=new We({name:"root"});l.visible=!1,l.append(this.seriesRoot),this.axisGridGroup=new We({name:"Axes-Grids",layer:!0,zIndex:1}),l.appendChild(this.axisGridGroup),this.axisGroup=new We({name:"Axes",layer:!0,zIndex:2}),l.appendChild(this.axisGroup),this.element=o,o.classList.add("ag-chart-wrapper"),o.style.position="relative",this.scene=s??new Zw(this.specialOverrides),this.scene.root=l,this.scene.container=o,this.autoSize=!0,this.chartEventManager=new LA,this.cursorManager=new NA(o),this.highlightManager=new kA,this.interactionManager=new GA(o,n,i),this.zoomManager=new BA,this.layoutService=new VA,this.updateService=new tD((c=0,{forceNodeDataRefresh:d,skipAnimations:u})=>this.update(c,{forceNodeDataRefresh:d,skipAnimations:u})),this.seriesStateManager=new Tk,this.seriesLayerManager=new _k(this.seriesRoot),this.callbackCache=new ZN,this.animationManager=new MA(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new Rk(this,this.layoutService)],this.tooltip=new DR(this.scene.canvas.element,n,i,n.body),this.tooltipManager=new pw(this.tooltip,this.interactionManager),this.overlays=new pk(this.element),this.highlight=new FA,this.container=a,Sp.observe(this.element,c=>this.rawResize(c)),this._destroyFns.push(this.interactionManager.addListener("click",c=>this.onClick(c)),this.interactionManager.addListener("dblclick",c=>this.onDoubleClick(c)),this.interactionManager.addListener("hover",c=>this.onMouseMove(c)),this.interactionManager.addListener("leave",c=>this.onLeave(c)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.interactionManager.addListener("drag-start",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",c=>{this.update(5)}),this.highlightManager.addListener("highlight-change",c=>this.changeHighlightDatum(c)),this.zoomManager.addListener("zoom-change",c=>this.update(1,{forceNodeDataRefresh:!0,skipAnimations:!0}))),this.attachLegend("category",bo),this.legend=this.legends.get("category")}static getInstance(r){return Sw.get(r)}getOptions(){var r;let{queuedUserOptions:e}=this,t=(r=e[e.length-1])!=null?r:this.userOptions;return Cm(t)}autoSizeChanged(r){let{style:e}=this.element;if(r){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(r,e){this.scene.download(r,e)}get seriesArea(){return this._seriesArea}set seriesArea(r){r?this._seriesArea=r:this._seriesArea=new xw}get destroyed(){return this._destroyed}addModule(r){if(this.modules.has(r.optionsKey))throw new Error(`AG Charts - module already initialised: ${r.optionsKey}`);let e=new r.instanceConstructor(this.getModuleContext());if(r.type==="legend"){let t=e;this.legends.set(r.identifier,t),t.attachLegend(this.scene.root)}this.modules.set(r.optionsKey,e)}removeModule(r){var e;r.type==="legend"&&this.legends.delete(r.identifier),(e=this.modules.get(r.optionsKey))==null||e.destroy(),this.modules.delete(r.optionsKey)}attachLegend(r,e){let t=new e(this.getModuleContext());this.legends.set(r,t),t.attachLegend(this.scene.root)}isModuleEnabled(r){return this.modules.has(r.optionsKey)}getModuleContext(){let{scene:r,animationManager:e,chartEventManager:t,cursorManager:i,highlightManager:n,interactionManager:s,tooltipManager:o,zoomManager:a,layoutService:l,updateService:c,seriesStateManager:d,seriesLayerManager:u,callbackCache:h,specialOverrides:{window:p,document:f}}=this;return{window:p,document:f,scene:r,animationManager:e,chartEventManager:t,cursorManager:i,highlightManager:n,interactionManager:s,tooltipManager:o,zoomManager:a,chartService:this,layoutService:l,updateService:c,seriesStateManager:d,seriesLayerManager:u,callbackCache:h}}destroy(r){if(this._destroyed)return;let e=r?.keepTransferableResources,t;this._performUpdateType=6,this._destroyFns.forEach(i=>i()),this.processors.forEach(i=>i.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),this.legends.forEach(i=>i.destroy()),this.legends.clear(),this.overlays.destroy(),Sp.unobserve(this.element);for(let{instance:i}of Object.values(this.modules))this.removeModule(i);return this.interactionManager.destroy(),this.animationManager.stop(),e?(this.scene.strip(),t={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(i=>i.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,t}disablePointer(r=!1){r||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(r){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>ne(this,null,function*(){yield r(),this._pendingFactoryUpdatesCount--}))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(r=0,e){var t,i;let{forceNodeDataRefresh:n=!1,skipAnimations:s,seriesToUpdate:o=this.series,newAnimationBatch:a}=e??{};n&&this.series.forEach(l=>l.markNodeDataDirty());for(let l of o)this.seriesToUpdate.add(l);if(s&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:(t=this._performUpdateSkipAnimations)!=null||(this._performUpdateSkipAnimations=!1)),_i.check(!0)){let l=(i=new Error().stack)!=null?i:"<unknown>";l=l.replace(/\([^)]*/g,""),this.updateRequestors[l]=r}r<this._performUpdateType&&(this._performUpdateType=r,this.performUpdateTrigger.schedule(e?.backOffMs))}performUpdate(r){return ne(this,null,function*(){var e;let{_performUpdateType:t,extraDebugStats:i}=this,n=[...this.seriesToUpdate];this._performUpdateType=6,this.seriesToUpdate.clear(),this.updateShortcutCount===0&&t<5&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",Tm[t]);let s={start:performance.now()};switch(t){case 0:case 1:yield this.processData(),this.disablePointer(!0),s["\u{1F3ED}"]=performance.now();case 2:if(this.checkUpdateShortcut(2)||!this.checkFirstAutoSize(n))break;yield this.processLayout(),s["\u2316"]=performance.now();case 3:if(this.checkUpdateShortcut(3))break;let{seriesRect:a}=this,l=[...n].map(u=>u.update({seriesRect:a}));yield Promise.all(l),s["\u{1F914}"]=performance.now();case 4:if(this.checkUpdateShortcut(4))break;let c=this.tooltipManager.getTooltipMeta(this.id),d=((e=c?.event)==null?void 0:e.type)==="hover";t<=3&&d&&this.handlePointer(c.event),s["\u2196"]=performance.now();case 5:if(this.checkUpdateShortcut(5))break;i.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:s,extraDebugStats:i}),this.extraDebugStats={};case 6:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());let o=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((o-s.start)*100)/100,count:r,performUpdateType:Tm[t]})})}checkUpdateShortcut(r){return this.updateShortcutCount>3?(be.warn(`exceeded the maximum number of simultaneous updates (${3+1}), discarding changes and rendering`,this.updateRequestors),!1):this.performUpdateType<=r?(this.updateShortcutCount++,!0):!1}checkFirstAutoSize(r){if(this.autoSize&&!this._lastAutoSize){let e=this._performUpdateNoRenderCount++,t=(e^2)*10;if(e<8)return this.update(2,{seriesToUpdate:r,backOffMs:t}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",t),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(r){let e=new Set;this._axes.forEach(t=>{t.detachAxis(this.axisGroup,this.axisGridGroup),e.add(t)}),this._axes=r.filter(t=>!t.linkedTo).concat(r.filter(t=>t.linkedTo)),this._axes.forEach(t=>{t.attachAxis(this.axisGroup,this.axisGridGroup),e.delete(t)}),this.zoomManager.updateAxes(this._axes),e.forEach(t=>t.destroy())}get axes(){return this._axes}set series(r){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(r.length),r.forEach(e=>this.addSeries(e))}get series(){return this._series}addSeries(r){let{series:e}=this;return e.indexOf(r)<0?(e.push(r),r.rootGroup.parent==null&&this.seriesLayerManager.requestGroup(r),this.initSeries(r),!0):!1}initSeries(r){let e=this;r.chart={get mode(){return e.mode},get seriesRect(){return e.seriesRect},placeLabels(){return e.placeLabels()}},r.setChartData(this.data),this.addSeriesListeners(r),r.addChartEventListeners()}removeAllSeries(){this.series.forEach(r=>{r.removeEventListener("nodeClick",this.onSeriesNodeClick),r.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),r.destroy(),r.chart=void 0}),this._series=[]}addSeriesListeners(r){this.hasEventListener("seriesNodeClick")&&r.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&r.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(r=>{r.removeEventListener("nodeClick",this.onSeriesNodeClick),r.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(r)})}assignSeriesToAxes(){this.axes.forEach(r=>{r.boundSeries=this.series.filter(e=>e.axes[r.direction]===r)})}assignAxesToSeries(){let r={};this.axes.forEach(e=>{var t;let i=e.direction;((t=r[i])!=null?t:r[i]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(t=>{let i=r[t];if(!i){be.warnOnce(`no available axis for direction [${t}]; check series and axes configuration.`);return}let n=e.getKeys(t),s=this.findMatchingAxis(i,n);if(!s){be.warnOnce(`no matching axis for direction [${t}] and keys [${n}]; check series and axes configuration.`);return}e.axes[t]=s})})}findMatchingAxis(r,e){for(let t of r){let i=t.keys;if(!i.length)return t;if(e){for(let n of e)if(i.indexOf(n)>=0)return t}}}rawResize(r){var e;let{width:t,height:i}=r;if(t=Math.floor(t),i=Math.floor(i),!this.autoSize||t===0&&i===0)return;let[n=0,s=0]=(e=this._lastAutoSize)!=null?e:[];n===t&&s===i||(this._lastAutoSize=[t,i],this.resize(void 0,void 0,"SizeMonitor"))}resize(r,e,t){var i,n,s,o;if(r??(r=(n=this.width)!=null?n:this.autoSize?(i=this._lastAutoSize)==null?void 0:i[0]:this.scene.canvas.width),e??(e=(o=this.height)!=null?o:this.autoSize?(s=this._lastAutoSize)==null?void 0:s[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${t}`,{width:r,height:e,stack:new Error().stack}),!(!r||!e||!Number.isFinite(r)||!Number.isFinite(e))&&this.scene.resize(r,e)){this.disablePointer(),this.animationManager.reset();let a=!0;this.autoSize&&this._firstAutoSize&&(a=!1,this._firstAutoSize=!1),this.update(2,{forceNodeDataRefresh:!0,skipAnimations:a})}}processData(){return ne(this,null,function*(){this.series.some(t=>t.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());let r=new IA(this.mode),e=this.series.map(t=>t.processData(r));yield r.execute(),yield Promise.all(e),yield this.updateLegend()})}placeLabels(){let r=[],e=[];for(let l of this.series){if(!l.visible)continue;let c=l.getLabelData();c&&MN(c[0])&&(e.push(c),r.push(l))}let{seriesRect:t}=this,{top:i,right:n,bottom:s,left:o}=this.seriesArea.padding,a=t&&e.length>0?LN(e,{x:-o,y:-i,width:t.width+o+n,height:t.height+i+s}):[];return new Map(a.map((l,c)=>[r[c],l]))}updateLegend(){return ne(this,null,function*(){this.legends.forEach((r,e)=>{let t=n=>n.every(s=>s.legendType==="category"),i=this.series.filter(n=>n.properties.showInLegend).flatMap(n=>n.getLegendData(e));t(i)&&this.validateCategoryLegendData(i),r.data=i})})}validateCategoryLegendData(r){let e={};r.forEach(t=>{var i,n,s,o,a;let l=(i=this.series.find(c=>c.id===t.seriesId))==null?void 0:i.type;l&&((n=e[l])!=null||(e[l]={}),(a=(s=e[l])[o=t.label.text])!=null||(s[o]=new Set),t.marker.fill!=null&&e[l][t.label.text].add(t.marker.fill))});for(let t of Object.values(e))for(let[i,n]of Object.entries(t))n.size>1&&be.warnOnce(`legend item '${i}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){return ne(this,null,function*(){var r;let e=this.animationRect;yield this.performLayout(),e&&!((r=this.animationRect)!=null&&r.equals(e))&&this.animationManager.skipCurrentBatch(),this.handleOverlays(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return ne(this,null,function*(){this.scene.root&&(this.scene.root.visible=!0);let{width:r,height:e}=this.scene,t={shrinkRect:new it(0,0,r,e)};return t=this.layoutService.dispatchPerformLayout("start-layout",t),t=this.layoutService.dispatchPerformLayout("before-series",t),t.shrinkRect})}pickSeriesNode(r,e,t){var i,n;let s=performance.now(),o=e?[0]:void 0,a=[...this.series].reverse(),l;for(let c of a){if(!c.visible||!c.rootGroup.visible)continue;let{match:d,distance:u}=(i=c.pickNode(r,o))!=null?i:{};if(!(!d||u==null)&&((!l||l.distance>u)&&u<=(t??1/0)&&(l={series:c,distance:u,datum:d}),u===0))break}return this.extraDebugStats.pickSeriesNode=Math.round(((n=this.extraDebugStats.pickSeriesNode)!=null?n:0)+(performance.now()-s)),l}onMouseMove(r){this.lastInteractionEvent=r,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=r.offsetX,this.extraDebugStats.mouseY=r.offsetY,this.update(5)}onLeave(r){this.tooltip.pointerLeftOntoTooltip(r)||(this.disablePointer(),this.update(5))}handlePointer(r){let{lastPick:e,hoverRect:t}=this,{offsetX:i,offsetY:n}=r,s=(o=!1)=>{e&&this.disablePointer(o)};if(!t?.containsPoint(i,n)){s();return}this.handlePointerTooltip(r,s),this.handlePointerNode(r)}handlePointerTooltip(r,e){let{lastPick:t,tooltip:i}=this,{range:n}=i,{offsetX:s,offsetY:o}=r,a;typeof n=="number"&&Number.isFinite(n)&&(a=n);let l=this.pickSeriesNode({x:s,y:o},n==="exact",a);if(!l){this.tooltipManager.removeTooltip(this.id),this.highlight.range==="tooltip"&&e(!0);return}let c=this.highlight.range==="node"||!t||t.datum!==l.datum,d;c?(d=l.series.getTooltipHtml(l.datum),this.highlight.range==="tooltip"&&this.highlightManager.updateHighlight(this.id,l.datum)):t&&(t.event=r.sourceEvent);let u=a!=null,h=this.tooltip.enabled&&l.series.properties.tooltip.enabled,p=n==="exact"&&l.distance===0,g=h&&(n==="nearest"||u||p)&&(!c||d!==void 0),m=pw.makeTooltipMeta(r,this.scene.canvas,l.datum,this.specialOverrides.window);g&&this.tooltipManager.updateTooltip(this.id,m,d)}handlePointerNode(r){this.checkSeriesNodeRange(r,(t,i)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),this.highlight.range==="node"&&this.highlightManager.updateHighlight(this.id,i)})||(this.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.highlightManager.updateHighlight(this.id))}onClick(r){if(this.checkSeriesNodeClick(r)){this.update(3);return}this.fireEvent({type:"click",event:r.sourceEvent})}onDoubleClick(r){if(this.checkSeriesNodeDoubleClick(r)){this.update(3);return}this.fireEvent({type:"doubleClick",event:r.sourceEvent})}checkSeriesNodeClick(r){return this.checkSeriesNodeRange(r,(e,t)=>e.fireNodeClickEvent(r.sourceEvent,t))}checkSeriesNodeDoubleClick(r){return this.checkSeriesNodeRange(r,(e,t)=>e.fireNodeDoubleClickEvent(r.sourceEvent,t))}checkSeriesNodeRange(r,e){let t=this.pickSeriesNode({x:r.offsetX,y:r.offsetY},!1),i=t?.datum,n=i?.series.properties.nodeClickRange,s;typeof n=="number"&&Number.isFinite(n)&&(s=n);let o=this.pickSeriesNode({x:r.offsetX,y:r.offsetY},!0);if(o?this.highlightManager.updatePicked(this.id,o.datum):this.highlightManager.updatePicked(this.id),i&&n==="nearest")return e(i.series,i),!0;if(n!=="exact"&&(o=this.pickSeriesNode({x:r.offsetX,y:r.offsetY},!1,s)),!o)return!1;let a=s!=null,l=n==="exact"&&o.distance===0;return a||l?(e(o.series,o.datum),!0):!1}changeHighlightDatum(r){var e,t;let i=new Set,{series:n=void 0,datum:s}=(e=r.currentHighlight)!=null?e:{},{series:o=void 0,datum:a}=(t=r.previousHighlight)!=null?t:{};o&&i.add(o),n&&i.add(n),o?.properties.cursor&&a&&this.cursorManager.updateCursor(o.id),n?.properties.cursor&&s&&this.cursorManager.updateCursor(n.id,n.properties.cursor),this.lastPick=r.currentHighlight?{datum:r.currentHighlight}:void 0,n==null||o==null?this.update(3):this.update(3,{seriesToUpdate:i})}waitForUpdate(r=5e3){return ne(this,null,function*(){let e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==6;){if(performance.now()-e>r)throw new Error("waitForUpdate() timeout reached.");yield qN(5)}yield this.updateMutex.waitForClearAcquireQueue()})}handleOverlays(){let r=!this.series.some(e=>e.hasData());if(this.toggleOverlay(this.overlays.noData,r),!r){let e=!this.series.some(t=>t.visible);this.toggleOverlay(this.overlays.noVisibleSeries,e)}}toggleOverlay(r,e){e&&this.seriesRect?r.show(this.seriesRect):r.hide()}getMinRect(){let r=this.series.map(e=>e.getMinRect()).filter(e=>e!==void 0);if(r.length)return new it(0,0,r.reduce((e,t)=>Math.max(e,t.width),0),r.reduce((e,t)=>Math.max(e,t.height),0))}};x([qr({newValue(r){this.destroyed||(r.setAttribute("data-ag-charts",""),r.appendChild(this.element),Sw.set(r,this))},oldValue(r){r.removeAttribute("data-ag-charts"),r.removeChild(this.element),Sw.delete(r)}})],vs.prototype,"container",2);x([qr({newValue(r){var e;(e=this.series)==null||e.forEach(t=>{t.setChartData(r)})}})],vs.prototype,"data",2);x([qr({newValue(r){this.resize(r,void 0,"width option")}})],vs.prototype,"width",2);x([qr({newValue(r){this.resize(void 0,r,"height option")}})],vs.prototype,"height",2);x([qr({changeValue(r){this.autoSizeChanged(r)}}),_(Ze)],vs.prototype,"autoSize",2);x([qr({newValue(r){var e;(e=this.scene.root)==null||e.appendChild(r.node)},oldValue(r){var e;(e=this.scene.root)==null||e.removeChild(r.node)}})],vs.prototype,"title",2);x([qr({newValue(r){var e;(e=this.scene.root)==null||e.appendChild(r.node)},oldValue(r){var e;(e=this.scene.root)==null||e.removeChild(r.node)}})],vs.prototype,"subtitle",2);x([qr({newValue(r){var e;(e=this.scene.root)==null||e.appendChild(r.node)},oldValue(r){var e;(e=this.scene.root)==null||e.removeChild(r.node)}})],vs.prototype,"footnote",2);x([_(Di(["standalone","integrated"],"a chart mode"))],vs.prototype,"mode",2);var iD=class extends Ip{isContinuous(){var r,e;let t=kt.is((r=this.axes.x)==null?void 0:r.scale),i=kt.is((e=this.axes.y)==null?void 0:e.scale);return{isContinuousX:t,isContinuousY:i}}getModulePropertyDefinitions(){return this.moduleMap.mapValues(r=>r.getPropertyDefinitions(this.isContinuous())).flat()}requestDataModel(r,e,t){return ne(this,null,function*(){t.props.push(...this.getModulePropertyDefinitions());let{dataModel:i,processedData:n}=yield r.request(this.id,e??[],t);return this.dataModel=i,this.processedData=n,this.dispatch("data-processed",{dataModel:i,processedData:n}),{dataModel:i,processedData:n}})}isProcessedDataAnimatable(){var r,e;let t=(e=(r=this.processedData)==null?void 0:r.reduced)==null?void 0:e.animationValidation;if(!t)return!0;let{orderedKeys:i,uniqueKeys:n}=t;return i&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}},Cl=class extends Yr{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};x([_(yt,{optional:!0})],Cl.prototype,"fill",2);x([_(ri,{optional:!0})],Cl.prototype,"fillOpacity",2);x([_(yt,{optional:!0})],Cl.prototype,"stroke",2);x([_(ge,{optional:!0})],Cl.prototype,"strokeWidth",2);x([_(ri,{optional:!0})],Cl.prototype,"strokeOpacity",2);x([_(Dc,{optional:!0})],Cl.prototype,"lineDash",2);x([_(ge,{optional:!0})],Cl.prototype,"lineDashOffset",2);var FC=class extends Yr{};x([_(ge,{optional:!0})],FC.prototype,"strokeWidth",2);x([_(ri,{optional:!0})],FC.prototype,"dimOpacity",2);x([_(Ze,{optional:!0})],FC.prototype,"enabled",2);var rD=class extends Yr{constructor(){super(...arguments),this.color="black"}};x([_(yt,{optional:!0})],rD.prototype,"color",2);var Km=class extends Yr{constructor(){super(...arguments),this.item=new Cl,this.series=new FC,this.text=new rD}};x([_(vt)],Km.prototype,"item",2);x([_(vt)],Km.prototype,"series",2);x([_(vt)],Km.prototype,"text",2);var Aa=class extends Yr{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new Km}};x([_(Se,{optional:!0})],Aa.prototype,"id",2);x([_(Ze)],Aa.prototype,"visible",2);x([_(Ze)],Aa.prototype,"showInLegend",2);x([_(Se)],Aa.prototype,"cursor",2);x([_(jw)],Aa.prototype,"nodeClickRange",2);x([_(vt)],Aa.prototype,"highlightStyle",2);var Dk={x:["xKey"],y:["yKey"]},Ok={x:["xName"],y:["yName"]},pb=class extends OC{constructor(r,e,t,i){super(r,e,t,i),this.xKey=i.properties.xKey,this.yKey=i.properties.yKey}},Nc=class extends Aa{};x([_(Se,{optional:!0})],Nc.prototype,"legendItemName",2);var kc=class extends iD{constructor(r){var e=r,{pathsPerSeries:t=1,hasMarkers:i=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:s=[],directionKeys:o=Dk,directionNames:a=Ok,datumSelectionGarbageCollection:l=!0,markerSelectionGarbageCollection:c=!0,animationResetFns:d}=e,u=In(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]);super(H({directionKeys:o,directionNames:a,useSeriesGroupLayer:!0,canHaveAxes:!0},u)),this._contextNodeData=[],this.NodeClickEvent=pb,this.highlightSelection=Ri.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Ri.select(this.highlightLabel,Xt),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=_i.create(),this.opts={pathsPerSeries:t,hasMarkers:i,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:s,directionKeys:o,directionNames:a,animationResetFns:d,datumSelectionGarbageCollection:l,markerSelectionGarbageCollection:c},this.animationState=new Hm("empty",{empty:{update:{target:"ready",action:h=>this.animateEmptyUpdateReady(h)}},ready:{updateData:"waiting",clear:"clearing",highlight:h=>this.animateReadyHighlight(h),highlightMarkers:h=>this.animateReadyHighlightMarkers(h),resize:h=>this.animateReadyResize(h)},waiting:{update:{target:"ready",action:h=>this.animateWaitingUpdateReady(h)}},clearing:{update:{target:"empty",action:h=>this.animateClearingUpdateEmpty(h)}}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData.slice()}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",r=>this.onLegendItemClick(r)),this.ctx.chartEventManager.addListener("legend-item-double-click",r=>this.onLegendItemDoubleClick(r)))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update(r){return ne(this,arguments,function*({seriesRect:e}){var t,i;let{visible:n,_contextNodeData:s}=this,{series:o}=(i=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight())!=null?i:{},a=o?o===this:void 0,l=this.checkResize(e),c=yield this.updateHighlightSelection(a);yield this.updateSelections(n),yield this.updateNodes(c,a,n);let d=this.getAnimationData(e,s);l&&this.animationState.transition("resize",d),this.animationState.transition("update",d)})}updateSelections(r){return ne(this,null,function*(){if(!(!r&&this.ctx.animationManager.isSkipped())&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();let e=this.isProcessedDataAnimatable();this._contextNodeData.forEach(n=>{var s;(s=n.animationValid)!=null||(n.animationValid=e)}),yield this.updateSeriesGroups();let{dataModel:t,processedData:i}=this;t!==void 0&&i!==void 0&&this.dispatch("data-update",{dataModel:t,processedData:i})}yield Promise.all(this.subGroups.map((e,t)=>this.updateSeriesGroupSelections(e,t)))}})}updateSeriesGroupSelections(r,e,t){return ne(this,null,function*(){let{datumSelection:i,labelSelection:n,markerSelection:s,paths:o}=r,a=this._contextNodeData[e],{nodeData:l,labelData:c,itemId:d}=a;yield this.updatePaths({seriesHighlighted:t,itemId:d,contextData:a,paths:o,seriesIdx:e}),r.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:i,seriesIdx:e}),r.labelSelection=yield this.updateLabelSelection({labelData:c,labelSelection:n,seriesIdx:e}),s&&(r.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:s,seriesIdx:e}))})}markerFactory(){let r=Ic();return new r}updateSeriesGroups(){return ne(this,null,function*(){let{_contextNodeData:r,contentGroup:e,subGroups:t,opts:{pathsPerSeries:i,hasMarkers:n,datumSelectionGarbageCollection:s,markerSelectionGarbageCollection:o}}=this;if(r.length===t.length)return;r.length<t.length&&t.splice(r.length).forEach(({dataNodeGroup:l,markerGroup:c,labelGroup:d,paths:u})=>{e.removeChild(l),c&&e.removeChild(c),d&&e.removeChild(d);for(let h of u)e.removeChild(h)});let a=r.length;for(;a>t.length;){let c=this.subGroupId++,d=new We({name:`${this.id}-series-sub${c}-dataNodes`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data",c)}),u=n?new We({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",c)}):void 0,h=new We({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:7,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",c)});e.appendChild(d),e.appendChild(h),u&&e.appendChild(u);let p=[];for(let f=0;f<i;f++)p[f]=new ms,p[f].zIndex=4,p[f].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",f),e.appendChild(p[f]);t.push({paths:p,dataNodeGroup:d,markerGroup:u,labelGroup:h,labelSelection:Ri.select(h,Xt),datumSelection:Ri.select(d,()=>this.nodeFactory(),s),markerSelection:u?Ri.select(u,()=>this.markerFactory(),o):void 0})}})}getGroupZIndexSubOrder(r,e=0){var t;let i=super.getGroupZIndexSubOrder(r,e);if(r==="paths"){let n=(t=this.opts.pathsZIndexSubOrderOffset[e])!=null?t:0,s=i[0];typeof s=="function"?i[0]=()=>+s()+n:i[0]=+s+n}return i}updateNodes(r,e,t){return ne(this,null,function*(){var i;let{highlightSelection:n,highlightLabelSelection:s,opts:{hasMarkers:o,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&((i=this._contextNodeData)==null?void 0:i.length)>0&&t;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&!!e;let d=this.getOpacity();o?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),a&&(yield this.updateLabelNodes({labelSelection:s,seriesIdx:-1})),yield Promise.all(this.subGroups.map((u,h)=>ne(this,null,function*(){let{dataNodeGroup:p,markerGroup:f,datumSelection:g,labelSelection:m,markerSelection:v,paths:C,labelGroup:S}=u,{itemId:b}=this.contextNodeData[h],T=c;p.opacity=d,p.visible=l||T,S.visible=T,f&&(f.opacity=d,f.zIndex=p.zIndex>=4?p.zIndex:p.zIndex+1,f.visible=T),S&&(S.opacity=d),yield this.updatePathNodes({seriesHighlighted:e,itemId:b,paths:C,seriesIdx:h,opacity:d,visible:T,animationEnabled:l}),p.visible&&(yield this.updateDatumNodes({datumSelection:g,highlightedItems:r,isHighlight:!1,seriesIdx:h}),yield this.updateLabelNodes({labelSelection:m,seriesIdx:h}),o&&v&&(yield this.updateMarkerNodes({markerSelection:v,isHighlight:!1,seriesIdx:h})))})))})}getHighlightLabelData(r,e){let t=r.filter(i=>i.datum===e.datum&&i.itemId===e.itemId);return t.length!==0?t:void 0}getHighlightData(r,e){return e?[e]:void 0}updateHighlightSelection(r){return ne(this,null,function*(){var e;let{highlightSelection:t,highlightLabelSelection:i,_contextNodeData:n}=this,s=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight(),o=r&&s?.datum?s:void 0,a,l;if(o!=null){let c=this.isLabelEnabled();for(let{labelData:d,nodeData:u}of n)if(l=this.getHighlightData(u,o),a=c?this.getHighlightLabelData(d,o):void 0,(!c||a!=null)&&l!=null)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:t}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:i}),l})}pickNodeExactShape(r){var e;let t=super.pickNodeExactShape(r);if(t)return t;let{x:i,y:n}=r,{opts:{hasMarkers:s}}=this,o;for(let{dataNodeGroup:a,markerGroup:l}of this.subGroups){let c=a.pickNode(i,n);if(!c&&s&&(c=l?.pickNode(i,n)),c)break}if(o)return{datum:o.datum,distance:0};for(let a of this.moduleMap.modules){let{datum:l}=(e=a.pickNodeExact(r))!=null?e:{};if(l!==void 0)return{datum:l,distance:0}}}pickNodeClosestDatum(r){var e,t;let{x:i,y:n}=r,{axes:s,rootGroup:o,_contextNodeData:a}=this,l=s.x,c=s.y,d=o.transformPoint(i,n),u=1/0,h;for(let p of a)for(let f of p.nodeData){let{point:{x:g=NaN,y:m=NaN}={}}=f;if(isNaN(g)||isNaN(m)||!(l?.inRange(g)&&c?.inRange(m)))continue;let C=Math.max(ni(d.x-g,2)+ni(d.y-m,2),0);C<u&&(u=C,h=f)}for(let p of this.moduleMap.modules){let f=p.pickNodeNearest(r);if(f!==void 0&&f.distanceSquared<u){u=f.distanceSquared,h=f.datum;break}}if(h){let p=Math.max(Math.sqrt(u)-((t=(e=h.point)==null?void 0:e.size)!=null?t:0),0);return{datum:h,distance:p}}}pickNodeMainAxisFirst(r,e){var t,i;let{x:n,y:s}=r,{axes:o,rootGroup:a,_contextNodeData:l}=this,c=o.x,d=o.y,u=[c,d].filter(v=>v instanceof dl).map(v=>v.direction);if(e&&u.length===0)return;let[h="x"]=u,p=a.transformPoint(n,s),f=h==="x"?[p.x,p.y]:[p.y,p.x],g=[1/0,1/0],m;for(let v of l)for(let C of v.nodeData){let{point:{x:S=NaN,y:b=NaN}={}}=C;if(isNaN(S)||isNaN(b)||!(c?.inRange(S)&&d?.inRange(b)))continue;let A=h==="x"?[S,b]:[b,S],E=!0;for(let N=0;N<A.length;N++){let M=Math.abs(A[N]-f[N]);if(M>g[N]){E=!1;break}M<g[N]&&(g[N]=M,g.fill(1/0,N+1,g.length))}E&&(m=C)}if(m){let v=Math.max(ni(g[0],2)+ni(g[1],2)-((i=(t=m.point)==null?void 0:t.size)!=null?i:0),0);for(let C of this.moduleMap.modules){let S=C.pickNodeMainAxisFirst(r);if(S!==void 0&&S.distanceSquared<v){m=S.datum,v=S.distanceSquared;break}}return{datum:m,distance:Math.sqrt(v)}}}onLegendItemClick(r){let{legendItemName:e}=this.properties,{enabled:t,itemId:i,series:n}=r,s=e!=null&&e===r.legendItemName;(n.id===this.id||s)&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(r){let{enabled:e,itemId:t,series:i,numVisibleItems:n}=r,{legendItemName:s}=this.properties,o=s!=null&&s===r.legendItemName;i.id===this.id||o?this.toggleSeriesItem(t,!0):e&&n===1?this.toggleSeriesItem(t,!0):this.toggleSeriesItem(t,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){let[r]=this._contextNodeData;if(!r?.nodeData.length)return;let e=r.nodeData.map(({midPoint:i})=>{var n;return(n=i?.x)!=null?n:0}).sort((i,n)=>i-n).reduce((i,n,s,o)=>s>0?Math.max(i,n-o[s-1]):i,0),t=r.nodeData.map(({midPoint:i})=>{var n;return(n=i?.y)!=null?n:0}).sort((i,n)=>i-n).reduce((i,n,s,o)=>s>0?Math.max(i,n-o[s-1]):i,0);return new it(0,0,e,t)}updateHighlightSelectionItem(r){return ne(this,null,function*(){let{opts:{hasMarkers:e}}=this,{items:t,highlightSelection:i}=r,n=t??[];if(e){let s=i;return this.updateMarkerSelection({nodeData:n,markerSelection:s,seriesIdx:-1})}else return this.updateDatumSelection({nodeData:n,datumSelection:i,seriesIdx:-1})})}updateHighlightSelectionLabel(r){return ne(this,null,function*(){var e;return this.updateLabelSelection({labelData:(e=r.items)!=null?e:[],labelSelection:r.highlightLabelSelection,seriesIdx:-1})})}updateDatumSelection(r){return ne(this,null,function*(){return r.datumSelection})}updateDatumNodes(r){return ne(this,null,function*(){})}updateMarkerSelection(r){return ne(this,null,function*(){return r.markerSelection})}updateMarkerNodes(r){return ne(this,null,function*(){})}updatePaths(r){return ne(this,null,function*(){r.paths.forEach(e=>e.visible=!1)})}updatePathNodes(r){return ne(this,null,function*(){let{paths:e,opacity:t,visible:i}=r;for(let n of e)n.opacity=t,n.visible=i})}resetAllAnimation(r){var e,t;let{path:i,datum:n,label:s,marker:o}=(t=(e=this.opts)==null?void 0:e.animationResetFns)!=null?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),i&&r.paths.forEach(a=>{qi(a,i)}),n&&qi(r.datumSelections,n),s&&qi(r.labelSelections,s),o&&qi(r.markerSelections,o),r.contextData.some(a=>a.animationValid===!1)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateWaitingUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateReadyHighlight(r){var e,t;let{datum:i}=(t=(e=this.opts)==null?void 0:e.animationResetFns)!=null?t:{};i&&qi([r],i)}animateReadyHighlightMarkers(r){var e,t;let{marker:i}=(t=(e=this.opts)==null?void 0:e.animationResetFns)!=null?t:{};i&&qi([r],i)}animateReadyResize(r){this.resetAllAnimation(r)}animateClearingUpdateEmpty(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(r,e){return{datumSelections:this.subGroups.map(({datumSelection:i})=>i),markerSelections:this.subGroups.filter(({markerSelection:i})=>i!==void 0).map(({markerSelection:i})=>i),labelSelections:this.subGroups.map(({labelSelection:i})=>i),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map(({paths:i})=>i),seriesRect:r}}calculateScaling(){let r={},e=t=>{let i=this.axes[t];if(i){if(i.scale instanceof sb){let{range:n,domain:s}=i.scale;r[t]={type:"log",convert:o=>i.scale.convert(o),domain:[s[0],s[1]],range:[n[0],n[1]]}}else if(i.scale instanceof kt){let{range:n}=i.scale,s=i.scale.getDomain();r[t]={type:"continuous",domain:[s[0],s[1]],range:[n[0],n[1]]}}else if(i.scale){let{domain:n}=i.scale;r[t]={type:"category",domain:n,range:n.map(s=>i.scale.convert(s))}}}};return e("x"),e("y"),r}},Fk=["top","right","bottom","left"],fb=class nD extends vs{constructor(e,t){super(e,t),this.paired=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){return ne(this,null,function*(){let e=yield hl(nD.prototype,this,"performLayout").call(this),{animationRect:t,seriesRect:i,visibility:n,clipSeries:s}=this.updateAxes(e);this.seriesRoot.visible=n.series,this.seriesRect=i,this.animationRect=t,this.seriesRoot.translationX=Math.floor(i.x),this.seriesRoot.translationY=Math.floor(i.y);let{seriesArea:{padding:o}}=this,a=i.clone().grow({top:o.top,right:o.right,bottom:o.bottom,left:o.left});return this.hoverRect=a,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:s,series:{rect:i,paddedRect:a,visible:n.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(l=>H({id:l.id},l.getLayoutState()))}),e})}updateAxes(e){var t;let i=this.axes.flatMap(v=>{var C;return(C=v.crossLines)!=null?C:[]}).map(v=>v.id),n=this._lastCrossLineIds!=null&&this._lastCrossLineIds.length===i.length&&this._lastCrossLineIds.every((v,C)=>i[C]===v),s,o;n?(s=H({},this._lastAxisWidths),o=H({},this._lastVisibility)):(s={top:0,bottom:0,left:0,right:0},o={crossLines:!0,series:!0},this._lastCrossLineIds=i);let a=new Set(this._axes.map(v=>v.position));for(let v of Object.keys(s))a.has(v)||delete s[v];let l=(v,C)=>Object.keys(v).some(S=>s[S]==null)?!1:o.crossLines===C.crossLines&&o.series===C.series&&Object.entries(s).every(([S,b])=>{let T=v[S];return b!=null||T!=null?b===T:!0}),c=v=>Object.entries(v).reduce((C,[S,b])=>(b&&Math.abs(b)===1/0&&(b=0),C[S]=b!=null?Math.ceil(b):b,C),{}),d={},u={},h=!1,p=(t=this.seriesRect)==null?void 0:t.clone(),f=0,g={};do{Object.assign(s,d),Object.assign(o,u);let v=this.updateAxesPass(s,e.clone(),p);if(d=c(v.axisWidths),u=v.visibility,h=v.clipSeries,p=v.seriesRect,g=v.primaryTickCounts,f++>10){be.warn("unable to find stable axis layout.");break}}while(!l(d,u));this.axes.forEach(v=>{let{direction:C}=v,S=g[C];v.update(S)});let m=5;return this.axes.forEach(v=>{if(v.setCrossLinesVisible(o.crossLines),!!p)switch(v.clipGrid(p.x,p.y,p.width+m,p.height+m),v.position){case"left":case"right":v.clipTickLines(e.x,p.y,e.width+m,p.height+m);break;case"top":case"bottom":v.clipTickLines(p.x,e.y,p.width+m,e.height+m);break}}),this._lastAxisWidths=s,this._lastVisibility=o,{seriesRect:p,animationRect:e,visibility:o,clipSeries:h}}updateAxesPass(e,t,i){let{axes:n}=this,s={},o={},a={series:!0,crossLines:!0},l=!1,c={},d=this.applySeriesPadding(t),u=i?this.buildCrossLinePadding(e):{},h=this.buildAxisBound(d,e,u,a),p=this.buildSeriesRect(h,e);return n.forEach(f=>{var g,m;let{position:v="left"}=f,{clipSeries:C,axisThickness:S,axisOffset:b}=this.calculateAxisDimensions({axis:f,seriesRect:p,paddedBounds:d,axisWidths:e,newAxisWidths:o,primaryTickCounts:c,clipSeries:l,addInterAxisPadding:((g=s[v])!=null?g:0)>0});s[v]=((m=s[v])!=null?m:0)+1,l=l||C,this.positionAxis({axis:f,axisBound:h,axisOffset:b,axisThickness:S,axisWidths:e,primaryTickCounts:c,seriesRect:p})}),{clipSeries:l,seriesRect:p,axisWidths:o,visibility:a,primaryTickCounts:c}}buildCrossLinePadding(e){var t;let i={};this.axes.forEach(n=>{n.crossLines&&n.crossLines.forEach(s=>{s.calculatePadding(i)})});for(let[n,s=0]of Object.entries(i))i[n]=Math.max(s-((t=e[n])!=null?t:0),0);return i}applySeriesPadding(e){let t=e.clone(),i=this.axes.slice().reverse();return Fk.forEach(n=>{let s=this.seriesArea.padding[n],o=i.find(a=>a.position===n);o?o.seriesAreaPadding=s:t.shrink(s,n)}),t}buildAxisBound(e,t,i,n){var s,o,a,l;let c=e.clone(),{top:d=0,right:u=0,bottom:h=0,left:p=0}=i,f=p+u,g=d+h,m=((s=t.left)!=null?s:0)+((o=t.right)!=null?o:0)+f,v=((a=t.top)!=null?a:0)+((l=t.bottom)!=null?l:0)+g;return c.width<=m||c.height<=v?(n.crossLines=!1,n.series=!1,c):(c.x+=p,c.y+=d,c.width-=f,c.height-=g,c)}buildSeriesRect(e,t){let i=e.clone(),{top:n,bottom:s,left:o,right:a}=t;return i.x+=o??0,i.y+=n??0,i.width-=(o??0)+(a??0),i.height-=(n??0)+(s??0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(e,t,i,n){let{x:s,y:o,width:a,height:l}=e,c=[s,o,s+a,o+l],d=n===1?Math.min:Math.max,u=c[(i==="x"?0:1)+(n===1?0:2)];return d(t,u)}calculateAxisDimensions(e){var t,i,n,s,o;let{axis:a,seriesRect:l,paddedBounds:c,axisWidths:d,newAxisWidths:u,primaryTickCounts:h,addInterAxisPadding:p}=e,{clipSeries:f}=e,{position:g="left",direction:m}=a,v=ee=>ee instanceof dl||ee instanceof Pu?[0,l.height]:[l.height,0],C=(t=u[g])!=null?t:0;switch(g){case"top":case"bottom":a.range=[0,l.width],a.gridLength=l.height;break;case"right":case"left":a.range=v(a),a.gridLength=l.width;break}let S=this.zoomManager.getAxisZoom(a.id),{min:b=0,max:T=1}=S??{};a.visibleRange=[b,T];let A=a.dataDomain.clipped||a.visibleRange[0]>0||a.visibleRange[1]<1;f||(f=A);let E=a.nice?h[m]:void 0,N=.3;a.thickness!=null&&a.thickness>0?a.maxThickness=a.thickness:m==="y"?a.maxThickness=c.width*N:a.maxThickness=c.height*N;let M=a.calculateLayout(E);E=M.primaryTickCount,h[m]=(i=h[m])!=null?i:E;let k=0;if(a.thickness!=null&&a.thickness>0)k=a.thickness;else{let{bbox:ee}=M;k=m==="x"?ee.height:ee.width}return p&&(k+=15),k=Math.ceil(k),u[g]=((n=u[g])!=null?n:0)+k,a.gridPadding=((s=d[g])!=null?s:0)-((o=u[g])!=null?o:0),{clipSeries:f,axisThickness:k,axisOffset:C,primaryTickCount:E}}positionAxis(e){var t,i,n,s;let{axis:o,axisBound:a,axisWidths:l,seriesRect:c,axisOffset:d,axisThickness:u}=e,{position:h}=o;switch(h){case"top":o.translation.x=a.x+((t=l.left)!=null?t:0),o.translation.y=this.clampToOutsideSeriesRect(c,a.y+1+d+u,"y",1);break;case"bottom":o.translation.x=a.x+((i=l.left)!=null?i:0),o.translation.y=this.clampToOutsideSeriesRect(c,a.y+a.height+1-u-d,"y",-1);break;case"left":o.translation.y=a.y+((n=l.top)!=null?n:0),o.translation.x=this.clampToOutsideSeriesRect(c,a.x+d+u,"x",1);break;case"right":o.translation.y=a.y+((s=l.top)!=null?s:0),o.translation.x=this.clampToOutsideSeriesRect(c,a.x+a.width-u-d,"x",-1);break}o.updatePosition({rotation:hs(o.rotation),sideFlag:o.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(e=>!(e instanceof kc&&e.shouldFlipXY()))}};fb.className="CartesianChart";fb.type="cartesian";var sD=fb,Zg=class oD{constructor(e){this.chart=e}static isInstance(e){var t;return e instanceof oD||((t=e.constructor)==null?void 0:t.name)==="AgChartInstanceProxy"&&e.chart!=null?!0:e.chart!=null&&this.validateImplementation(e)}static validateImplementation(e){var t,i;let n=["getOptions","destroy"],s=Object.keys((i=(t=e.constructor)==null?void 0:t.prototype)!=null?i:{});return n.every(o=>s.includes(o))}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}};function Pk(r,e,t){let i=Math.floor(Math.min(r[0],r[1])),n=Math.max(r[0],r[1]);i=Ik(i,n,e);let s=Lk(i,n,e),o=e-1;n=i+o*s;let a=t?[n,i]:[i,n],l=Mk(i,s,e);return[a,l]}function Ik(r,e,t){let i=Math.abs(e-r)/(t-1),n=Math.floor(Math.log10(i)),s=Math.pow(10,n);return Math.floor(r/s)*s}function Mk(r,e,t){let i=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(i):0,s=Math.pow(10,n),o=bm(n);for(let a=0;a<t;a++){let l=r+e*a;o[a]=Math.round(l*s)/s}return o}function Lk(r,e,t){let i=t-1,n=(e-r)/i;return Nk(n)}function Nk(r){let e=Math.floor(Math.log10(r)),t=Math.pow(10,e),i=r/t*10;return i>0&&i<=1?t/10:i>1&&i<=2?2*t/10:i>1&&i<=5?5*t/10:i>5&&i<=10?10*t/10:i>10&&i<=20?20*t/10:i>20&&i<=40?40*t/10:i>40&&i<=50?50*t/10:i>50&&i<=100?100*t/10:i}var aD=class extends wo{constructor(){super(...arguments),this.maxSpacing=NaN}};x([_(pl(Bs(ei.restrict({min:1}),ku("minSpacing")),Ep)),vl(NaN)],aD.prototype,"maxSpacing",2);var Iu=class extends Bu{constructor(r,e=new Au){super(r,e),this.min=NaN,this.max=NaN}normaliseDataDomain(r){let{min:e,max:t}=this,{extent:i,clipped:n}=Im(r,e,t);return{domain:i,clipped:n}}formatDatum(r){return typeof r=="number"?r.toFixed(2):(be.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(r))}createTick(){return new aD}updateSecondaryAxisTicks(r){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(this.dataDomain.domain.length===0)return[];let[e,t]=Pk(this.dataDomain.domain,r??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),t}};Iu.className="NumberAxis";Iu.type="number";x([_(Bs(Tp,km("max"))),vl(NaN)],Iu.prototype,"min",2);x([_(Bs(Tp,ku("min"))),vl(NaN)],Iu.prototype,"max",2);var lD=Gt(r=>va(r)&&r!==0,"a non-zero number"),Ac=class extends Iu{constructor(r){super(r,new sb),this.min=NaN,this.max=NaN}normaliseDataDomain(r){let{min:e,max:t}=this,{extent:i,clipped:n}=Im(r,e,t),s=i[0]>i[1],o=i[0]<0&&i[1]>0,a=i[0]===0&&i[1]===0;return(s||o||a)&&(r=[],o?be.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&be.warn("the data domain has 0 extent, no data is rendered.")),i[0]===0&&(i[0]=1),i[1]===0&&(i[1]=-1),{domain:i,clipped:n}}set base(r){this.scale.base=r}get base(){return this.scale.base}};Ac.className="LogAxis";Ac.type="log";x([_(Bs(Tp,lD,km("max"))),vl(NaN)],Ac.prototype,"min",2);x([_(Bs(Tp,lD,ku("min"))),vl(NaN)],Ac.prototype,"max",2);var kk=pl(Bs(ei.restrict({min:1}),ku("minSpacing")),Ep),cD=class extends wo{constructor(){super(...arguments),this.maxSpacing=NaN}};x([_(kk),vl(NaN)],cD.prototype,"maxSpacing",2);var Mu=class extends Bu{constructor(r){super(r,new ab),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;let{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(r){var e;let{min:t,max:i}=this,n=!1;return typeof t=="number"&&(t=new Date(t)),typeof i=="number"&&(i=new Date(i)),r.length>2&&(r=((e=Sa(r))!=null?e:[0,1e3]).map(s=>new Date(s))),t instanceof Date&&(n||(n=t>r[0]),r=[t,r[1]]),i instanceof Date&&(n||(n=i<r[1]),r=[r[0],i]),r[0]>r[1]&&(r=[]),{domain:r,clipped:n}}createTick(){return new cD}onLabelFormatChange(r,e){e?super.onLabelFormatChange(r,e):this.labelFormatter=this.scale.tickFormat({ticks:r})}formatDatum(r){var e;return(e=this.moduleCtx.callbackCache.call(this.datumFormatter,r))!=null?e:String(r)}calculatePadding(r,e,t){return t?[1,0]:[0,1]}};Mu.className="TimeAxis";Mu.type="time";x([_(Bs(Uw,km("max")),{optional:!0})],Mu.prototype,"min",2);x([_(Bs(Uw,ku("min")),{optional:!0})],Mu.prototype,"max",2);var uC={[Iu.type]:Iu,[dl.type]:dl,[Mu.type]:Mu,[Pu.type]:Pu,[Ac.type]:Ac};function Gk(r,e){uC[r]=e}function Bk(r,e){let t=uC[r];if(t)return new t(e);throw new Error(`AG Charts - unknown axis type: ${r}`)}var gb={has(r){return Object.hasOwn(uC,r)},get axesTypes(){return Object.keys(uC)}},dD={};function FT(r,e){dD[r]=e}function Vk(r){var e;return(e=dD[r])!=null?e:{}}var Mp=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function uD(r){return Mp.some(e=>e.type==="series"&&e.identifier===r)}function mb(r){var e;return(e=Mp.find(t=>t.type==="series"&&t.identifier===r))==null?void 0:e.chartTypes}function Hk(r){var e,t;return((t=(e=Mp.find(i=>i.type==="series"&&i.identifier===r))==null?void 0:e.useCount)!=null?t:0)>0}function Wk(r){var e;return((e=mb(r))==null?void 0:e.find(i=>i==="cartesian"))==="cartesian"}function Uk(r){var e;return((e=mb(r))==null?void 0:e.find(i=>i==="polar"))==="polar"}function zk(r){var e;return((e=mb(r))==null?void 0:e.find(i=>i==="hierarchy"))==="hierarchy"}function jk(r){var e;if(r.packageType!=="enterprise")throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");let t=Mp.find(i=>i.type===r.type&&i.optionsKey===r.optionsKey&&i.identifier===r.identifier&&r.chartTypes.every(n=>i.chartTypes.includes(n)));return t&&((e=t.useCount)!=null||(t.useCount=0),t.useCount++),t!=null}function Kk(){return Mp.filter(({useCount:r})=>r==null||r===0)}var $k={category:bo},hD={category:"legend"};function Yk(r,e,t,i){$k[r]=t,hD[r]=e,pD[e]=i}var pD={};function Xk(){return pD}function qk(){return hD}var PC=class extends Pw{constructor(r){var e;super(),this.node=new We({name:"background",zIndex:0}),this.rectNode=new Zr,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),(e=r.scene.root)==null||e.appendChild(this.node),this.destroyFns.push(()=>{var t;return(t=r.scene.root)==null?void 0:t.removeChild(this.node)},r.layoutService.addListener("layout-complete",t=>this.onLayoutComplete(t)))}onLayoutComplete(r){let{width:e,height:t}=r.chart;this.rectNode.width=e,this.rectNode.height=t}};x([_(Ze),qt("node","visible")],PC.prototype,"visible",2);x([_(yt,{optional:!0}),qt("rectNode","fill")],PC.prototype,"fill",2);var fD={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:PC},PT=class{set fill(r){this.rh.fill=r}get fill(){return this.rh.fill}set stroke(r){this.rh.stroke=r}get stroke(){return this.rh.stroke}set strokeWidth(r){this.rh.strokeWidth=r}get strokeWidth(){return this.rh.strokeWidth}set width(r){this.rh.width=r}get width(){return this.rh.width}set height(r){this.rh.height=r}get height(){return this.rh.height}set gripLineGap(r){this.rh.gripLineGap=r}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(r){this.rh.gripLineLength=r}get gripLineLength(){return this.rh.gripLineLength}constructor(r){this.rh=r}},Zk=class{set fill(r){this.rm.fill=r}get fill(){return this.rm.fill}set stroke(r){this.rm.stroke=r}get stroke(){return this.rm.stroke}set strokeWidth(r){this.rm.strokeWidth=r}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(r){this.rm.fillOpacity=r}get fillOpacity(){return this.rm.fillOpacity}constructor(r){this.rm=r}},vo=class extends ms{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(r){this._centerX!==r&&(this._centerX=r,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(r){this._centerY!==r&&(this._centerY=r,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(r){this._width!==r&&(this._width=r,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(r){this._gripLineGap!==r&&(this._gripLineGap=r,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(r){this._gripLineLength!==r&&(this._gripLineLength=r,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(r){this._height!==r&&(this._height=r,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){let{centerX:r,centerY:e,width:t,height:i}=this,n=r-t/2,s=e-i/2;return new it(n,s,t,i)}isPointInPath(r,e){let t=this.transformPoint(r,e);return this.computeBBox().containsPoint(t.x,t.y)}updatePath(){let{path:r,centerX:e,centerY:t,width:i,height:n}=this;r.clear();let s=e-i/2,o=t-n/2,a=this.align(s),l=this.align(o),c=a+this.align(s,i),d=l+this.align(o,n);r.moveTo(a,l),r.lineTo(c,l),r.lineTo(c,d),r.lineTo(a,d),r.lineTo(a,l);let u=this.gripLineGap/2,h=this.gripLineLength/2;r.moveTo(this.align(e-u),this.align(t-h)),r.lineTo(this.align(e-u),this.align(t+h)),r.moveTo(this.align(e+u),this.align(t-h)),r.lineTo(this.align(e+u),this.align(t+h))}};vo.className="RangeHandle";x([_(yt)],vo.prototype,"_fill",2);x([_(yt)],vo.prototype,"_stroke",2);x([_(ge)],vo.prototype,"_strokeWidth",2);x([_(pR)],vo.prototype,"_lineCap",2);x([_(ge)],vo.prototype,"_width",2);x([_(ge)],vo.prototype,"_gripLineGap",2);x([_(ge)],vo.prototype,"_gripLineLength",2);x([_(ge)],vo.prototype,"_height",2);function IC(r,e){r!==e&&(this.dirtyPath=!0)}var Gc=class extends ms{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(r){var e;r=us(0,r,this.max-this.minRange),this._min!==r&&!isNaN(r)&&(this._min=r,this.dirtyPath=!0,(e=this.onRangeChange)==null||e.call(this))}get min(){return this._min}set max(r){var e;r=us(this.min+this.minRange,r,1),this._max!==r&&!isNaN(r)&&(this._max=r,this.dirtyPath=!0,(e=this.onRangeChange)==null||e.call(this))}get max(){return this._max}computeBBox(){let{x:r,y:e,width:t,height:i}=this;return new it(r,e,t,i)}computeVisibleRangeBBox(){let{x:r,y:e,width:t,height:i,min:n,max:s}=this,o=r+t*n,a=r+t*s;return new it(o,e,a-o,i)}updatePath(){let{path:r,x:e,y:t,width:i,height:n,min:s,max:o}=this;r.clear();let a=this.align(e),l=this.align(t),c=a+this.align(e,i),d=l+this.align(t,n);r.moveTo(a,l),r.lineTo(c,l),r.lineTo(c,d),r.lineTo(a,d),r.lineTo(a,l);let u=this.align(e+i*s),h=this.align(e+i*o);r.moveTo(u,l),r.lineTo(u,d),r.lineTo(h,d),r.lineTo(h,l),r.lineTo(u,l)}};Gc.className="RangeMask";x([qr({changeValue:IC}),_(ge)],Gc.prototype,"x",2);x([qr({changeValue:IC}),_(ge)],Gc.prototype,"y",2);x([qr({changeValue:IC}),_(ge)],Gc.prototype,"width",2);x([qr({changeValue:IC}),_(ge)],Gc.prototype,"height",2);x([_(ei)],Gc.prototype,"_min",2);x([_(ei)],Gc.prototype,"_max",2);var vb=class xc extends We{constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new vo,this.maxHandle=new vo,this.mask=(()=>{let{x:e,y:t,width:i,height:n,min:s,max:o}=xc.defaults,a=new Gc;a.x=e,a.y=t,a.width=i,a.height=n,a.min=s,a.max=o;let{minHandle:l,maxHandle:c}=this;return l.centerX=e,c.centerX=e+i,l.centerY=c.centerY=t+n/2,this.append([a,l,c]),a.onRangeChange=()=>{var d;this.updateHandles(),(d=this.onRangeChange)==null||d.call(this)},a})(),this._x=xc.defaults.x,this._y=xc.defaults.y,this._width=xc.defaults.width,this._height=xc.defaults.height,this._min=xc.defaults.min,this._max=xc.defaults.max,this.isContainerNode=!0}set x(e){this.mask.x=e,this.updateHandles()}get x(){return this.mask.x}set y(e){this.mask.y=e,this.updateHandles()}get y(){return this.mask.y}set width(e){this.mask.width=e,this.updateHandles()}get width(){return this.mask.width}set height(e){this.mask.height=e,this.updateHandles()}get height(){return this.mask.height}set min(e){this.mask.min=e}get min(){return this.mask.min}set max(e){this.mask.max=e}get max(){return this.mask.max}updateHandles(){let{minHandle:e,maxHandle:t,x:i,y:n,width:s,height:o,mask:a}=this;e.centerX=i+s*a.min,t.centerX=i+s*a.max,e.centerY=t.centerY=n+o/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(e){let{ctx:t,forceRender:i,stats:n}=e;if(this.dirty===0&&!i){n&&n.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(t);let{mask:s,minHandle:o,maxHandle:a}=this;[s,o,a].forEach(l=>{l.visible&&(i||l.dirty>0)&&(t.save(),l.render(me(H({},e),{ctx:t,forceRender:i})),t.restore())}),this.markClean({force:!0}),n&&n.nodesRendered++}};vb.className="Range";vb.defaults={x:0,y:0,width:200,height:30,min:0,max:1};var Qk=vb,Cb=class extends Pw{constructor(r){var e;super(),this.ctx=r,this.rs=new Qk,this.mask=new Zk(this.rs.mask),this.minHandle=new PT(this.rs.minHandle),this.maxHandle=new PT(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>r.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),(e=r.scene.root)==null||e.appendChild(this.rs);let t={bypassPause:["animation"]};this.destroyFns.push(r.interactionManager.addListener("drag-start",i=>this.onDragStart(i),t),r.interactionManager.addListener("drag",i=>this.onDrag(i),t),r.interactionManager.addListener("hover",i=>this.onDrag(i),t),r.interactionManager.addListener("drag-end",()=>this.onDragStop(),t),r.layoutService.addListener("before-series",i=>this.layout(i)),r.layoutService.addListener("layout-complete",i=>this.layoutComplete(i)),()=>{var i;return(i=r.scene.root)==null?void 0:i.removeChild(this.rs)},()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}set width(r){this.rs.width=r}get width(){return this.rs.width}set height(r){this.rs.height=r}get height(){return this.rs.height}set min(r){this.rs.min=r}get min(){return this.rs.min}set max(r){this.rs.max=r}get max(){return this.rs.max}set visible(r){this._visible=r,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){let r=this.enabled&&this.visible;this.rs.visible=r,r?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}layout({shrinkRect:r}){if(this.enabled){let e=this.rs.height+this.margin;r.shrink(e,"bottom"),this.rs.y=r.y+r.height+this.margin}return{shrinkRect:r}}layoutComplete({series:{rect:r,visible:e}}){this.enabled&&e&&(this.rs.x=r.x,this.rs.width=r.width),this.visible=e}onDragStart(r){if(!this.enabled)return;let{offsetX:e,offsetY:t}=r,{rs:i}=this,{minHandle:n,maxHandle:s,x:o,width:a,min:l}=i,c=i.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.containsPoint(e,t)?this.minHandleDragging=!0:s.containsPoint(e,t)?this.maxHandleDragging=!0:c.containsPoint(e,t)&&(this.panHandleOffset=(e-o)/a-l))}onDrag(r){if(!this.enabled)return;let{rs:e,panHandleOffset:t}=this,{x:i,y:n,width:s,height:o,minHandle:a,maxHandle:l}=e,{offsetX:c,offsetY:d}=r,u=i+s*e.min,h=i+s*e.max,p=new it(u,n,h-u,o),f=()=>Math.min(Math.max((c-i)/s,0),1);if(a.containsPoint(c,d)||l.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=f();else if(this.maxHandleDragging)e.max=f();else if(!isNaN(t)){let g=e.max-e.min,m=Math.min(f()-t,1-g);m<=e.min?(e.min=m,e.max=e.min+g):(e.max=m+g,e.min=e.max-g)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}};x([qr({changeValue(r){r&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),_(Ze)],Cb.prototype,"enabled",2);x([_(ge)],Cb.prototype,"margin",2);var Jk={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Cb,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},yb=({takeColors:r})=>{let{fills:[e],strokes:[t]}=r(1);return{fill:e,stroke:t}},$m=r=>{let{fill:e,stroke:t}=yb(r);return{marker:{fill:e,stroke:t}}},Sc={SMALL:12,MEDIUM:13,LARGE:17},bp={NORMAL:"normal",BOLD:"bold",BOLDER:"bolder",LIGHTER:"lighter"},xb="bottom",eG="left",tG="top",Co={BOTTOM:xb,LEFT:eG,TOP:tG},iG="category",rG="number",nG="time",sG="log",yo={CATEGORY:iG,NUMBER:rG,TIME:nG,LOG:sG},oG="angle-category",aG="angle-number",lG="radius-category",cG="radius-number",dG={ANGLE_CATEGORY:oG,ANGLE_NUMBER:aG,RADIUS_CATEGORY:lG,RADIUS_NUMBER:cG},uG="circle",Tu={},ww={},ks={has(r){return Object.hasOwn(Tu,r)},isCartesian(r){return Tu[r]==="cartesian"},isPolar(r){return Tu[r]==="polar"},isHierarchy(r){return Tu[r]==="hierarchy"},get seriesTypes(){return Object.keys(Tu)},get cartesianTypes(){return this.seriesTypes.filter(r=>this.isCartesian(r))},get polarTypes(){return this.seriesTypes.filter(r=>this.isPolar(r))},get hierarchyTypes(){return this.seriesTypes.filter(r=>this.isHierarchy(r))}};function hG(r,e){Tu[r]=e}function pG(r,e){var t;ww[r]=Ai([(t=ww[r])!=null?t:{},e])}function IT(r){var e;return(e=ww[r])!=null?e:{}}function fG(r){var e;return(e=Tu[r])!=null?e:"unknown"}function Vu(r){var e,t,i;return(i=(t=(e=r.series)==null?void 0:e[0])==null?void 0:t.type)!=null?i:"line"}function Lp(r){let e=Vu(r);return e==null?!0:e==="cartesian"?(be.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):ks.isCartesian(e)||Wk(e)}function MC(r){let e=Vu(r);return e==null?!1:e==="hierarchy"?(be.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):ks.isHierarchy(e)||zk(e)}function LC(r){let e=Vu(r);return e==null?!1:e==="polar"?(be.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):ks.isPolar(e)||Uk(e)}function gG(r){return r==null?!1:ks.has(r)}function mG(r){return r==null?!1:gb.has(r)}var gD={axes:[{type:yo.NUMBER,position:Co.LEFT},{type:yo.CATEGORY,position:Co.BOTTOM}]};function vG(r){var e;if(!Lp(r))return r;let[t,i]=(e=r.axes)!=null?e:[];return me(H({},r),{axes:[me(H({},t),{position:i.position}),me(H({},i),{position:t.position})]})}function CG(r){var e,t,i,n;let s={};for(let[o,a]of Iw.entries())if(!(r[o]==null||!a.length)){(e=s[o])!=null||(s[o]={});for(let l of a)(t=r[o])!=null&&t.enabled&&((i=r[l])!=null&&i.enabled)?(be.warnOnce(`the [${o}] module can not be used at the same time as [${l}], it will be disabled.`),s[o].enabled=!1):s[o].enabled=(n=r[o])==null?void 0:n.enabled}return s}var mD=Symbol("extends-chart-defaults"),vD=Symbol("extends-legend-defaults"),CD=Symbol("extends-legend-item-defaults"),yD=Symbol("extends-legend-item-marker-defaults"),xD=Symbol("extends-axes-defaults"),SD=Symbol("extends-axes-label-defaults"),wD=Symbol("extends-axes-line-defaults"),bD=Symbol("extends-axes-tick-defaults"),ED=Symbol("extends-axes-grid-line-defaults"),yl=Symbol("extends-series-defaults"),Np=Symbol("extends-cartesian-marker-defaults"),_D=Symbol("override-series-label-defaults"),Xi=Symbol("default-font"),Or=Symbol("default-label-colour"),TD=Symbol("default-inverted-label-colour"),kp=Symbol("default-inside-series-label-colour"),gp=Symbol("default-muted-label-colour"),hC=Symbol("default-axis-grid-colour"),Bv=Symbol("default-axis-line-colour"),fm=Symbol("default-cross-lines-colour"),Rm=Symbol("default-background-colour"),Gp=Symbol("default-shadow-colour"),Eo=Symbol("default-waterfall-series-positive-colors"),_o=Symbol("default-waterfall-series-negative-colors"),To=Symbol("default-waterfall-series-total-colors"),Ro=Symbol("default-waterfall-series-connector-line-stroke"),Sb=Symbol("default-polar-series-stroke"),Ao=Symbol("default-diverging-series-colour-range"),wb=Symbol("default-hierarchy-fills"),bb=Symbol("default-hierarchy-strokes");function RD(r,e,t,i,n){let{defaultDuration:s}=t,{addPhaseFn:o,updatePhaseFn:a,removePhaseFn:l}=n,c=(d,u,h)=>{t.animate({id:`${r}_${e}_${u.id}_${d}`,groupId:r,from:0,to:1,ease:Sm,onUpdate(p,f){f&&d!=="removed"||(u.path.clear({trackChanges:!0}),h(p,u),u.checkPathDirty())},onStop(){d==="added"&&(u.path.clear({trackChanges:!0}),h(1,u),u.checkPathDirty())},duration:$r[d].animationDuration*s,delay:$r[d].animationDelay*s})};for(let d of i)t.isSkipped()||(c("removed",d,l),c("updated",d,a)),c("added",d,o)}function Si({id:r},e,t,i){ml(r,e,t,i,{opacity:0},{opacity:1},Vm)}function Vv({id:r},e,t,i){ml(r,e,t,i,{opacity:1},{opacity:0},Vm)}function Bc(r){return{opacity:1}}var yG=Gt(r=>aA(r)||Object.getPrototypeOf(r)===Vs,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),kn=class extends Yr{constructor(){super(...arguments),this.enabled=!0,this.shape=Du,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){let{size:r,fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s}=this;return{size:r,fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s}}getDiameter(){return this.size+this.strokeWidth}};x([_(Ze),_e({redraw:3})],kn.prototype,"enabled",2);x([_(yG),_e({redraw:3})],kn.prototype,"shape",2);x([_(ge),_e({redraw:3})],kn.prototype,"size",2);x([_(yt,{optional:!0}),_e({redraw:3})],kn.prototype,"fill",2);x([_(ri),_e({redraw:3})],kn.prototype,"fillOpacity",2);x([_(yt,{optional:!0}),_e({redraw:3})],kn.prototype,"stroke",2);x([_(ge),_e({redraw:3})],kn.prototype,"strokeWidth",2);x([_(ri),_e({redraw:3})],kn.prototype,"strokeOpacity",2);x([_(wa,{optional:!0}),_e({redraw:3})],kn.prototype,"formatter",2);var AD=class extends Yr{constructor(){super(...arguments),this.enabled=!1}};x([_(Ze)],AD.prototype,"enabled",2);var Cs=class extends Yr{constructor(){super(...arguments),this.enabled=!0,this.interaction=new AD,this.position=new Bm}toTooltipHtml(r,e){return this.renderer?ym(this.renderer(e),r):ym(r)}};x([_(Ze)],Cs.prototype,"enabled",2);x([_(Ze,{optional:!0})],Cs.prototype,"showArrow",2);x([_(wa,{optional:!0})],Cs.prototype,"renderer",2);x([_(vt)],Cs.prototype,"interaction",2);x([_(vt)],Cs.prototype,"position",2);var vr=class extends Nc{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new Ta,this.marker=new kn,this.label=new Fr,this.tooltip=new Cs,this.connectMissingData=!1}};x([_(Se)],vr.prototype,"xKey",2);x([_(Se,{optional:!0})],vr.prototype,"xName",2);x([_(Se)],vr.prototype,"yKey",2);x([_(Se,{optional:!0})],vr.prototype,"yName",2);x([_(ge,{optional:!0})],vr.prototype,"normalizedTo",2);x([_(yt)],vr.prototype,"fill",2);x([_(ri)],vr.prototype,"fillOpacity",2);x([_(yt)],vr.prototype,"stroke",2);x([_(ge)],vr.prototype,"strokeWidth",2);x([_(ri)],vr.prototype,"strokeOpacity",2);x([_(Dc)],vr.prototype,"lineDash",2);x([_(ge)],vr.prototype,"lineDashOffset",2);x([_(vt)],vr.prototype,"shadow",2);x([_(vt)],vr.prototype,"marker",2);x([_(vt)],vr.prototype,"label",2);x([_(vt)],vr.prototype,"tooltip",2);x([_(Ze)],vr.prototype,"connectMissingData",2);function xG({id:r},e,t,i="unknown"){let n=H({},$r[i]);ml(r,"markers",e,t,{opacity:0},{opacity:1},n),t.forEach(s=>s.cleanup())}function Eb({id:r},e,t){ml(r,"markers",e,t,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),t.forEach(i=>i.cleanup())}function _b({id:r,nodeDataDependencies:e},t,i){let n=e.seriesRectWidth;Ti(r,"markers",t,i,{fromFn:(a,l)=>{var c,d;let u=(d=(c=l.midPoint)==null?void 0:c.x)!=null?d:n,h=us(0,NR(u/n),1),p=_i.check("animationImmediateMarkerSwipeScaleIn")?0:qw;return{scalingX:0,scalingY:0,animationDelay:h,animationDuration:p}},toFn:()=>({scalingX:1,scalingY:1})})}function Ym(r){return{opacity:1,scalingX:1,scalingY:1}}function Am(r,e){var t,i,n,s;return{translationX:(i=(t=e.point)==null?void 0:t.x)!=null?i:NaN,translationY:(s=(n=e.point)==null?void 0:n.y)!=null?s:NaN}}function Tb(r,e){let t=(o,a)=>{let l=r[a][o];return Array.isArray(l)?l[0]:l},i=o=>{let{xValue:a}=o;return r.moved[a]?{point:t(a,"moved"),status:"updated"}:r.removed[a]?{point:t(a,"removed"),status:"removed"}:r.added[a]?{point:t(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,a)=>{var l,c,d,u,h,p;let{status:f,point:g}=i(a);if(f==="unknown")return{opacity:0};let m=H({translationX:(c=(l=g?.from)==null?void 0:l.x)!=null?c:o.translationX,translationY:(u=(d=g?.from)==null?void 0:d.y)!=null?u:o.translationY,opacity:o.opacity},$r[f]);return e==="added"?H(me(H({},m),{opacity:0,translationX:(h=g?.to)==null?void 0:h.x,translationY:(p=g?.to)==null?void 0:p.y}),$r.added):(f==="added"&&(m.opacity=0),m)},toFn:(o,a)=>{var l,c;let{status:d,point:u}=i(a);if(d==="unknown")return{opacity:0};let h=H({translationX:a.point.x,translationY:a.point.y,opacity:1},$r[d]);return d==="removed"||e==="removed"?H(me(H({},h),{translationX:(l=u?.to)==null?void 0:l.x,translationY:(c=u?.to)==null?void 0:c.y,opacity:0}),$r.removed):h}}}function bw(r){return r.reduce(({min:e,max:t},i)=>((e==null||e.point.x>i.point.x)&&(e=i),(t==null||t.point.x<i.point.x)&&(t=i),{min:e,max:t}),{})}function MT(r,e,t){let i=(e.y-r.y)/(e.x-r.x),n=(t-r.x)*i+r.y;return{x:t,y:n}}function LT(r,e,t,i){let n=-1,s=0,o=[];for(;s<r.length;){if(r[s].change===e){o.push(r[s]),s++;continue}if(r[s].change===t){s++;continue}o.length>0&&(i(o,n,s),o.length=0),n=s,s++}o.length>0&&i(o,n,s)}function Rb(r,e){LT(r,"out","in",(t,i,n)=>{var s,o;i===-1&&r[n]?t.forEach(a=>a.to=r[n].from):n===r.length&&r[i]?t.forEach(a=>a.to=r[i].from):e==="intersect"&&((s=r[i])!=null&&s.from)&&((o=r[n])!=null&&o.from)?t.forEach(a=>a.to=MT(r[i].from,r[n].from,a.from.x)):t.forEach(a=>a.to=a.from)}),LT(r,"in","out",(t,i,n)=>{var s,o;i===-1&&r[n]?t.forEach(a=>a.from=r[n].to):n===r.length&&r[i]?t.forEach(a=>a.from=r[i].to):e==="intersect"&&((s=r[i])!=null&&s.to)&&((o=r[n])!=null&&o.to)?t.forEach(a=>a.from=MT(r[i].to,r[n].to,a.to.x)):t.forEach(a=>a.from=a.to)})}function NT(r,e,t){let i=isNaN(r.x)?e.x:r.x,n=isNaN(r.y)?e.y:r.y,s=e.x-r.x,o=e.y-r.y,a=isNaN(s)?0:s*t,l=isNaN(o)?0:o*t;return{x:i+a,y:n+l}}function Ab(r,e,t){let{path:i}=t,n;for(let s of r){let o=e[s.change];if(o==null)continue;let{from:a,to:l}=s;if(a==null||l==null)continue;let{x:c,y:d}=NT(a,l,o);if(s.moveTo===!1)i.lineTo(c,d);else if(s.moveTo===!0||!n)i.moveTo(c,d);else if(n){let u=s.moveTo==="in"?o:1-o,{x:h,y:p}=NT(n,{x:c,y:d},u);i.lineTo(h,p),i.moveTo(c,d)}n={x:c,y:d}}}function Db({id:r,visible:e},t,i){ml(r,"path_properties",t,i,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal",visible:e},finish:{clipMode:void 0,visible:e}})}function DD({id:r},e,t,i){ml(r,e,t,i,{opacity:0},{opacity:1},Vm)}function SG({id:r},e,t,i){ml(r,e,t,i,{opacity:1},{opacity:0},Vm)}function Ob(r){return e=>({opacity:r.getOpacity(),clipScalingX:1,clipMode:void 0})}function pC({nodeDataDependencies:r},e){var t,i;let{seriesRectHeight:n,seriesRectWidth:s}=r;e.clipPath==null&&(e.clipPath=new wm,e.clipScalingX=1,e.clipScalingY=1),(t=e.clipPath)==null||t.clear({trackChanges:!0}),(i=e.clipPath)==null||i.rect(-25,-25,nC(s)+50,nC(n)+50)}function kT(r){return r.type==="continuous"||r.type==="log"}function GT(r){return r.type==="category"}function BT(r,e){return r.domain.length===e.domain.length&&r.range.length===e.range.length&&r.domain.every((t,i)=>t===e.domain[i])&&r.range.every((t,i)=>t===e.range[i])}function VT(r,e){return r===void 0||e===void 0?r!==void 0||e!==void 0:kT(r)&&kT(e)?r.type===e.type&&BT(r,e):GT(r)&&GT(e)?BT(r,e):!1}function kv(r,e){if(!e)return NaN;if(r instanceof Date&&(r=r.getTime()),e.type==="continuous"&&typeof r=="number")return(r-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if(e.type==="log"&&typeof r=="number")return e.convert(r);let t=e.domain.findIndex(i=>i===r);return t>=0?e.range[t]:NaN}function wG(r,e){return!VT(r.scales.x,e.scales.x)||!VT(r.scales.y,e.scales.y)}function bG(r,e){let t=Number(r),i=Number(e);return!isNaN(t)&&!isNaN(i)?Math.abs(i-t)<.25:r===e}function OD(r=!1,e=!1){return r===e?!!r:r?"in":"out"}function Dm(r,e,t={}){var i,n,s,o;let{backfillSplitMode:a="intersect"}=t,l=S=>{var b,T;return{x:kv((b=S.xValue)!=null?b:NaN,r.scales.x),y:kv((T=S.yValue)!=null?T:NaN,r.scales.y)}},c=S=>{var b,T;return{x:kv((b=S.xValue)!=null?b:NaN,e.scales.x),y:kv((T=S.yValue)!=null?T:NaN,e.scales.y)}},d=[],u={added:{},moved:{},removed:{}},h=(S,b,T,A="move")=>{S&&(isNaN(S.point.x)||isNaN(S.point.y))&&(S=b);let E={from:S?.point,to:b?.point,moveTo:OD(S?.point.moveTo,b?.point.moveTo),change:A};A==="move"?(u.moved[T]=E,v++,C++):A==="in"?(u.added[T]=E,C++):A==="out"&&(u.removed[T]=E,v++),d.push(E)},{min:p,max:f}=bw(e.nodeData),{min:g,max:m}=bw(r.nodeData),v=0,C=0;for(;v<e.nodeData.length||C<r.nodeData.length;){let S=e.nodeData[v],b=r.nodeData[C],T=S?l(S):void 0,A=b?c(b):void 0,E=void 0;if(T&&bG(T.x,b?.point.x))h(S,b,b.xValue,"move");else if(T&&T.x<((i=g?.point.x)!=null?i:-1/0))h(S,E,S.xValue,"out");else if(T&&T.x>((n=m?.point.x)!=null?n:1/0))h(S,E,S.xValue,"out");else if(A&&A.x<((s=p?.point.x)!=null?s:-1/0))h(E,b,b.xValue,"in");else if(A&&A.x>((o=f?.point.x)!=null?o:1/0))h(E,b,b.xValue,"in");else if(T&&T.x<b?.point.x)h(S,E,S.xValue,"out");else if(A&&A.x<S?.point.x)h(E,b,b.xValue,"in");else if(S)h(S,E,S.xValue,"out");else if(b)h(E,b,b.xValue,"in");else throw new Error("Unable to process points")}return Rb(d,a),{result:d,resultMap:u}}function Om(r,e,t,i={}){var n,s,o;let{backfillSplitMode:a="intersect",multiDatum:l=!1}=i,c=[],d={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}},h,p,f=(S,b)=>{var T,A;let E=b.change==="move"?"moved":b.change==="in"?"added":"removed";l?((A=(T=u[E])[S])!=null||(T[S]=[]),u[E][S].push(b)):d[E][S]=b,h=b,p=S},g=0,m=0,v=!1;for(;g<e.nodeData.length||m<r.nodeData.length;){let S=e.nodeData[g],b=r.nodeData[m],T;if(S?.xValue===b?.xValue)T={change:"move",moveTo:OD((n=S.point.moveTo)!=null?n:!1,b.point.moveTo),from:S.point,to:b.point},f(S.xValue,T),g++,m++;else if(t!==void 0&&t.removed.indexOf(S?.xValue)>=0)T={change:"out",moveTo:(s=S.point.moveTo)!=null?s:!1,from:S.point},f(S.xValue,T),g++;else if(t!==void 0&&t.added.indexOf(b?.xValue)>=0)T={change:"in",moveTo:(o=b.point.moveTo)!=null?o:!1,to:b.point},f(b.xValue,T),m++;else if(l&&h&&p===S?.xValue)T=H({},h),f(S.xValue,T),g++;else if(l&&h&&p===b?.xValue)T=H({},h),f(b.xValue,T),m++;else{v=!0;break}c.push(T)}let C=-1/0;return v||(v=c.some(S=>{let{change:b,to:{x:T=-1/0}={}}=S;if(b==="out")return;let A=T<C;return C=T,A})),v?{result:void 0,resultMap:void 0}:(Rb(c,a),l?{result:c,resultMap:u}:{result:c,resultMap:d})}function FD(r,e){let t="updated",i=n=>n.visible;return!i(e)&&i(r)?t="added":i(e)&&!i(r)&&(t="removed"),t}function EG(r,e){let t=e==="none"?"updated":r,i={fromFn:n=>{let s;return r==="removed"?s={finish:{visible:!1}}:r==="added"?s={start:{visible:!0}}:s={},H(H({},$r[t]),s)},toFn:n=>H({},$r[t])};return e==="fade"?{fromFn:n=>{let s=r==="added"?0:n.opacity;return H({opacity:s},i.fromFn(n))},toFn:n=>H({opacity:r==="removed"?0:1},i.toFn(n))}:i}function Fb(r,e,t,i,n){let s=FD(r,e),o=(d,u)=>{n(t,{move:0,out:d},u)},a=(d,u)=>{n(t,{move:d},u)},l=(d,u)=>{n(t,{move:1,in:d},u)},c=EG(s,i);return{status:s,path:{addPhaseFn:l,updatePhaseFn:a,removePhaseFn:o},pathProperties:c}}function PD(r,e,t){var i,n;let s=((i=r.scales.x)==null?void 0:i.type)==="category",{result:o,resultMap:a}=s?Om(r,e,t):Dm(r,e),l="updated";if(e.visible&&!r.visible?l="removed":!e.visible&&r.visible&&(l="added"),o===void 0||a===void 0)return;let c=((n=t?.changed)!=null?n:!0)||wG(r,e),d=Fb(r,e,o,"fade",Ab),u=Tb(a,l);return me(H({},d),{marker:u,hasMotion:c})}var ID=(r=>(r[r.Fill=0]="Fill",r[r.Stroke=1]="Stroke",r[r.Marker=2]="Marker",r[r.Label=3]="Label",r))(ID||{});function fC(r){let{points:e}=r.fillData;return{top:e.slice(0,e.length/2),bottom:e.slice(e.length/2).reverse()}}function Ec(r,e,t){return{scales:e.scales,nodeData:t[r],visible:e.visible}}function _G(r,e,t){let i=fC(e),n=fC(r),s={multiDatum:!0};return{top:Om(Ec("top",r,n),Ec("top",e,i),t,s),bottom:Om(Ec("bottom",r,n),Ec("bottom",e,i),t,s)}}function TG(r,e){let t=fC(e),i=fC(r);return{top:Dm(Ec("top",r,i),Ec("top",e,t)),bottom:Dm(Ec("bottom",r,i),Ec("bottom",e,t))}}function MD(r,e,t){var i;let n=((i=r.scales.x)==null?void 0:i.type)==="category",s="updated";e.visible&&!r.visible?s="removed":!e.visible&&r.visible&&(s="added");let o=()=>n?Om(r,e,t,{backfillSplitMode:"static",multiDatum:!0}):Dm(r,e,{backfillSplitMode:"static"}),a=()=>n?_G(r,e,t):TG(r,e),{resultMap:l}=o(),{top:c,bottom:d}=a();if(l===void 0||c.result===void 0||d.result===void 0)return;let u=[...c.result,...d.result.reverse()],h=Fb(r,e,u,"none",Ab),p=Tb(l,s);return{fill:h,marker:p}}var Pb=class LD extends kc{constructor(e){super({moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:Ob({getOpacity:()=>this.getOpacity()}),label:Bc,marker:(t,i)=>H(H({},Ym(t)),Am(t,i))}}),this.properties=new vr}processData(e){return ne(this,null,function*(){if(this.data==null||!this.properties.isValid())return;let{data:t,visible:i,seriesGrouping:{groupIndex:n=this.id,stackCount:s=1}={}}=this,{xKey:o,yKey:a,connectMissingData:l,normalizedTo:c}=this.properties,d=!this.ctx.animationManager.isSkipped(),{isContinuousX:u,isContinuousY:h}=this.isContinuous(),p=[`area-stack-${n}-yValues`,`area-stack-${n}-yValues-trailing`,`area-stack-${n}-yValues-prev`,`area-stack-${n}-yValues-trailing-prev`,`area-stack-${n}-yValues-marker`],f=[];vm(c)&&(f.push(dC(this,[p[0],p[1],p[4]],c,"range")),f.push(dC(this,[p[2],p[3]],c,"range"))),!u&&d&&this.processedData&&f.push(Pp(this.processedData)),d&&f.push(jm(this));let g={invalidValue:null};l&&s>1&&(g.invalidValue=0),i||(g.forceValue=0),yield this.requestDataModel(e,t,{props:[Pn(this,o,u,{id:"xValue"}),oi(this,a,h,H({id:"yValueRaw"},g)),...bc(this,a,h,"window","current",me(H({id:"yValueEnd"},g),{groupId:p[0]})),...bc(this,a,h,"window-trailing","current",me(H({id:"yValueStart"},g),{groupId:p[1]})),...bc(this,a,h,"window","last",me(H({id:"yValuePreviousEnd"},g),{groupId:p[2]})),...bc(this,a,h,"window-trailing","last",me(H({id:"yValuePreviousStart"},g),{groupId:p[3]})),...bc(this,a,h,"normal","current",me(H({id:"yValueCumulative"},g),{groupId:p[4]})),...f],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{processedData:t,dataModel:i,axes:n}=this;if(!t||!i||t.data.length===0)return[];let s=n.x,o=n.y,a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",t),c=i.getDomain(this,"yValueEnd","value",t);if(e==="x")return a?.def.type==="key"&&a.def.valueType==="category"?l:ln(Sa(l),s);if(o instanceof Ac||o instanceof Mu)return ln(c,o);{let d=[c[0]>0?0:c[0],c[1]<0?0:c[1]];return ln(d,o)}}createNodeData(){return ne(this,null,function*(){var e;let{axes:t,data:i,processedData:{data:n}={},dataModel:s}=this,o=t.x,a=t.y;if(!o||!a||!i||!s||!this.properties.isValid())return[];let{yKey:l,xKey:c,marker:d,label:u,fill:h,stroke:p,connectMissingData:f}=this.properties,{scale:g}=o,{scale:m}=a,v=kt.is(m),C=((e=g.bandwidth)!=null?e:0)/2,S=s.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),b=Ke=>{let Je=Ke,{point:et}=Je,St=In(Je,["point"]);return me(H({},St),{point:me(H({},et),{moveTo:!0})})},T=(Ke,Je,et)=>{let St=g.convert(Ke)+C,wt=m.convert(Je),jt=m.convert(et);return[{point:{x:St,y:jt},yValue:et,xValue:Ke},{point:{x:St,y:wt},yValue:Je,xValue:Ke}]},A=(Ke,Je,et)=>{let St;return(vm(this.properties.normalizedTo)?v&&rb(et):!isNaN(et))&&(St=Je),{x:g.convert(Ke)+C,y:m.convert(St),size:d.size}},E=l,N=[],M=[],k={itemId:E,fillData:{itemId:E,points:[]},strokeData:{itemId:E,points:[]},labelData:N,nodeData:M,scales:hl(LD.prototype,this,"calculateScaling").call(this),visible:this.visible},W=k.fillData.points,ee=[],te=k.strokeData.points,le=-1,Ye,Xe=-1/0;return n?.forEach(Ke=>{let{keys:Je,keys:[et],datum:St,values:wt}=Ke;wt.forEach((jt,er)=>{var Sr,we,Ct;le++;let dt=St[er],ii=s.resolveProcessedDataDefsValues(S,{keys:Je,values:jt}),{yValueRaw:st,yValueCumulative:bi}=ii,{yValueStart:Lt,yValueEnd:Hn,yValuePreviousStart:Wn,yValuePreviousEnd:$s}=ii,ko=st!=null,Fi=A(et,+bi,st);if(ko&&d&&M.push({index:le,series:this,itemId:E,datum:dt,midPoint:{x:Fi.x,y:Fi.y},cumulativeValue:Hn,yValue:st,xValue:et,yKey:l,xKey:c,point:Fi,fill:(Sr=d.fill)!=null?Sr:h,stroke:(we=d.stroke)!=null?we:p,strokeWidth:(Ct=d.strokeWidth)!=null?Ct:this.getStrokeWidth(this.properties.strokeWidth)}),ko&&u){let Al=this.getLabelText(u,{value:st,datum:dt,xKey:c,yKey:l,xName:this.properties.xName,yName:this.properties.yName},Mr=>Fn(Mr)?Mr.toFixed(2):String(Mr));N.push({index:le,series:this,itemId:l,datum:dt,x:Fi.x,y:Fi.y,label:Al?{text:Al,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}let La=Ye!=null&&et!=null,Un=Xe!=null&&ko;Un||(Lt=Lt??0,Hn=Lt??0,Wn=Wn??0,$s=Wn??0);let[Rl,Jr]=T(Ye,Wn,$s),[Ys,Xu]=T(et,Lt,Hn);La&&(!f||Un)&&(W.push(Rl),ee.push(Jr),W.push(Ys),ee.push(Xu)),Un&&le>0&&(te.push(b(Rl)),te.push(Ys)),Ye=et,Xe=st})}),te.length>0&&(te[0]=b(te[0])),ee.reverse(),W.push(...ee),[k]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:e}=this.properties.marker,t=Ic(e);return new t}updatePathNodes(e){return ne(this,null,function*(){let{opacity:t,visible:i,animationEnabled:n}=e,[s,o]=e.paths,a=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({tag:1,fill:void 0,lineJoin:o.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i}),s.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:t,visible:i||n,strokeWidth:a}),pC(this,o),pC(this,s)})}updatePaths(e){return ne(this,null,function*(){this.updateAreaPaths([e.paths],[e.contextData])})}updateAreaPaths(e,t){this.updateFillPath(e,t),this.updateStrokePath(e,t)}updateFillPath(e,t){t.forEach(({fillData:i},n)=>{let[s]=e[n],{path:o}=s;o.clear({trackChanges:!0});for(let{point:a}of i.points)a.moveTo?o.moveTo(a.x,a.y):o.lineTo(a.x,a.y);o.closePath(),s.checkPathDirty()})}updateStrokePath(e,t){t.forEach(({strokeData:i},n)=>{let[,s]=e[n],{path:o}=s;o.clear({trackChanges:!0});for(let{point:a}of i.points)a.moveTo?o.moveTo(a.x,a.y):o.lineTo(a.x,a.y);s.checkPathDirty()})}updateMarkerSelection(e){return ne(this,null,function*(){let{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])})}updateMarkerNodes(e){return ne(this,null,function*(){let{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,marker:o,fill:a,stroke:l,strokeWidth:c,fillOpacity:d,strokeOpacity:u,highlightStyle:h}=this.properties,p=Mn(i&&h.item,o.getStyle(),{fill:a,stroke:l,strokeWidth:c,fillOpacity:d,strokeOpacity:u});t.each((f,g)=>{this.updateMarkerStyle(f,o,{datum:g,highlighted:i,xKey:n,yKey:s},p)}),i||this.properties.marker.markClean()})}updateLabelSelection(e){return ne(this,null,function*(){let{labelData:t,labelSelection:i}=e;return i.update(t,n=>{n.tag=3})})}updateLabelNodes(e){return ne(this,null,function*(){let{labelSelection:t}=e,{enabled:i,fontStyle:n,fontWeight:s,fontSize:o,fontFamily:a,color:l}=this.properties.label;t.each((c,d)=>{let{x:u,y:h,label:p}=d;p&&i&&this.visible?(c.fontStyle=n,c.fontWeight=s,c.fontSize=o,c.fontFamily=a,c.textAlign=p.textAlign,c.textBaseline=p.textBaseline,c.text=p.text,c.x=u,c.y=h-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(e){let{id:t,axes:i,dataModel:n}=this,{xKey:s,xName:o,yName:a,tooltip:l,marker:c}=this.properties,{yKey:d,xValue:u,yValue:h,datum:p}=e,f=i.x,g=i.y;if(!this.properties.isValid()||!(f&&g&&Fn(h))||!n)return"";let m=f.formatDatum(u),v=g.formatDatum(h),C=si(a),S=si(m+": "+v),b=Mn({fill:this.properties.fill},c.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:T}=this.getMarkerStyle(c,{datum:e,xKey:s,yKey:d,highlighted:!1},b);return l.toTooltipHtml({title:C,content:S,backgroundColor:T},{datum:p,xKey:s,xName:o,yKey:d,yName:a,color:T,title:C,seriesId:t})}getLegendData(e){var t,i,n,s,o,a;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||e!=="category")return[];let{yKey:l,yName:c,fill:d,stroke:u,fillOpacity:h,strokeOpacity:p,strokeWidth:f,lineDash:g,marker:m,visible:v}=this.properties;return[{legendType:e,id:this.id,itemId:l,seriesId:this.id,enabled:v,label:{text:c??l},marker:{shape:m.shape,fill:(i=m.fill)!=null?i:d,stroke:(n=m.stroke)!=null?n:u,fillOpacity:(s=m.fillOpacity)!=null?s:h,strokeOpacity:(o=m.strokeOpacity)!=null?o:p,strokeWidth:(a=m.strokeWidth)!=null?a:0,enabled:m.enabled||f<=0},line:{stroke:u,strokeOpacity:p,strokeWidth:f,lineDash:g}}]}animateEmptyUpdateReady(e){let{markerSelections:t,labelSelections:i,contextData:n,paths:s}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(s,n),Db(this,o,s.flat()),qi(t,Am),_b(this,o,t),Si(this,"labels",o,i)}animateReadyResize(e){let{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,i;let{animationManager:n}=this.ctx,{markerSelections:s,labelSelections:o,contextData:a,paths:l,previousContextData:c}=e;if(super.resetAllAnimation(e),a.length===0||!c||c.length===0){n.skipCurrentBatch(),this.updateAreaPaths(l,a);return}let[[d,u]]=l,[h]=a,[p]=c,f=MD(h,p,(i=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:i.diff);if(f===void 0){n.skipCurrentBatch(),this.updateAreaPaths(l,a);return}Ti(this.id,"marker_update",n,s,f.marker),Ti(this.id,"fill_path_properties",n,[d],f.fill.pathProperties),RD(this.id,"fill_path_update",n,[d],f.fill.path),this.updateStrokePath(l,a),DD(this,"stroke",n,[u]),Si(this,"labels",n,o)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new We}};Pb.className="AreaSeries";Pb.type="area";var RG=Pb,AG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:RG,stackable:!0,seriesDefaults:gD,themeTemplate:{__extends__:yl,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Gp,xOffset:3,yOffset:3,blur:5},marker:{__extends__:Np,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Xi,color:Or,formatter:void 0}},paletteFactory:r=>{let{marker:e}=$m(r);return{fill:e.fill,stroke:e.stroke,marker:e}}},Ib=class extends Nc{constructor(){super(...arguments),this.direction="vertical"}};x([_(gR)],Ib.prototype,"direction",2);var ND=class extends kc{getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){let r=this.getBarDirection();return this.axes[r]}getCategoryAxis(){let r=this.getCategoryDirection();return this.axes[r]}},kD=class extends Fr{constructor(){super(...arguments),this.placement="inside"}};x([_(mR)],kD.prototype,"placement",2);var Zi=class extends Ib{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new Ta,this.label=new kD,this.tooltip=new Cs}};x([_(Se)],Zi.prototype,"xKey",2);x([_(Se,{optional:!0})],Zi.prototype,"xName",2);x([_(Se)],Zi.prototype,"yKey",2);x([_(Se,{optional:!0})],Zi.prototype,"yName",2);x([_(Se,{optional:!0})],Zi.prototype,"stackGroup",2);x([_(ei,{optional:!0})],Zi.prototype,"normalizedTo",2);x([_(yt)],Zi.prototype,"fill",2);x([_(ri)],Zi.prototype,"fillOpacity",2);x([_(yt)],Zi.prototype,"stroke",2);x([_(ge)],Zi.prototype,"strokeWidth",2);x([_(ri)],Zi.prototype,"strokeOpacity",2);x([_(Dc)],Zi.prototype,"lineDash",2);x([_(ge)],Zi.prototype,"lineDashOffset",2);x([_(ge)],Zi.prototype,"cornerRadius",2);x([_(wa,{optional:!0})],Zi.prototype,"formatter",2);x([_(vt,{optional:!0})],Zi.prototype,"shadow",2);x([_(vt)],Zi.prototype,"label",2);x([_(vt)],Zi.prototype,"tooltip",2);function GD({rect:r,config:e}){let{crisp:t=!0,fill:i,stroke:n,strokeWidth:s,fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,cornerRadius:u=0,topLeftCornerRadius:h,topRightCornerRadius:p,bottomRightCornerRadius:f,bottomLeftCornerRadius:g,cornerRadiusBbox:m,visible:v=!0}=e;r.crisp=t,r.fill=i,r.stroke=n,r.strokeWidth=s,r.fillOpacity=o,r.strokeOpacity=a,r.lineDash=l,r.lineDashOffset=c,r.fillShadow=d,r.topLeftCornerRadius=h?u:0,r.topRightCornerRadius=p?u:0,r.bottomRightCornerRadius=f?u:0,r.bottomLeftCornerRadius=g?u:0,r.cornerRadiusBbox=m,r.visible=v}function BD(r){var e=r,{datum:t,isHighlighted:i,style:n,highlightStyle:s,formatter:o,seriesId:a,ctx:{callbackCache:l}}=e,c=In(e,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]),d,u,h,p,f,g;let{fill:m,fillOpacity:v,stroke:C,strokeWidth:S}=Mn(i&&s,n),{strokeOpacity:b,fillShadow:T,lineDash:A,lineDashOffset:E,cornerRadius:N=0,topLeftCornerRadius:M=!0,topRightCornerRadius:k=!0,bottomRightCornerRadius:W=!0,bottomLeftCornerRadius:ee=!0,cornerRadiusBbox:te}=n,le;return o&&(le=l.call(o,H({datum:t.datum,xKey:t.xKey,fill:m,stroke:C,strokeWidth:S,cornerRadius:N,highlighted:i,seriesId:a},c))),{fill:(d=le?.fill)!=null?d:m,stroke:(u=le?.stroke)!=null?u:C,strokeWidth:(h=le?.strokeWidth)!=null?h:S,fillOpacity:(p=le?.fillOpacity)!=null?p:v,strokeOpacity:(f=le?.strokeOpacity)!=null?f:b,lineDash:A,lineDashOffset:E,fillShadow:T,cornerRadius:(g=le?.cornerRadius)!=null?g:N,topLeftCornerRadius:M,topRightCornerRadius:k,bottomRightCornerRadius:W,bottomLeftCornerRadius:ee,cornerRadiusBbox:te}}function VD(r=[]){let[e,t]=r;return!(e!==0||t!==1)}function Fm(r,e){let{startingX:t,startingY:i}=OG(r,e),n=o=>{var a;return Lm((a=o.yValue)!=null?a:0)};return{isVertical:r,calculate:(o,a)=>{let l=r?o.x:t,c=r?i:o.y,d=r?o.width:0,u=r?0:o.height;return a&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=a,d=r?a.width:0,u=r?0:a.height,r&&!n(a)?c+=a.height:!r&&n(a)&&(l+=a.width)),{x:l,y:c,width:d,height:u}}}}function DG(r){return{isVertical:r,calculate:e=>({x:r?e.x:e.x+e.width/2,y:r?e.y+e.height/2:e.y,width:r?e.width:0,height:r?0:e.height})}}function Pm(r){let e=n=>n==null||isNaN(n.x)||isNaN(n.y);return{toFn:(n,s,o)=>o==="removed"||e(s)?r.calculate(s,n.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height},fromFn:(n,s,o)=>{o==="updated"&&e(s)?o="removed":o==="updated"&&e(n.previousDatum)&&(o="added");let a={x:n.x,y:n.y,width:n.width,height:n.height};return(o==="unknown"||o==="added")&&(a=r.calculate(s,n.previousDatum)),H(H({},a),$r[o])}}}function OG(r,e){let t=e[r?"y":"x"],i=1/0,n=0;return t?(r?n=t.scale.convert(kt.is(t.scale)?0:Math.max(...t.range)):i=t.scale.convert(kt.is(t.scale)?0:Math.min(...t.range)),{startingX:i,startingY:n}):{startingX:i,startingY:n}}function Mb(r,{x:e,y:t,width:i,height:n}){return{x:e,y:t,width:i,height:n}}function HD(r,e,t){if(e.enabled&&t){let{x:i,y:n,text:s,textAlign:o,textBaseline:a}=t,{color:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h}=e;r.setProperties({visible:!0,x:i,y:n,text:s,fill:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h,textAlign:o,textBaseline:a})}else r.visible=!1}function WD({isPositive:r,isVertical:e,placement:t,padding:i=0,rect:n}){let s=n.x+n.width/2,o=n.y+n.height/2,a="center",l="middle";switch(t){case"start":{e?(o=r?n.y+n.height+i:n.y-i,l=r?"top":"bottom"):(s=r?n.x-i:n.x+n.width+i,a=r?"start":"end");break}case"outside":case"end":{e?(o=r?n.y-i:n.y+n.height+i,l=r?"bottom":"top"):(s=r?n.x+n.width+i:n.x-i,a=r?"start":"end");break}}return{x:s,y:o,textAlign:a,textBaseline:l}}var Lb=class UD extends ND{constructor(e){super({moduleCtx:e,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:Mb,label:Bc}}),this.properties=new Zi,this.groupScale=new xa,this.smallestDataInterval=void 0}resolveKeyDirection(e){return this.getBarDirection()==="x"?e==="x"?"y":"x":e}processData(e){return ne(this,null,function*(){var t,i,n,s;if(!this.properties.isValid()||!this.data)return;let{seriesGrouping:{groupIndex:o=this.id}={},data:a=[]}=this,{xKey:l,yKey:c,normalizedTo:d}=this.properties,u=!this.ctx.animationManager.isSkipped(),h=Math.abs(d??NaN),p=kt.is((t=this.getCategoryAxis())==null?void 0:t.scale),f=kt.is((i=this.getValueAxis())==null?void 0:i.scale),g=`bar-stack-${o}-yValues`,m=`${g}-trailing`,v=h&&isFinite(h)?h:void 0,C=[];v&&C.push(dC(this,[g,m],v,"range")),u&&this.processedData&&C.push(Pp(this.processedData)),u&&C.push(jm(this));let S=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(e,a,{props:[Pn(this,l,p,{id:"xValue"}),oi(this,c,f,H({id:"yValue-raw",invalidValue:null},S)),...bc(this,c,f,"normal","current",H({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},S)),...bc(this,c,f,"trailing","current",H({id:"yValue-start",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0},S)),...p?[Cw]:[],...C],groupByKeys:!0,groupByData:!1});this.smallestDataInterval={x:(s=(n=b.reduced)==null?void 0:n.smallestKeyInterval)!=null?s:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(e){var t;let{processedData:i,dataModel:n}=this;if(!i||!n||i.data.length===0)return[];let{reduced:{[Cw.property]:s}={}}=i,o=this.getCategoryAxis(),a=this.getValueAxis(),l=n.resolveProcessedDataDefById(this,"xValue"),c=n.getDomain(this,"xValue","key",i),d=n.getDomain(this,"yValue-end","value",i);if(e===this.getCategoryDirection()){if(l?.def.type==="key"&&l?.def.valueType==="category")return c;let u=s!=null&&isFinite(s)?s:0,h=(t=Sa(c))!=null?t:[NaN,NaN],p=o?.isReversed();if(e==="y"){let m=h[0]+(p?0:-u),v=h[1]+(p?u:0);return ln([m,v],o)}let f=h[0]+(p?-u:0),g=h[1]+(p?0:u);return ln([f,g],o)}else{if(this.getValueAxis()instanceof Ac)return ln(d,a);{let u=[d[0]>0?0:d[0],d[1]<0?0:d[1]];return ln(u,a)}}}createNodeData(){return ne(this,null,function*(){let{dataModel:e}=this,t=this.getCategoryAxis(),i=this.getValueAxis();if(!(e&&t&&i&&this.properties.isValid()))return[];let n=t.scale,s=i.scale,{groupScale:o,processedData:a,smallestDataInterval:l,ctx:{seriesStateManager:c}}=this,{xKey:d,yKey:u,xName:h,yName:p,fill:f,stroke:g,strokeWidth:m,cornerRadius:v,legendItemName:C,label:S}=this.properties,b=i.isReversed(),T=kt.is(n)?n.calcBandwidth(l?.x):n.bandwidth,A=[],{index:E,visibleGroupCount:N}=c.getVisiblePeerGroupIndex(this);for(let Ke=0;Ke<N;Ke++)A.push(String(Ke));o.domain=A,o.range=[0,T??0],t instanceof dl?o.paddingInner=t.groupPaddingInner:t instanceof Pu?o.padding=.1:o.padding=0,o.round=o.padding!==0;let M=o.bandwidth>=1?o.bandwidth:o.rawBandwidth,k=e.resolveProcessedDataIndexById(this,"xValue").index,W=e.resolveProcessedDataIndexById(this,"yValue-raw").index,ee=e.resolveProcessedDataIndexById(this,"yValue-start").index,te=e.resolveProcessedDataIndexById(this,"yValue-end").index,le=e.resolveProcessedDataDefById(this,"yValue-range").index,Ye=!this.ctx.animationManager.isSkipped(),Xe=[];return a?.data.forEach(({keys:Ke,datum:Je,values:et,aggValues:St})=>{et.forEach((wt,jt)=>{var er,Sr;(er=Xe[jt])!=null||(Xe[jt]={itemId:u,nodeData:[],labelData:[],scales:hl(UD.prototype,this,"calculateScaling").call(this),visible:this.visible||Ye});let we=Ke[k],Ct=n.convert(we),dt=+wt[te],ii=+wt[ee],st=wt[W],bi=st>=0,Lt=bi!==b,Hn=(Sr=St?.[le][bi?1:0])!=null?Sr:0,Wn=Ct+o.convert(String(E));if(isNaN(dt))return;let $s=s.convert(dt),ko=s.convert(ii),Fi=this.getBarDirection()==="x",La=s.convert(Hn),Un=s.convert(0),Rl=new it(Fi?Math.min(Un,La):Wn,Fi?Wn:Math.min(Un,La),Fi?Math.abs(Un-La):M,Fi?M:Math.abs(Un-La)),Jr={x:Fi?Math.min($s,ko):Wn,y:Fi?Wn:Math.min($s,ko),width:Fi?Math.abs(ko-$s):M,height:Fi?M:Math.abs(ko-$s),cornerRadiusBbox:Rl},{fontStyle:Ys,fontWeight:Xu,fontSize:Al,fontFamily:Mr,color:qu,placement:af}=S,Zu=this.getLabelText(this.properties.label,{datum:Je[jt],value:st,xKey:d,yKey:u,xName:h,yName:p,legendItemName:C},cf=>Fn(cf)?cf.toFixed(2):""),Na=Zu?H({text:Zu,fill:qu,fontStyle:Ys,fontWeight:Xu,fontSize:Al,fontFamily:Mr},WD({isPositive:bi,isVertical:!Fi,placement:af,rect:Jr})):void 0,u0=this.shouldFlipXY()?Jr.height:Jr.width,lf={series:this,itemId:u,datum:Je[jt],cumulativeValue:dt,xValue:we,yValue:st,yKey:u,xKey:d,capDefaults:{lengthRatioMultiplier:u0,lengthMax:u0},x:Jr.x,y:Jr.y,width:Jr.width,height:Jr.height,midPoint:{x:Jr.x+Jr.width/2,y:Jr.y+Jr.height/2},fill:f,stroke:g,strokeWidth:m,cornerRadius:v,topLeftCornerRadius:Fi!==Lt,topRightCornerRadius:Lt,bottomRightCornerRadius:Fi===Lt,bottomLeftCornerRadius:!Lt,cornerRadiusBbox:Rl,label:Na};Xe[jt].nodeData.push(lf),Xe[jt].labelData.push(lf)})}),Xe})}nodeFactory(){return new Zr}updateDatumSelection(e){return ne(this,null,function*(){return e.datumSelection.update(e.nodeData,t=>{t.tag=0},t=>t.xValue)})}updateDatumNodes(e){return ne(this,null,function*(){if(!this.properties.isValid())return;let{yKey:t,stackGroup:i,fill:n,fillOpacity:s,stroke:o,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,formatter:u,shadow:h,highlightStyle:{item:p}}=this.properties,f=this.axes.x,g=VD(f?.visibleRange),m=this.getCategoryDirection()==="x";e.datumSelection.each((v,C)=>{let S={fill:n,stroke:o,fillOpacity:s,strokeOpacity:l,lineDash:c,lineDashOffset:d,fillShadow:h,strokeWidth:this.getStrokeWidth(a),cornerRadius:C.cornerRadius,topLeftCornerRadius:C.topLeftCornerRadius,topRightCornerRadius:C.topRightCornerRadius,bottomRightCornerRadius:C.bottomRightCornerRadius,bottomLeftCornerRadius:C.bottomLeftCornerRadius,cornerRadiusBbox:C.cornerRadiusBbox},b=m?C.width>0:C.height>0,T=BD({datum:C,ctx:this.ctx,seriesId:this.id,isHighlighted:e.isHighlight,highlightStyle:p,yKey:t,style:S,formatter:u,stackGroup:i});T.crisp=g,T.visible=b,GD({rect:v,config:T})})})}updateLabelSelection(e){return ne(this,null,function*(){let t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,i=>{i.tag=1,i.pointerEvents=1})})}updateLabelNodes(e){return ne(this,null,function*(){e.labelSelection.each((t,i)=>{HD(t,this.properties.label,i.label)})})}getTooltipHtml(e){var t;let{id:i,processedData:n,ctx:{callbackCache:s}}=this,o=this.getCategoryAxis(),a=this.getValueAxis();if(!n||!this.properties.isValid()||!o||!a)return"";let{xKey:l,yKey:c,xName:d,yName:u,fill:h,stroke:p,strokeWidth:f,tooltip:g,formatter:m,stackGroup:v}=this.properties,{xValue:C,yValue:S,datum:b}=e,T=o.formatDatum(C),A=a.formatDatum(S),E=si(u),N=si(T+": "+A),M;m&&(M=s.call(m,{seriesId:i,datum:b,xKey:l,yKey:c,stackGroup:v,fill:h,stroke:p,strokeWidth:this.getStrokeWidth(f),highlighted:!1}));let k=(t=M?.fill)!=null?t:h;return g.toTooltipHtml({title:E,content:N,backgroundColor:k},H({seriesId:i,datum:b,xKey:l,yKey:c,xName:d,yName:u,stackGroup:v,title:E,color:k},this.getModuleTooltipParams()))}getLegendData(e){var t,i;let{showInLegend:n}=this.properties;if(e!=="category"||!((t=this.data)!=null&&t.length)||!this.properties.isValid()||!n)return[];let{yKey:s,yName:o,fill:a,stroke:l,strokeWidth:c,fillOpacity:d,strokeOpacity:u,legendItemName:h,visible:p}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:p,label:{text:(i=h??o)!=null?i:s},marker:{fill:a,fillOpacity:d,stroke:l,strokeWidth:c,strokeOpacity:u},legendItemName:h}]}animateEmptyUpdateReady({datumSelections:e,labelSelections:t,annotationSelections:i}){let n=Pm(Fm(this.isVertical(),this.axes));Ti(this.id,"nodes",this.ctx.animationManager,e,n),Si(this,"labels",this.ctx.animationManager,t),Si(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t,i;let{datumSelections:n,labelSelections:s,annotationSelections:o}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let a=(i=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:i.diff,l=Pm(Fm(this.isVertical(),this.axes));Ti(this.id,"nodes",this.ctx.animationManager,n,l,(c,d)=>String(d.xValue),a),Si(this,"labels",this.ctx.animationManager,s),Si(this,"annotations",this.ctx.animationManager,o)}isLabelEnabled(){return this.properties.label.enabled}};Lb.className="BarSeries";Lb.type="bar";var FG=Lb,PG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:FG,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:yo.NUMBER,position:Co.LEFT},{type:yo.CATEGORY,position:Co.BOTTOM}]},swapDefaultAxesCondition:r=>r?.direction==="horizontal",themeTemplate:{__extends__:yl,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:bp.NORMAL,fontSize:12,fontFamily:Xi,color:kp,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:Gp,xOffset:3,yOffset:3,blur:5}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:.3}}},paletteFactory:yb},Nb=class extends kn{constructor(){super(...arguments),this.maxSize=30}};x([_(ge),_e({redraw:3})],Nb.prototype,"maxSize",2);x([_(xC,{optional:!0}),_e({redraw:3})],Nb.prototype,"domain",2);var Pr=class extends Nc{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Nb,this.label=new Fr,this.tooltip=new Cs}};x([_(Se)],Pr.prototype,"xKey",2);x([_(Se)],Pr.prototype,"yKey",2);x([_(Se)],Pr.prototype,"sizeKey",2);x([_(Se,{optional:!0})],Pr.prototype,"labelKey",2);x([_(Se,{optional:!0})],Pr.prototype,"colorKey",2);x([_(Se,{optional:!0})],Pr.prototype,"xName",2);x([_(Se,{optional:!0})],Pr.prototype,"yName",2);x([_(Se,{optional:!0})],Pr.prototype,"sizeName",2);x([_(Se,{optional:!0})],Pr.prototype,"labelName",2);x([_(Se,{optional:!0})],Pr.prototype,"colorName",2);x([_(xC,{optional:!0})],Pr.prototype,"colorDomain",2);x([_(gl)],Pr.prototype,"colorRange",2);x([_(Se,{optional:!0})],Pr.prototype,"title",2);x([_(vt)],Pr.prototype,"marker",2);x([_(vt)],Pr.prototype,"label",2);x([_(vt)],Pr.prototype,"tooltip",2);var IG=class extends pb{constructor(r,e,t,i){super(r,e,t,i),this.sizeKey=i.properties.sizeKey}},kb=class zD extends kc{constructor(e){super({moduleCtx:e,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Bc,marker:Ym}}),this.NodeClickEvent=IG,this.properties=new Pr,this.sizeScale=new Au,this.colorScale=new Gu}processData(e){return ne(this,null,function*(){var t,i;if(!this.properties.isValid()||this.data==null)return;let{isContinuousX:n,isContinuousY:s}=this.isContinuous(),{xKey:o,yKey:a,sizeKey:l,labelKey:c,colorDomain:d,colorRange:u,colorKey:h,marker:p}=this.properties,{dataModel:f,processedData:g}=yield this.requestDataModel(e,this.data,{props:[Pn(this,o,n,{id:"xKey-raw"}),Pn(this,a,s,{id:"yKey-raw"}),...c?[Pn(this,c,!1,{id:"labelKey-raw"})]:[],oi(this,o,n,{id:"xValue"}),oi(this,a,s,{id:"yValue"}),oi(this,l,!0,{id:"sizeValue"}),...h?[oi(this,h,!0,{id:"colorValue"})]:[],...c?[oi(this,c,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),m=f.resolveProcessedDataIndexById(this,"sizeValue").index,v=(t=g.domain.values[m])!=null?t:[];if(this.sizeScale.domain=p.domain?p.domain:v,h){let C=f.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=(i=d??g.domain.values[C])!=null?i:[],this.colorScale.range=u,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:t,processedData:i}=this;if(!i||!t)return[];let n=e==="x"?"xValue":"yValue",s=t.resolveProcessedDataDefById(this,n),o=t.getDomain(this,n,"value",i);if(s?.def.type==="value"&&s?.def.valueType==="category")return o;let a=this.axes[e];return ln(Sa(o),a)}createNodeData(){return ne(this,null,function*(){var e,t,i;let{axes:n,dataModel:s,processedData:o,colorScale:a,sizeScale:l}=this,{xKey:c,yKey:d,sizeKey:u,labelKey:h,xName:p,yName:f,sizeName:g,labelName:m,label:v,colorKey:C,marker:S,visible:b}=this.properties,T=n.x,A=n.y;if(!(s&&o&&b&&T&&A))return[];let E=s.resolveProcessedDataIndexById(this,"xValue").index,N=s.resolveProcessedDataIndexById(this,"yValue").index,M=u?s.resolveProcessedDataIndexById(this,"sizeValue").index:-1,k=C?s.resolveProcessedDataIndexById(this,"colorValue").index:-1,W=h?s.resolveProcessedDataIndexById(this,"labelValue").index:-1,ee=T.scale,te=A.scale,le=((e=ee.bandwidth)!=null?e:0)/2,Ye=((t=te.bandwidth)!=null?t:0)/2,Xe=[];l.range=[S.size,S.maxSize];let Ke=v.getFont();for(let{values:Je,datum:et}of(i=o.data)!=null?i:[]){let St=Je[E],wt=Je[N],jt=ee.convert(St)+le,er=te.convert(wt)+Ye,Sr=this.getLabelText(v,{value:h?Je[W]:wt,datum:et,xKey:c,yKey:d,sizeKey:u,labelKey:h,xName:p,yName:f,sizeName:g,labelName:m}),we=wi.getTextSize(String(Sr),Ke),Ct=u?l.convert(Je[M]):S.size,dt=C?a.convert(Je[k]):void 0;Xe.push({series:this,itemId:d,yKey:d,xKey:c,datum:et,xValue:St,yValue:wt,sizeValue:Je[M],point:{x:jt,y:er,size:Ct},midPoint:{x:jt,y:er},fill:dt,label:H({text:Sr},we)})}return[{itemId:d,nodeData:Xe,labelData:Xe,scales:hl(zD.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return(e=this.contextNodeData)==null?void 0:e.reduce((t,i)=>t.concat(i.labelData),[])}markerFactory(){let{shape:e}=this.properties.marker,t=Ic(e);return new t}updateMarkerSelection(e){return ne(this,null,function*(){let{nodeData:t,markerSelection:i}=e;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());let n=this.properties.marker.enabled?t:[];return i.update(n,void 0,s=>this.getDatumId(s))})}updateMarkerNodes(e){return ne(this,null,function*(){let{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,sizeKey:o,labelKey:a,marker:l}=this.properties,c=Mn(i&&this.properties.highlightStyle.item,l.getStyle());this.sizeScale.range=[l.size,l.maxSize],t.each((d,u)=>{this.updateMarkerStyle(d,l,{datum:u,highlighted:i,xKey:n,yKey:s,sizeKey:o,labelKey:a},c)}),i||this.properties.marker.markClean()})}updateLabelSelection(e){return ne(this,null,function*(){var t,i;let n=this.properties.label.enabled?(i=(t=this.chart)==null?void 0:t.placeLabels().get(this))!=null?i:[]:[];return e.labelSelection.update(n.map(s=>me(H({},s.datum),{point:{x:s.x,y:s.y,size:s.datum.point.size}})))})}updateLabelNodes(e){return ne(this,null,function*(){let{label:t}=this.properties;e.labelSelection.each((i,n)=>{var s,o,a,l;i.text=n.label.text,i.fill=t.color,i.x=(o=(s=n.point)==null?void 0:s.x)!=null?o:0,i.y=(l=(a=n.point)==null?void 0:a.y)!=null?l:0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(e){var t;let i=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!i||!n)return"";let{xKey:s,yKey:o,sizeKey:a,labelKey:l,xName:c,yName:d,sizeName:u,labelName:h,marker:p,tooltip:f}=this.properties,g=(t=this.properties.title)!=null?t:d,m=Mn({fill:e.fill,strokeWidth:this.getStrokeWidth(p.strokeWidth)},p.getStyle()),{fill:v="gray"}=this.getMarkerStyle(p,{datum:e,highlighted:!1,xKey:s,yKey:o,sizeKey:a,labelKey:l},m),{datum:C,xValue:S,yValue:b,sizeValue:T,label:{text:A}}=e,E=si(i.formatDatum(S)),N=si(n.formatDatum(b)),M=`<b>${si(c??s)}</b>: ${E}<br><b>${si(d??o)}</b>: ${N}`;return a&&(M+=`<br><b>${si(u??a)}</b>: ${si(String(T))}`),l&&(M=`<b>${si(h??l)}</b>: ${si(A)}<br>`+M),f.toTooltipHtml({title:g,content:M,backgroundColor:v},{datum:C,xKey:s,xName:c,yKey:o,yName:d,sizeKey:a,sizeName:u,labelKey:l,labelName:h,title:g,color:v,seriesId:this.id})}getLegendData(){var e,t;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid())return[];let{yKey:i,yName:n,title:s,marker:o,visible:a}=this.properties,{shape:l,fill:c,stroke:d,fillOpacity:u,strokeOpacity:h,strokeWidth:p}=o;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:a,label:{text:(t=s??n)!=null?t:i},marker:{shape:l,fill:c??"rgba(0, 0, 0, 0)",stroke:d??"rgba(0, 0, 0, 0)",fillOpacity:u??1,strokeOpacity:h??1,strokeWidth:p??0}}]}animateEmptyUpdateReady({markerSelections:e,labelSelections:t}){Eb(this,this.ctx.animationManager,e),Si(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return wp([`${e.xValue}`,`${e.yValue}`,e.label.text])}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new We}};kb.className="BubbleSeries";kb.type="bubble";var MG=kb,LG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:MG,seriesDefaults:{axes:[{type:yo.NUMBER,position:Co.BOTTOM},{type:yo.NUMBER,position:Co.LEFT}]},themeTemplate:{__extends__:yl,tooltip:{position:{type:"node"}},marker:{__extends__:Np,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Xi,color:Or}},paletteFactory:$m},Qi=class extends Nc{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Ta,this.label=new Fr,this.tooltip=new Cs}};x([_(Se)],Qi.prototype,"xKey",2);x([_(Se,{optional:!0})],Qi.prototype,"yKey",2);x([_(Se,{optional:!0})],Qi.prototype,"xName",2);x([_(Se,{optional:!0})],Qi.prototype,"yName",2);x([_(yt,{optional:!0})],Qi.prototype,"fill",2);x([_(ri)],Qi.prototype,"fillOpacity",2);x([_(yt,{optional:!0})],Qi.prototype,"stroke",2);x([_(ge)],Qi.prototype,"strokeWidth",2);x([_(ri)],Qi.prototype,"strokeOpacity",2);x([_(Dc)],Qi.prototype,"lineDash",2);x([_(ge)],Qi.prototype,"lineDashOffset",2);x([_(Ze)],Qi.prototype,"areaPlot",2);x([_(Nm,{optional:!0})],Qi.prototype,"bins",2);x([_(Di(["count","sum","mean"],"a histogram aggregation"))],Qi.prototype,"aggregation",2);x([_(ge,{optional:!0})],Qi.prototype,"binCount",2);x([_(vt)],Qi.prototype,"shadow",2);x([_(vt)],Qi.prototype,"label",2);x([_(vt)],Qi.prototype,"tooltip",2);var HT=10,Gb=class jD extends kc{constructor(e){super({moduleCtx:e,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Mb,label:Bc}}),this.properties=new Qi,this.calculatedBins=[]}deriveBins(e){if(this.properties.binCount)return this.calculateNiceBins(e,this.properties.binCount);let t=_C(e[0],e[1],HT),i=yp(e[0],e[1],HT),[n]=t,s=o=>[o,o+i];return[[n-i,n],...t.map(s)]}calculateNiceBins(e,t){let i=Math.floor(e[0]),n=e[1],s=t||1,{start:o,binSize:a}=this.calculateNiceStart(i,n,s);return this.getBins(o,n,a,s)}getBins(e,t,i,n){let s=[],o=this.calculatePrecision(i);for(let a=0;a<n;a++){let l=Math.round((e+a*i)*o)/o,c=Math.round((e+(a+1)*i)*o)/o;a===n-1&&(c=Math.max(c,t)),s[a]=[l,c]}return s}calculatePrecision(e){let t=10;if(yC(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){let n=Math.abs(t-e)/i,s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return{start:Math.floor(e/o)*o,binSize:n}}processData(e){return ne(this,null,function*(){var t;let{xKey:i,yKey:n,areaPlot:s,aggregation:o}=this.properties,a=[Pn(this,i,!0),YA];if(n){let c=mw(this,"groupCount");o==="count"||(o==="sum"?c=UA(this,"groupAgg"):o==="mean"&&(c=jA(this,"groupAgg"))),s&&(c=vw(this,"groupAgg",c)),a.push(oi(this,n,!0,{invalidValue:void 0}),c)}else{let c=mw(this,"groupAgg");s&&(c=vw(this,"groupAgg",c)),a.push(c)}let l=c=>{var d;let u=ln(c.domain.keys[0]);if(u.length===0)return c.domain.groups=[],()=>[];let h=(d=this.properties.bins)!=null?d:this.deriveBins(u),p=h.length;return this.calculatedBins=[...h],f=>{let g=f.keys[0];for(let m=0;m<p;m++){let v=h[m];if(g>=v[0]&&g<v[1]||m===p-1&&g<=v[1])return v}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&a.push(Pp(this.processedData,!1)),yield this.requestDataModel(e,(t=this.data)!=null?t:[],{props:a,dataVisible:this.visible,groupByFn:l}),this.animationState.transition("updateData")})}getSeriesDomain(e){var t,i,n,s;let{processedData:o,dataModel:a}=this;if(!o||!a||!this.calculatedBins.length)return[];let l=a.getDomain(this,"groupAgg","aggregate",o),c=(t=this.calculatedBins)==null?void 0:t[0][0],d=(s=this.calculatedBins)==null?void 0:s[((n=(i=this.calculatedBins)==null?void 0:i.length)!=null?n:0)-1][1];return ln(e==="x"?[c,d]:l)}createNodeData(){return ne(this,null,function*(){var e;let{id:t,axes:i,processedData:n,ctx:{callbackCache:s}}=this,o=i.x,a=i.y;if(!this.visible||!o||!a||!n||n.type!=="grouped")return[];let{scale:l}=o,{scale:c}=a,{xKey:d,yKey:u,xName:h,yName:p,fill:f,stroke:g,strokeWidth:m}=this.properties,{formatter:v=N=>String(N.value),fontStyle:C,fontWeight:S,fontSize:b,fontFamily:T,color:A}=this.properties.label,E=[];return n.data.forEach(N=>{var M;let{aggValues:[[k,W]]=[[0,0]],datum:ee,datum:{length:te},keys:le,keys:[Ye,Xe]}=N,Ke=l.convert(Ye),Je=l.convert(Xe),et=k+W,St=c.convert(0),wt=c.convert(et),jt=Math.abs(Je-Ke),er=Math.abs(wt-St),Sr=Math.min(Ke,Je),we=Math.min(St,wt),Ct=et!==0?{text:(M=s.call(v,{value:et,datum:ee,seriesId:t,xKey:d,yKey:u,xName:h,yName:p}))!=null?M:String(et),fontStyle:C,fontWeight:S,fontSize:b,fontFamily:T,fill:A,x:Sr+jt/2,y:we+er/2}:void 0,dt={x:Sr+jt/2,y:we+er/2};E.push({series:this,datum:ee,aggregatedValue:et,frequency:te,domain:le,yKey:u,xKey:d,x:Sr,y:we,xValue:Ke,yValue:wt,width:jt,height:er,midPoint:dt,fill:f,stroke:g,strokeWidth:m,label:Ct})}),[{itemId:(e=this.properties.yKey)!=null?e:this.id,nodeData:E,labelData:E,scales:hl(jD.prototype,this,"calculateScaling").call(this),animationValid:!0,visible:this.visible}]})}nodeFactory(){return new Zr}updateDatumSelection(e){return ne(this,null,function*(){let{nodeData:t,datumSelection:i}=e;return i.update(t,n=>{n.tag=0,n.crisp=!0},n=>n.domain.join("_"))})}updateDatumNodes(e){return ne(this,null,function*(){let{isHighlight:t}=e,{fillOpacity:i,strokeOpacity:n,lineDash:s,lineDashOffset:o,shadow:a,highlightStyle:{item:{fill:l,fillOpacity:c=i,stroke:d,strokeWidth:u}}}=this.properties;e.datumSelection.each((h,p,f)=>{var g,m;let v=t&&u!==void 0?u:p.strokeWidth,C=t?c:i;h.fill=(g=t?l:void 0)!=null?g:p.fill,h.stroke=(m=t?d:void 0)!=null?m:p.stroke,h.fillOpacity=C,h.strokeOpacity=n,h.strokeWidth=v,h.lineDash=s,h.lineDashOffset=o,h.fillShadow=a,h.zIndex=t?Ip.highlightedZIndex:f,h.visible=p.height>0})})}updateLabelSelection(e){return ne(this,null,function*(){let{labelData:t,labelSelection:i}=e;return i.update(t,n=>{n.tag=1,n.pointerEvents=1,n.textAlign="center",n.textBaseline="middle"})})}updateLabelNodes(e){return ne(this,null,function*(){let t=this.isLabelEnabled();e.labelSelection.each((i,n)=>{let s=n.label;s&&t?(i.text=s.text,i.x=s.x,i.y=s.y,i.fontStyle=s.fontStyle,i.fontWeight=s.fontWeight,i.fontSize=s.fontSize,i.fontFamily=s.fontFamily,i.fill=s.fill,i.visible=!0):i.visible=!1})})}getTooltipHtml(e){let t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return"";let{xKey:n,yKey:s,xName:o,yName:a,fill:l,aggregation:c,tooltip:d}=this.properties,{aggregatedValue:u,frequency:h,domain:[p,f]}=e,g=`${si(o??n)}: ${t.formatDatum(p)} - ${t.formatDatum(f)}`,m=s?`<b>${si(a??s)} (${c})</b>: ${i.formatDatum(u)}<br>`:"";m+=`<b>Frequency</b>: ${h}`;let v={title:g,backgroundColor:l,content:m};return d.toTooltipHtml(v,{datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},xKey:n,xName:o,yKey:s,yName:a,color:l,title:g,seriesId:this.id})}getLegendData(e){var t,i;if(!((t=this.data)!=null&&t.length)||e!=="category")return[];let{xKey:n,yName:s,fill:o,fillOpacity:a,stroke:l,strokeWidth:c,strokeOpacity:d,visible:u}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:u,label:{text:(i=s??n)!=null?i:"Frequency"},marker:{fill:o??"rgba(0, 0, 0, 0)",stroke:l??"rgba(0, 0, 0, 0)",fillOpacity:a,strokeOpacity:d,strokeWidth:c}}]}animateEmptyUpdateReady({datumSelections:e,labelSelections:t}){let i=Pm(Fm(!0,this.axes));Ti(this.id,"datums",this.ctx.animationManager,e,i),Si(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){var t,i;let n=(i=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:i.diff,s=Pm(Fm(!0,this.axes));Ti(this.id,"datums",this.ctx.animationManager,e.datumSelections,s,(o,a)=>this.getDatumId(a),n),Si(this,"labels",this.ctx.animationManager,e.labelSelections)}getDatumId(e){return wp(e.domain.map(t=>`${t}`))}isLabelEnabled(){return this.properties.label.enabled}};Gb.className="HistogramSeries";Gb.type="histogram";var NG=Gb,kG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:NG,seriesDefaults:{axes:[{type:yo.NUMBER,position:Co.BOTTOM},{type:yo.NUMBER,position:Co.LEFT}]},themeTemplate:{__extends__:yl,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Xi,color:kp,formatter:void 0},shadow:{enabled:!1,color:Gp,xOffset:3,yOffset:3,blur:5}},paletteFactory:({takeColors:r})=>{let{fills:[e],strokes:[t]}=r(1);return{fill:e,stroke:t}}},dn=class extends Nc{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new kn,this.label=new Fr,this.tooltip=new Cs,this.connectMissingData=!1}};x([_(Se)],dn.prototype,"xKey",2);x([_(Se)],dn.prototype,"yKey",2);x([_(Se,{optional:!0})],dn.prototype,"xName",2);x([_(Se,{optional:!0})],dn.prototype,"yName",2);x([_(Se,{optional:!0})],dn.prototype,"title",2);x([_(yt)],dn.prototype,"stroke",2);x([_(ge)],dn.prototype,"strokeWidth",2);x([_(ri)],dn.prototype,"strokeOpacity",2);x([_(Dc)],dn.prototype,"lineDash",2);x([_(ge)],dn.prototype,"lineDashOffset",2);x([_(vt)],dn.prototype,"marker",2);x([_(vt)],dn.prototype,"label",2);x([_(vt)],dn.prototype,"tooltip",2);x([_(Ze)],dn.prototype,"connectMissingData",2);var Bb=class KD extends kc{constructor(e){super({moduleCtx:e,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:Ob({getOpacity:()=>this.getOpacity()}),label:Bc,marker:(t,i)=>H(H({},Ym(t)),Am(t,i))}}),this.properties=new dn}processData(e){return ne(this,null,function*(){if(!this.properties.isValid()||this.data==null)return;let{xKey:t,yKey:i}=this.properties,n=!this.ctx.animationManager.isSkipped(),{isContinuousX:s,isContinuousY:o}=this.isContinuous(),a=[];s||(a.push(Pn(this,t,s,{id:"xKey"})),n&&this.processedData&&a.push(Pp(this.processedData))),n&&a.push(jm(this,s?["xValue"]:[])),a.push(oi(this,t,s,{id:"xValue"}),oi(this,i,o,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(e,this.data,{props:a}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{axes:t,dataModel:i,processedData:n}=this;if(!n||!i)return[];let s=t.x,o=t.y,a=i.resolveProcessedDataDefById(this,"xValue");if(e==="x"){let l=i.getDomain(this,"xValue","value",n);return a?.def.type==="value"&&a.def.valueType==="category"?l:ln(Sa(l),s)}else{let l=i.getDomain(this,"yValue","value",n);return ln(l,o)}}createNodeData(){return ne(this,null,function*(){var e,t,i;let{processedData:n,dataModel:s,axes:o}=this,a=o.x,l=o.y;if(!n||!s||!a||!l)return[];let{xKey:c,yKey:d,xName:u,yName:h,marker:p,label:f,connectMissingData:g}=this.properties,m=a.scale,v=l.scale,C=((e=m.bandwidth)!=null?e:0)/2,S=((t=v.bandwidth)!=null?t:0)/2,b=[],T=p.enabled?p.size:0,A=s.resolveProcessedDataIndexById(this,"xValue").index,E=s.resolveProcessedDataIndexById(this,"yValue").index,N=!0,M;for(let k=0;k<n.data.length;k++){let{datum:W,values:ee}=M??n.data[k],te=ee[A],le=ee[E];if(le===void 0)N=!g;else{let Ye=m.convert(te)+C;if(isNaN(Ye)){N=!g,M=void 0;continue}M=((i=n.data[k+1])==null?void 0:i.values[E])===void 0?void 0:n.data[k+1];let Xe=v.convert(le)+S,Ke=this.getLabelText(f,{value:le,datum:W,xKey:c,yKey:d,xName:u,yName:h},Je=>Fn(Je)?Je.toFixed(2):String(Je));b.push({series:this,datum:W,yKey:d,xKey:c,point:{x:Ye,y:Xe,moveTo:N,size:T},midPoint:{x:Ye,y:Xe},yValue:le,xValue:te,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:Ke?{text:Ke,fontStyle:f.fontStyle,fontWeight:f.fontWeight,fontSize:f.fontSize,fontFamily:f.fontFamily,textAlign:"center",textBaseline:"bottom",fill:f.color}:void 0}),N=!1}}return[{itemId:d,nodeData:b,labelData:b,scales:hl(KD.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:e}=this.properties.marker,t=Ic(e);return new t}updatePathNodes(e){return ne(this,null,function*(){let{paths:[t],opacity:i,visible:n,animationEnabled:s}=e;t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(t.visible=n),pC(this,t)})}updateMarkerSelection(e){return ne(this,null,function*(){let{nodeData:t}=e,{markerSelection:i}=e,{shape:n,enabled:s}=this.properties.marker;return t=n&&s?t:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,o=>this.getDatumId(o))})}updateMarkerNodes(e){return ne(this,null,function*(){let{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,stroke:o,strokeWidth:a,strokeOpacity:l,marker:c,highlightStyle:d}=this.properties,u=Mn(i&&d.item,c.getStyle(),{stroke:o,strokeWidth:a,strokeOpacity:l}),h=this.ctx.animationManager.isSkipped();t.each((p,f)=>{this.updateMarkerStyle(p,c,{datum:f,highlighted:i,xKey:n,yKey:s},u,{applyTranslation:h})}),i||c.markClean()})}updateLabelSelection(e){return ne(this,null,function*(){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])})}updateLabelNodes(e){return ne(this,null,function*(){let{enabled:t,fontStyle:i,fontWeight:n,fontSize:s,fontFamily:o,color:a}=this.properties.label;e.labelSelection.each((l,c)=>{let{point:d,label:u}=c;c&&u&&t?(l.fontStyle=i,l.fontWeight=n,l.fontSize=s,l.fontFamily=o,l.textAlign=u.textAlign,l.textBaseline=u.textBaseline,l.text=u.text,l.x=d.x,l.y=d.y-10,l.fill=a,l.visible=!0):l.visible=!1})})}getTooltipHtml(e){var t;let i=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!i||!n)return"";let{xKey:s,yKey:o,xName:a,yName:l,strokeWidth:c,marker:d,tooltip:u}=this.properties,{datum:h,xValue:p,yValue:f}=e,g=i.formatDatum(p),m=n.formatDatum(f),v=si((t=this.properties.title)!=null?t:l),C=si(g+": "+m),S=Mn({fill:d.stroke},d.getStyle(),{strokeWidth:c}),{fill:b}=this.getMarkerStyle(d,{datum:e,xKey:s,yKey:o,highlighted:!1},S);return u.toTooltipHtml({title:v,content:C,backgroundColor:b},H({datum:h,xKey:s,xName:a,yKey:o,yName:l,title:v,color:b,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){var t,i,n,s,o,a,l,c,d;if(!((t=this.data)!=null&&t.length&&this.properties.isValid()&&e==="category"))return[];let{yKey:u,yName:h,stroke:p,strokeOpacity:f,strokeWidth:g,lineDash:m,title:v,marker:C,visible:S}=this.properties,b="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:u,seriesId:this.id,enabled:S,label:{text:(i=v??h)!=null?i:u},marker:{shape:C.shape,fill:(n=C.fill)!=null?n:b,stroke:(o=(s=C.stroke)!=null?s:p)!=null?o:b,fillOpacity:(a=C.fillOpacity)!=null?a:1,strokeOpacity:(c=(l=C.strokeOpacity)!=null?l:f)!=null?c:1,strokeWidth:(d=C.strokeWidth)!=null?d:0,enabled:C.enabled},line:{stroke:p??b,strokeOpacity:f,strokeWidth:g,lineDash:m}}]}updatePaths(e){return ne(this,null,function*(){this.updateLinePaths([e.paths],[e.contextData])})}updateLinePaths(e,t){t.forEach(({nodeData:i},n)=>{let[s]=e[n],{path:o}=s;o.clear({trackChanges:!0});for(let a of i)a.point.moveTo?o.moveTo(a.point.x,a.point.y):o.lineTo(a.point.x,a.point.y);s.checkPathDirty()})}animateEmptyUpdateReady(e){let{markerSelections:t,labelSelections:i,annotationSelections:n,contextData:s,paths:o}=e,{animationManager:a}=this.ctx;this.updateLinePaths(o,s),Db(this,a,o.flat()),qi(t,Am),_b(this,a,t),Si(this,"labels",a,i),Si(this,"annotations",a,n)}animateReadyResize(e){let{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,i;let{animationManager:n}=this.ctx,{markerSelections:s,labelSelections:o,annotationSelections:a,contextData:l,paths:c,previousContextData:d}=e;if(super.resetAllAnimation(e),l.length===0||!d||d.length===0){n.skipCurrentBatch(),this.updateLinePaths(c,l);return}let[u]=c,[h]=l,[p]=d,f=PD(h,p,(i=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:i.diff);if(f===void 0){n.skipCurrentBatch(),this.updateLinePaths(c,l);return}Ti(this.id,"marker",n,s,f.marker),Ti(this.id,"path_properties",n,u,f.pathProperties),RD(this.id,"path_update",n,u,f.path),f.hasMotion&&(Si(this,"labels",n,o),Si(this,"annotations",n,a))}getDatumId(e){return wp([`${e.xValue}`])}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new We}};Bb.className="LineSeries";Bb.type="line";var GG=Bb,BG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:GG,seriesDefaults:gD,themeTemplate:{__extends__:yl,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:Np,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Xi,color:Or,formatter:void 0}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:r=>{let{marker:e}=$m(r);return{stroke:e.fill,marker:e}}},un=class extends Nc{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new kn,this.label=new Fr,this.tooltip=new Cs}};x([_(Se)],un.prototype,"xKey",2);x([_(Se)],un.prototype,"yKey",2);x([_(Se,{optional:!0})],un.prototype,"labelKey",2);x([_(Se,{optional:!0})],un.prototype,"colorKey",2);x([_(Se,{optional:!0})],un.prototype,"xName",2);x([_(Se,{optional:!0})],un.prototype,"yName",2);x([_(Se,{optional:!0})],un.prototype,"labelName",2);x([_(Se,{optional:!0})],un.prototype,"colorName",2);x([_(xC,{optional:!0})],un.prototype,"colorDomain",2);x([_(gl)],un.prototype,"colorRange",2);x([_(Se,{optional:!0})],un.prototype,"title",2);x([_(vt)],un.prototype,"marker",2);x([_(vt)],un.prototype,"label",2);x([_(vt)],un.prototype,"tooltip",2);var Vb=class $D extends kc{constructor(e){super({moduleCtx:e,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Ym,label:Bc}}),this.properties=new un,this.colorScale=new Gu}processData(e){return ne(this,null,function*(){var t;if(!this.properties.isValid()||this.data==null)return;let{isContinuousX:i,isContinuousY:n}=this.isContinuous(),{xKey:s,yKey:o,labelKey:a,colorKey:l,colorDomain:c,colorRange:d}=this.properties,{dataModel:u,processedData:h}=yield this.requestDataModel(e,this.data,{props:[Pn(this,s,i,{id:"xKey-raw"}),Pn(this,o,n,{id:"yKey-raw"}),...a?[Pn(this,a,!1,{id:"labelKey-raw"})]:[],oi(this,s,i,{id:"xValue"}),oi(this,o,n,{id:"yValue"}),...l?[oi(this,l,!0,{id:"colorValue"})]:[],...a?[oi(this,a,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(l){let p=u.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=(t=c??h.domain.values[p])!=null?t:[],this.colorScale.range=d,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:t,processedData:i}=this;if(!i||!t)return[];let n=e==="x"?"xValue":"yValue",s=t.resolveProcessedDataDefById(this,n),o=t.getDomain(this,n,"value",i);if(s?.def.type==="value"&&s?.def.valueType==="category")return o;let a=this.axes[e];return ln(Sa(o),a)}createNodeData(){return ne(this,null,function*(){var e,t,i;let{axes:n,dataModel:s,processedData:o,colorScale:a}=this,{xKey:l,yKey:c,labelKey:d,colorKey:u,xName:h,yName:p,labelName:f,marker:g,label:m,visible:v}=this.properties,C=n.x,S=n.y;if(!(s&&o&&v&&C&&S))return[];let b=s.resolveProcessedDataIndexById(this,"xValue").index,T=s.resolveProcessedDataIndexById(this,"yValue").index,A=u?s.resolveProcessedDataIndexById(this,"colorValue").index:-1,E=d?s.resolveProcessedDataIndexById(this,"labelValue").index:-1,N=C.scale,M=S.scale,k=((e=N.bandwidth)!=null?e:0)/2,W=((t=M.bandwidth)!=null?t:0)/2,ee=[],te=m.getFont();for(let{values:le,datum:Ye}of(i=o.data)!=null?i:[]){let Xe=le[b],Ke=le[T],Je=N.convert(Xe)+k,et=M.convert(Ke)+W,St=this.getLabelText(m,{value:d?le[E]:Ke,datum:Ye,xKey:l,yKey:c,labelKey:d,xName:h,yName:p,labelName:f}),wt=wi.getTextSize(St,te),jt=u?a.convert(le[A]):void 0;ee.push({series:this,itemId:c,yKey:c,xKey:l,datum:Ye,xValue:Xe,yValue:Ke,capDefaults:{lengthRatioMultiplier:g.getDiameter(),lengthMax:1/0},point:{x:Je,y:et,size:g.size},midPoint:{x:Je,y:et},fill:jt,label:H({text:St},wt)})}return[{itemId:c,nodeData:ee,labelData:ee,scales:hl($D.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return(e=this.contextNodeData)==null?void 0:e.reduce((t,i)=>t.concat(i.labelData),[])}markerFactory(){let{shape:e}=this.properties.marker,t=Ic(e);return new t}updateMarkerSelection(e){return ne(this,null,function*(){let{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])})}updateMarkerNodes(e){return ne(this,null,function*(){let{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,labelKey:o,marker:a,highlightStyle:l}=this.properties,c=Mn(i&&l.item,a.getStyle());t.each((d,u)=>{this.updateMarkerStyle(d,a,{datum:u,highlighted:i,xKey:n,yKey:s,labelKey:o},c)}),i||a.markClean()})}updateLabelSelection(e){return ne(this,null,function*(){var t,i;let n=this.isLabelEnabled()?(i=(t=this.chart)==null?void 0:t.placeLabels().get(this))!=null?i:[]:[];return e.labelSelection.update(n.map(({datum:s,x:o,y:a})=>me(H({},s),{point:{x:o,y:a,size:s.point.size}})),s=>{s.pointerEvents=1})})}updateLabelNodes(e){return ne(this,null,function*(){let{label:t}=this.properties;e.labelSelection.each((i,n)=>{var s,o,a,l;i.text=n.label.text,i.fill=t.color,i.x=(o=(s=n.point)==null?void 0:s.x)!=null?o:0,i.y=(l=(a=n.point)==null?void 0:a.y)!=null?l:0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(e){let t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return"";let{xKey:n,yKey:s,labelKey:o,xName:a,yName:l,labelName:c,title:d=l,marker:u,tooltip:h}=this.properties,{datum:p,xValue:f,yValue:g,label:m}=e,v=Mn({fill:e.fill,strokeWidth:this.getStrokeWidth(u.strokeWidth)},u.getStyle()),{fill:C="gray"}=this.getMarkerStyle(u,{datum:e,highlighted:!1,xKey:n,yKey:s,labelKey:o},v),S=si(t.formatDatum(f)),b=si(i.formatDatum(g)),T=`<b>${si(a??n)}</b>: ${S}<br><b>${si(l??s)}</b>: ${b}`;return o&&(T=`<b>${si(c??o)}</b>: ${si(m.text)}<br>`+T),h.toTooltipHtml({title:d,content:T,backgroundColor:C},H({datum:p,xKey:n,xName:a,yKey:s,yName:l,labelKey:o,labelName:c,title:d,color:C,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){var t,i,n,s,o,a;let{yKey:l,yName:c,title:d,marker:u,visible:h}=this.properties,{fill:p,stroke:f,fillOpacity:g,strokeOpacity:m,strokeWidth:v}=u;return!((t=this.data)!=null&&t.length)||!this.properties.isValid()||e!=="category"?[]:[{legendType:"category",id:this.id,itemId:l,seriesId:this.id,enabled:h,label:{text:(i=d??c)!=null?i:l},marker:{shape:u.shape,fill:(s=(n=u.fill)!=null?n:p)!=null?s:"rgba(0, 0, 0, 0)",stroke:(a=(o=u.stroke)!=null?o:f)!=null?a:"rgba(0, 0, 0, 0)",fillOpacity:g??1,strokeOpacity:m??1,strokeWidth:v??0}}]}animateEmptyUpdateReady(e){let{markerSelections:t,labelSelections:i,annotationSelections:n}=e;Eb(this,this.ctx.animationManager,t),Si(this,"labels",this.ctx.animationManager,i),Si(this,"annotations",this.ctx.animationManager,n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new We}};Vb.className="ScatterSeries";Vb.type="scatter";var VG=Vb,HG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:VG,seriesDefaults:{axes:[{type:yo.NUMBER,position:Co.BOTTOM},{type:yo.NUMBER,position:Co.LEFT}]},themeTemplate:{__extends__:yl,tooltip:{position:{type:"node"}},marker:{__extends__:Np,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Xi,color:Or}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:$m},al={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},mp={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},YD=class extends ui{constructor(){super(...arguments),this.showInLegend=!1}};x([_(Ze)],YD.prototype,"showInLegend",2);var Hb=class extends Fr{constructor(){super(...arguments),this.margin=2}set(r,e){return super.set(r)}};x([_(Se)],Hb.prototype,"text",2);x([_(ei)],Hb.prototype,"margin",2);var Wb=class extends Yr{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};x([_(yt)],Wb.prototype,"fill",2);x([_(ri)],Wb.prototype,"fillOpacity",2);var Bp=class extends Fr{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};x([_(ge)],Bp.prototype,"offset",2);x([_(_p)],Bp.prototype,"minAngle",2);x([_(ge)],Bp.prototype,"minSpacing",2);x([_(ge)],Bp.prototype,"maxCollisionOffset",2);x([_(Ze)],Bp.prototype,"avoidCollisions",2);var Ub=class extends Fr{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};x([_(ei)],Ub.prototype,"positionOffset",2);x([_(ri)],Ub.prototype,"positionRatio",2);var NC=class extends Yr{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};x([_(gl,{optional:!0})],NC.prototype,"colors",2);x([_(ge)],NC.prototype,"length",2);x([_(ge)],NC.prototype,"strokeWidth",2);var pt=class extends Aa{constructor(){super(...arguments),this.fills=Object.values(al),this.strokes=Object.values(mp),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new CC(Hb),this.title=new YD,this.innerCircle=new Wb,this.shadow=new Ta,this.calloutLabel=new Bp,this.sectorLabel=new Ub,this.calloutLine=new NC,this.tooltip=new Cs,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}};x([_(Se)],pt.prototype,"angleKey",2);x([_(Se,{optional:!0})],pt.prototype,"angleName",2);x([_(Se,{optional:!0})],pt.prototype,"radiusKey",2);x([_(Se,{optional:!0})],pt.prototype,"radiusName",2);x([_(ge,{optional:!0})],pt.prototype,"radiusMin",2);x([_(ge,{optional:!0})],pt.prototype,"radiusMax",2);x([_(Se,{optional:!0})],pt.prototype,"calloutLabelKey",2);x([_(Se,{optional:!0})],pt.prototype,"calloutLabelName",2);x([_(Se,{optional:!0})],pt.prototype,"sectorLabelKey",2);x([_(Se,{optional:!0})],pt.prototype,"sectorLabelName",2);x([_(Se,{optional:!0})],pt.prototype,"legendItemKey",2);x([_(gl)],pt.prototype,"fills",2);x([_(gl)],pt.prototype,"strokes",2);x([_(ri)],pt.prototype,"fillOpacity",2);x([_(ri)],pt.prototype,"strokeOpacity",2);x([_(Dc)],pt.prototype,"lineDash",2);x([_(ge)],pt.prototype,"lineDashOffset",2);x([_(wa,{optional:!0})],pt.prototype,"formatter",2);x([_(_p)],pt.prototype,"rotation",2);x([_(ei)],pt.prototype,"outerRadiusOffset",2);x([_(ri)],pt.prototype,"outerRadiusRatio",2);x([_(ei)],pt.prototype,"innerRadiusOffset",2);x([_(ri)],pt.prototype,"innerRadiusRatio",2);x([_(ge)],pt.prototype,"strokeWidth",2);x([_(ge,{optional:!0})],pt.prototype,"sectorSpacing",2);x([_(hR)],pt.prototype,"innerLabels",2);x([_(vt)],pt.prototype,"title",2);x([_(vt)],pt.prototype,"innerCircle",2);x([_(vt)],pt.prototype,"shadow",2);x([_(vt)],pt.prototype,"calloutLabel",2);x([_(vt)],pt.prototype,"sectorLabel",2);x([_(vt)],pt.prototype,"calloutLine",2);x([_(vt)],pt.prototype,"tooltip",2);x([_(Se,{optional:!0})],pt.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);function $S(r,e,t,i){let n=[t.convert(0),t.convert(1)],s=[i.convert(0),i.convert(1)],o=Math.PI/-2+hs(e),a=({radius:h})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*h}),l=({radius:h})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*h});return{nodes:{toFn:(h,p,f,{prevLive:g})=>{var m,v;let{startAngle:C,endAngle:S,innerRadius:b,outerRadius:T}=p,{stroke:A,fill:E}=p.sectorFormat;if(f==="removed"&&g?(C=(m=g.datum)==null?void 0:m.endAngle,S=(v=g.datum)==null?void 0:v.endAngle):f==="removed"&&!g&&(C=o,S=o),f==="removed"){let N=a(p);b=N.innerRadius,T=N.outerRadius}return{startAngle:C,endAngle:S,outerRadius:T,innerRadius:b,stroke:A,fill:E}},fromFn:(h,p,f,{prevFromProps:g})=>{var m,v,C,S,b,T;let{startAngle:A,endAngle:E,innerRadius:N,outerRadius:M}=h,{fill:k,stroke:W}=p.sectorFormat;if(f==="unknown"||f==="added"&&!g?(A=o,E=o,N=p.innerRadius,M=p.outerRadius):f==="added"&&g&&(A=(m=g.endAngle)!=null?m:o,E=(v=g.endAngle)!=null?v:o,N=(C=g.innerRadius)!=null?C:p.innerRadius,M=(S=g.outerRadius)!=null?S:p.outerRadius),f==="added"&&!r){let ee=l(p);N=ee.innerRadius,M=ee.outerRadius}return f==="updated"&&(k=(b=h.fill)!=null?b:k,W=(T=h.stroke)!=null?T:W),{startAngle:A,endAngle:E,innerRadius:N,outerRadius:M,fill:k,stroke:W}}},innerCircle:{fromFn:(h,p)=>{var f,g,m;return{size:(m=(g=(f=h.previousDatum)==null?void 0:f.radius)!=null?g:h.size)!=null?m:0}},toFn:(h,p)=>{var f;return{size:(f=p.radius)!=null?f:0}}}}}function WG(r,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}var zb=class extends iD{constructor(r){var e=r,{useLabelLayer:t=!1,pickModes:i=[0],canHaveAxes:n=!1,animationResetFns:s}=e,o=In(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(me(H({},o),{useLabelLayer:t,pickModes:i,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.sectorGroup=this.contentGroup.appendChild(new We),this.itemSelection=Ri.select(this.sectorGroup,()=>this.nodeFactory(),!1),this.labelSelection=Ri.select(this.labelGroup,Xt,!1),this.highlightSelection=Ri.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=s,this.animationState=new Hm("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)}},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a)},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)}},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)}}},()=>this.checkProcessedDataAnimatable())}getLabelData(){return[]}computeLabelsBBox(r,e){return null}resetAllAnimation(){var r;let{item:e,label:t}=(r=this.animationResetFns)!=null?r:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&qi([this.itemSelection,this.highlightSelection],e),t&&qi([this.labelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(r){var e;let{item:t}=(e=this.animationResetFns)!=null?e:{};t&&qi([this.highlightSelection],t)}animateReadyHighlightMarkers(r){}animateReadyResize(r){this.resetAllAnimation()}animateClearingUpdateEmpty(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(r){return{seriesRect:r}}},UG=class extends OC{constructor(r,e,t,i){super(r,e,t,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey,this.calloutLabelKey=i.properties.calloutLabelKey,this.sectorLabelKey=i.properties.sectorLabelKey}},kC=class extends zb{constructor(r){super({moduleCtx:r,useLabelLayer:!0,animationResetFns:{item:WG,label:Bc}}),this.properties=new pt,this.previousRadiusScale=new Au,this.radiusScale=new Au,this.backgroundGroup=this.rootGroup.appendChild(new We({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new We({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Du),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Du),this.innerCircleGroup=this.backgroundGroup.appendChild(new We({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeClickEvent=UG,this.angleScale=new Au,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2);let e=new We({name:"pieCalloutLabels"}),t=new We({name:"pieSectorLabels"}),i=new We({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(t),this.labelGroup.append(i),this.calloutLabelSelection=Ri.select(e,We),this.sectorLabelSelection=Ri.select(t,Xt),this.innerLabelsSelection=Ri.select(i,Xt),this.innerCircleSelection=Ri.select(this.innerCircleGroup,Du);for(let n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1}addChartEventListeners(){var r;(r=this.ctx.chartEventManager)==null||r.addListener("legend-item-click",e=>this.onLegendItemClick(e))}visibleChanged(){this.processSeriesItemEnabled()}get visible(){return this.seriesItemEnabled.length?this.seriesItemEnabled.some(r=>r):super.visible}processSeriesItemEnabled(){var r;let{data:e,visible:t}=this;this.seriesItemEnabled=(r=e?.map(()=>t))!=null?r:[]}nodeFactory(){return new So}getSeriesDomain(r){return r==="x"?this.angleScale.domain:this.radiusScale.domain}processData(r){return ne(this,null,function*(){var e,t,i,n,s;if(this.data==null||!this.properties.isValid())return;let{data:o}=this,{seriesItemEnabled:a}=this,{angleKey:l,radiusKey:c,calloutLabelKey:d,sectorLabelKey:u,legendItemKey:h}=this.properties,p=!this.ctx.animationManager.isSkipped(),f=[],g=[];h?f.push(Pn(this,h,!1,{id:"legendItemKey"})):d?f.push(Pn(this,d,!1,{id:"calloutLabelKey"})):u&&f.push(Pn(this,u,!1,{id:"sectorLabelKey"})),c&&g.push(QA(this,c,{id:"radiusValue",min:(e=this.properties.radiusMin)!=null?e:0,max:this.properties.radiusMax}),oi(this,c,!0,{id:"radiusRaw"}),yw(this,{id:"radiusValue"},[0,1],1,(t=this.properties.radiusMin)!=null?t:0,this.properties.radiusMax)),d&&g.push(oi(this,d,!1,{id:"calloutLabelValue"})),u&&g.push(oi(this,u,!1,{id:"sectorLabelValue"})),h&&g.push(oi(this,h,!1,{id:"legendItemValue"})),p&&this.processedData&&f.length>0&&g.push(Pp(this.processedData)),g.push(jm(this)),o=o.map((m,v)=>a[v]?m:me(H({},m),{[l]:0})),yield this.requestDataModel(r,o,{props:[...f,eD(this,l,!0,{id:"angleValue",onlyPositive:!0}),oi(this,l,!0,{id:"angleRaw"}),yw(this,{id:"angleValue"},[0,1],0,0),...g]});for(let m of(s=(n=(i=this.processedData)==null?void 0:i.defs)==null?void 0:n.values)!=null?s:[]){let{id:v,missing:C,property:S}=m;v!=="angleRaw"&&C!==void 0&&C>0&&be.warnOnce(`no value was found for the key '${String(S)}' on ${C} data element${C>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return ne(this,null,function*(){if(!this.nodeDataRefresh)return;let[{nodeData:r=[]}={}]=yield this.createNodeData();this.nodeData=r,this.nodeDataRefresh=!1})}getProcessedDataIndexes(r){let e=r.resolveProcessedDataIndexById(this,"angleValue").index,t=this.properties.radiusKey?r.resolveProcessedDataIndexById(this,"radiusValue").index:-1,i=this.properties.calloutLabelKey?r.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,n=this.properties.sectorLabelKey?r.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,s=this.properties.legendItemKey?r.resolveProcessedDataIndexById(this,"legendItemValue").index:-1;return{angleIdx:e,radiusIdx:t,calloutLabelIdx:i,sectorLabelIdx:n,legendItemIdx:s}}createNodeData(){return ne(this,null,function*(){let{id:r,processedData:e,dataModel:t,angleScale:i}=this,{rotation:n}=this.properties;if(!e||!t||e.type!=="ungrouped")return[];let{angleIdx:s,radiusIdx:o,calloutLabelIdx:a,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(t),d=0,u=0,h=e.data.map((p,f)=>{var g;let{datum:m,values:v}=p,C=v[s],S=i.convert(d)+hs(n);d=C,u+=C;let b=i.convert(d)+hs(n),T=Math.abs(b-S),A=S+T/2,E=v[s+1],N=o>=0&&(g=v[o])!=null?g:1,M=o>=0?v[o+1]:void 0,k=c>=0?v[c]:void 0,W=this.getLabels(m,A,T,!0,v[a],v[l],k),ee=this.getSectorFormat(m,f,!1);return H({itemId:f,series:this,datum:m,index:f,angleValue:E,midAngle:A,midCos:Math.cos(A),midSin:Math.sin(A),startAngle:S,endAngle:b,sectorFormat:ee,radiusValue:M,radius:N,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(N),0),legendItemValue:k},W)});return this.zerosumOuterRing.visible=u===0,this.zerosumInnerRing.visible=u===0&&this.properties.innerRadiusRatio!==1&&this.properties.innerRadiusRatio>0,[{itemId:r,nodeData:h,labelData:h}]})}getLabels(r,e,t,i,n,s,o){let{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this.properties,d=!i||a.enabled?this.properties.calloutLabelKey:void 0,u=!i||l.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!u&&!c)return{};let h={datum:r,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return d&&t>hs(a.minAngle)&&(p.calloutLabel=me(H({},this.getTextAlignment(e)),{text:this.getLabelText(a,me(H({},h),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,me(H({},h),{value:s}))}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(r){let e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],t=tC(r),i=-3*Math.PI/4,n=t-i,s=Math.floor(n/(Math.PI/2)),o=Bw(s,e.length);return e[o]}getSectorFormat(r,e,t){var i,n,s,o,a;let{callbackCache:l,highlightManager:c}=this.ctx,{angleKey:d,radiusKey:u,fills:h,strokes:p,formatter:f,sectorSpacing:g,__BACKGROUND_COLOR_DO_NOT_USE:m}=this.properties,v=c.getActiveHighlight(),C=t&&v?.series===this&&e===v.itemId,{fill:S,fillOpacity:b,stroke:T,strokeWidth:A,strokeOpacity:E}=Mn(C&&this.properties.highlightStyle.item,{fill:h.length>0?h[e%h.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:g!=null?p.length>0?p[e%p.length]:void 0:p.length>0?p[e%p.length]:m,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()}),N;return f&&(N=l.call(f,{datum:r,angleKey:d,radiusKey:u,fill:S,stroke:T,fills:h,strokes:p,strokeWidth:A,highlighted:C,seriesId:this.id})),{fill:(i=N?.fill)!=null?i:S,fillOpacity:(n=N?.fillOpacity)!=null?n:b,stroke:(s=N?.stroke)!=null?s:T,strokeWidth:(o=N?.strokeWidth)!=null?o:A,strokeOpacity:(a=N?.strokeOpacity)!=null?a:E}}getInnerRadius(){let{radius:r}=this,{innerRadiusRatio:e,innerRadiusOffset:t}=this.properties,i=r*e+t;return i===r||i<0?0:i}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(r){let e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,r&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(t=>{var i=t,{radius:n}=i,s=In(i,["radius"]);return me(H({},s),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var r,e;let t=Math.max(0,this.radiusScale.range[1]);if(t===0)return NaN;let n=2+((e=(r=this.properties.title)==null?void 0:r.spacing)!=null?e:0),s=Math.max(0,-t);return-t-n-s}update(r){return ne(this,arguments,function*({seriesRect:e}){let{title:t}=this.properties,i={seriesRectWidth:e?.width,seriesRectHeight:e?.height},n=ya(this.nodeDataDependencies,i)!=null;if(n&&(this._nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){let s=this.getTitleTranslationY(),o=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(s)&&!this.bboxIntersectsSurroundingSeries(o,0,s),t.node.translationY=isFinite(s)?s:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var r,e;let{oldTitle:t}=this,{title:i}=this.properties;t!==i&&(t&&((r=this.labelGroup)==null||r.removeChild(t.node)),i&&(i.node.textBaseline="bottom",(e=this.labelGroup)==null||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(r=>{let e=r.innerRadius+(r.outerRadius-r.innerRadius)/2;r.midPoint={x:r.midCos*Math.max(0,e),y:r.midSin*Math.max(0,e)}})}updateSelections(){return ne(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return ne(this,null,function*(){let{itemSelection:r,highlightSelection:e,calloutLabelSelection:t,sectorLabelSelection:i,innerLabelsSelection:n}=this,s=(o,a)=>{let l=this.nodeData;a&&(l=l.map(c=>me(H({},c),{sectorFormat:H({},c.sectorFormat)}))),o.update(l),this.ctx.animationManager.isSkipped()&&o.cleanup()};s(r,!1),s(e,!0),t.update(this.nodeData,o=>{let a=new mr;a.tag=1,a.pointerEvents=1,o.appendChild(a);let l=new Xt;l.tag=2,l.pointerEvents=1,o.appendChild(l)}),i.update(this.nodeData,o=>{o.pointerEvents=1}),n.update(this.properties.innerLabels,o=>{o.pointerEvents=1})})}updateInnerCircleSelection(){let{innerCircle:r}=this.properties,e=0,t=this.getInnerRadius();if(t>0){let n=Math.min(t,this.getOuterRadius()),s=1;e=Math.ceil(n*2+s)}let i=r?[{radius:e}]:[];this.innerCircleSelection.update(i)}updateNodes(r){return ne(this,null,function*(){let e=this.ctx.highlightManager.getActiveHighlight(),t=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=t,this.backgroundGroup.visible=t,this.contentGroup.visible=t,this.highlightGroup.visible=t&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=t),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((n,{radius:s})=>{var o,a;n.setProperties({fill:(o=this.properties.innerCircle)==null?void 0:o.fill,opacity:(a=this.properties.innerCircle)==null?void 0:a.fillOpacity,size:s})});let i=(n,s,o,a)=>{let l=this.getSectorFormat(s.datum,s.itemId,a);s.sectorFormat.fill=l.fill,s.sectorFormat.stroke=l.stroke;let c=this.ctx.animationManager.isSkipped();c&&(n.startAngle=s.startAngle,n.endAngle=s.endAngle,n.innerRadius=s.innerRadius,n.outerRadius=s.outerRadius),(a||c)&&(n.fill=l.fill,n.stroke=l.stroke),n.strokeWidth=l.strokeWidth,n.fillOpacity=l.fillOpacity,n.strokeOpacity=this.properties.strokeOpacity,n.lineDash=this.properties.lineDash,n.lineDashOffset=this.properties.lineDashOffset,n.fillShadow=this.properties.shadow,n.inset=this.properties.sectorSpacing!=null?(this.properties.sectorSpacing+(l.stroke!=null?l.strokeWidth:0))/2:0,n.lineJoin=this.properties.sectorSpacing!=null?"miter":"round"};this.itemSelection.each((n,s,o)=>i(n,s,o,!1)),this.highlightSelection.each((n,s,o)=>{let a=e?.series===this&&n.datum.itemId===e.itemId;i(n,s,o,a),n.visible=a}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(r),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var r;let{calloutLine:e}=this.properties,t=e.length,i=e.strokeWidth,n=(r=e.colors)!=null?r:this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(1).forEach((o,a)=>{let l=o.datum,{calloutLabel:c,outerRadius:d}=l;if(c?.text&&!c.hidden&&d!==0){o.visible=!0,o.strokeWidth=i,o.stroke=n[a%n.length],o.fill=void 0;let u=l.midCos*d,h=l.midSin*d,p=l.midCos*(d+t),f=l.midSin*(d+t);if((c.collisionTextAlign||c.collisionOffsetY!==0)&&c.box!=null){let m=c.box,v=p,C=f;p<m.x?v=m.x:p>m.x+m.width&&(v=m.x+m.width),f<m.y?C=m.y:f>m.y+m.height&&(C=m.y+m.height);let S=v-p,b=C-f,T=Math.sqrt(Math.pow(S,2)+Math.pow(b,2)),A=T-s;A>0&&(p=p+S*A/T,f=f+b*A/T)}o.x1=u,o.y1=h,o.x2=p,o.y2=f}else o.visible=!1})}getLabelOverflow(r,e,t){let i=t.x-this.centerX,n=t.x+t.width-this.centerX,s=t.y-this.centerY,o=t.y+t.height-this.centerY,a=1,l=1;e.x+a<i?l=(e.x+e.width-i)/e.width:e.x+e.width-a>n&&(l=(n-e.x)/e.width);let c=e.y+a<s||e.y+e.height-a>o,d=l===1?r.length:Math.floor(r.length*l)-1,u=this.bboxIntersectsSurroundingSeries(e);return{textLength:d,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(r,e=0,t=0){let{surroundingRadius:i}=this;if(i==null)return!1;let n=[{x:r.x+e,y:r.y+t},{x:r.x+r.width+e,y:r.y+t},{x:r.x+r.width+e,y:r.y+r.height+t},{x:r.x+e,y:r.y+r.height+t}],s=ni(i,2);return n.some(o=>ni(o.x,2)+ni(o.y,2)>s)}computeCalloutLabelCollisionOffsets(){let{radiusScale:r}=this,{calloutLabel:e,calloutLine:t}=this.properties,{offset:i,minSpacing:n}=e,s=r.convert(0),o=C=>!C.calloutLabel||C.outerRadius===0,a=this.nodeData,l=this.nodeData.filter(C=>!o(C));if(l.forEach(C=>{let S=C.calloutLabel;S!=null&&(S.hidden=!1,S.collisionTextAlign=void 0,S.collisionOffsetY=0)}),l.length<=1)return;let c=l.filter(C=>C.midCos<0).sort((C,S)=>C.midSin-S.midSin),d=l.filter(C=>C.midCos>=0).sort((C,S)=>C.midSin-S.midSin),u=l.filter(C=>{var S;return C.midSin<0&&((S=C.calloutLabel)==null?void 0:S.textAlign)==="center"}).sort((C,S)=>C.midCos-S.midCos),h=l.filter(C=>{var S;return C.midSin>=0&&((S=C.calloutLabel)==null?void 0:S.textAlign)==="center"}).sort((C,S)=>C.midCos-S.midCos),p=new Xt,f=C=>{var S;let b=C.calloutLabel;if(b==null)return new it(0,0,0,0);let T=C.outerRadius+t.length+i,A=C.midCos*T,E=C.midSin*T+b.collisionOffsetY;return p.text=b.text,p.x=A,p.y=E,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:(S=b.collisionTextAlign)!=null?S:b.textAlign,textBaseline:b.textBaseline}),p.computeBBox()},g=(C,S,b)=>{let T=f(C).grow(n/2),A=f(S).grow(n/2);if(T.x<A.x+A.width&&T.x+T.width>A.x&&(b==="to-top"?T.y<A.y+A.height:T.y+T.height>A.y)){let N=b==="to-top"?T.y-A.y-A.height:T.y+T.height-A.y;S.calloutLabel.collisionOffsetY=N}},m=C=>{let S=C.slice().sort((T,A)=>Math.abs(T.midSin)-Math.abs(A.midSin))[0],b=C.indexOf(S);for(let T=b-1;T>=0;T--){let A=C[T+1],E=C[T];g(A,E,"to-top")}for(let T=b+1;T<C.length;T++){let A=C[T-1],E=C[T];g(A,E,"to-bottom")}},v=C=>{let S=l.some(M=>M.calloutLabel.collisionOffsetY!==0),b=C.map(M=>f(M)),T=b.map(M=>M.clone().grow(n/2)),A=!1;for(let M=0;M<T.length&&!A;M++){let k=T[M];for(let W=M+1;W<C.length;W++){let ee=T[W];if(k.collidesBBox(ee)){A=!0;break}}}let E=a.map(M=>{let{startAngle:k,endAngle:W,outerRadius:ee}=M;return{startAngle:k,endAngle:W,innerRadius:s,outerRadius:ee}}),N=b.some(M=>E.some(k=>nN(M,k)));!A&&!S&&!N||C.filter(M=>M.calloutLabel.textAlign==="center").forEach(M=>{let k=M.calloutLabel;M.midCos<0?k.collisionTextAlign="right":M.midCos>0?k.collisionTextAlign="left":k.collisionTextAlign="center"})};m(c),m(d),v(u),v(h)}updateCalloutLabelNodes(r){let{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,n=i.length,{offset:s,color:o}=t,a=new Xt;this.calloutLabelSelection.selectByTag(2).forEach(l=>{var c;let{datum:d}=l,u=d.calloutLabel,h=e.convert(d.radius),p=Math.max(0,h);if(!u?.text||p===0||u.hidden){l.visible=!1;return}let f=p+n+s,g=d.midCos*f,m=d.midSin*f+u.collisionOffsetY,v={textAlign:(c=u.collisionTextAlign)!=null?c:u.textAlign,textBaseline:u.textBaseline};a.text=u.text,a.x=g,a.y=m,a.setFont(this.properties.calloutLabel),a.setAlign(v);let C=a.computeBBox(),S=u.text,b=!0;if(t.avoidCollisions){let{textLength:T,hasVerticalOverflow:A}=this.getLabelOverflow(u.text,C,r);S=u.text.length===T?u.text:`${u.text.substring(0,T)}\u2026`,b=!A}l.text=S,l.x=g,l.y=m,l.setFont(this.properties.calloutLabel),l.setAlign(v),l.fill=o,l.visible=b})}computeLabelsBBox(r,e){return ne(this,null,function*(){let{calloutLabel:t,calloutLine:i}=this.properties,n=i.length,{offset:s,maxCollisionOffset:o,minSpacing:a}=t;if(!t.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let l=[],c=new Xt,d,{title:u}=this.properties;if(u?.text&&u.enabled){let h=this.getTitleTranslationY();isFinite(h)&&(c.text=u.text,c.x=0,c.y=h,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),d=c.computeBBox(),l.push(d))}return this.nodeData.forEach(h=>{var p;let f=h.calloutLabel;if(!f||h.outerRadius===0)return null;let g=h.outerRadius+n+s,m=h.midCos*g,v=h.midSin*g+f.collisionOffsetY;c.text=f.text,c.x=m,c.y=v,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:(p=f.collisionTextAlign)!=null?p:f.textAlign,textBaseline:f.textBaseline});let C=c.computeBBox();if(f.box=C,Math.abs(f.collisionOffsetY)>o){f.hidden=!0;return}if(d){let S=e.y-this.centerY,b=new it(d.x-a,S,d.width+2*a,d.y+d.height+a-S);if(C.collidesBBox(b)){f.hidden=!0;return}}if(r.hideWhenNecessary){let{textLength:S,hasVerticalOverflow:b,hasSurroundingSeriesOverflow:T}=this.getLabelOverflow(f.text,C,e),A=f.text.length>2&&S<2;if(b||A||T){f.hidden=!0;return}}f.hidden=!1,l.push(C)}),l.length===0?null:it.merge(l)})}updateSectorLabelNodes(){let{radiusScale:r}=this,e=r.convert(0),{fontSize:t,fontStyle:i,fontWeight:n,fontFamily:s,positionOffset:o,positionRatio:a,color:l}=this.properties.sectorLabel,c=e>0,d=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each((u,h)=>{let{sectorLabel:p,outerRadius:f}=h,g=!1;if(p&&f!==0){let m=e*(1-a)+f*a+o;u.fill=l,u.fontStyle=i,u.fontWeight=n,u.fontSize=t,u.fontFamily=s,u.text=p.text,!c&&d?(u.x=0,u.y=0):(u.x=h.midCos*m,u.y=h.midSin*m),u.textAlign="center",u.textBaseline="middle";let C=u.computeBBox(),S=[[C.x,C.y],[C.x+C.width,C.y],[C.x+C.width,C.y+C.height],[C.x,C.y+C.height]],{startAngle:b,endAngle:T}=h,A={startAngle:b,endAngle:T,innerRadius:e,outerRadius:f};S.every(([E,N])=>KR(E,N,A))&&(g=!0)}u.visible=g})}updateInnerLabelNodes(){let r=[],e=[];this.innerLabelsSelection.each((d,u)=>{let{fontStyle:h,fontWeight:p,fontSize:f,fontFamily:g,color:m}=u;d.fontStyle=h,d.fontWeight=p,d.fontSize=f,d.fontFamily=g,d.text=u.text,d.x=0,d.y=0,d.fill=m,d.textAlign="center",d.textBaseline="alphabetic",r.push(d.computeBBox()),e.push(u.margin)});let t=d=>d===0?0:e[d],i=d=>d===e.length-1?0:e[d],n=r.reduce((d,u,h)=>d+u.height+t(h)+i(h),0),s=Math.max(...r.map(d=>d.width)),o=this.getInnerRadius(),l=Math.sqrt(Math.pow(s/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),c=[];for(let d=0,u=-n/2;d<r.length;d++){let p=r[d].height+u+t(d);c.push(p),u=p+i(d)}this.innerLabelsSelection.each((d,u,h)=>{d.y=c[h],d.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(r){let{angleKey:e,calloutLabelKey:t,sectorLabelKey:i,legendItemKey:n}=this.properties,{sectorLabel:s,calloutLabel:o,legendItem:a}=r;if(n&&a!==void 0)return a.text;if(t&&t!==e&&o?.text!==void 0)return o.text;if(i&&i!==e&&s?.text!==void 0)return s.text}getTooltipHtml(r){var e;if(!this.properties.isValid())return"";let{datum:t,angleValue:i,sectorFormat:{fill:n}}=r,s=si((e=this.properties.title)==null?void 0:e.text),o=Fn(i)?Gw(i):String(i),a=this.getDatumLegendName(r);return this.properties.tooltip.toTooltipHtml({title:s??a,content:s&&a?`${a}: ${o}`:o,backgroundColor:n},{datum:t,title:s,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(r){var e,t,i,n,s;let{processedData:o,dataModel:a}=this;if(!a||!o?.data.length||r!=="category")return[];let{angleKey:l,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u}=this.properties;if(!u&&(!c||c===l)&&(!d||d===l))return[];let{calloutLabelIdx:h,sectorLabelIdx:p,legendItemIdx:f}=this.getProcessedDataIndexes(a),g=((e=this.properties.title)==null?void 0:e.showInLegend)&&this.properties.title.text,m=[];for(let v=0;v<o.data.length;v++){let{datum:C,values:S}=o.data[v],b=[];g&&b.push(g);let T=this.getLabels(C,2*Math.PI,2*Math.PI,!1,S[h],S[p],S[f]);if(u&&T.legendItem!==void 0?b.push(T.legendItem.text):c&&c!==l&&((t=T.calloutLabel)==null?void 0:t.text)!==void 0?b.push((i=T.calloutLabel)==null?void 0:i.text):d&&d!==l&&((n=T.sectorLabel)==null?void 0:n.text)!==void 0&&b.push((s=T.sectorLabel)==null?void 0:s.text),b.length===0)continue;let A=this.getSectorFormat(C,v,!1);m.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:this.seriesItemEnabled[v],label:{text:b.join(" - ")},marker:{fill:A.fill,stroke:A.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}})}return m}onLegendItemClick(r){let{enabled:e,itemId:t,series:i}=r;i.id===this.id?this.toggleSeriesItem(t,e):i.type==="pie"&&this.toggleOtherSeriesItems(i,t,e)}toggleSeriesItem(r,e){this.seriesItemEnabled[r]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(r,e,t){var i,n;if(!this.properties.legendItemKey||!this.dataModel)return;let s=r.properties.legendItemKey&&((i=r.data)==null?void 0:i.find((a,l)=>l===e)[r.properties.legendItemKey]);if(!s)return;let o=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;(n=this.processedData)==null||n.data.forEach(({values:a},l)=>{a[o]===s&&this.toggleSeriesItem(l,t)})}animateEmptyUpdateReady(r){let{animationManager:e}=this.ctx,t=$S(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Ti(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],t.nodes),Ti(this.id,"innerCircle",e,[this.innerCircleSelection],t.innerCircle),Si(this,"callout",e,[this.calloutLabelSelection]),Si(this,"sector",e,[this.sectorLabelSelection]),Si(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var r,e,t,i,n,s;let{itemSelection:o,highlightSelection:a,processedData:l,radiusScale:c,previousRadiusScale:d}=this,{animationManager:u}=this.ctx,h=(r=l?.reduced)==null?void 0:r.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let p=((e=h?.moved.length)!=null?e:0)===0&&h?.addedIndices.every(v=>!h.removedIndices.includes(v)),f=((t=l?.defs.keys.length)!=null?t:0)>0,g=(s=(n=(i=l?.reduced)==null?void 0:i.animationValidation)==null?void 0:n.uniqueKeys)!=null?s:!0;(!p||!f||!g)&&this.ctx.animationManager.skipCurrentBatch();let m=$S(!1,this.properties.rotation,c,d);Ti(this.id,"nodes",u,[o,a],m.nodes,(v,C)=>this.getDatumId(C),h),Ti(this.id,"innerCircle",u,[this.innerCircleSelection],m.innerCircle),Si(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Si(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Si(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:r,highlightSelection:e,radiusScale:t,previousRadiusScale:i}=this,{animationManager:n}=this.ctx,s=$S(!1,this.properties.rotation,t,i);Ti(this.id,"nodes",n,[r,e],s.nodes),Ti(this.id,"innerCircle",n,[this.innerCircleSelection],s.innerCircle),Vv(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Vv(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Vv(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(r){var e,t,i;let{calloutLabelKey:n,sectorLabelKey:s,legendItemKey:o}=this.properties;if((i=(t=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:t.animationValidation)!=null&&i.uniqueKeys){if(o)return r[o];if(n)return r[n];if(s)return r[s]}}getDatumId(r){var e;let{index:t}=r;return(e=this.getDatumIdFromData(r.datum))!=null?e:`${t}`}onDataChange(){this.processSeriesItemEnabled()}};kC.className="PieSeries";kC.type="pie";var zG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:kC,seriesDefaults:{},themeTemplate:{__extends__:yl,title:{enabled:!0,fontStyle:void 0,fontWeight:bp.NORMAL,fontSize:14,fontFamily:Xi,color:gp,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Xi,color:Or,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:bp.NORMAL,fontSize:12,fontFamily:Xi,color:kp,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:Gp,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Xi,color:Or,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:Rm},paletteFactory:({takeColors:r,colorsCount:e,userPalette:t})=>{let{fills:i,strokes:n}=r(e);return{fills:i,strokes:t?n:[],calloutLine:{colors:n}}}};function jG(){ua(fD),ua(Jk),ua(AG),ua(PG),ua(LG),ua(BG),ua(HG),ua(zG),ua(kG)}var KG={};ul(KG,{ADD_PHASE:()=>VR,AGG_VALUES_EXTENT:()=>Ck,AND:()=>Bs,ARRAY:()=>Nm,ARRAY_OF:()=>fl,AbstractBarSeries:()=>ND,AbstractBarSeriesProperties:()=>Ib,ActionOnSet:()=>qr,Animation:()=>WR,AnimationManager:()=>MA,AreaSeriesTag:()=>ID,Axis:()=>lb,AxisLabel:()=>Vi,AxisTick:()=>wo,BOOLEAN:()=>Ze,BOOLEAN_ARRAY:()=>xL,Background:()=>PC,BackgroundModule:()=>fD,BaseModuleInstance:()=>Pw,BaseProperties:()=>Yr,COLOR_STRING:()=>yt,COLOR_STRING_ARRAY:()=>gl,CartesianAxis:()=>Bu,CartesianSeries:()=>kc,CartesianSeriesNodeClickEvent:()=>pb,CartesianSeriesProperties:()=>Nc,CategoryAxis:()=>dl,ChartAxisDirection:()=>CR,ChartEventManager:()=>LA,ChartUpdateType:()=>Tm,CursorManager:()=>NA,DATE:()=>Ww,DATE_ARRAY:()=>SL,DATE_OR_DATETIME_MS:()=>Uw,DEGREE:()=>_p,DIRECTION:()=>gR,DataController:()=>IA,DataModel:()=>PA,Default:()=>vl,Deprecated:()=>dL,DeprecatedAndRenamedTo:()=>uL,FONT_STYLE:()=>Oc,FONT_WEIGHT:()=>Fc,FROM_TO_MIXINS:()=>$r,FUNCTION:()=>wa,GREATER_THAN:()=>ku,HierarchyNode:()=>Wv,HierarchySeries:()=>YG,HierarchySeriesProperties:()=>Vc,HighlightManager:()=>kA,HighlightStyle:()=>Km,INITIAL_LOAD:()=>kR,INTERACTION_RANGE:()=>jw,InteractionManager:()=>GA,LABEL_PHASE:()=>Vm,LESS_THAN:()=>km,LINE_CAP:()=>pR,LINE_DASH:()=>Dc,LINE_JOIN:()=>wL,Layers:()=>IR,LayoutService:()=>VA,MATCHING_CROSSLINE_TYPE:()=>nb,MAX_SPACING:()=>_L,MIN_SPACING:()=>vR,MODULE_CONFLICTS:()=>Iw,Motion:()=>Xw,NAN:()=>Ep,NODE_UPDATE_PHASES:()=>UR,NUMBER:()=>ei,NUMBER_ARRAY:()=>xC,NUMBER_OR_NAN:()=>Tp,OBJECT:()=>vt,OBJECT_ARRAY:()=>hR,OR:()=>pl,OVERFLOW_STRATEGY:()=>EL,PLACEMENT:()=>mR,POLAR_AXIS_SHAPE:()=>qD,POSITION:()=>zw,POSITIVE_NUMBER:()=>ge,PolarAxis:()=>vp,PolarSeries:()=>zb,PropertiesArray:()=>CC,ProxyOnWrite:()=>GL,ProxyProperty:()=>kL,ProxyPropertyOnWrite:()=>qt,QUICK_TRANSITION:()=>qw,RATIO:()=>ri,REGISTERED_MODULES:()=>ma,REMOVE_PHASE:()=>GR,RepeatType:()=>HR,SMALLEST_KEY_INTERVAL:()=>Cw,SORT_DOMAIN_GROUPS:()=>YA,STRING:()=>Se,STRING_ARRAY:()=>uR,Series:()=>Ip,SeriesItemHighlightStyle:()=>Cl,SeriesMarker:()=>kn,SeriesNodeClickEvent:()=>OC,SeriesNodePickMode:()=>qA,SeriesProperties:()=>Aa,SeriesTooltip:()=>Cs,StateMachine:()=>Hm,TEXT_ALIGN:()=>fR,TEXT_WRAP:()=>SC,Tags:()=>wA,TooltipManager:()=>pw,UNION:()=>Di,UPDATE_PHASE:()=>BR,UpdateService:()=>tD,VERTICAL_ALIGN:()=>bL,Validate:()=>_,ZoomManager:()=>BA,__FORCE_MODULE_DETECTION:()=>XG,accumulateGroup:()=>XA,accumulatedValue:()=>KA,accumulativeValueProperty:()=>eD,adjustLabelPlacement:()=>WD,animationValidation:()=>jm,area:()=>vw,arraysEqual:()=>dm,assignJsonApplyConstructedArray:()=>OR,average:()=>vk,backfillPathPointData:()=>Rb,buildResetPathFn:()=>Ob,checkCrisp:()=>VD,clamp:()=>us,clampArray:()=>iC,collapsedStartingBarPosition:()=>Fm,count:()=>mk,countFractionDigits:()=>Vw,createDatumId:()=>wp,createDeprecationWarning:()=>Mw,deconstructSelectionsOrNodes:()=>bC,deepMerge:()=>cs,determinePathStatus:()=>FD,diff:()=>Pp,enterpriseModule:()=>Qv,extent:()=>Sa,extractDecoratedProperties:()=>lL,fixNumericExtent:()=>ln,fromToMotion:()=>Ti,getRectConfig:()=>BD,groupAccumulativeValueProperty:()=>bc,groupAverage:()=>jA,groupCount:()=>mw,groupSum:()=>UA,hasRegisteredEnterpriseModules:()=>gC,injectStyle:()=>$w,invertShapeDirection:()=>$G,isArray:()=>ps,isBoolean:()=>aR,isDate:()=>Lw,isDecoratedObject:()=>mC,isDefined:()=>vm,isEqual:()=>rC,isFiniteNumber:()=>Mm,isFunction:()=>vC,isHtmlElement:()=>lR,isNegative:()=>Lm,isNumber:()=>va,isObject:()=>Ou,isObjectLike:()=>mL,isPlainObject:()=>Cp,isProperties:()=>Ls,isReal:()=>yC,isString:()=>up,isValidDate:()=>Nw,keyProperty:()=>Pn,listDecoratedProperties:()=>dp,markerFadeInAnimation:()=>xG,markerPaletteFactory:()=>$m,markerScaleInAnimation:()=>Eb,markerSwipeScaleInAnimation:()=>_b,mergeDefaults:()=>Mn,midpointStartingBarPosition:()=>DG,minMax:()=>bw,mod:()=>Bw,normaliseGroupTo:()=>dC,normalisePropertyTo:()=>yw,normalisedExtent:()=>sR,normalisedExtentWithMetadata:()=>Im,pairCategoryData:()=>Om,pairContinuousData:()=>Dm,partialAssign:()=>fk,pathFadeInAnimation:()=>DD,pathFadeOutAnimation:()=>SG,pathSwipeInAnimation:()=>Db,predicateWithMessage:()=>Gt,prepareAreaPathAnimation:()=>MD,prepareAxisAnimationContext:()=>uw,prepareAxisAnimationFunctions:()=>vA,prepareBarAnimationFunctions:()=>Pm,prepareLinePathAnimation:()=>PD,prepareLinePathAnimationFns:()=>Fb,prepareMarkerAnimation:()=>Tb,range:()=>zA,rangedValueProperty:()=>QA,registerModule:()=>ua,registerModuleConflicts:()=>nR,renderPartialPath:()=>Ab,resetAxisGroupFn:()=>CA,resetAxisLabelSelectionFn:()=>xA,resetAxisLineSelectionFn:()=>SA,resetAxisSelectionFn:()=>yA,resetBarSelectionsFn:()=>Mb,resetIds:()=>yR,resetLabelFn:()=>Bc,resetMarkerFn:()=>Ym,resetMarkerPositionFn:()=>Am,resetMotion:()=>qi,round:()=>kw,seriesLabelFadeInAnimation:()=>Si,seriesLabelFadeOutAnimation:()=>Vv,singleSeriesPaletteFactory:()=>yb,staticFromToMotion:()=>ml,stringify:()=>hm,sum:()=>gk,toArray:()=>Jv,toFixed:()=>Gw,toReal:()=>nC,trailingAccumulatedValue:()=>$A,trailingAccumulatedValueProperty:()=>Ek,trailingValue:()=>JA,trailingValueProperty:()=>bk,unique:()=>nL,updateClipPath:()=>pC,updateLabelNode:()=>HD,updateRect:()=>GD,validateCrossLineValues:()=>dA,valueProperty:()=>oi});function $G(...r){for(let e of r)if(e instanceof Zr){let{x:t,y:i,width:n,height:s}=e;e.setProperties({x:i,y:t,width:s,height:n})}else if(e instanceof mr){let{x1:t,y1:i,x2:n,y2:s}=e;e.setProperties({x1:i,y1:t,x2:s,y2:n})}}var XD=class Hv{constructor(e,t,i,n,s,o,a,l,c,d,u){this.series=e,this.index=t,this.datum=i,this.size=n,this.colorValue=s,this.fill=o,this.stroke=a,this.sumSize=l,this.depth=c,this.parent=d,this.children=u,this.midPoint={x:0,y:0}}contains(e){let t=e;for(;t!=null&&t.index>=this.index;){if(t===this)return!0;t=t.parent}return!1}walk(e,t=Hv.Walk.PreOrder){t===Hv.Walk.PreOrder&&e(this),this.children.forEach(i=>{i.walk(e,t)}),t===Hv.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(let e of this.children)yield*KE(pM(e))}};XD.Walk={PreOrder:0,PostOrder:1};var Wv=XD,YG=class extends Ip{constructor(r){super({moduleCtx:r,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new Wv(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new Hm("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)}},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e)},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)}},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)}}},()=>this.checkProcessedDataAnimatable())}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){return ne(this,null,function*(){var r,e;let{childrenKey:t,sizeKey:i,colorKey:n,fills:s,strokes:o,colorRange:a}=this.properties,l=0,c=()=>(l+=1,l),d=0,u=1/0,h=-1/0,p=new Array(((e=(r=this.data)==null?void 0:r.length)!=null?e:0)+1).fill(void 0),f=(S,b)=>{let T=c(),A=b.depth!=null?b.depth+1:0,E=t!=null?S[t]:void 0,N=E==null||E.length===0,M=i!=null?S[i]:void 0;Number.isFinite(M)?M=Math.max(M,0):M=N?1:0;let k=M;d=Math.max(d,A);let W=n!=null?S[n]:void 0;return typeof W=="number"&&(p[T]=W,u=Math.min(u,W),h=Math.max(h,W)),g(new Wv(this,T,S,M,W,void 0,void 0,k,A,b,[]),E)},g=(S,b)=>(b?.forEach(T=>{let A=f(T,S);S.children.push(A),S.sumSize+=A.sumSize}),S),m=g(new Wv(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),v=[u,h],C;a!=null&&Number.isFinite(u)&&Number.isFinite(h)&&(C=new Gu,C.domain=v,C.range=a,C.update()),m.children.forEach((S,b)=>{S.walk(T=>{let A,E=p[T.index];E!=null&&(A=C?.convert(E)),A??(A=s?.[b%s.length]),T.fill=A,T.stroke=C==null?o?.[b%o.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=m,this.maxDepth=d,this.colorDomain=v})}update(r){return ne(this,arguments,function*({seriesRect:e}){yield this.updateSelections(),yield this.updateNodes();let t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)})}resetAllAnimation(r){var e;let t=(e=this.animationResetFns)==null?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),t!=null&&qi(r.datumSelections,t)}animateEmptyUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateWaitingUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateReadyHighlight(r){var e;let t=(e=this.animationResetFns)==null?void 0:e.datum;t!=null&&qi([r],t)}animateReadyResize(r){this.resetAllAnimation(r)}animateClearingUpdateEmpty(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(r){let{colorKey:e,colorName:t,colorRange:i,visible:n}=this.properties;return r==="gradient"&&e!=null&&i!=null?[{legendType:"gradient",enabled:n,seriesId:this.id,colorName:t,colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(r){return`${r.index}`}getDatumId(r){return this.getDatumIdFromData(r)}},Vc=class extends Aa{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(al),this.strokes=Object.values(mp)}};x([_(Se)],Vc.prototype,"childrenKey",2);x([_(Se,{optional:!0})],Vc.prototype,"sizeKey",2);x([_(Se,{optional:!0})],Vc.prototype,"colorKey",2);x([_(Se,{optional:!0})],Vc.prototype,"colorName",2);x([_(gl)],Vc.prototype,"fills",2);x([_(gl)],Vc.prototype,"strokes",2);x([_(gl,{optional:!0})],Vc.prototype,"colorRange",2);var qD=Di(["polygon","circle"],"a polar axis shape"),vp=class extends lb{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(r,e){return null}};x([_(qD)],vp.prototype,"shape",2);x([_(ri)],vp.prototype,"innerRadiusRatio",2);var XG=0,ZD={},QD={},Ew={},JD={},eO={},tO=new Set,iO=new Set,rO=new Set,nO=new Set,_w={},sO={};function qG(r,e,t,i,n,s,o,a,l,c,d,u,h){ZD[r]=t,QD[r]=i,oO(r,n,s),o&&JG(r,o),a&&r3(r),l&&n3(r),c&&i3(r),d&&s3(r),u&&o3(r,u),h&&a3(r,h),hG(r,e)}function oO(r,e,t={}){let i=Ew[r];Ew[r]=Ai([i,e]),JD[r]=Ai([i,e,t])}function ZG(r,e){let t=ZD[r];if(t)return new t(e);throw new Error(`AG Charts - unknown series type: ${r}`)}function WT(r){return QD[r]}function QG(r){return gC()?JD[r]:Ew[r]}function JG(r,e){eO[r]=e}function e3(r){return eO[r]}function Uv(r){return tO.has(r)}function Tw(r){return iO.has(r)}function Rw(r){return rO.has(r)}function t3(r){return nO.has(r)}function i3(r){rO.add(r)}function r3(r){tO.add(r)}function n3(r){iO.add(r)}function s3(r){nO.add(r)}function o3(r,e){_w[r]=e}function a3(r,e){sO[r]=e}function l3(r){var e,t;let i;for(let n of(e=r.series)!=null?e:[]){let{type:s="line"}=n,o=(t=_w[s])==null?void 0:t.call(_w,n);if(o!=null){if(i!=null&&i!=o)throw new Error("AG Charts - The provided series have incompatible directions");i=o}}return i}function c3(r,e){var t;let i=e;for(let n of(t=r.series)!=null?t:[]){let{type:s}=n,o=s!=null?sO[s]:void 0;o!==void 0&&(i=H(H({},i),o(n)))}return i}function d3(){var r;for(let e of ma){if(e.packageType==="enterprise"&&!jk(e)&&be.errorOnce("Unexpected enterprise module registered: "+e.identifier),xm.constructors!=null&&e.optionConstructors!=null&&Object.assign(xm.constructors,e.optionConstructors),e.type==="root"&&e.themeTemplate)for(let t of e.chartTypes)pG(t,e.themeTemplate);if(e.type==="root"&&((r=e.conflicts)!=null&&r.length)&&nR(e.optionsKey,e.conflicts),e.type==="series"){if(e.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+e.identifier);qG(e.identifier,e.chartTypes[0],e.instanceConstructor,e.seriesDefaults,e.themeTemplate,e.enterpriseThemeTemplate,e.paletteFactory,e.solo,e.stackable,e.groupable,e.stackedByDefault,e.swapDefaultAxesCondition,e.customDefaultsFunction)}if(e.type==="series-option"&&e.themeTemplate)for(let t of e.seriesTypes)oO(t,e.themeTemplate);if(e.type==="axis-option"&&e.themeTemplate)for(let t of e.axisTypes){let i=e.themeTemplate[t],n=H(H({},e.themeTemplate),typeof i=="object"?i:{});for(let s of e.axisTypes)delete n[s];FT(t,n)}e.type==="axis"&&(Gk(e.identifier,e.instanceConstructor),e.themeTemplate&&FT(e.identifier,e.themeTemplate)),e.type==="legend"&&Yk(e.identifier,e.optionsKey,e.instanceConstructor,e.themeTemplate)}if(gC()){let e=Kk();e.length>0&&be.errorOnce("Enterprise modules expected but not registered: ",e)}}var jb=class aO extends vs{constructor(e,t){super(e,t),this._data={}}performLayout(){return ne(this,null,function*(){let e=yield hl(aO.prototype,this,"performLayout").call(this),{seriesArea:{padding:t},seriesRoot:i}=this,n=e.clone();return e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,i.translationX=Math.floor(e.x),i.translationY=Math.floor(e.y),yield Promise.all(this.series.map(s=>ne(this,null,function*(){yield s.update({seriesRect:e})}))),i.visible=this.series[0].visible,i.setClipRectInGroupCoordinateSpace(new it(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:e,visible:!0},axes:[]}),e})}};jb.className="HierarchyChart";jb.type="hierarchy";var lO=jb;function u3(r){var e,t,i,n;let s=[],o=fG(Vu(r));for(let{type:a,chartTypes:l,optionsKey:c,optionsInnerKey:d,identifier:u}of Mp)if(!(o!=="unknown"&&!l.includes(o))){if(a==="root"||a==="legend"){let h=r[c];if(h==null)continue;d?h[d]&&(s.push(`${c}.${d}`),delete h[d]):(s.push(c),delete r[c])}else if(a==="axis"){if(!("axes"in r)||!((e=r.axes)!=null&&e.some(h=>h.type===u)))continue;s.push(`axis[type=${u}]`),r.axes=r.axes.filter(h=>h.type!==u)}else if(a==="axis-option"){if(!("axes"in r)||!((t=r.axes)!=null&&t.some(h=>h[c])))continue;s.push(`axis.${c}`),r.axes.forEach(h=>{h[c]&&delete h[c]})}else if(a==="series"){if(!((i=r.series)!=null&&i.some(h=>h.type===u)))continue;s.push(`series[type=${u}]`),r.series=r.series.filter(h=>h.type!==u)}else if(a==="series-option"){if(!((n=r.series)!=null&&n.some(h=>h[c])))continue;s.push(`series.${c}`),r.series.forEach(h=>{h[c]&&delete h[c]})}}s.length>0&&be.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:","",...s,"","See: https://charts.ag-grid.com/javascript/installation/"].join(`
`))}var YS="white",h3={fills:Array.from(Object.values(al)),strokes:Array.from(Object.values(mp))},Aw={get cartesian(){return{seriesTypes:ks.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:ks.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:ks.hierarchyTypes,commonOptions:[]}}},p3=Object.values(Aw).reduce((r,{commonOptions:e})=>[...r,...e],[]);function cO(r,e){var t,i;return r==null?null:{fills:(t=r.fills)!=null?t:e.fills,strokes:(i=r.strokes)!=null?i:e.strokes}}var Ms=class xi{getPalette(){return h3}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:bp.NORMAL,fontSize:Sc.MEDIUM,fontFamily:Xi,color:Or},label:{fontStyle:void 0,fontWeight:void 0,fontSize:Sc.SMALL,fontFamily:Xi,padding:5,rotation:void 0,color:Or,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:Bv},tick:{enabled:!1,width:1,color:Bv},gridLine:{enabled:!0,style:[{stroke:hC,lineDash:[]}]},crossLines:{enabled:!1,fill:fm,stroke:fm,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:Sc.SMALL,fontFamily:Xi,padding:5,color:Or}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:Rm},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:bp.NORMAL,fontSize:Sc.LARGE,fontFamily:Xi,color:Or,wrapping:xi.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Sc.MEDIUM,fontFamily:Xi,color:gp,wrapping:xi.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Sc.MEDIUM,fontFamily:Xi,color:"rgb(140, 140, 140)",wrapping:xi.getCaptionWrappingDefaults()},legend:{position:xb,spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:xi.getLegendItemMarkerDefaults(),label:{color:Or,fontStyle:void 0,fontWeight:void 0,fontSize:Sc.SMALL,fontFamily:Xi,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Or},inactiveStyle:{fill:gp},highlightStyle:{fill:Or},label:{color:Or}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(e){var t;e=cs({},e??{});let{overrides:i=null,palette:n=null}=e,s=this.createChartConfigPerChartType(this.getDefaults());if(i){let{common:a}=i,l=(c,d)=>{if(d)for(let u of c){let h=u;s[h]=cs(s[h],d)}};for(let[,{seriesTypes:c,commonOptions:d}]of Object.entries(Aw)){let u=H({},a);for(let h of p3)d.includes(h)||delete u[h];l(c,u)}ks.seriesTypes.forEach(c=>{let d=c;i[d]&&(s[d]=cs(s[d],i[d]))})}let o=this.getPalette();this.palette=(t=cO(n,o))!=null?t:o,this.config=Object.freeze(this.templateTheme(s))}createChartConfigPerChartType(e){return Object.entries(Aw).forEach(([t,{seriesTypes:i}])=>{let n=IT(t);i.forEach(s=>{let o=s;e[o]||(e[o]={},cs(e[o],n))})}),e}getDefaults(){let e={},t=n=>H(H(H({},Xk()),xi.getChartDefaults()),IT(n)),i=(n,s)=>{var o,a,l,c;let d=t(n),u={};for(let h of s){(o=u[h])!=null||(u[h]=cs({},d));let p=(l=(a=u[h]).axes)!=null?l:a.axes={},f=QG(h);f&&(u[h].series=cs(u[h].series,f));for(let g of gb.axesTypes){let m=Vk(g);n==="cartesian"&&(p[g]=cs(p[g],(c=xi.cartesianAxisDefault[g])!=null?c:{})),m&&(p[g]=cs(p[g],m))}}return u};return e=cs(e,i("cartesian",ks.cartesianTypes)),e=cs(e,i("polar",ks.polarTypes)),e=cs(e,i("hierarchy",ks.hierarchyTypes)),e}templateTheme(e){let t=Cm(e),{extensions:i,properties:n}=this.getTemplateParameters();return Fu(t,s=>{if(s.__extends__){let o=s.__extends__,a=i.get(o);if(a==null)throw new Error(`AG Charts - no template variable provided for: ${o}`);Object.keys(a).forEach(l=>{l in s||(s[l]=a[l])}),delete s.__extends__}if(s.__overrides__){let o=s.__overrides__,a=i.get(o);if(a==null)throw new Error(`AG Charts - no template variable provided for: ${o}`);Object.assign(s,a),delete s.__overrides__}if(Array.isArray(s))for(let o=0;o<s.length;o++){let a=s[o];n.has(a)&&(s[o]=n.get(a))}else for(let[o,a]of Object.entries(s))n.has(a)&&(s[o]=n.get(a))}),t}static getWaterfallSeriesDefaultPositiveColors(){return{fill:al.BLUE,stroke:mp.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:al.ORANGE,stroke:mp.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:al.GRAY,stroke:mp.GRAY}}getTemplateParameters(){let e=new Map;e.set(mD,xi.getChartDefaults()),e.set(xD,xi.getAxisDefaults()),e.set(vD,xi.getChartDefaults().legend),e.set(CD,xi.getChartDefaults().legend.item),e.set(yD,xi.getLegendItemMarkerDefaults()),e.set(SD,xi.getAxisDefaults().label),e.set(wD,xi.getAxisDefaults().line),e.set(bD,xi.getAxisDefaults().tick),e.set(ED,xi.getAxisDefaults().gridLine),e.set(yl,xi.getSeriesDefaults()),e.set(_D,{}),e.set(Np,xi.getCartesianSeriesMarkerDefaults());let t=new Map;return t.set(Xi,"Verdana, sans-serif"),t.set(Or,"rgb(70, 70, 70)"),t.set(TD,"white"),t.set(gp,"rgb(140, 140, 140)"),t.set(hC,"rgb(224,234,241)"),t.set(Bv,"rgb(195, 195, 195)"),t.set(fm,"rgb(70, 70, 70)"),t.set(kp,YS),t.set(Rm,YS),t.set(Gp,"rgba(0, 0, 0, 0.5)"),t.set(Ao,[al.ORANGE,al.YELLOW,al.GREEN]),t.set(wb,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),t.set(bb,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),t.set(Sb,YS),t.set(Eo,xi.getWaterfallSeriesDefaultPositiveColors()),t.set(_o,xi.getWaterfallSeriesDefaultNegativeColors()),t.set(To,xi.getWaterfallSeriesDefaultTotalColors()),t.set(Ro,xi.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:e,properties:t}}};Ms.cartesianAxisDefault={number:me(H({},Ms.getAxisDefaults()),{line:me(H({},Ms.getAxisDefaults().line),{enabled:!1})}),log:me(H({},Ms.getAxisDefaults()),{base:10,line:me(H({},Ms.getAxisDefaults().line),{enabled:!1})}),category:me(H({},Ms.getAxisDefaults()),{groupPaddingInner:.1,label:me(H({},Ms.getAxisDefaults().label),{autoRotate:!0}),gridLine:me(H({},Ms.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":H({},Ms.getAxisDefaults()),time:me(H({},Ms.getAxisDefaults()),{gridLine:me(H({},Ms.getAxisDefaults().gridLine),{enabled:!1})})};var xl=Ms;function f3(r){var e,t,i;let n={},s={},o="default-ag-charts-group",a=[];for(let l of r){let c=(e=l.type)!=null?e:"line",d=Tw(c),u=Rw(c);if(!d&&!u){a.push({type:"ungrouped",opts:[l]});continue}let{stacked:h,stackGroup:p,grouped:f=void 0,xKey:g}=l,m=p!=null||h===!0,v=f===!0,C=[p??(h===!0?"stacked":void 0),v?"grouped":void 0].filter(b=>b!=null).join("-");C||(C=o);let S=`${c}-${g}-${C}`;if(m&&d){let b=(t=s[S])!=null?t:s[S]={type:"stack",opts:[]};b.opts.length===0&&a.push(b),b.opts.push(l)}else if(v&&u){let b=(i=n[S])!=null?i:n[S]={type:"group",opts:[]};b.opts.length===0&&a.push(b),b.opts.push(l)}else a.push({type:"ungrouped",opts:[l]})}return a}function g3(r,e){var t;let i=[],n=e.map(c=>{var d;let u=(d=c.type)!=null?d:"line",h=Rw(u),p=Tw(u),f=t3(u);if(c.grouped&&!h&&be.warnOnce(`unsupported grouping of series type: ${u}`),c.stacked&&!p&&be.warnOnce(`unsupported stacking of series type: ${u}`),!h&&!p)return c;let g=!1,m=!1;return c.stacked===void 0&&c.grouped===void 0?(g=p&&f,m=h&&!g):c.stacked===void 0?(g=p&&f&&!(c.grouped&&h),m=h&&!g&&!!c.grouped):c.grouped===void 0?(g=p&&c.stacked,m=h&&!g):(g=p&&c.stacked,m=h&&!g&&c.grouped),me(H({},c),{stacked:g,grouped:m})}),s=f3(n),o=s.reduce((c,d)=>{var u,h;if(d.type==="ungrouped")return c;let p=(u=d.opts[0].type)!=null?u:"line";return(h=c[p])!=null||(c[p]=0),c[p]+=d.type==="stack"?1:d.opts.length,c},{}),a={},l=c=>{var d,u;let h=0,p=(d=c.opts[0].type)!=null?d:"line";if((u=a[p])!=null||(a[p]=0),c.type==="stack"){for(let f of c.opts)f.seriesGrouping={groupIndex:a[p],groupCount:o[p],stackIndex:h++,stackCount:c.opts.length};a[p]++}else if(c.type==="group")for(let f of c.opts)f.seriesGrouping={groupIndex:a[p],groupCount:o[p],stackIndex:0,stackCount:0},a[p]++;else for(let f of c.opts)f.seriesGrouping=void 0;return c.opts};_i.create(!0,"opts")("processSeriesOptions() - series grouping: ",s);for(let c of s){let d=(t=c.opts[0].type)!=null?t:"line";Rw(d)||Tw(d)?i.push(...l(c)):i.push(...c.opts)}return i}var XS="#192232",yu={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},zv={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},m3={fills:Array.from(Object.values(yu)),strokes:Array.from(Object.values(zv))},Xm=class Qg extends xl{static getWaterfallSeriesDefaultPositiveColors(){return{fill:yu.BLUE,stroke:zv.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:yu.ORANGE,stroke:zv.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:yu.GRAY,stroke:zv.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,Qg.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,Qg.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,Qg.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ro,Qg.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(Sb,XS),e.properties.set(Or,"white"),e.properties.set(gp,"#7D91A0"),e.properties.set(hC,"#545A6E"),e.properties.set(fm,"white"),e.properties.set(Ao,[yu.ORANGE,yu.YELLOW,yu.GREEN]),e.properties.set(wb,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(bb,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(Rm,XS),e.properties.set(kp,XS),e}getPalette(){return m3}constructor(e){super(e)}},xu={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},jv={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},v3={fills:Array.from(Object.values(xu)),strokes:Array.from(Object.values(jv))},C3=class Jg extends Xm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:xu.BLUE,stroke:jv.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:xu.RED,stroke:jv.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:xu.GRAY,stroke:jv.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,Jg.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,Jg.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,Jg.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[xu.ORANGE,xu.YELLOW,xu.GREEN]),e.properties.set(Ro,Jg.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return v3}},Su={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Kv={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},y3={fills:Array.from(Object.values(Su)),strokes:Array.from(Object.values(Kv))},x3=class em extends xl{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Su.BLUE,stroke:Kv.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Su.RED,stroke:Kv.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Su.GRAY,stroke:Kv.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,em.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,em.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,em.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[Su.ORANGE,Su.YELLOW,Su.GREEN]),e.properties.set(Ro,em.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return y3}},tm={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Dw={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},S3="#bbbbbb",w3="#eeeeee",b3={fills:Array.from(Object.values(tm)),strokes:Array.from(Object.values(Dw))},E3=class im extends Xm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:tm.BLUE,stroke:Dw.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:tm.RED,stroke:Dw.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:S3,stroke:w3}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,im.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,im.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,im.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[tm.BLUE,tm.RED]),e.properties.set(Ro,im.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return b3}},rm={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Ow={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},_3="#bbbbbb",T3="#888888",R3={fills:Array.from(Object.values(rm)),strokes:Array.from(Object.values(Ow))},A3=class nm extends xl{static getWaterfallSeriesDefaultPositiveColors(){return{fill:rm.BLUE,stroke:Ow.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:rm.RED,stroke:Ow.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:_3,stroke:T3}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,nm.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,nm.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,nm.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[rm.BLUE,rm.RED]),e.properties.set(Ro,nm.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return R3}},wu={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},$v={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},D3={fills:Array.from(Object.values(wu)),strokes:Array.from(Object.values($v))},O3=class sm extends Xm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:wu.BLUE,stroke:$v.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:wu.ORANGE,stroke:$v.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:wu.GRAY,stroke:$v.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,sm.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,sm.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,sm.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[wu.ORANGE,wu.YELLOW,wu.GREEN]),e.properties.set(Ro,sm.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return D3}},bu={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Yv={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},F3={fills:Array.from(Object.values(bu)),strokes:Array.from(Object.values(Yv))},P3=class om extends xl{static getWaterfallSeriesDefaultPositiveColors(){return{fill:bu.BLUE,stroke:Yv.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:bu.ORANGE,stroke:Yv.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:bu.GRAY,stroke:Yv.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,om.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,om.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,om.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[bu.ORANGE,bu.YELLOW,bu.GREEN]),e.properties.set(Ro,om.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return F3}},Eu={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Xv={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},I3={fills:Array.from(Object.values(Eu)),strokes:Array.from(Object.values(Xv))},M3=class am extends Xm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Eu.BLUE,stroke:Xv.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Eu.ORANGE,stroke:Xv.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Eu.GRAY,stroke:Xv.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,am.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,am.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,am.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[Eu.ORANGE,Eu.YELLOW,Eu.GREEN]),e.properties.set(Ro,am.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return I3}},_u={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},qv={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},L3={fills:Array.from(Object.values(_u)),strokes:Array.from(Object.values(qv))},N3=class lm extends xl{static getWaterfallSeriesDefaultPositiveColors(){return{fill:_u.BLUE,stroke:qv.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:_u.ORANGE,stroke:qv.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:_u.GRAY,stroke:qv.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(Eo,lm.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(_o,lm.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(To,lm.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Ao,[_u.ORANGE,_u.YELLOW,_u.GREEN]),e.properties.set(Ro,lm.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return L3}},gm=()=>new xl,qS=()=>new Xm,k3={undefined:gm,null:gm,"ag-default":gm,"ag-sheets":()=>new P3,"ag-polychroma":()=>new A3,"ag-vivid":()=>new N3,"ag-material":()=>new x3},G3={undefined:qS,null:qS,"ag-default-dark":qS,"ag-sheets-dark":()=>new O3,"ag-polychroma-dark":()=>new E3,"ag-vivid-dark":()=>new M3,"ag-material-dark":()=>new C3},dO=H(H({},G3),k3);function B3(r){if(r===null)return;let e=!0,{baseTheme:t,palette:i,overrides:n}=r;if(t!==void 0&&typeof t!="string"&&typeof t!="object"&&(be.warn(`invalid theme.baseTheme type ${typeof t}, expected (string | object).`),e=!1),n!==void 0&&typeof n!="object"&&(be.warn(`invalid theme.overrides type ${typeof n}, expected object.`),e=!1),typeof i=="object"){if(i!==null){let{fills:s,strokes:o}=i;s!==void 0&&!Array.isArray(s)&&(be.warn("theme.overrides.fills must be undefined or an array"),e=!1),o!==void 0&&!Array.isArray(o)&&(be.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else i!==void 0&&(be.warn(`invalid theme.palette type ${typeof i}, expected object.`),e=!1);if(e)return r}function V3(r){if(r===void 0||typeof r=="string"||r instanceof xl)return r;if(typeof r=="object")return B3(r);be.warn(`invalid theme value type ${typeof r}, expected object.`)}function Kb(r){var e;let t=V3(r);if(t instanceof xl)return t;if(t===void 0||typeof t=="string"){let a=dO[t];return a?a():(be.warnOnce(`the theme [${t}] is invalid, using [ag-default] instead.`),gm())}let i=[],n;for(;typeof t=="object";)i.push((e=t.overrides)!=null?e:{}),t.palette&&n==null&&(n=t.palette),t=t.baseTheme;i.reverse();let s=H({baseTheme:t,overrides:Ai(i)},n?{palette:n}:{}),o=s.baseTheme?Kb(s.baseTheme):gm();return new o.constructor(s)}function UT(r,e,t){let i=[];for(let n=0;n<t;n++)i.push(e[(n+r.colourIndex)%e.length]);return i}var Lu={avoidDeepClone:["data"]};function H3(r){if(r===void 0||typeof r!="object"||r===null)return{};let{type:e,xOffset:t,yOffset:i}=r,n={pointer:!0,node:!0},s={};return typeof e=="string"&&(a=>Object.keys(n).includes(a))(e)&&(s.type=e),typeof t=="number"&&!isNaN(t)&&isFinite(t)&&(s.xOffset=t),typeof i=="number"&&!isNaN(i)&&isFinite(i)&&(s.yOffset=i),s}function W3(r){var e,t,i,n;U3(r);let s=Vu(r),o=v=>{if(v!=null&&!(gG(v)||uD(v)||WT(v)))throw new Error(`AG Charts - unknown series type: ${v}; expected one of: ${ks.seriesTypes}`)};for(let{type:v}of(e=r.series)!=null?e:[])v!=null&&o(v);r=j3(r);let a="line";Lp(r)?a="line":MC(r)?a="treemap":LC(r)&&(a="pie");let l=WT(s);l3(r)&&(l=vG(l)),l=c3(r,l);let c=CG(r);Q3(r);let d=H3((t=r.tooltip)==null?void 0:t.position),{context:u,mergedOptions:h,axesThemes:p,seriesThemes:f,theme:g}=$3(l,r,c);h.series=g3(h,((i=h.series)!=null?i:[]).map(v=>{var C;let S=(C=v.type)!=null?C:a,b=K3(v,S,f,d);return S==="pie"&&tB(f.pie,v,b),b})).map(v=>X3(u,v)).map(v=>g.templateTheme(v));let m=v=>{let C=mG(v);return C||be.warnOnce(`unknown axis type: ${v}; expected one of: ${gb.axesTypes}, ignoring.`),C};if("axes"in h){let v=!0;for(let{type:S}of(n=h.axes)!=null?n:[])v&&(v=m(S));let C=v?h.axes:l.axes;h.axes=C?.map(S=>{var b,T,A,E,N;let M=S.type,k;v&&(k=(b=l.axes)==null?void 0:b.find(({type:ee})=>ee===M));let W=Ai([(T=p[M])!=null?T:{},(N=(E=p[M])==null?void 0:E[(A=S.position)!=null?A:"unknown"])!=null?N:{},k]);return Z3(S,W)}),J3(r,h)}return eB(r,h),h}function U3(r){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([t,i])=>{var n;(n=r.series)!=null&&n.some(s=>s[t]!=null)&&be.warnOnce(`Property [series.${t}] is deprecated, please use [series.${i}] and multiple series instead.`)})}function z3(r){return r.some(e=>Uv(e.type))}function j3(r){if(r.series===void 0||r.series.length<=1||!z3(r.series))return r;let e=[...r.series];if(Uv(e[0].type))be.warn(`series[0] of type '${e[0].type}' is incompatible with other series types. Only processing series[0]`),e=e.slice(0,1);else{let t=Array.from(new Set(e.filter(i=>Uv(i.type)).map(i=>i.type)));be.warnOnce(`Unable to mix these series types with the lead series type: ${t}`),e=e.filter(i=>!Uv(i.type))}return me(H({},r),{series:e})}function K3(r,e,t,i){var n,s;let o=Ai([H({},i),(n=r.tooltip)==null?void 0:n.position],Lu);return Ai([(s=t[e])!=null?s:{},me(H({},r),{type:e,tooltip:me(H({},r.tooltip),{position:o})})],Lu)}function $3(r,e,t){let{theme:i,cleanedTheme:n,axesThemes:s,seriesThemes:o,userPalette:a}=Y3(e),l=cO(a,i.palette),c={colourIndex:0,palette:i.palette,userPalette:l,theme:i};r=i.templateTheme(r);let d=Ai([r,n,e,t],Lu);return Qv.isEnterprise||u3(d),{context:c,mergedOptions:d,axesThemes:s,seriesThemes:o,theme:i}}function Y3(r){var e;let t=Kb(r.theme),i=t.config[Vu(r)],n=Object.entries(t.config).reduce((a,[l,{series:c}])=>(a[l]=c,a),{}),s=r.theme,o=typeof s=="object"&&s.palette?s.palette:null;return{theme:t,axesThemes:(e=i?.axes)!=null?e:{},seriesThemes:n,cleanedTheme:Ai([i??{},{axes:Ns,series:Ns}]),userPalette:o}}function X3(r,e,...t){let i=q3(r,e),n={stacked:Ns,grouped:Ns};return Ai([...t,i,e,n],Lu)}function q3(r,e){let t=e3(e.type);if(!t)return{};let{palette:{fills:i=[],strokes:n=[]},userPalette:s,theme:o}=r,a=Math.max(i.length,n.length);return t({userPalette:s,themeTemplateParameters:o.getTemplateParameters(),colorsCount:a,takeColors:l=>{let c={fills:UT(r,i,l),strokes:UT(r,n,l)};return r.colourIndex+=l,c}})}function Z3(r,e){var t,i;let n={top:Ns,bottom:Ns,left:Ns,right:Ns};r.crossLines&&(Array.isArray(r.crossLines)||(be.warn("axis[].crossLines should be an array."),r.crossLines=[]),r.crossLines=r.crossLines.map(a=>{var l;return Ai([(l=e.crossLines)!=null?l:{},a])}));let s=(t=e.gridLine)==null?void 0:t.style;return((i=r.gridLine)==null?void 0:i.style)!==void 0&&s!==void 0&&s.length>0&&(Array.isArray(r.gridLine.style)||(be.warn("axis[].gridLine.style should be an array."),r.gridLine.style=[]),r.gridLine.style=r.gridLine.style.map((a,l)=>{if(a.stroke===void 0&&a.lineDash===void 0)return a;let c=s[l%s.length];return Ai([c,a])})),Ai([e,{crossLines:Ns},r,n],Lu)}function Q3(r){Fu(r,e=>{"enabled"in e&&e.enabled===!1&&Object.keys(e).forEach(t=>{t!=="enabled"&&delete e[t]})},{skip:["data","theme"]})}function J3(r,e){var t,i,n,s;!vm((t=r.legend)==null?void 0:t.enabled)&&!vm((i=e.legend)==null?void 0:i.enabled)&&((n=e.legend)!=null||(e.legend={}),e.legend.enabled=((s=r.series)!=null?s:[]).length>1)}function eB(r,e){Fu(r,(t,i)=>{i&&"enabled"in i&&!i._enabledFromTheme&&t.enabled==null&&(i.enabled=!0)},{skip:["data","theme"]},e),Fu(e,t=>{t._enabledFromTheme!=null&&delete t._enabledFromTheme},{skip:["data","theme"]})}function tB(r,e,t){ps(e.innerLabels)?t.innerLabels=e.innerLabels.map(i=>Ai([r.innerLabels,i])):t.innerLabels=Ns}var iB=["top","right","bottom","left"],uO=["category","grouped-category","number","log","time"];function rB(r){return uO.includes(r.type)}function nB(r){return uO.includes(r.type)}function sB(r){return typeof r=="string"&&iB.includes(r)}var oB=class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(r,e){let{result:t,valid:i,invalid:n}=this;nB(e)&&(sB(e.position)?i.push(r):n.push(r)),t.push(r)}guessInvalidPositions(){let r=this.valid.filter(t=>rB(t)).map(t=>t.position).filter(t=>t!==void 0),e=["top","right","bottom","left"];for(let t of this.invalid){let i=e.pop();for(;r.includes(i)&&i!==void 0;)i=e.pop();if(i===void 0)break;t.position=i}return this.result}},$b=class hO extends vs{constructor(e,t){super(e,t),this.padding=new Mc(40),this.axisGroup.zIndex=5}performLayout(){return ne(this,null,function*(){let e=yield hl(hO.prototype,this,"performLayout").call(this),t=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach(i=>i.update()),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:t,paddedRect:e,visible:!0},axes:[]}),e})}updateAxes(e,t,i){var n,s;let o=this.axes.find(u=>u.direction==="x"),a=this.axes.find(u=>u.direction==="y");if(!(o instanceof vp)||!(a instanceof vp))return;let l=o.scale,c=(n=l.ticks)==null?void 0:n.call(l).map(u=>l.convert(u)),d=a.innerRadiusRatio;o.innerRadiusRatio=d,(s=o.computeRange)==null||s.call(o),o.gridLength=i,a.gridAngles=c,a.gridRange=o.range,a.range=[i,i*d],[o,a].forEach(u=>{u.translation.x=e,u.translation.y=t,u.calculateLayout()})}computeSeriesRect(e){let{seriesArea:{padding:t}}=this;e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),this.seriesRect=e,this.animationRect=e}computeCircle(e){return ne(this,null,function*(){let t=this.series.filter(d=>d instanceof zb),i=this.axes.filter(d=>d instanceof vp),n=(d,u,h)=>{this.updateAxes(d,u,h),t.forEach(f=>{f.centerX=d,f.centerY=u,f.radius=h});let p=t.filter(f=>f instanceof kC);if(p.length>1){let f=p.map(g=>{let m=g.getInnerRadius();return{series:g,innerRadius:m}}).sort((g,m)=>g.innerRadius-m.innerRadius);f[f.length-1].series.surroundingRadius=void 0;for(let g=0;g<f.length-1;g++)f[g].series.surroundingRadius=f[g+1].innerRadius}},s=e.x+e.width/2,o=e.y+e.height/2,a=Math.max(0,Math.min(e.width,e.height)/2),l=a;n(s,o,l);let c=(...d)=>ne(this,[...d],function*({hideWhenNecessary:u=!1}={}){let h=[];for(let g of[...i,...t]){let m=yield g.computeLabelsBBox({hideWhenNecessary:u},e);m&&h.push(m)}if(h.length===0){n(s,o,a);return}let p=it.merge(h),f=this.refineCircle(p,l,e);n(f.centerX,f.centerY,f.radius),f.radius!==l&&(l=f.radius)});return yield c(),yield c(),yield c(),yield c({hideWhenNecessary:!0}),yield c({hideWhenNecessary:!0}),{radius:l,centerX:s,centerY:o}})}refineCircle(e,t,i){let s=-t,o=-t,a=t,l=t,c=Math.max(0,s-e.x),d=Math.max(0,o-e.y),u=Math.max(0,e.x+e.width-a),h=Math.max(0,e.y+e.height-l);c=u=Math.max(c,u),d=h=Math.max(d,h);let p=i.width-c-u,f=i.height-d-h,g=Math.min(p,f)/2,m=.5*i.width/2,v=.5*i.height/2,C=Math.min(m,v);if(g<C){g=C;let T=c+u,A=d+h;if(2*g+A>i.height){let E=i.height-2*g;Math.min(d,h)*2>E?(d=E/2,h=E/2):d>h?d=E-h:h=E-d}if(2*g+T>i.width){let E=i.width-2*g;Math.min(c,u)*2>E?(c=E/2,u=E/2):c>u?c=E-u:u=E-c}}let S=c+2*g+u,b=d+2*g+h;return{centerX:i.x+(i.width-S)/2+c+g,centerY:i.y+(i.height-b)/2+d+g,radius:g}}};$b.className="PolarChart";$b.type="polar";var pO=$b,_c=_i.create(!0,"opts");function zT(r){if(Lp(r))return"cartesian";if(LC(r))return"polar";if(MC(r))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${r.type}`)}var Yb=class cm{static licenseCheck(e){var t,i,n,s;this.licenseChecked||(this.licenseManager=(i=(t=Qv).licenseManager)==null?void 0:i.call(t,e),(n=this.licenseManager)==null||n.setLicenseKey(this.licenseKey),(s=this.licenseManager)==null||s.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static getInstance(e){return ap.getInstance(e)}static create(e){var t,i,n,s;this.licenseCheck(e);let o=ap.createOrUpdate(e);return(t=this.licenseManager)!=null&&t.isDisplayWatermark()&&((s=(n=Qv).injectWatermark)==null||s.call(n,(i=e.document)!=null?i:document,o.chart.element,this.licenseManager.getWatermarkMessage())),o}static update(e,t){if(!Zg.isInstance(e))throw new Error(cm.INVALID_CHART_REF_MESSAGE);ap.createOrUpdate(t,e)}static updateDelta(e,t){if(!Zg.isInstance(e))throw new Error(cm.INVALID_CHART_REF_MESSAGE);ap.updateUserDelta(e,t)}static download(e,t){if(!(e instanceof Zg))throw new Error(cm.INVALID_CHART_REF_MESSAGE);ap.download(e,t)}static getImageDataURL(e,t){if(!(e instanceof Zg))throw new Error(cm.INVALID_CHART_REF_MESSAGE);return ap.getImageDataURL(e,t)}};Yb.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed";Yb.licenseChecked=!1;var Xb=Yb;var ZS=new WeakMap,fO=class pa{static getInstance(e){let t=vs.getInstance(e);return t!=null?ZS.get(t):void 0}static initialiseModules(){pa.initialised||(jG(),d3(),pa.initialised=!0)}static createOrUpdate(e,t){var i;pa.initialiseModules(),_c(">>> AgChartV2.createOrUpdate() user options",e);let n=e,{overrideDevicePixelRatio:s,document:o,window:a}=n,l=In(n,["overrideDevicePixelRatio","document","window"]),c={overrideDevicePixelRatio:s,document:o,window:a},d=W3(l),u=t?.chart;u!=null&&ZS.delete(u),(u==null||zT(l)!==zT(u.processedOptions))&&(u=pa.createChartInstance(d,c,u)),t==null?t=new Zg(u):t.chart=u,ZS.set(u,t),_i.check()&&typeof window<"u"&&((i=window.agChartInstances)!=null||(window.agChartInstances={}),window.agChartInstances[u.id]=u);let h=u;h.queuedUserOptions.push(l);let p=()=>{let f=h.queuedUserOptions.indexOf(l);h.queuedUserOptions.splice(0,f)};return h.requestFactoryUpdate(()=>ne(this,null,function*(){if(h.destroyed)return;let f=ya(h.processedOptions,d);if(f==null){p();return}yield pa.updateDelta(h,f,l),p()})),t}static updateUserDelta(e,t){var i;let{chart:n,chart:{queuedUserOptions:s}}=e,o=(i=s[s.length-1])!=null?i:n.userOptions,a=Ai([o,t]);_c(">>> AgChartV2.updateUserDelta() user delta",t),_c("AgChartV2.updateUserDelta() - base options",o),pa.createOrUpdate(a,e)}static download(e,t){(()=>ne(this,null,function*(){let n=yield pa.prepareResizedChart(e,t),{chart:s}=n;s.scene.download(t?.fileName,t?.fileFormat),n!==e&&n.destroy()}))().catch(n=>be.errorOnce(n))}static getImageDataURL(e,t){return ne(this,null,function*(){let i=yield pa.prepareResizedChart(e,t),{chart:n}=i,s=n.scene.canvas.getDataURL(t?.fileFormat);return i!==e&&i.destroy(),s})}static prepareResizedChart(e,t){return ne(this,null,function*(){var i;let{chart:n}=e,{width:s,height:o}=t??{},a=n.width,l=n.height;if(s===void 0&&o===void 0||n.scene.canvas.pixelRatio===1&&a===s&&l===o)return e;s??(s=a),o??(o=l);let d=me(H({},n.userOptions),{container:document.createElement("div"),width:s,height:o,autoSize:!1,overrideDevicePixelRatio:1});gC()&&((i=d.animation)!=null||(d.animation={}),d.animation.enabled=!1);let u=pa.createOrUpdate(d);return yield u.chart.waitForUpdate(),u})}static createChartInstance(e,t,i){let n=i?.destroy({keepTransferableResources:!0});if(Lp(e))return new sD(t,n);if(MC(e))return new lO(t,n);if(LC(e))return new pO(t,n);throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static updateDelta(e,t,i){return ne(this,null,function*(){var n;t.type==null&&(t=me(H({},t),{type:(n=e.processedOptions.type)!=null?n:Vu(t)})),!e.destroyed&&(_c("AgChartV2.updateDelta() - applying delta",t),aB(e,t,i))})}};fO.initialised=!1;var ap=fO;function aB(r,e,t){var i,n,s;let o=Ai([(i=r.processedOptions)!=null?i:{},e],Lu),a=lB(r,o),l=["type","data","series","listeners","theme","legend.listeners"];if(Lp(e)||LC(e))l.push("axes");else if(!MC(e))throw new Error(`AG Charts - couldn't apply configuration, check type of options and chart: ${e.type}`);e.listeners&&gO(r,e.listeners),qb(r,r.getModuleContext(),e,{skip:l});let c=!1,d=!1;e.series&&e.series.length>0&&(d=cB(r,e),c=!0),"axes"in o&&Array.isArray(o.axes)&&dB(r,o,d)&&(c=!0);let u=e.series,h=!!e.data||u?.some(C=>C.data!=null),p=qk(),f=Object.values(p).some(C=>e[C]!=null),g=e.title!=null&&e.subtitle!=null;c=c||h||f||g,e.data&&(r.data=e.data),(n=e.legend)!=null&&n.listeners&&Object.assign(r.legend.listeners,e.legend.listeners),e.listeners&&r.updateAllSeriesListeners(),r.processedOptions=o,r.userOptions=Ai([(s=r.userOptions)!=null?s:{},t],Lu);let v=c||a?1:2;_c("AgChartV2.applyChartOptions() - update type",Tm[v]),r.update(v,{forceNodeDataRefresh:c,newAnimationBatch:!0})}function lB(r,e){let t=({chartTypes:n})=>r instanceof sD&&n.includes("cartesian")||r instanceof pO&&n.includes("polar")||r instanceof lO&&n.includes("hierarchy"),i=!1;for(let n of ma){if(n.type!=="root"&&n.type!=="legend")continue;let s=t(n)&&e[n.optionsKey]!=null,o=r.isModuleEnabled(n);s!==o&&(s?(r.addModule(n),r[n.optionsKey]=r.modules.get(n.optionsKey)):(r.removeModule(n),delete r[n.optionsKey]),i=!0)}return i}function cB(r,e){let t=e.series;if(!t)return!1;let i=["direction","xKey","yKey","sizeKey","angleKey","stacked","stackGroup"],n=r.series.length===t.length;for(let s=0;s<r.series.length&&n;s++){n&&(n=r.series[s].type===t[s].type);for(let o of i)n&&(n=r.series[s].properties[o]===t[s][o])}return n?(r.series.forEach((s,o)=>{var a,l,c,d;let u=(c=(l=(a=r.processedOptions)==null?void 0:a.series)==null?void 0:l[o])!=null?c:{},h=ya(u,(d=t[o])!=null?d:{});h&&(_c(`AgChartV2.applySeries() - applying series diff idx ${o}`,h),mO(s,h),s.markNodeDataDirty())}),!1):(_c("AgChartV2.applySeries() - creating new series instances"),r.series=uB(r,t),!0)}function dB(r,e,t){let i=e.axes;if(!i)return!1;if(!t&&r.axes.length===i.length&&r.axes.every((s,o)=>s.type===i[o].type)){let s=r.processedOptions,o=r.getModuleContext();if(Lp(s))return r.axes.forEach((a,l)=>{var c,d;let u=(d=(c=s.axes)==null?void 0:c[l])!=null?d:{},h=ya(u,i[l]);_c(`AgChartV2.applyAxes() - applying axis diff idx ${l}`,h);let p=`axes[${l}]`;qb(a,o,h,{path:p,skip:["axes[].type"]})}),!0}return r.axes=pB(r,i),!0}function uB(r,e){var t;let i=[],n=r.getModuleContext();for(let s of e??[]){let o=(t=s.type)!=null?t:"unknown";if(uD(o)&&!Hk(o))continue;let a=ZG(o,n);hB(a,s),mO(a,s),i.push(a)}return i}function hB(r,e){let t=ma.filter(s=>s.type==="series-option"),i=r.createModuleContext(),n=r.getModuleMap();for(let s of t){let o=s.seriesTypes;s.optionsKey in e&&o.includes(r.type)&&(n.addModule(s,a=>new a.instanceConstructor(i)),r[s.optionsKey]=n.getModule(s))}}function pB(r,e){let t=new oB,i=r.getModuleContext(),n=["axes[].type"],s=0;for(let o of e??[]){let a=Bk(o.type,i),l=`axes[${s++}]`;fB(a,o),qb(a,i,o,{path:l,skip:n}),t.push(a,o)}return t.guessInvalidPositions()}function fB(r,e){let t=!1,i=ma.filter(s=>s.type==="axis-option"),n=r.createModuleContext();for(let s of i){let o=e[s.optionsKey]!=null,a=r.getModuleMap(),l=a.isModuleEnabled(s);o!==l&&(t=!0,o?(a.addModule(s,c=>new c.instanceConstructor(n)),r[s.optionsKey]=a.getModule(s)):(a.removeModule(s),delete r[s.optionsKey]))}return t}function gO(r,e){r.clearEventListeners();let t=Object.entries(e??{});for(let[i,n]of t)typeof n=="function"&&r.addEventListener(i,n)}function qb(r,e,t,{skip:i,path:n}={}){let s=H(me(H({},VL(e)),{skip:i}),n?{path:n}:{});return um(r,t,s)}function mO(r,e){let t=r.getModuleMap(),i=e,{type:n,data:s,errorBar:o,listeners:a,seriesGrouping:l}=i,c=In(i,["type","data","errorBar","listeners","seriesGrouping"]);r.properties.set(c),"data"in e&&(r.data=e.data),"errorBar"in e&&t.isModuleEnabled("errorBar")&&t.getModule("errorBar").properties.set(e.errorBar),e?.listeners!=null&&gO(r,e.listeners),"seriesGrouping"in e&&(r.seriesGrouping=l?Object.freeze(H(H({},r.seriesGrouping),l)):void 0)}var gB={};ul(gB,{BOTTOM:()=>xb,CARTESIAN_AXIS_POSITIONS:()=>Co,CARTESIAN_AXIS_TYPES:()=>yo,CIRCLE:()=>uG,ChartTheme:()=>xl,DEFAULT_AXIS_GRID_COLOUR:()=>hC,DEFAULT_AXIS_LINE_COLOUR:()=>Bv,DEFAULT_BACKGROUND_COLOUR:()=>Rm,DEFAULT_CROSS_LINES_COLOUR:()=>fm,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>Ao,DEFAULT_FONT_FAMILY:()=>Xi,DEFAULT_HIERARCHY_FILLS:()=>wb,DEFAULT_HIERARCHY_STROKES:()=>bb,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>kp,DEFAULT_INVERTED_LABEL_COLOUR:()=>TD,DEFAULT_LABEL_COLOUR:()=>Or,DEFAULT_MUTED_LABEL_COLOUR:()=>gp,DEFAULT_POLAR_SERIES_STROKE:()=>Sb,DEFAULT_SHADOW_COLOUR:()=>Gp,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>Ro,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>_o,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>Eo,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>To,EXTENDS_AXES_DEFAULTS:()=>xD,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>ED,EXTENDS_AXES_LABEL_DEFAULTS:()=>SD,EXTENDS_AXES_LINE_DEFAULTS:()=>wD,EXTENDS_AXES_TICK_DEFAULTS:()=>bD,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>Np,EXTENDS_CHART_DEFAULTS:()=>mD,EXTENDS_LEGEND_DEFAULTS:()=>vD,EXTENDS_LEGEND_ITEM_DEFAULTS:()=>CD,EXTENDS_LEGEND_ITEM_MARKER_DEFAULTS:()=>yD,EXTENDS_SERIES_DEFAULTS:()=>yl,FONT_SIZE:()=>Sc,FONT_WEIGHT:()=>bp,OVERRIDE_SERIES_LABEL_DEFAULTS:()=>_D,POLAR_AXIS_TYPES:()=>dG,getChartTheme:()=>Kb,themes:()=>mB});var mB=Object.entries(dO).reduce((r,[e,t])=>(r[e]=t(),r),{}),vB={};ul(vB,{BandScale:()=>xa,ColorScale:()=>Gu,ContinuousScale:()=>kt,Invalidating:()=>Ln,LinearScale:()=>Au,TimeScale:()=>ab});var vO=(()=>{class r{constructor(t){this._initialised=!1,this.options={},this.onChartReady=new ue,this._nativeElement=t.nativeElement}ngAfterViewInit(){let t=this.applyContainerIfNotSet(this.options);this.chart=Xb.create(t),this._initialised=!0,this.chart.chart.waitForUpdate().then(()=>{this.onChartReady.emit(this.chart)})}ngOnChanges(t){!this._initialised||!this.chart||Xb.update(this.chart,this.applyContainerIfNotSet(this.options))}ngOnDestroy(){this._initialised&&this.chart&&(this.chart.destroy(),this.chart=void 0,this._initialised=!1)}applyContainerIfNotSet(t){return t.container?t:Ue(Te({},t),{container:this._nativeElement})}}return r.\u0275fac=function(t){return new(t||r)(Xs(sh))},r.\u0275cmp=Ve({type:r,selectors:[["ag-charts-angular"]],inputs:{options:"options"},outputs:{onChartReady:"onChartReady"},features:[f0],decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})(),CO=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=nh({type:r}),r.\u0275inj=rh({}),r})();var Bt=function(r){return r.Assembly="assembly",r.Material="material",r.Product="product",r}(Bt||{});var yO=new gn("DEFAULT_DIALOG_CONFIG",{providedIn:"root",factory:()=>({disableClose:!0})});var Da=(()=>{let e=class e extends E1{constructor(){super(...arguments),this.defaultDialogConfig=ce(yO),this.isHandset$=ce(v0).observe(C0.Handset).pipe(fi(({matches:i})=>i))}open(i,n){let s=Te(Te({},this.defaultDialogConfig),n);s.maxWidth="clamp(400px, 90vw, 1095px)",s.maxHeight="clamp(400px, 90vh, 1250px)",s.width===void 0&&(s.width="90vw"),s.height===void 0&&(s.height="90vh");let o=!1;return this.isHandset$.pipe(p0(1)).subscribe(a=>o=a),o&&(s.width="100vw",s.height="100vh",s.minWidth="100vw",s.minHeight="100vh",s.maxWidth="100vw",s.maxHeight="100vh"),super.open(i,s)}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var xO=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-hierarchy-info-modal"]],decls:18,vars:0,consts:[["align","end"],["mat-dialog-close",""],["slot","icon"],[1,"definition",2,"margin-bottom","1.5em"],[1,"definition"]],template:function(n,s){n&1&&(J(0,"mat-dialog-actions",0)(1,"arc-icon-button",1),xe(2,"ph-icon-x",2),q()(),J(3,"mat-dialog-content")(4,"p",3),pe(5," To use this tool, select Assembly, Material or Product from the top left of the page. Then apply sub-categories, filters and searches as needed. Finally, select a target country and date for which the localised carbon factors can be calculated. "),q(),J(6,"p")(7,"span",4),pe(8,"Assembly:"),q(),pe(9," A composition of Materials and/or Materials & Products. "),q(),J(10,"p")(11,"span",4),pe(12,"Material:"),q(),pe(13," A raw material, e.g. steel, concrete. Materials have regional carbon properties. "),q(),J(14,"p")(15,"span",4),pe(16,"Product:"),q(),pe(17," A finished product, e.g. air handling unit, chiller unit, or a product built-up from a combination of materials and sub-components. Products have regional carbon properties. "),q()())},dependencies:[Nl,Cn,yn],styles:[".definition[_ngcontent-%COMP%]{font-size:var(--arc-font-size-medium);font-weight:var(--arc-font-weight-bold)}"],changeDetection:0});let r=e;return r})();var Zb,Hc=Zb=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${Zb.svg}
      </svg>
    `}};Hc.tag="ph-icon-info";Hc.styles=Pt;Hc.svg=Rt`<path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"/>`;ye([Ie({type:String}),Le("design:type",String)],Hc.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],Hc.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],Hc.prototype,"rotation",void 0);Hc=Zb=ye([Dt("ph-icon-info")],Hc);function yB(r,e){if(r&1){let t=Lr();J(0,"mat-button-toggle",3),Re("click",function(){let s=Vt(t).$implicit,o=ve();return Ht(o.onSelectObjectType(s))}),ze(1,"async"),J(2,"span"),pe(3),ze(4,"titlecase"),q()()}if(r&2){let t=e.$implicit,i=ve();mi(tt(1,3,i.selectedObjectType$)===t?"mat-button-toggle-checked":null),re(3),Ii(tt(4,5,t))}}var SO=(()=>{let e=class e{constructor(){this.router=ce(ch),this.route=ce(m0),this.modalService=ce(Da),this.objectTypes=Object.values(Bt),this.selectedObjectType$=this.router.events.pipe(YE(i=>i instanceof h1),ZE(this.route.snapshot.firstChild?.url[0].path),fi(()=>{let{firstChild:i}=this.route.snapshot;return i?i.url[0].path:null}))}onSelectObjectType(i){this.router.navigate([i],{relativeTo:this.route})}openHierarchyInfoModal(){this.modalService.open(xO,{disableClose:!1})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-layout"]],decls:8,vars:1,consts:[[1,"object-nav"],["name","object_type","aria-label","Select object type"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["slot","icon"],[1,"content"]],template:function(n,s){n&1&&(J(0,"div",0)(1,"mat-button-toggle-group",1),Ee(2,yB,5,7,"mat-button-toggle",2),q(),J(3,"arc-icon-button",3),Re("click",function(){return s.openHierarchyInfoModal()}),xe(4,"ph-icon-info",4),q()(),J(5,"div",5),xe(6,"router-outlet")(7,"div"),q()),n&2&&(re(2),ie("ngForOf",s.objectTypes))},dependencies:[Bo,D1,O1,p1,Jt,lh],styles:["[_nghost-%COMP%]{--grid-border: 1px solid #ccc;display:flex;flex-direction:column;gap:var(--arc-spacing-small);height:100%;position:relative;padding:var(--arc-spacing-small)}div.object-nav[_ngcontent-%COMP%]{display:flex;gap:var(--arc-spacing-small);align-items:center}div.content[_ngcontent-%COMP%]{height:100%}"],changeDetection:0});let r=e;return r})();var Qb=function(r){return r.Airport="Airport",r.Apartment="Apartment",r.DataCentre="Data Centre",r.Factory="Factory",r.Hospital="Hospital",r.Hotel="Hotel",r.Laboratory="Laboratory",r.Museum="Museum",r.Office="Office",r.Other="Other",r.Outpatient_clinic="Outpatient Clinic",r.Railway_station="Railway Station",r.Restaurant="Restaurant",r.Retail="Retail",r.School="School",r.Warehouse="Warehouse",r.Default="Default",r.General="General",r}(Qb||{});var lt=function(r){return r.BasementFrame="Ground Slab - Basement Frame",r.Foundation="Foundation",r.BasementPerimeter="Basement Perimeter",r.Floorplate="Floorplate",r.VerticalStructure="Vertical Structure",r.Stability="Stability",r.Roof="Roof",r.Stairs="Stairs",r.Heating="Heating",r.Cooling="Cooling",r.Ventilation="Ventilation",r.Process="Process",r.Electrical="Electrical",r.Telecomms="Telecomms - ICT",r.Lighting="Lighting",r.Renewables="Renewables",r.VerticalTransport="Vertical Transport",r.Security="Security",r.HotWater="Hot Water",r.ColdWater="Cold Water",r.WasteWater="Waste Water",r.Fire="Piped Fire Systems",r.Fuel="Piped Fuel",r.Specialist="Specialist",r.Facade="Facade",r.RoofFinishes="Roof Finishes",r.Partitions="Partitions",r.FloorFinishes="Floor Finishes",r.CeilingFinishes="Ceiling Finishes",r.WallFinishes="Wall Finishes",r.ArchitecturalMetalwork="Architectural Metalwork",r}(lt||{});var qm=function(r){return r.Absolute="Absolute (x1)",r.AboveGroundArea="Above ground area",r.BelowGroundArea="Below ground area",r.GrossFacadeArea="Gross facade area",r.GrossFloorArea="Gross floor area",r}(qm||{});var ti=function(r){return r.A1_A3="A1-A3",r.A4="A4",r.A5="A5",r.B1="B1",r.B2="B2",r.B3="B3",r.B4="B4",r.B5="B5",r.B6="B6",r.B7="B7",r.C1="C1",r.C2="C2",r.C3="C3",r.C4="C4",r.D="D",r.BIOGENIC="biogenic carbon",r.RECYCLED="recycled content",r.WASTAGE="waste rate",r.DENSITY="density",r.MASS="mass",r}(ti||{}),Jb=function(r){return r.A1_A3="A1-A3",r.A4="A4",r.A5="A5",r.B1="B1",r.B2="B2",r.B3="B3",r.B4="B4",r.B5="B5",r.B6="B6",r.B7="B7",r.C1="C1",r.C2="C2",r.C3="C3",r.C4="C4",r.D="D",r.BIOGENIC="biogenic carbon",r}(Jb||{}),Hu=function(r){return r.A1_A3="A1-A3",r.C3="C3",r.C4="C4",r.D="D",r.BIOGENIC="biogenic carbon",r}(Hu||{}),Wu=function(r){return r.A1_A3="A1-A3",r.A4="A4",r.A5="A5",r.B1="B1",r.B2="B2",r.B3="B3",r.B4="B4",r.B5="B5",r.C1="C1",r.C2="C2",r.C3="C3",r.C4="C4",r.D="D",r.BIOGENIC="biogenic carbon",r}(Wu||{});var eE=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Wc=class extends Gh{constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){Pe.exists(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(Pe.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context}}forEachNode(e,t,i){this.rowNodes.forEach((n,s)=>{this.startRow+s<i&&e(n,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,i=new Ge(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,n)=>{let s=e.rowData?e.rowData[n]:void 0;!i.id&&i.alreadyRendered&&s&&(this.rowNodes[n]=new Ge(this.beans),this.rowNodes[n].setRowIndex(i.rowIndex),this.rowNodes[n].setRowTop(i.rowTop),this.rowNodes[n].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[n],s,this.startRow+n)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroyRowNodes(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()})}};eE([y("beans")],Wc.prototype,"beans",void 0);eE([G],Wc.prototype,"postConstruct",null);eE([at],Wc.prototype,"destroyRowNodes",null);var GC=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xB=function(r,e){return function(t,i){e(t,i,r)}},Sl=class r extends L{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,t=!1){let i=Math.floor(e/this.params.blockSize),n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){let t=this.createBean(new Wc(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(a=>a!=e),i=(a,l)=>l.getLastAccessed()-a.getLastAccessed();t.sort(i);let n=this.params.maxBlocksInCache>0,s=n?this.params.maxBlocksInCache-1:null,o=r.MAX_EMPTY_BLOCKS_TO_KEEP-1;t.forEach((a,l)=>{let c=a.getState()===Wc.STATE_WAITING_TO_LOAD&&l>=o,d=n?l>=s:!1;if(c||d){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let i=e.getStartRow(),n=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let n=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,Pe.exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new Yn;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(i,n)=>i.getId()-n.getId();return Pe.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let e={type:w.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let i=[],n=-1,s=!1,o=new Yn;Pe.missing(e)&&(s=!0);let a=!1;return this.getBlocksInOrder().forEach(c=>{if(!a){if(s&&n+1!==c.getId()){a=!0;return}n=c.getId(),c.forEachNode(d=>{let u=d===e||d===t;(s||u)&&i.push(d),u&&(s=!s)},o,this.rowCount)}}),a||s?[]:i}};Sl.MAX_EMPTY_BLOCKS_TO_KEEP=2;GC([y("rowRenderer")],Sl.prototype,"rowRenderer",void 0);GC([y("focusService")],Sl.prototype,"focusService",void 0);GC([xB(0,Wt("loggerFactory"))],Sl.prototype,"setBeans",null);GC([at],Sl.prototype,"destroyAllBlocks",null);var Uc=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Do=class extends L{getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(e,t,i,n){return!1}init(){this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){let e="AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.";Pe.doOnce(()=>console.warn(e),"IRM.InitialGroupOrderComparator")}}start(){this.setDatasource(this.gridOptionsService.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,w.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!Pe.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gridOptionsService.getCallback("getRowId")!=null||this.selectionService.reset(),this.resetCache();let i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}createModelUpdatedEvent(){return{type:w.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new Yn},this.infiniteCache=this.createBean(new Sl(this.cacheParams))}defaultIfInvalid(e,t){return e>0?e:t}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};Uc([y("filterManager")],Do.prototype,"filterManager",void 0);Uc([y("sortController")],Do.prototype,"sortController",void 0);Uc([y("selectionService")],Do.prototype,"selectionService",void 0);Uc([y("rowRenderer")],Do.prototype,"rowRenderer",void 0);Uc([y("rowNodeBlockLoader")],Do.prototype,"rowNodeBlockLoader",void 0);Uc([G],Do.prototype,"init",null);Uc([at],Do.prototype,"destroyDatasource",null);Do=Uc([Y("rowModel")],Do);var wO="30.2.0";var Zm={version:wO,moduleName:he.InfiniteRowModelModule,rowModel:"infinite",beans:[Do]};var bO=(()=>{class r{constructor(t,i,n,s,o,a){this.nextId=0,this.allNodesMap={},this.rootNode=t,this.gridOptionsService=i,this.eventService=n,this.columnModel=s,this.beans=a,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=r.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}postConstruct(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingMasterDetail=this.gridOptionsService.is("masterDetail")}getCopyOfNodesMap(){return Pe.cloneObject(this.allNodesMap)}getRowNode(t){return this.allNodesMap[t]}setRowData(t){if(typeof t=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.dispatchRowDataUpdateStartedEvent(t);let i=this.rootNode,n=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?i.allLeafChildren=t.map(s=>this.createNode(s,this.rootNode,r.TOP_LEVEL)):(i.allLeafChildren=[],i.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=i.childrenAfterFilter,n.childrenAfterGroup=i.childrenAfterGroup,n.childrenAfterAggFilter=i.childrenAfterAggFilter,n.childrenAfterSort=i.childrenAfterSort,n.childrenMapped=i.childrenMapped,n.allLeafChildren=i.allLeafChildren)}updateRowData(t,i){this.dispatchRowDataUpdateStartedEvent(t.add);let n={remove:[],update:[],add:[]},s=[];return this.executeRemove(t,n,s),this.executeUpdate(t,n,s),this.executeAdd(t,n),this.updateSelection(s,"rowDataChanged"),i&&Pe.sortRowNodesByOrder(this.rootNode.allLeafChildren,i),n}dispatchRowDataUpdateStartedEvent(t){let i={type:w.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:t?.length?t[0]:null};this.eventService.dispatchEvent(i)}updateSelection(t,i){let n=t.length>0;if(n&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:i}),this.selectionService.updateGroupsFromChildrenSelections(i),n){let s={type:w.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(s)}}executeAdd(t,i){var n;let{add:s,addIndex:o}=t;if(Pe.missingOrEmpty(s))return;let a=s.map(l=>this.createNode(l,this.rootNode,r.TOP_LEVEL));if(typeof o=="number"&&o>=0){let{allLeafChildren:l}=this.rootNode,c=l.length,d=o;if(this.gridOptionsService.is("treeData")&&o>0&&c>0){for(let f=0;f<c;f++)if(((n=l[f])===null||n===void 0?void 0:n.rowIndex)==o-1){d=f+1;break}}let h=l.slice(0,d),p=l.slice(d,l.length);this.rootNode.allLeafChildren=[...h,...a,...p]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...a];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),i.add=a}executeRemove(t,i,n){let{remove:s}=t;if(Pe.missingOrEmpty(s))return;let o={};s.forEach(a=>{let l=this.lookupRowNode(a);l&&(l.isSelected()&&n.push(l),l.clearRowTopAndRowIndex(),o[l.id]=!0,delete this.allNodesMap[l.id],i.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(a=>!o[a.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(t,i,n){let{update:s}=t;Pe.missingOrEmpty(s)||s.forEach(o=>{let a=this.lookupRowNode(o);a&&(a.updateData(o),!a.selectable&&a.isSelected()&&n.push(a),this.setMasterForRow(a,o,r.TOP_LEVEL,!1),i.update.push(a))})}lookupRowNode(t){let i=this.gridOptionsService.getCallback("getRowId"),n;if(i){let s=i({data:t,level:0});if(n=this.allNodesMap[s],!n)return console.error(`AG Grid: could not find row id=${s}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren.find(s=>s.data===t),!n)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(t,i,n){let s=new Ge(this.beans);return s.group=!1,this.setMasterForRow(s,t,n,!0),i&&!this.suppressParentsInRowNodes&&(s.parent=i),s.level=n,s.setDataAndId(t,this.nextId.toString()),this.allNodesMap[s.id]&&console.warn(`AG Grid: duplicate node id '${s.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[s.id]=s,this.nextId++,s}setMasterForRow(t,i,n,s){if(this.gridOptionsService.is("treeData"))t.setMaster(!1),s&&(t.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?t.setMaster(this.isRowMasterFunc(i)):t.setMaster(!0):t.setMaster(!1),s){let a=this.columnModel.getRowGroupColumns(),l=a?a.length:0,c=n+l;t.expanded=t.master?this.isExpanded(c):!1}}isExpanded(t){let i=this.gridOptionsService.getNum("groupDefaultExpanded");return i===-1?!0:t<i}}return r.TOP_LEVEL=0,r.ROOT_NODE_ID="ROOT_NODE_ID",r})();var Gn=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},wl=function(r){return r[r.Normal=0]="Normal",r[r.AfterFilter=1]="AfterFilter",r[r.AfterFilterAndSort=2]="AfterFilterAndSort",r[r.PivotNodes=3]="PivotNodes",r}(wl||{}),Ir=class extends L{constructor(){super(...arguments),this.onRowHeightChanged_debounced=Pe.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[]}init(){let e=this.refreshModel.bind(this,{step:ct.EVERYTHING}),t=!this.gridOptionsService.is("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:ct.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,w.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,w.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:ct.PIVOT})),this.addManagedListener(this.eventService,w.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,w.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,w.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this));let n=this.refreshModel.bind(this,{step:ct.MAP,keepRenderedRows:!0,animate:t});this.addManagedPropertyListeners(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"],n);let s=this.refreshModel.bind(this,{step:ct.AGGREGATE,keepRenderedRows:!0,animate:t});this.addManagedPropertyListeners(["groupIncludeTotalFooter"],s),this.rootNode=new Ge(this.beans),this.nodeManager=new bO(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans),this.addManagedPropertyListener("treeData",()=>{this.setRowData(this.rootNode.allLeafChildren.map(o=>o.data))})}start(){let e=this.gridOptionsService.get("rowData");e&&this.setRowData(e)}ensureRowHeightsValid(e,t,i,n){let s,o=!1;do{s=!1;let a=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(t),c=Math.max(a,i),d=Math.min(l,n);for(let u=c;u<=d;u++){let h=this.getRow(u);if(h.rowHeightEstimated){let p=this.gridOptionsService.getRowHeightForNode(h);h.setRowHeight(p.height),s=!0,o=!0}}s&&this.setRowTopAndRowIndex()}while(s);return o}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,i=new Set,n=this.gridOptionsService.isDomLayout("normal");for(let s=0;s<this.rowsToDisplay.length;s++){let o=this.rowsToDisplay[s];if(o.id!=null&&i.add(o.id),o.rowHeight==null){let a=this.gridOptionsService.getRowHeightForNode(o,n,e);o.setRowHeight(a.height,a.estimated)}o.setRowTop(t),o.setRowIndex(s),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){let i=e.isActive(),n=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},s=o=>{if(n(o),n(o.detailNode),n(o.sibling),o.hasChildren()&&o.childrenAfterGroup){let a=o.level==-1;i&&!a&&!o.expanded||o.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,i=0){let n=this.getRowIndexAtPixel(t),s=this.getRow(n),o=!this.gridOptionsService.is("suppressAnimationFrame");return s===e[0]?!1:(e.forEach(a=>{Pe.removeFromArray(this.rootNode.allLeafChildren,a)}),e.forEach((a,l)=>{Pe.insertIntoArray(this.rootNode.allLeafChildren,a,Math.max(n+i,0)+l)}),this.refreshModel({step:ct.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),!0)}highlightRowAtPixel(e,t){let i=t!=null?this.getRowIndexAtPixel(t):null,n=i!=null?this.getRow(i):null;if(!n||!e||n===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let s=this.getHighlightPosition(t,n);this.lastHighlightedRow&&this.lastHighlightedRow!==n&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),n.setHighlighted(s),this.lastHighlightedRow=n}getHighlightPosition(e,t){if(!t){let s=this.getRowIndexAtPixel(e);if(t=this.getRow(s||0),!t)return Rs.Below}let{rowTop:i,rowHeight:n}=t;return e-i<n/2?Rs.Above:Rs.Below}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.childrenAfterAggFilter;return t?t.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.is("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(Pe.missing(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ct.MAP,keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=this.gridOptionsService.isAnimateRows(),n=e.columns.length===0||e.columns.some(s=>s.isPrimary())?ct.FILTER:ct.FILTER_AGGREGATES;this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ct.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:ct.PIVOT}):this.refreshModel({step:ct.AGGREGATE})}createChangePath(e){let t=Pe.missingOrEmpty(e),i=new rl(!1,this.rootNode);return(t||this.gridOptionsService.is("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(n=>n.add!=null&&n.add.length>0||n.remove!=null&&n.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t=ct.EVERYTHING,i={everything:ct.EVERYTHING,group:ct.EVERYTHING,filter:ct.FILTER,map:ct.MAP,aggregate:ct.AGGREGATE,sort:ct.SORT,pivot:ct.PIVOT};if(Pe.exists(e)&&(t=i[e]),Pe.missing(t)){console.error(`AG Grid: invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}let n=!this.gridOptionsService.is("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n}}refreshModel(e){let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let i=this.createChangePath(t.rowNodeTransactions);switch(t.step){case ct.EVERYTHING:this.doRowGrouping(t.groupState,t.rowNodeTransactions,t.rowNodeOrder,i,!!t.afterColumnsChanged);case ct.FILTER:this.doFilter(i);case ct.PIVOT:this.doPivot(i);case ct.AGGREGATE:this.doAggregate(i);case ct.FILTER_AGGREGATES:this.doFilterAggregates(i);case ct.SORT:this.doSort(t.rowNodeTransactions,i);case ct.MAP:this.doRowsToDisplay()}let n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,n);let s={type:w.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(s)}isEmpty(){let e=Pe.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Pe.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return Pe.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!t,n=!1,s=[],o=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(a=>{if(n)return;if(i&&(a===t||a===e)&&(n=!0,a.group&&o)){s.push(...a.allLeafChildren);return}if(!i){if(a!==t&&a!==e)return;i=!0}if(!a.group||!o){s.push(a);return}}),s}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(Pe.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,o=-1;for(;;){let a=Math.floor((t+i)/2),l=this.rowsToDisplay[a];if(this.isRowInPixel(l,e)||(l.rowTop<e?t=a+1:l.rowTop>e&&(i=a-1),s===t&&o===i))return a;s=t,o=i}}isRowInPixel(e,t){let i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:wl.Normal,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:wl.AfterFilter,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:wl.AfterFilterAndSort,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:wl.PivotNodes,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){var t;let{nodes:i,callback:n,recursionType:s,includeFooterNodes:o}=e,{index:a}=e;for(let d=0;d<i.length;d++){let u=i[d];if(n(u,a++),u.hasChildren()&&!u.footer){let h=null;switch(s){case wl.Normal:h=u.childrenAfterGroup;break;case wl.AfterFilter:h=u.childrenAfterAggFilter;break;case wl.AfterFilterAndSort:h=u.childrenAfterSort;break;case wl.PivotNodes:h=u.leafGroup?null:u.childrenAfterSort;break}h&&(a=this.recursivelyWalkNodesAndCallback({nodes:[...h],callback:n,recursionType:s,index:a,includeFooterNodes:o}))}}let l=(t=i[0])===null||t===void 0?void 0:t.parent;if(!o||!l)return a;if(l===this.rootNode){if(!this.gridOptionsService.is("groupIncludeTotalFooter"))return a}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:l}))return a;return l.createFooter(),n(l.sibling,a++),a}doAggregate(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gridOptionsService.is("treeData"),i=this.columnModel.isPivotActive(),n=a=>{a&&a.forEach(l=>{let c=()=>{l.expanded=e,n(l.childrenAfterGroup)};if(t){Pe.exists(l.childrenAfterGroup)&&c();return}if(i){!l.leafGroup&&c();return}l.group&&c()})};this.rootNode&&n(this.rootNode.childrenAfterGroup),this.refreshModel({step:ct.MAP});let s=e?"expandAll":"collapseAll",o={type:w.EVENT_EXPAND_COLLAPSE_ALL,source:s};this.eventService.dispatchEvent(o)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,n,s){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:i,changedPath:n}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:s}),this.restoreGroupState(e)),this.gridOptionsService.is("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n)){let a={type:w.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(a)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()}restoreGroupState(e){e&&Pe.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(t,i)=>{typeof e[i]=="boolean"&&(t.expanded=e[i])})}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})}getGroupState(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;let e={};return Pe.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(t,i)=>e[i]=t.expanded),e}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(Ge.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(n=>{n.id===e&&(i=n)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){let t=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");let i={type:w.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:ct.EVERYTHING,groupState:t,newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let i=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(n=>{let s=this.nodeManager.updateRowData(n.rowDataTransaction,void 0);t.push(s),n.callback&&e.push(n.callback.bind(null,s)),typeof n.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(t,void 0,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0){let n={type:w.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(n)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();let i=this.nodeManager.updateRowData(e,t),n=typeof e.addIndex=="number";return this.commonUpdateRowData([i],t,n),i}createRowNodeOrder(){if(this.gridOptionsService.is("suppressMaintainUnsortedOrder"))return;let t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){let n=this.rootNode.allLeafChildren[i];t[n.id]=i}return t}commonUpdateRowData(e,t,i){let n=!this.gridOptionsService.is("suppressAnimationFrame");i&&(t=this.createRowNodeOrder()),this.refreshModel({step:ct.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n}),this.filterManager.onNewRowsLoaded("rowDataUpdated");let s={type:w.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(s)}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:ct.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}};Gn([y("columnModel")],Ir.prototype,"columnModel",void 0);Gn([y("selectionService")],Ir.prototype,"selectionService",void 0);Gn([y("filterManager")],Ir.prototype,"filterManager",void 0);Gn([y("valueCache")],Ir.prototype,"valueCache",void 0);Gn([y("beans")],Ir.prototype,"beans",void 0);Gn([y("filterStage")],Ir.prototype,"filterStage",void 0);Gn([y("sortStage")],Ir.prototype,"sortStage",void 0);Gn([y("flattenStage")],Ir.prototype,"flattenStage",void 0);Gn([He("groupStage")],Ir.prototype,"groupStage",void 0);Gn([He("aggregationStage")],Ir.prototype,"aggregationStage",void 0);Gn([He("pivotStage")],Ir.prototype,"pivotStage",void 0);Gn([He("filterAggregatesStage")],Ir.prototype,"filterAggregatesStage",void 0);Gn([G],Ir.prototype,"init",null);Ir=Gn([Y("rowModel")],Ir);var EO=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Qm=class extends L{execute(e){let{changedPath:t}=e;this.filterService.filter(t)}};EO([y("filterService")],Qm.prototype,"filterService",void 0);Qm=EO([Y("filterStage")],Qm);var BC=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Uu=class extends L{execute(e){let t=this.sortController.getSortOptions(),i=Pe.exists(t)&&t.length>0,n=i&&Pe.exists(e.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),s=t.some(o=>this.gridOptionsService.isColumnsSortingCoupledToGroup()?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(t,i,n,e.rowNodeTransactions,e.changedPath,s)}};BC([y("sortService")],Uu.prototype,"sortService",void 0);BC([y("sortController")],Uu.prototype,"sortController",void 0);BC([y("columnModel")],Uu.prototype,"columnModel",void 0);Uu=BC([Y("sortStage")],Uu);var tE=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Hp=class extends L{execute(e){let t=e.rowNode,i=[],n=this.columnModel.isPivotMode(),s=n&&t.leafGroup,o=s?[t]:t.childrenAfterSort,a=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(a,o,i,n,0);let l=i.length>0;return!s&&l&&a.groupIncludeTotalFooter&&(t.createFooter(),this.addRowNodeToRowsToDisplay(a,t.sibling,i,0)),i}getFlattenDetails(){let e=this.gridOptionsService.is("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gridOptionsService.is("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.is("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}}recursivelyAddToRowsToDisplay(e,t,i,n,s){if(!Pe.missingOrEmpty(t))for(let o=0;o<t.length;o++){let a=t[o],l=a.hasChildren(),c=n&&!l,d=e.groupRemoveSingleChildren&&l&&a.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&l&&a.leafGroup&&a.childrenAfterGroup.length===1,h=n&&a.leafGroup,p=e.hideOpenParents&&a.expanded&&!a.master&&!h;if(!c&&!p&&!d&&!u&&this.addRowNodeToRowsToDisplay(e,a,i,s),!(n&&a.leafGroup)){if(l){let g=d||u;if(a.expanded||g){let m=g?s:s+1;this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,i,n,m),e.getGroupIncludeFooter({node:a})?(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,i,m)):a.destroyFooter()}}else if(a.master&&a.expanded){let g=this.createDetailNode(a);this.addRowNodeToRowsToDisplay(e,g,i,s)}}}}addRowNodeToRowsToDisplay(e,t,i,n){i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}createDetailNode(e){if(Pe.exists(e.detailNode))return e.detailNode;let t=new Ge(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,Pe.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}};tE([y("columnModel")],Hp.prototype,"columnModel",void 0);tE([y("beans")],Hp.prototype,"beans",void 0);Hp=tE([Y("flattenStage")],Hp);var VC=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zu=class extends L{init(){this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")}sort(e,t,i,n,s,o){let a=this.gridOptionsService.is("groupMaintainOrder"),l=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive()),c={};i&&n&&(c=this.calculateDirtyNodes(n));let d=this.columnModel.isPivotMode(),u=h=>{this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);let p=d&&h.leafGroup;if(a&&l&&!h.leafGroup&&!o){let g=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort){let m={};h.childrenAfterSort.forEach((v,C)=>{m[v.id]=C}),g.sort((v,C)=>{var S,b;return((S=m[v.id])!==null&&S!==void 0?S:0)-((b=m[C.id])!==null&&b!==void 0?b:0)})}h.childrenAfterSort=g}else!t||p?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):i?h.childrenAfterSort=this.doDeltaSort(h,c,s,e):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,e);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),this.postSortFunc){let g={nodes:h.childrenAfterSort};this.postSortFunc(g)}};s&&s.forEachChangedNodeDepthFirst(u),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){let t={},i=n=>{n&&n.forEach(s=>t[s.id]=!0)};return e&&e.forEach(n=>{i(n.add),i(n.update),i(n.remove)}),t}doDeltaSort(e,t,i,n){let s=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(s,n);let a={},l=[];s.forEach(h=>{t[h.id]||!i.canSkip(h)?l.push(h):a[h.id]=!0});let c=o.filter(h=>a[h.id]),d=(h,p)=>({currentPos:p,rowNode:h}),u=l.map(d).sort((h,p)=>this.rowNodeSorter.compareRowNodes(n,h,p));return this.mergeSortedArrays(n,u,c.map(d)).map(({rowNode:h})=>h)}mergeSortedArrays(e,t,i){let n=[],s=0,o=0;for(;s<t.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,t[s],i[o])<0?n.push(t[s++]):n.push(i[o++]);for(;s<t.length;)n.push(t[s++]);for(;o<i.length;)n.push(i[o++]);return n}updateChildIndexes(e){if(Pe.missing(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let i=0;i<t.length;i++){let n=t[i],s=i===0,o=i===e.childrenAfterSort.length-1;n.setFirstChild(s),n.setLastChild(o),n.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gridOptionsService.is("groupHideOpenParents"))return;if(this.gridOptionsService.is("treeData")){let i="AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";return Pe.doOnce(()=>console.warn(i),"sortService.hideOpenParentsWithTreeData"),!1}let t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(n=>{n.hasChildren()&&t(n)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gridOptionsService.is("groupHideOpenParents")||Pe.missing(e)||e.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(s=>{let o=s.getColDef().showRowGroup;if(typeof o!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let a=o,l=this.columnModel.getPrimaryColumn(a);if(l!==i.rowGroupColumn)if(t)i.setGroupValue(s.getId(),void 0);else{let d=i.getFirstChildOfFirstChild(l);d&&i.setGroupValue(s.getId(),d.key)}})})}};VC([y("columnModel")],zu.prototype,"columnModel",void 0);VC([y("rowNodeSorter")],zu.prototype,"rowNodeSorter",void 0);VC([G],zu.prototype,"init",null);zu=VC([Y("sortService")],zu);var _O=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jm=class extends L{filter(e){let t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let i=(n,s)=>{n.hasChildren()&&e&&!s?n.childrenAfterFilter=n.childrenAfterGroup.filter(o=>{let a=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,l=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return a||l}):n.childrenAfterFilter=n.childrenAfterGroup,n.sibling&&(n.sibling.childrenAfterFilter=n.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let n=(o,a)=>{if(o.childrenAfterGroup)for(let l=0;l<o.childrenAfterGroup.length;l++){let c=o.childrenAfterGroup[l],d=a||this.filterManager.doesRowPassFilter({rowNode:c});c.childrenAfterGroup?n(o.childrenAfterGroup[l],d):i(c,d)}i(o,a)},s=o=>n(o,!1);t.executeFromRootNode(s)}else{let n=s=>i(s,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gridOptionsService.is("treeData")&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")}};_O([y("filterManager")],Jm.prototype,"filterManager",void 0);Jm=_O([Y("filterService")],Jm);var HC=function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ju=class extends L{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel)}isActive(){let e=this.gridOptionsService.exists("getRowId");return this.gridOptionsService.is("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let[i,n]=t;this.clientSideRowModel.updateRowData(i,n)}createTransactionForRowData(e){if(Pe.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}let t=this.gridOptionsService.getCallback("getRowId");if(t==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let i={remove:[],update:[],add:[]},n=this.clientSideRowModel.getCopyOfNodesMap(),o=this.gridOptionsService.is("suppressMaintainUnsortedOrder")?void 0:{};return Pe.exists(e)&&e.forEach((a,l)=>{let c=t({data:a,level:0}),d=n[c];o&&(o[c]=l),d?(d.data!==a&&i.update.push(a),n[c]=void 0):i.add.push(a)}),Pe.iterateObject(n,(a,l)=>{l&&i.remove.push(l.data)}),[i,o]}};HC([y("rowModel")],ju.prototype,"rowModel",void 0);HC([y("rowRenderer")],ju.prototype,"rowRenderer",void 0);HC([G],ju.prototype,"postConstruct",null);ju=HC([Y("immutableService")],ju);var TO="30.2.0";var Oo={version:TO,moduleName:he.ClientSideRowModelModule,rowModel:"clientSide",beans:[Ir,Qm,Uu,Hp,zu,Jm,ju]};var WC=(()=>{let e=class e extends ch{createQueryParams(i){let n={};for(let[s,o]of Object.entries(i)){if(o==null)continue;let a=encodeURIComponent(s),l=o??"";a.length!==0&&l.length!==0&&(n[a]=l)}return n}parseQueryParams(i){let n={};for(let[s,o]of Object.entries(i)){if(o==null)continue;let a=decodeURIComponent(s),l=o===""?null:decodeURIComponent(o);n[a]=l}return n}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var zc=(()=>{let e=class e{constructor(){this.http=ce(u1),this.veracityBaseUrl=ce(A0).api.veracity.url,this.objectBaseUrl=`${this.veracityBaseUrl}/objects`,this.ancestorsBaseUrl=`${this.veracityBaseUrl}/ancestors`,this.propertiesBaseUrl=`${this.veracityBaseUrl}/properties`}getObjects(i,n,s,o={}){return o.type=i,o.limit=n.toString(),s!==void 0&&(o.offset=s.toString()),this.http.get(`${this.objectBaseUrl}`,{params:o})}getObject(i,n,s,o){return this.http.get(`${this.objectBaseUrl}/${i}`,{params:{country:n,reference_period:s.toString(),valid_on:o.toISOString()}})}patchObject(i,n,s){return this.http.patch(`${this.objectBaseUrl}/${n}`,Ue(Te({},s),{type:i}))}postObject(i){return this.http.post(`${this.objectBaseUrl}`,i)}putAncestors(i,n){return this.http.put(`${this.ancestorsBaseUrl}/${i}`,n)}putProperties(i,n){return this.http.put(`${this.propertiesBaseUrl}/${i}`,n)}getCarbon(i,n,s,o){let a={country:n,valid_on:s.toISOString()};return o&&(a.reference_period=o.toString()),this.http.get(`${this.propertiesBaseUrl}/${i}`,{params:a}).pipe(fi(l=>{let c={};return Object.entries(ti).forEach(([d,u])=>{let h=l.find(p=>p.type===u);c[d]=h}),c}))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var RO=new gn("ADMIN_ROLE",{providedIn:"root",factory:()=>"Veracity.Admin"});var AO=new gn("EDITOR_ROLE",{providedIn:"root",factory:()=>"Veracity.Editor"});var DO=(()=>{let e=class e{constructor(){this.accountInfo$=ce(M1).accountInfo$,this.adminRole=ce(RO),this.editorRole=ce(AO),this.userIsAdmin$=this.accountInfo$.pipe(fi(i=>i?.idTokenClaims?.roles?.includes(this.adminRole)??!1)),this.userIsEditor$=this.accountInfo$.pipe(fi(i=>i?.idTokenClaims?.roles?.includes(this.editorRole)??!1)),this.userCanManageObjects$=hf([this.userIsAdmin$,this.userIsEditor$]).pipe(fi(([i,n])=>i||n))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var OO=(()=>{let e=class e extends kl{open(i,n,s){return super.open(i,n,s)}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var nF={};nF.version="0.20.0";var r0=1200,n0=1252,Hi,SB=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],wB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},sF=function(r){SB.indexOf(r)!=-1&&(n0=wB[0]=r)};function bB(){sF(1252)}var EB=function(r){r0=r,sF(r)};function _B(){EB(1200),bB()}var UC=function(e){return String.fromCharCode(e)};var ZC=null;var Us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function FO(r){for(var e="",t=0,i=0,n=0,s=0,o=0,a=0,l=0,c=0;c<r.length;)t=r.charCodeAt(c++),s=t>>2,i=r.charCodeAt(c++),o=(t&3)<<4|i>>4,n=r.charCodeAt(c++),a=(i&15)<<2|n>>6,l=n&63,isNaN(i)?a=l=64:isNaN(n)&&(l=64),e+=Us.charAt(s)+Us.charAt(o)+Us.charAt(a)+Us.charAt(l);return e}function TB(r){for(var e="",t=0,i=0,n=0,s=0,o=0,a=0,l=0,c=0;c<r.length;)t=r[c++],s=t>>2,i=r[c++],o=(t&3)<<4|i>>4,n=r[c++],a=(i&15)<<2|n>>6,l=n&63,isNaN(i)?a=l=64:isNaN(n)&&(l=64),e+=Us.charAt(s)+Us.charAt(o)+Us.charAt(a)+Us.charAt(l);return e}function PO(r){var e="",t=0,i=0,n=0,s=0,o=0,a=0,l=0;r=r.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var c=0;c<r.length;)s=Us.indexOf(r.charAt(c++)),o=Us.indexOf(r.charAt(c++)),t=s<<2|o>>4,e+=String.fromCharCode(t),a=Us.indexOf(r.charAt(c++)),i=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(i)),l=Us.indexOf(r.charAt(c++)),n=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(n));return e}var hi=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Yc=function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}(),QC=function(){if(typeof Buffer>"u")return!1;var r=Yc([65,0]);if(!r)return!1;var e=r.toString("utf16le");return e.length==1}();function Yp(r){return hi?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function IO(r){return hi?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Kc=function(e){return hi?Yc(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function ny(r){if(typeof ArrayBuffer>"u")return Kc(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),i=0;i!=r.length;++i)t[i]=r.charCodeAt(i)&255;return e}function RB(r){if(Array.isArray(r))return r.map(function(i){return String.fromCharCode(i)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function AB(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var Up=hi?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:Yc(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var i=new Uint8Array(t),n=0;for(e=0,t=0;e<r.length;t+=n,++e)n=r[e].length,r[e]instanceof Uint8Array?i.set(r[e],t):typeof r[e]=="string"?i.set(new Uint8Array(Kc(r[e])),t):i.set(new Uint8Array(r[e]),t);return i}return[].concat.apply([],r.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function DB(r){for(var e=[],t=0,i=r.length+250,n=Yp(r.length+255),s=0;s<r.length;++s){var o=r.charCodeAt(s);if(o<128)n[t++]=o;else if(o<2048)n[t++]=192|o>>6&31,n[t++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=r.charCodeAt(++s)&1023;n[t++]=240|o>>8&7,n[t++]=128|o>>2&63,n[t++]=128|a>>6&15|(o&3)<<4,n[t++]=128|a&63}else n[t++]=224|o>>12&15,n[t++]=128|o>>6&63,n[t++]=128|o&63;t>i&&(e.push(n.slice(0,t)),t=0,n=Yp(65535),i=65530)}return e.push(n.slice(0,t)),Up(e)}var Kp=/\u0000/g,zC=/[\u0001-\u0006]/g;function $p(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function Po(r,e){var t=""+r;return t.length>=e?t:Bn("0",e-t.length)+t}function dE(r,e){var t=""+r;return t.length>=e?t:Bn(" ",e-t.length)+t}function JC(r,e){var t=""+r;return t.length>=e?t:t+Bn(" ",e-t.length)}function OB(r,e){var t=""+Math.round(r);return t.length>=e?t:Bn("0",e-t.length)+t}function FB(r,e){var t=""+r;return t.length>=e?t:Bn("0",e-t.length)+t}var MO=Math.pow(2,32);function Wp(r,e){if(r>MO||r<-MO)return OB(r,e);var t=Math.round(r);return FB(t,e)}function ey(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var LO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],iE=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function PB(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "',r}var Mo={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "'},NO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},IB={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ty(r,e,t){for(var i=r<0?-1:1,n=r*i,s=0,o=1,a=0,l=1,c=0,d=0,u=Math.floor(n);c<e&&(u=Math.floor(n),a=u*o+s,d=u*c+l,!(n-u<5e-8));)n=1/(n-u),s=o,o=a,l=c,c=d;if(d>e&&(c>e?(d=l,a=s):(d=c,a=o)),!t)return[0,i*a,d];var h=Math.floor(i*a/d);return[h,i*a-h*d,d]}function jC(r,e,t){if(r>2958465||r<0)return null;var i=r|0,n=Math.floor(86400*(r-i)),s=0,o=[],a={D:i,T:n,u:86400*(r-i)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(i+=1462),a.u>.9999&&(a.u=0,++n==86400&&(a.T=n=0,++i,++a.D)),i===60)o=t?[1317,10,29]:[1900,2,29],s=3;else if(i===0)o=t?[1317,8,29]:[1900,1,0],s=6;else{i>60&&--i;var l=new Date(1900,0,1);l.setDate(l.getDate()+i-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),i<60&&(s=(s+6)%7),t&&(s=GB(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=n%60,n=Math.floor(n/60),a.M=n%60,n=Math.floor(n/60),a.H=n,a.q=s,a}function uE(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function MB(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function LB(r){var e=r<0?12:11,t=uE(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function NB(r){var e=uE(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function kB(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=LB(r):e===10?t=r.toFixed(10).substr(0,12):t=NB(r),uE(MB(t.toUpperCase()))}function oE(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):kB(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return s0(14,El(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function GB(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function BB(r,e,t,i){var n="",s=0,o=0,a=t.y,l,c=0;switch(r){case 98:a=t.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,c=2;break;default:l=a%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,c=e.length;break;case 3:return iE[t.m-1][1];case 5:return iE[t.m-1][0];default:return iE[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,c=e.length;break;case 3:return LO[t.q][0];default:return LO[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Po(t.S,e.length):(i>=2?o=i===3?1e3:100:o=i===1?10:1,s=Math.round(o*(t.S+t.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(n=Po(s,2+i),e==="ss"?n.substr(0,2):"."+n.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=a,c=1;break}var d=c>0?Po(l,c):"";return d}function $c(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,i=r.substr(0,t);t!=r.length;t+=e)i+=(i.length>0?",":"")+r.substr(t,e);return i}var oF=/%/g;function VB(r,e,t){var i=e.replace(oF,""),n=e.length-i.length;return bl(r,i,t*Math.pow(10,2*n))+Bn("%",n)}function HB(r,e,t){for(var i=e.length-1;e.charCodeAt(i-1)===44;)--i;return bl(r,e.substr(0,i),t/Math.pow(10,3*(e.length-i)))}function aF(r,e){var t,i=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+aF(r,-e);var n=r.indexOf(".");n===-1&&(n=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%n;if(s<0&&(s+=n),t=(e/Math.pow(10,s)).toPrecision(i+1+(n+s)%n),t.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+s):t+="E+"+(o-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,n)+"."+t.substr(2+n),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,d){return l+c+d.substr(0,(n+s)%n)+"."+d.substr(s)+"E"})}else t=e.toExponential(i);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var lF=/# (\?+)( ?)\/( ?)(\d+)/;function WB(r,e,t){var i=parseInt(r[4],10),n=Math.round(e*i),s=Math.floor(n/i),o=n-s*i,a=i;return t+(s===0?"":""+s)+" "+(o===0?Bn(" ",r[1].length+1+r[4].length):dE(o,r[1].length)+r[2]+"/"+r[3]+Po(a,r[4].length))}function UB(r,e,t){return t+(e===0?"":""+e)+Bn(" ",r[1].length+2+r[4].length)}var cF=/^#*0*\.([0#]+)/,dF=/\).*[0#]/,uF=/\(###\) ###\\?-####/;function hn(r){for(var e="",t,i=0;i!=r.length;++i)switch(t=r.charCodeAt(i)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function kO(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function GO(r,e){var t=r-Math.floor(r),i=Math.pow(10,e);return e<(""+Math.round(t*i)).length?0:Math.round(t*i)}function zB(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function jB(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function Ws(r,e,t){if(r.charCodeAt(0)===40&&!e.match(dF)){var i=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Ws("n",i,t):"("+Ws("n",i,-t)+")"}if(e.charCodeAt(e.length-1)===44)return HB(r,e,t);if(e.indexOf("%")!==-1)return VB(r,e,t);if(e.indexOf("E")!==-1)return aF(e,t);if(e.charCodeAt(0)===36)return"$"+Ws(r,e.substr(e.charAt(1)==" "?2:1),t);var n,s,o,a,l=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+Wp(l,e.length);if(e.match(/^[#?]+$/))return n=Wp(t,0),n==="0"&&(n=""),n.length>e.length?n:hn(e.substr(0,e.length-n.length))+n;if(s=e.match(lF))return WB(s,l,c);if(e.match(/^#+0+$/))return c+Wp(l,e.length-e.indexOf("0"));if(s=e.match(cF))return n=kO(t,s[1].length).replace(/^([^\.]+)$/,"$1."+hn(s[1])).replace(/\.$/,"."+hn(s[1])).replace(/\.(\d*)$/,function(f,g){return"."+g+Bn("0",hn(s[1]).length-g.length)}),e.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+kO(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+$c(Wp(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Ws(r,e,-t):$c(""+(Math.floor(t)+zB(t,s[1].length)))+"."+Po(GO(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Ws(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return n=$p(Ws(r,e.replace(/[\\-]/g,""),t)),o=0,$p($p(e.replace(/\\/g,"")).replace(/[0#]/g,function(f){return o<n.length?n.charAt(o++):f==="0"?"0":""}));if(e.match(uF))return n=Ws(r,"##########",t),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=ty(l,Math.pow(10,o)-1,!1),n=""+c,d=bl("n",s[1],a[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+s[2]+"/"+s[3],d=JC(a[2],o),d.length<s[4].length&&(d=hn(s[4].substr(s[4].length-d.length))+d),n+=d,n;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=ty(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?dE(a[1],o)+s[2]+"/"+s[3]+JC(a[2],o):Bn(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return n=Wp(t,0),e.length<=n.length?n:hn(e.substr(0,e.length-n.length))+n;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){n=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var u=e.indexOf(".")-o,h=e.length-n.length-u;return hn(e.substr(0,u)+n+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=GO(t,s[1].length),t<0?"-"+Ws(r,e,-t):$c(jB(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(f){return"00,"+(f.length<3?Po(0,3-f.length):"")+f})+"."+Po(o,s[1].length);switch(e){case"###,##0.00":return Ws(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=$c(Wp(l,0));return p!=="0"?c+p:"";case"###,###.00":return Ws(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Ws(r,"#,##0.00",t).replace(/^0\./,".");default:}throw new Error("unsupported format |"+e+"|")}function KB(r,e,t){for(var i=e.length-1;e.charCodeAt(i-1)===44;)--i;return bl(r,e.substr(0,i),t/Math.pow(10,3*(e.length-i)))}function $B(r,e,t){var i=e.replace(oF,""),n=e.length-i.length;return bl(r,i,t*Math.pow(10,2*n))+Bn("%",n)}function hF(r,e){var t,i=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+hF(r,-e);var n=r.indexOf(".");n===-1&&(n=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%n;if(s<0&&(s+=n),t=(e/Math.pow(10,s)).toPrecision(i+1+(n+s)%n),!t.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+s):t+="E+"+(o-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,d){return l+c+d.substr(0,(n+s)%n)+"."+d.substr(s)+"E"})}else t=e.toExponential(i);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Fa(r,e,t){if(r.charCodeAt(0)===40&&!e.match(dF)){var i=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Fa("n",i,t):"("+Fa("n",i,-t)+")"}if(e.charCodeAt(e.length-1)===44)return KB(r,e,t);if(e.indexOf("%")!==-1)return $B(r,e,t);if(e.indexOf("E")!==-1)return hF(e,t);if(e.charCodeAt(0)===36)return"$"+Fa(r,e.substr(e.charAt(1)==" "?2:1),t);var n,s,o,a,l=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+Po(l,e.length);if(e.match(/^[#?]+$/))return n=""+t,t===0&&(n=""),n.length>e.length?n:hn(e.substr(0,e.length-n.length))+n;if(s=e.match(lF))return UB(s,l,c);if(e.match(/^#+0+$/))return c+Po(l,e.length-e.indexOf("0"));if(s=e.match(cF))return n=(""+t).replace(/^([^\.]+)$/,"$1."+hn(s[1])).replace(/\.$/,"."+hn(s[1])),n=n.replace(/\.(\d*)$/,function(f,g){return"."+g+Bn("0",hn(s[1]).length-g.length)}),e.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+$c(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Fa(r,e,-t):$c(""+t)+"."+Bn("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Fa(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return n=$p(Fa(r,e.replace(/[\\-]/g,""),t)),o=0,$p($p(e.replace(/\\/g,"")).replace(/[0#]/g,function(f){return o<n.length?n.charAt(o++):f==="0"?"0":""}));if(e.match(uF))return n=Fa(r,"##########",t),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=ty(l,Math.pow(10,o)-1,!1),n=""+c,d=bl("n",s[1],a[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),n+=d+s[2]+"/"+s[3],d=JC(a[2],o),d.length<s[4].length&&(d=hn(s[4].substr(s[4].length-d.length))+d),n+=d,n;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=ty(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?dE(a[1],o)+s[2]+"/"+s[3]+JC(a[2],o):Bn(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return n=""+t,e.length<=n.length?n:hn(e.substr(0,e.length-n.length))+n;if(s=e.match(/^([#0]+)\.([#0]+)$/)){n=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=n.indexOf(".");var u=e.indexOf(".")-o,h=e.length-n.length-u;return hn(e.substr(0,u)+n+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Fa(r,e,-t):$c(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(f){return"00,"+(f.length<3?Po(0,3-f.length):"")+f})+"."+Po(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=$c(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return Fa(r,e.slice(0,e.lastIndexOf(".")),t)+hn(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function bl(r,e,t){return(t|0)===t?Fa(r,e,t):Ws(r,e,t)}function YB(r){for(var e=[],t=!1,i=0,n=0;i<r.length;++i)switch(r.charCodeAt(i)){case 34:t=!t;break;case 95:case 42:case 92:++i;break;case 59:e[e.length]=r.substr(n,i-n),n=i+1}if(e[e.length]=r.substr(n),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var pF=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function hE(r){for(var e=0,t="",i="";e<r.length;)switch(t=r.charAt(e)){case"G":ey(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4E0A":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348")return!0;++e;break;case"[":for(i=t;r.charAt(e++)!=="]"&&e<r.length;)i+=r.charAt(e);if(i.match(pF))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function XB(r,e,t,i){for(var n=[],s="",o=0,a="",l="t",c,d,u,h="H";o<r.length;)switch(a=r.charAt(o)){case"G":if(!ey(r,o))throw new Error("unrecognized character "+a+" in "+r);n[n.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(u=r.charCodeAt(++o))!==34&&o<r.length;)s+=String.fromCharCode(u);n[n.length]={t:"t",v:s},++o;break;case"\\":var p=r.charAt(++o),f=p==="("||p===")"?p:"t";n[n.length]={t:f,v:p},++o;break;case"_":n[n.length]={t:"t",v:" "},o+=2;break;case"@":n[n.length]={t:"T",v:e},++o;break;case"B":case"b":if(r.charAt(o+1)==="1"||r.charAt(o+1)==="2"){if(c==null&&(c=jC(e,t,r.charAt(o+1)==="2"),c==null))return"";n[n.length]={t:"X",v:r.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=jC(e,t),c==null))return"";for(s=a;++o<r.length&&r.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=h),n[n.length]={t:a,v:s},l=a;break;case"A":case"a":case"\u4E0A":var g={t:a,v:a};if(c==null&&(c=jC(e,t)),r.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?r.charAt(o+2):a),g.t="T",h="h",o+=3):r.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",o+=5,h="h"):r.substr(o,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348"?(c!=null&&(g.v=c.H>=12?"\u4E0B\u5348":"\u4E0A\u5348"),g.t="T",o+=5,h="h"):(g.t="t",++o),c==null&&g.t==="T")return"";n[n.length]=g,l=a;break;case"[":for(s=a;r.charAt(o++)!=="]"&&o<r.length;)s+=r.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(pF)){if(c==null&&(c=jC(e,t),c==null))return"";n[n.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",hE(r)||(n[n.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=a;++o<r.length&&(a=r.charAt(o))==="0";)s+=a;n[n.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<r.length&&"0#?.,E+-%".indexOf(a=r.charAt(o))>-1;)s+=a;n[n.length]={t:"n",v:s};break;case"?":for(s=a;r.charAt(++o)===a;)s+=a;n[n.length]={t:a,v:s},l=a;break;case"*":++o,(r.charAt(o)==" "||r.charAt(o)=="*")&&++o;break;case"(":case")":n[n.length]={t:i===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<r.length&&"0123456789".indexOf(r.charAt(++o))>-1;)s+=r.charAt(o);n[n.length]={t:"D",v:s};break;case" ":n[n.length]={t:a,v:a},++o;break;case"$":n[n.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=\u20ACacfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+r);n[n.length]={t:"t",v:a},++o;break}var m=0,v=0,C;for(o=n.length-1,l="t";o>=0;--o)switch(n[o].t){case"h":case"H":n[o].t=h,l="h",m<1&&(m=1);break;case"s":(C=n[o].v.match(/\.0+$/))&&(v=Math.max(v,C[0].length-1)),m<3&&(m=3);case"d":case"y":case"M":case"e":l=n[o].t;break;case"m":l==="s"&&(n[o].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&n[o].v.match(/[Hh]/)&&(m=1),m<2&&n[o].v.match(/[Mm]/)&&(m=2),m<3&&n[o].v.match(/[Ss]/)&&(m=3)}switch(m){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var S="",b;for(o=0;o<n.length;++o)switch(n[o].t){case"t":case"T":case" ":case"D":break;case"X":n[o].v="",n[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[o].v=BB(n[o].t.charCodeAt(0),n[o].v,c,v),n[o].t="t";break;case"n":case"?":for(b=o+1;n[b]!=null&&((a=n[b].t)==="?"||a==="D"||(a===" "||a==="t")&&n[b+1]!=null&&(n[b+1].t==="?"||n[b+1].t==="t"&&n[b+1].v==="/")||n[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(n[b].v==="/"||n[b].v===" "&&n[b+1]!=null&&n[b+1].t=="?"));)n[o].v+=n[b].v,n[b]={v:"",t:";"},++b;S+=n[o].v,o=b-1;break;case"G":n[o].t="t",n[o].v=oE(e,t);break}var T="",A,E;if(S.length>0){S.charCodeAt(0)==40?(A=e<0&&S.charCodeAt(0)===45?-e:e,E=bl("n",S,A)):(A=e<0&&i>1?-e:e,E=bl("n",S,A),A<0&&n[0]&&n[0].t=="t"&&(E=E.substr(1),n[0].v="-"+n[0].v)),b=E.length-1;var N=n.length;for(o=0;o<n.length;++o)if(n[o]!=null&&n[o].t!="t"&&n[o].v.indexOf(".")>-1){N=o;break}var M=n.length;if(N===n.length&&E.indexOf("E")===-1){for(o=n.length-1;o>=0;--o)n[o]==null||"n?".indexOf(n[o].t)===-1||(b>=n[o].v.length-1?(b-=n[o].v.length,n[o].v=E.substr(b+1,n[o].v.length)):b<0?n[o].v="":(n[o].v=E.substr(0,b+1),b=-1),n[o].t="t",M=o);b>=0&&M<n.length&&(n[M].v=E.substr(0,b+1)+n[M].v)}else if(N!==n.length&&E.indexOf("E")===-1){for(b=E.indexOf(".")-1,o=N;o>=0;--o)if(!(n[o]==null||"n?".indexOf(n[o].t)===-1)){for(d=n[o].v.indexOf(".")>-1&&o===N?n[o].v.indexOf(".")-1:n[o].v.length-1,T=n[o].v.substr(d+1);d>=0;--d)b>=0&&(n[o].v.charAt(d)==="0"||n[o].v.charAt(d)==="#")&&(T=E.charAt(b--)+T);n[o].v=T,n[o].t="t",M=o}for(b>=0&&M<n.length&&(n[M].v=E.substr(0,b+1)+n[M].v),b=E.indexOf(".")+1,o=N;o<n.length;++o)if(!(n[o]==null||"n?(".indexOf(n[o].t)===-1&&o!==N)){for(d=n[o].v.indexOf(".")>-1&&o===N?n[o].v.indexOf(".")+1:0,T=n[o].v.substr(0,d);d<n[o].v.length;++d)b<E.length&&(T+=E.charAt(b++));n[o].v=T,n[o].t="t",M=o}}}for(o=0;o<n.length;++o)n[o]!=null&&"n?".indexOf(n[o].t)>-1&&(A=i>1&&e<0&&o>0&&n[o-1].v==="-"?-e:e,n[o].v=bl(n[o].t,n[o].v,A),n[o].t="t");var k="";for(o=0;o!==n.length;++o)n[o]!=null&&(k+=n[o].v);return k}var BO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function VO(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function qB(r,e){var t=YB(r),i=t.length,n=t[i-1].indexOf("@");if(i<4&&n>-1&&--i,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||n>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=n>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=n>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=n>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break;case 4:break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[i,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var o=t[0].match(BO),a=t[1].match(BO);return VO(e,o)?[i,t[0]]:VO(e,a)?[i,t[1]]:[i,t[o!=null&&a!=null?2:1]]}return[i,s]}function s0(r,e,t){t==null&&(t={});var i="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?i=t.dateNF:i=r;break;case"number":r==14&&t.dateNF?i=t.dateNF:i=(t.table!=null?t.table:Mo)[r],i==null&&(i=t.table&&t.table[NO[r]]||Mo[NO[r]]),i==null&&(i=IB[r]||"General");break}if(ey(i,0))return oE(e,t);e instanceof Date&&(e=El(e,t.date1904));var n=qB(i,e);if(ey(n[1]))return oE(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return XB(n[1],e,t,n[0])}function fF(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(Mo[t]==null){e<0&&(e=t);continue}if(Mo[t]==r){e=t;break}}e<0&&(e=391)}return Mo[e]=r,e}function ZB(r){for(var e=0;e!=392;++e)r[e]!==void 0&&fF(r[e],e)}function QB(){Mo=PB()}var JB={"d.m":"d\\.m"};function eV(r,e){return fF(JB[r]||r,e)}var HO=function(){var r={};r.version="1.2.0";function e(){for(var E=0,N=new Array(256),M=0;M!=256;++M)E=M,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,N[M]=E;return typeof Int32Array<"u"?new Int32Array(N):N}var t=e();function i(E){var N=0,M=0,k=0,W=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)W[k]=E[k];for(k=0;k!=256;++k)for(M=E[k],N=256+k;N<4096;N+=256)M=W[N]=M>>>8^E[M&255];var ee=[];for(k=1;k!=16;++k)ee[k-1]=typeof Int32Array<"u"&&typeof W.subarray=="function"?W.subarray(k*256,k*256+256):W.slice(k*256,k*256+256);return ee}var n=i(t),s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],d=n[5],u=n[6],h=n[7],p=n[8],f=n[9],g=n[10],m=n[11],v=n[12],C=n[13],S=n[14];function b(E,N){for(var M=N^-1,k=0,W=E.length;k<W;)M=M>>>8^t[(M^E.charCodeAt(k++))&255];return~M}function T(E,N){for(var M=N^-1,k=E.length-15,W=0;W<k;)M=S[E[W++]^M&255]^C[E[W++]^M>>8&255]^v[E[W++]^M>>16&255]^m[E[W++]^M>>>24]^g[E[W++]]^f[E[W++]]^p[E[W++]]^h[E[W++]]^u[E[W++]]^d[E[W++]]^c[E[W++]]^l[E[W++]]^a[E[W++]]^o[E[W++]]^s[E[W++]]^t[E[W++]];for(k+=15;W<k;)M=M>>>8^t[(M^E[W++])&255];return~M}function A(E,N){for(var M=N^-1,k=0,W=E.length,ee=0,te=0;k<W;)ee=E.charCodeAt(k++),ee<128?M=M>>>8^t[(M^ee)&255]:ee<2048?(M=M>>>8^t[(M^(192|ee>>6&31))&255],M=M>>>8^t[(M^(128|ee&63))&255]):ee>=55296&&ee<57344?(ee=(ee&1023)+64,te=E.charCodeAt(k++)&1023,M=M>>>8^t[(M^(240|ee>>8&7))&255],M=M>>>8^t[(M^(128|ee>>2&63))&255],M=M>>>8^t[(M^(128|te>>6&15|(ee&3)<<4))&255],M=M>>>8^t[(M^(128|te&63))&255]):(M=M>>>8^t[(M^(224|ee>>12&15))&255],M=M>>>8^t[(M^(128|ee>>6&63))&255],M=M>>>8^t[(M^(128|ee&63))&255]);return~M}return r.table=t,r.bstr=b,r.buf=T,r.str=A,r}(),Fo=function(){var e={};e.version="1.2.2";function t(R,F){for(var D=R.split("/"),O=F.split("/"),P=0,I=0,z=Math.min(D.length,O.length);P<z;++P){if(I=D[P].length-O[P].length)return I;if(D[P]!=O[P])return D[P]<O[P]?-1:1}return D.length-O.length}function i(R){if(R.charAt(R.length-1)=="/")return R.slice(0,-1).indexOf("/")===-1?R:i(R.slice(0,-1));var F=R.lastIndexOf("/");return F===-1?R:R.slice(0,F+1)}function n(R){if(R.charAt(R.length-1)=="/")return n(R.slice(0,-1));var F=R.lastIndexOf("/");return F===-1?R:R.slice(F+1)}function s(R,F){typeof F=="string"&&(F=new Date(F));var D=F.getHours();D=D<<6|F.getMinutes(),D=D<<5|F.getSeconds()>>>1,R.write_shift(2,D);var O=F.getFullYear()-1980;O=O<<4|F.getMonth()+1,O=O<<5|F.getDate(),R.write_shift(2,O)}function o(R){var F=R.read_shift(2)&65535,D=R.read_shift(2)&65535,O=new Date,P=D&31;D>>>=5;var I=D&15;D>>>=4,O.setMilliseconds(0),O.setFullYear(D+1980),O.setMonth(I-1),O.setDate(P);var z=F&31;F>>>=5;var Q=F&63;return F>>>=6,O.setHours(F),O.setMinutes(Q),O.setSeconds(z<<1),O}function a(R){jc(R,0);for(var F={},D=0;R.l<=R.length-4;){var O=R.read_shift(2),P=R.read_shift(2),I=R.l+P,z={};switch(O){case 21589:D=R.read_shift(1),D&1&&(z.mtime=R.read_shift(4)),P>5&&(D&2&&(z.atime=R.read_shift(4)),D&4&&(z.ctime=R.read_shift(4))),z.mtime&&(z.mt=new Date(z.mtime*1e3));break;case 1:{var Q=R.read_shift(4),U=R.read_shift(4);z.usz=U*Math.pow(2,32)+Q,Q=R.read_shift(4),U=R.read_shift(4),z.csz=U*Math.pow(2,32)+Q}break}R.l=I,F[O]=z}return F}var l;function c(){return l||(l=e0)}function d(R,F){if(R[0]==80&&R[1]==75)return zE(R,F);if((R[0]|32)==109&&(R[1]|32)==105)return RP(R,F);if(R.length<512)throw new Error("CFB file size "+R.length+" < 512");var D=3,O=512,P=0,I=0,z=0,Q=0,U=0,j=[],K=R.slice(0,512);jc(K,0);var ae=u(K);switch(D=ae[0],D){case 3:O=512;break;case 4:O=4096;break;case 0:if(ae[1]==0)return zE(R,F);default:throw new Error("Major Version: Expected 3 or 4 saw "+D)}O!==512&&(K=R.slice(0,O),jc(K,28));var de=R.slice(0,O);h(K,D);var Ae=K.read_shift(4,"i");if(D===3&&Ae!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ae);K.l+=4,z=K.read_shift(4,"i"),K.l+=4,K.chk("00100000","Mini Stream Cutoff Size: "),Q=K.read_shift(4,"i"),P=K.read_shift(4,"i"),U=K.read_shift(4,"i"),I=K.read_shift(4,"i");for(var fe=-1,se=0;se<109&&(fe=K.read_shift(4,"i"),!(fe<0));++se)j[se]=fe;var Qe=p(R,O);m(U,I,Qe,O,j);var Zt=C(Qe,z,j,O);z<Zt.length&&(Zt[z].name="!Directory"),P>0&&Q!==te&&(Zt[Q].name="!MiniFAT"),Zt[j[0]].name="!FAT",Zt.fat_addrs=j,Zt.ssz=O;var fn={},Pi=[],zn=[],df=[];S(z,Zt,Qe,Pi,P,fn,zn,Q),f(zn,df,Pi),Pi.shift();var uf={FileIndex:zn,FullPaths:df};return F&&F.raw&&(uf.raw={header:de,sectors:Qe}),uf}function u(R){if(R[R.l]==80&&R[R.l+1]==75)return[0,0];R.chk(le,"Header Signature: "),R.l+=16;var F=R.read_shift(2,"u");return[R.read_shift(2,"u"),F]}function h(R,F){var D=9;switch(R.l+=2,D=R.read_shift(2)){case 9:if(F!=3)throw new Error("Sector Shift: Expected 9 saw "+D);break;case 12:if(F!=4)throw new Error("Sector Shift: Expected 12 saw "+D);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+D)}R.chk("0600","Mini Sector Shift: "),R.chk("000000000000","Reserved: ")}function p(R,F){for(var D=Math.ceil(R.length/F)-1,O=[],P=1;P<D;++P)O[P-1]=R.slice(P*F,(P+1)*F);return O[D-1]=R.slice(D*F),O}function f(R,F,D){for(var O=0,P=0,I=0,z=0,Q=0,U=D.length,j=[],K=[];O<U;++O)j[O]=K[O]=O,F[O]=D[O];for(;Q<K.length;++Q)O=K[Q],P=R[O].L,I=R[O].R,z=R[O].C,j[O]===O&&(P!==-1&&j[P]!==P&&(j[O]=j[P]),I!==-1&&j[I]!==I&&(j[O]=j[I])),z!==-1&&(j[z]=O),P!==-1&&O!=j[O]&&(j[P]=j[O],K.lastIndexOf(P)<Q&&K.push(P)),I!==-1&&O!=j[O]&&(j[I]=j[O],K.lastIndexOf(I)<Q&&K.push(I));for(O=1;O<U;++O)j[O]===O&&(I!==-1&&j[I]!==I?j[O]=j[I]:P!==-1&&j[P]!==P&&(j[O]=j[P]));for(O=1;O<U;++O)if(R[O].type!==0){if(Q=O,Q!=j[Q])do Q=j[Q],F[O]=F[Q]+"/"+F[O];while(Q!==0&&j[Q]!==-1&&Q!=j[Q]);j[O]=-1}for(F[0]+="/",O=1;O<U;++O)R[O].type!==2&&(F[O]+="/")}function g(R,F,D){for(var O=R.start,P=R.size,I=[],z=O;D&&P>0&&z>=0;)I.push(F.slice(z*ee,z*ee+ee)),P-=ee,z=jp(D,z*4);return I.length===0?Oa(0):Up(I).slice(0,R.size)}function m(R,F,D,O,P){var I=te;if(R===te){if(F!==0)throw new Error("DIFAT chain shorter than expected")}else if(R!==-1){var z=D[R],Q=(O>>>2)-1;if(!z)return;for(var U=0;U<Q&&(I=jp(z,U*4))!==te;++U)P.push(I);F>=1&&m(jp(z,O-4),F-1,D,O,P)}}function v(R,F,D,O,P){var I=[],z=[];P||(P=[]);var Q=O-1,U=0,j=0;for(U=F;U>=0;){P[U]=!0,I[I.length]=U,z.push(R[U]);var K=D[Math.floor(U*4/O)];if(j=U*4&Q,O<4+j)throw new Error("FAT boundary crossed: "+U+" 4 "+O);if(!R[K])break;U=jp(R[K],j)}return{nodes:I,data:YO([z])}}function C(R,F,D,O){var P=R.length,I=[],z=[],Q=[],U=[],j=O-1,K=0,ae=0,de=0,Ae=0;for(K=0;K<P;++K)if(Q=[],de=K+F,de>=P&&(de-=P),!z[de]){U=[];var fe=[];for(ae=de;ae>=0;){fe[ae]=!0,z[ae]=!0,Q[Q.length]=ae,U.push(R[ae]);var se=D[Math.floor(ae*4/O)];if(Ae=ae*4&j,O<4+Ae)throw new Error("FAT boundary crossed: "+ae+" 4 "+O);if(!R[se]||(ae=jp(R[se],Ae),fe[ae]))break}I[de]={nodes:Q,data:YO([U])}}return I}function S(R,F,D,O,P,I,z,Q){for(var U=0,j=O.length?2:0,K=F[R].data,ae=0,de=0,Ae;ae<K.length;ae+=128){var fe=K.slice(ae,ae+128);jc(fe,64),de=fe.read_shift(2),Ae=oy(fe,0,de-j),O.push(Ae);var se={name:Ae,type:fe.read_shift(1),color:fe.read_shift(1),L:fe.read_shift(4,"i"),R:fe.read_shift(4,"i"),C:fe.read_shift(4,"i"),clsid:fe.read_shift(16),state:fe.read_shift(4,"i"),start:0,size:0},Qe=fe.read_shift(2)+fe.read_shift(2)+fe.read_shift(2)+fe.read_shift(2);Qe!==0&&(se.ct=b(fe,fe.l-8));var Zt=fe.read_shift(2)+fe.read_shift(2)+fe.read_shift(2)+fe.read_shift(2);Zt!==0&&(se.mt=b(fe,fe.l-8)),se.start=fe.read_shift(4,"i"),se.size=fe.read_shift(4,"i"),se.size<0&&se.start<0&&(se.size=se.type=0,se.start=te,se.name=""),se.type===5?(U=se.start,P>0&&U!==te&&(F[U].name="!StreamData")):se.size>=4096?(se.storage="fat",F[se.start]===void 0&&(F[se.start]=v(D,se.start,F.fat_addrs,F.ssz)),F[se.start].name=se.name,se.content=F[se.start].data.slice(0,se.size)):(se.storage="minifat",se.size<0?se.size=0:U!==te&&se.start!==te&&F[U]&&(se.content=g(se,F[U].data,(F[Q]||{}).data))),se.content&&jc(se.content,0),I[Ae]=se,z.push(se)}}function b(R,F){return new Date((yr(R,F+4)/1e7*Math.pow(2,32)+yr(R,F)/1e7-11644473600)*1e3)}function T(R,F){return c(),d(l.readFileSync(R),F)}function A(R,F){var D=F&&F.type;switch(D||hi&&Buffer.isBuffer(R)&&(D="buffer"),D||"base64"){case"file":return T(R,F);case"base64":return d(Kc(PO(R)),F);case"binary":return d(Kc(R),F)}return d(R,F)}function E(R,F){var D=F||{},O=D.root||"Root Entry";if(R.FullPaths||(R.FullPaths=[]),R.FileIndex||(R.FileIndex=[]),R.FullPaths.length!==R.FileIndex.length)throw new Error("inconsistent CFB structure");R.FullPaths.length===0&&(R.FullPaths[0]=O+"/",R.FileIndex[0]={name:O,type:5}),D.CLSID&&(R.FileIndex[0].clsid=D.CLSID),N(R)}function N(R){var F="Sh33tJ5";if(!Fo.find(R,"/"+F)){var D=Oa(4);D[0]=55,D[1]=D[3]=50,D[2]=54,R.FileIndex.push({name:F,type:2,content:D,size:4,L:69,R:69,C:69}),R.FullPaths.push(R.FullPaths[0]+F),M(R)}}function M(R,F){E(R);for(var D=!1,O=!1,P=R.FullPaths.length-1;P>=0;--P){var I=R.FileIndex[P];switch(I.type){case 0:O?D=!0:(R.FileIndex.pop(),R.FullPaths.pop());break;case 1:case 2:case 5:O=!0,isNaN(I.R*I.L*I.C)&&(D=!0),I.R>-1&&I.L>-1&&I.R==I.L&&(D=!0);break;default:D=!0;break}}if(!(!D&&!F)){var z=new Date(1987,1,19),Q=0,U=Object.create?Object.create(null):{},j=[];for(P=0;P<R.FullPaths.length;++P)U[R.FullPaths[P]]=!0,R.FileIndex[P].type!==0&&j.push([R.FullPaths[P],R.FileIndex[P]]);for(P=0;P<j.length;++P){var K=i(j[P][0]);for(O=U[K];!O;){for(;i(K)&&!U[i(K)];)K=i(K);j.push([K,{name:n(K).replace("/",""),type:1,clsid:Xe,ct:z,mt:z,content:null}]),U[K]=!0,K=i(j[P][0]),O=U[K]}}for(j.sort(function(Ae,fe){return t(Ae[0],fe[0])}),R.FullPaths=[],R.FileIndex=[],P=0;P<j.length;++P)R.FullPaths[P]=j[P][0],R.FileIndex[P]=j[P][1];for(P=0;P<j.length;++P){var ae=R.FileIndex[P],de=R.FullPaths[P];if(ae.name=n(de).replace("/",""),ae.L=ae.R=ae.C=-(ae.color=1),ae.size=ae.content?ae.content.length:0,ae.start=0,ae.clsid=ae.clsid||Xe,P===0)ae.C=j.length>1?1:-1,ae.size=0,ae.type=5;else if(de.slice(-1)=="/"){for(Q=P+1;Q<j.length&&i(R.FullPaths[Q])!=de;++Q);for(ae.C=Q>=j.length?-1:Q,Q=P+1;Q<j.length&&i(R.FullPaths[Q])!=i(de);++Q);ae.R=Q>=j.length?-1:Q,ae.type=1}else i(R.FullPaths[P+1]||"")==i(de)&&(ae.R=P+1),ae.type=2}}}function k(R,F){var D=F||{};if(D.fileType=="mad")return AP(R,D);switch(M(R),D.fileType){case"zip":return SP(R,D)}var O=function(Ae){for(var fe=0,se=0,Qe=0;Qe<Ae.FileIndex.length;++Qe){var Zt=Ae.FileIndex[Qe];if(Zt.content){var fn=Zt.content.length;fn>0&&(fn<4096?fe+=fn+63>>6:se+=fn+511>>9)}}for(var Pi=Ae.FullPaths.length+3>>2,zn=fe+7>>3,df=fe+127>>7,uf=zn+se+Pi+df,fd=uf+127>>7,vy=fd<=109?0:Math.ceil((fd-109)/127);uf+fd+vy+127>>7>fd;)vy=++fd<=109?0:Math.ceil((fd-109)/127);var ka=[1,vy,fd,df,Pi,se,fe,0];return Ae.FileIndex[0].size=fe<<6,ka[7]=(Ae.FileIndex[0].start=ka[0]+ka[1]+ka[2]+ka[3]+ka[4]+ka[5])+(ka[6]+7>>3),ka}(R),P=Oa(O[7]<<9),I=0,z=0;{for(I=0;I<8;++I)P.write_shift(1,Ye[I]);for(I=0;I<8;++I)P.write_shift(2,0);for(P.write_shift(2,62),P.write_shift(2,3),P.write_shift(2,65534),P.write_shift(2,9),P.write_shift(2,6),I=0;I<3;++I)P.write_shift(2,0);for(P.write_shift(4,0),P.write_shift(4,O[2]),P.write_shift(4,O[0]+O[1]+O[2]+O[3]-1),P.write_shift(4,0),P.write_shift(4,4096),P.write_shift(4,O[3]?O[0]+O[1]+O[2]-1:te),P.write_shift(4,O[3]),P.write_shift(-4,O[1]?O[0]-1:te),P.write_shift(4,O[1]),I=0;I<109;++I)P.write_shift(-4,I<O[2]?O[1]+I:-1)}if(O[1])for(z=0;z<O[1];++z){for(;I<236+z*127;++I)P.write_shift(-4,I<O[2]?O[1]+I:-1);P.write_shift(-4,z===O[1]-1?te:z+1)}var Q=function(Ae){for(z+=Ae;I<z-1;++I)P.write_shift(-4,I+1);Ae&&(++I,P.write_shift(-4,te))};for(z=I=0,z+=O[1];I<z;++I)P.write_shift(-4,Ke.DIFSECT);for(z+=O[2];I<z;++I)P.write_shift(-4,Ke.FATSECT);Q(O[3]),Q(O[4]);for(var U=0,j=0,K=R.FileIndex[0];U<R.FileIndex.length;++U)K=R.FileIndex[U],K.content&&(j=K.content.length,!(j<4096)&&(K.start=z,Q(j+511>>9)));for(Q(O[6]+7>>3);P.l&511;)P.write_shift(-4,Ke.ENDOFCHAIN);for(z=I=0,U=0;U<R.FileIndex.length;++U)K=R.FileIndex[U],K.content&&(j=K.content.length,!(!j||j>=4096)&&(K.start=z,Q(j+63>>6)));for(;P.l&511;)P.write_shift(-4,Ke.ENDOFCHAIN);for(I=0;I<O[4]<<2;++I){var ae=R.FullPaths[I];if(!ae||ae.length===0){for(U=0;U<17;++U)P.write_shift(4,0);for(U=0;U<3;++U)P.write_shift(4,-1);for(U=0;U<12;++U)P.write_shift(4,0);continue}K=R.FileIndex[I],I===0&&(K.start=K.size?K.start-1:te);var de=I===0&&D.root||K.name;if(de.length>32&&(console.error("Name "+de+" will be truncated to "+de.slice(0,32)),de=de.slice(0,32)),j=2*(de.length+1),P.write_shift(64,de,"utf16le"),P.write_shift(2,j),P.write_shift(1,K.type),P.write_shift(1,K.color),P.write_shift(-4,K.L),P.write_shift(-4,K.R),P.write_shift(-4,K.C),K.clsid)P.write_shift(16,K.clsid,"hex");else for(U=0;U<4;++U)P.write_shift(4,0);P.write_shift(4,K.state||0),P.write_shift(4,0),P.write_shift(4,0),P.write_shift(4,0),P.write_shift(4,0),P.write_shift(4,K.start),P.write_shift(4,K.size),P.write_shift(4,0)}for(I=1;I<R.FileIndex.length;++I)if(K=R.FileIndex[I],K.size>=4096)if(P.l=K.start+1<<9,hi&&Buffer.isBuffer(K.content))K.content.copy(P,P.l,0,K.size),P.l+=K.size+511&-512;else{for(U=0;U<K.size;++U)P.write_shift(1,K.content[U]);for(;U&511;++U)P.write_shift(1,0)}for(I=1;I<R.FileIndex.length;++I)if(K=R.FileIndex[I],K.size>0&&K.size<4096)if(hi&&Buffer.isBuffer(K.content))K.content.copy(P,P.l,0,K.size),P.l+=K.size+63&-64;else{for(U=0;U<K.size;++U)P.write_shift(1,K.content[U]);for(;U&63;++U)P.write_shift(1,0)}if(hi)P.l=P.length;else for(;P.l<P.length;)P.write_shift(1,0);return P}function W(R,F){var D=R.FullPaths.map(function(U){return U.toUpperCase()}),O=D.map(function(U){var j=U.split("/");return j[j.length-(U.slice(-1)=="/"?2:1)]}),P=!1;F.charCodeAt(0)===47?(P=!0,F=D[0].slice(0,-1)+F):P=F.indexOf("/")!==-1;var I=F.toUpperCase(),z=P===!0?D.indexOf(I):O.indexOf(I);if(z!==-1)return R.FileIndex[z];var Q=!I.match(zC);for(I=I.replace(Kp,""),Q&&(I=I.replace(zC,"!")),z=0;z<D.length;++z)if((Q?D[z].replace(zC,"!"):D[z]).replace(Kp,"")==I||(Q?O[z].replace(zC,"!"):O[z]).replace(Kp,"")==I)return R.FileIndex[z];return null}var ee=64,te=-2,le="d0cf11e0a1b11ae1",Ye=[208,207,17,224,161,177,26,225],Xe="00000000000000000000000000000000",Ke={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:te,FREESECT:-1,HEADER_SIGNATURE:le,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Xe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Je(R,F,D){c();var O=k(R,D);l.writeFileSync(F,O)}function et(R){for(var F=new Array(R.length),D=0;D<R.length;++D)F[D]=String.fromCharCode(R[D]);return F.join("")}function St(R,F){var D=k(R,F);switch(F&&F.type||"buffer"){case"file":return c(),l.writeFileSync(F.filename,D),D;case"binary":return typeof D=="string"?D:et(D);case"base64":return FO(typeof D=="string"?D:et(D));case"buffer":if(hi)return Buffer.isBuffer(D)?D:Yc(D);case"array":return typeof D=="string"?Kc(D):D}return D}var wt;function jt(R){try{var F=R.InflateRaw,D=new F;if(D._processChunk(new Uint8Array([3,0]),D._finishFlushFlag),D.bytesRead)wt=R;else throw new Error("zlib does not expose bytesRead")}catch(O){console.error("cannot use native zlib: "+(O.message||O))}}function er(R,F){if(!wt)return WE(R,F);var D=wt.InflateRaw,O=new D,P=O._processChunk(R.slice(R.l),O._finishFlushFlag);return R.l+=O.bytesRead,P}function Sr(R){return wt?wt.deflateRawSync(R):lf(R)}var we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ct=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],dt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ii(R){var F=(R<<1|R<<11)&139536|(R<<5|R<<15)&558144;return(F>>16|F>>8|F)&255}for(var st=typeof Uint8Array<"u",bi=st?new Uint8Array(256):[],Lt=0;Lt<256;++Lt)bi[Lt]=ii(Lt);function Hn(R,F){var D=bi[R&255];return F<=8?D>>>8-F:(D=D<<8|bi[R>>8&255],F<=16?D>>>16-F:(D=D<<8|bi[R>>16&255],D>>>24-F))}function Wn(R,F){var D=F&7,O=F>>>3;return(R[O]|(D<=6?0:R[O+1]<<8))>>>D&3}function $s(R,F){var D=F&7,O=F>>>3;return(R[O]|(D<=5?0:R[O+1]<<8))>>>D&7}function ko(R,F){var D=F&7,O=F>>>3;return(R[O]|(D<=4?0:R[O+1]<<8))>>>D&15}function Fi(R,F){var D=F&7,O=F>>>3;return(R[O]|(D<=3?0:R[O+1]<<8))>>>D&31}function La(R,F){var D=F&7,O=F>>>3;return(R[O]|(D<=1?0:R[O+1]<<8))>>>D&127}function Un(R,F,D){var O=F&7,P=F>>>3,I=(1<<D)-1,z=R[P]>>>O;return D<8-O||(z|=R[P+1]<<8-O,D<16-O)||(z|=R[P+2]<<16-O,D<24-O)||(z|=R[P+3]<<24-O),z&I}function Rl(R,F,D){var O=F&7,P=F>>>3;return O<=5?R[P]|=(D&7)<<O:(R[P]|=D<<O&255,R[P+1]=(D&7)>>8-O),F+3}function Jr(R,F,D){var O=F&7,P=F>>>3;return D=(D&1)<<O,R[P]|=D,F+1}function Ys(R,F,D){var O=F&7,P=F>>>3;return D<<=O,R[P]|=D&255,D>>>=8,R[P+1]=D,F+8}function Xu(R,F,D){var O=F&7,P=F>>>3;return D<<=O,R[P]|=D&255,D>>>=8,R[P+1]=D&255,R[P+2]=D>>>8,F+16}function Al(R,F){var D=R.length,O=2*D>F?2*D:F+5,P=0;if(D>=F)return R;if(hi){var I=IO(O);if(R.copy)R.copy(I);else for(;P<R.length;++P)I[P]=R[P];return I}else if(st){var z=new Uint8Array(O);if(z.set)z.set(R);else for(;P<D;++P)z[P]=R[P];return z}return R.length=O,R}function Mr(R){for(var F=new Array(R),D=0;D<R;++D)F[D]=0;return F}function qu(R,F,D){var O=1,P=0,I=0,z=0,Q=0,U=R.length,j=st?new Uint16Array(32):Mr(32);for(I=0;I<32;++I)j[I]=0;for(I=U;I<D;++I)R[I]=0;U=R.length;var K=st?new Uint16Array(U):Mr(U);for(I=0;I<U;++I)j[P=R[I]]++,O<P&&(O=P),K[I]=0;for(j[0]=0,I=1;I<=O;++I)j[I+16]=Q=Q+j[I-1]<<1;for(I=0;I<U;++I)Q=R[I],Q!=0&&(K[I]=j[Q+16]++);var ae=0;for(I=0;I<U;++I)if(ae=R[I],ae!=0)for(Q=Hn(K[I],O)>>O-ae,z=(1<<O+4-ae)-1;z>=0;--z)F[Q|z<<ae]=ae&15|I<<4;return O}var af=st?new Uint16Array(512):Mr(512),Zu=st?new Uint16Array(32):Mr(32);if(!st){for(var Na=0;Na<512;++Na)af[Na]=0;for(Na=0;Na<32;++Na)Zu[Na]=0}(function(){for(var R=[],F=0;F<32;F++)R.push(5);qu(R,Zu,32);var D=[];for(F=0;F<=143;F++)D.push(8);for(;F<=255;F++)D.push(9);for(;F<=279;F++)D.push(7);for(;F<=287;F++)D.push(8);qu(D,af,288)})();var u0=function(){for(var F=st?new Uint8Array(32768):[],D=0,O=0;D<dt.length-1;++D)for(;O<dt[D+1];++O)F[O]=D;for(;O<32768;++O)F[O]=29;var P=st?new Uint8Array(259):[];for(D=0,O=0;D<Ct.length-1;++D)for(;O<Ct[D+1];++O)P[O]=D;function I(Q,U){for(var j=0;j<Q.length;){var K=Math.min(65535,Q.length-j),ae=j+K==Q.length;for(U.write_shift(1,+ae),U.write_shift(2,K),U.write_shift(2,~K&65535);K-- >0;)U[U.l++]=Q[j++]}return U.l}function z(Q,U){for(var j=0,K=0,ae=st?new Uint16Array(32768):[];K<Q.length;){var de=Math.min(65535,Q.length-K);if(de<10){for(j=Rl(U,j,+(K+de==Q.length)),j&7&&(j+=8-(j&7)),U.l=j/8|0,U.write_shift(2,de),U.write_shift(2,~de&65535);de-- >0;)U[U.l++]=Q[K++];j=U.l*8;continue}j=Rl(U,j,+(K+de==Q.length)+2);for(var Ae=0;de-- >0;){var fe=Q[K];Ae=(Ae<<5^fe)&32767;var se=-1,Qe=0;if((se=ae[Ae])&&(se|=K&-32768,se>K&&(se-=32768),se<K))for(;Q[se+Qe]==Q[K+Qe]&&Qe<250;)++Qe;if(Qe>2){fe=P[Qe],fe<=22?j=Ys(U,j,bi[fe+1]>>1)-1:(Ys(U,j,3),j+=5,Ys(U,j,bi[fe-23]>>5),j+=3);var Zt=fe<8?0:fe-4>>2;Zt>0&&(Xu(U,j,Qe-Ct[fe]),j+=Zt),fe=F[K-se],j=Ys(U,j,bi[fe]>>3),j-=3;var fn=fe<4?0:fe-2>>1;fn>0&&(Xu(U,j,K-se-dt[fe]),j+=fn);for(var Pi=0;Pi<Qe;++Pi)ae[Ae]=K&32767,Ae=(Ae<<5^Q[K])&32767,++K;de-=Qe-1}else fe<=143?fe=fe+48:j=Jr(U,j,1),j=Ys(U,j,bi[fe]),ae[Ae]=K&32767,++K}j=Ys(U,j,0)-1}return U.l=(j+7)/8|0,U.l}return function(U,j){return U.length<8?I(U,j):z(U,j)}}();function lf(R){var F=Oa(50+Math.floor(R.length*1.1)),D=u0(R,F);return F.slice(0,D)}var cf=st?new Uint16Array(32768):Mr(32768),GE=st?new Uint16Array(32768):Mr(32768),BE=st?new Uint16Array(128):Mr(128),VE=1,HE=1;function CP(R,F){var D=Fi(R,F)+257;F+=5;var O=Fi(R,F)+1;F+=5;var P=ko(R,F)+4;F+=4;for(var I=0,z=st?new Uint8Array(19):Mr(19),Q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],U=1,j=st?new Uint8Array(8):Mr(8),K=st?new Uint8Array(8):Mr(8),ae=z.length,de=0;de<P;++de)z[we[de]]=I=$s(R,F),U<I&&(U=I),j[I]++,F+=3;var Ae=0;for(j[0]=0,de=1;de<=U;++de)K[de]=Ae=Ae+j[de-1]<<1;for(de=0;de<ae;++de)(Ae=z[de])!=0&&(Q[de]=K[Ae]++);var fe=0;for(de=0;de<ae;++de)if(fe=z[de],fe!=0){Ae=bi[Q[de]]>>8-fe;for(var se=(1<<7-fe)-1;se>=0;--se)BE[Ae|se<<fe]=fe&7|de<<3}var Qe=[];for(U=1;Qe.length<D+O;)switch(Ae=BE[La(R,F)],F+=Ae&7,Ae>>>=3){case 16:for(I=3+Wn(R,F),F+=2,Ae=Qe[Qe.length-1];I-- >0;)Qe.push(Ae);break;case 17:for(I=3+$s(R,F),F+=3;I-- >0;)Qe.push(0);break;case 18:for(I=11+La(R,F),F+=7;I-- >0;)Qe.push(0);break;default:Qe.push(Ae),U<Ae&&(U=Ae);break}var Zt=Qe.slice(0,D),fn=Qe.slice(D);for(de=D;de<286;++de)Zt[de]=0;for(de=O;de<30;++de)fn[de]=0;return VE=qu(Zt,cf,286),HE=qu(fn,GE,30),F}function yP(R,F){if(R[0]==3&&!(R[1]&3))return[Yp(F),2];for(var D=0,O=0,P=IO(F||1<<18),I=0,z=P.length>>>0,Q=0,U=0;!(O&1);){if(O=$s(R,D),D+=3,O>>>1)O>>1==1?(Q=9,U=5):(D=CP(R,D),Q=VE,U=HE);else{D&7&&(D+=8-(D&7));var j=R[D>>>3]|R[(D>>>3)+1]<<8;if(D+=32,j>0)for(!F&&z<I+j&&(P=Al(P,I+j),z=P.length);j-- >0;)P[I++]=R[D>>>3],D+=8;continue}for(;;){!F&&z<I+32767&&(P=Al(P,I+32767),z=P.length);var K=Un(R,D,Q),ae=O>>>1==1?af[K]:cf[K];if(D+=ae&15,ae>>>=4,!(ae>>>8&255))P[I++]=ae;else{if(ae==256)break;ae-=257;var de=ae<8?0:ae-4>>2;de>5&&(de=0);var Ae=I+Ct[ae];de>0&&(Ae+=Un(R,D,de),D+=de),K=Un(R,D,U),ae=O>>>1==1?Zu[K]:GE[K],D+=ae&15,ae>>>=4;var fe=ae<4?0:ae-2>>1,se=dt[ae];for(fe>0&&(se+=Un(R,D,fe),D+=fe),!F&&z<Ae&&(P=Al(P,Ae+100),z=P.length);I<Ae;)P[I]=P[I-se],++I}}}return F?[P,D+7>>>3]:[P.slice(0,I),D+7>>>3]}function WE(R,F){var D=R.slice(R.l||0),O=yP(D,F);return R.l+=O[1],O[0]}function UE(R,F){if(R)typeof console<"u"&&console.error(F);else throw new Error(F)}function zE(R,F){var D=R;jc(D,0);var O=[],P=[],I={FileIndex:O,FullPaths:P};E(I,{root:F.root});for(var z=D.length-4;(D[z]!=80||D[z+1]!=75||D[z+2]!=5||D[z+3]!=6)&&z>=0;)--z;D.l=z+4,D.l+=4;var Q=D.read_shift(2);D.l+=6;var U=D.read_shift(4);for(D.l=U,z=0;z<Q;++z){D.l+=20;var j=D.read_shift(4),K=D.read_shift(4),ae=D.read_shift(2),de=D.read_shift(2),Ae=D.read_shift(2);D.l+=8;var fe=D.read_shift(4),se=a(D.slice(D.l+ae,D.l+ae+de));D.l+=ae+de+Ae;var Qe=D.l;D.l=fe+4,se&&se[1]&&((se[1]||{}).usz&&(K=se[1].usz),(se[1]||{}).csz&&(j=se[1].csz)),xP(D,j,K,I,se),D.l=Qe}return I}function xP(R,F,D,O,P){R.l+=2;var I=R.read_shift(2),z=R.read_shift(2),Q=o(R);if(I&8257)throw new Error("Unsupported ZIP encryption");for(var U=R.read_shift(4),j=R.read_shift(4),K=R.read_shift(4),ae=R.read_shift(2),de=R.read_shift(2),Ae="",fe=0;fe<ae;++fe)Ae+=String.fromCharCode(R[R.l++]);if(de){var se=a(R.slice(R.l,R.l+de));(se[21589]||{}).mt&&(Q=se[21589].mt),(se[1]||{}).usz&&(K=se[1].usz),(se[1]||{}).csz&&(j=se[1].csz),P&&((P[21589]||{}).mt&&(Q=P[21589].mt),(P[1]||{}).usz&&(K=se[1].usz),(P[1]||{}).csz&&(j=se[1].csz))}R.l+=de;var Qe=R.slice(R.l,R.l+j);switch(z){case 8:Qe=er(R,K);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+z)}var Zt=!1;I&8&&(U=R.read_shift(4),U==134695760&&(U=R.read_shift(4),Zt=!0),j=R.read_shift(4),K=R.read_shift(4)),j!=F&&UE(Zt,"Bad compressed size: "+F+" != "+j),K!=D&&UE(Zt,"Bad uncompressed size: "+D+" != "+K),my(O,Ae,Qe,{unsafe:!0,mt:Q})}function SP(R,F){var D=F||{},O=[],P=[],I=Oa(1),z=D.compression?8:0,Q=0,U=!1;U&&(Q|=8);var j=0,K=0,ae=0,de=0,Ae=R.FullPaths[0],fe=Ae,se=R.FileIndex[0],Qe=[],Zt=0;for(j=1;j<R.FullPaths.length;++j)if(fe=R.FullPaths[j].slice(Ae.length),se=R.FileIndex[j],!(!se.size||!se.content||fe=="Sh33tJ5")){var fn=ae,Pi=Oa(fe.length);for(K=0;K<fe.length;++K)Pi.write_shift(1,fe.charCodeAt(K)&127);Pi=Pi.slice(0,Pi.l),Qe[de]=typeof se.content=="string"?HO.bstr(se.content,0):HO.buf(se.content,0);var zn=typeof se.content=="string"?Kc(se.content):se.content;z==8&&(zn=Sr(zn)),I=Oa(30),I.write_shift(4,67324752),I.write_shift(2,20),I.write_shift(2,Q),I.write_shift(2,z),se.mt?s(I,se.mt):I.write_shift(4,0),I.write_shift(-4,Q&8?0:Qe[de]),I.write_shift(4,Q&8?0:zn.length),I.write_shift(4,Q&8?0:se.content.length),I.write_shift(2,Pi.length),I.write_shift(2,0),ae+=I.length,O.push(I),ae+=Pi.length,O.push(Pi),ae+=zn.length,O.push(zn),Q&8&&(I=Oa(12),I.write_shift(-4,Qe[de]),I.write_shift(4,zn.length),I.write_shift(4,se.content.length),ae+=I.l,O.push(I)),I=Oa(46),I.write_shift(4,33639248),I.write_shift(2,0),I.write_shift(2,20),I.write_shift(2,Q),I.write_shift(2,z),I.write_shift(4,0),I.write_shift(-4,Qe[de]),I.write_shift(4,zn.length),I.write_shift(4,se.content.length),I.write_shift(2,Pi.length),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(4,0),I.write_shift(4,fn),Zt+=I.l,P.push(I),Zt+=Pi.length,P.push(Pi),++de}return I=Oa(22),I.write_shift(4,101010256),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(2,de),I.write_shift(2,de),I.write_shift(4,Zt),I.write_shift(4,ae),I.write_shift(2,0),Up([Up(O),Up(P),I])}var h0={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function wP(R,F){if(R.ctype)return R.ctype;var D=R.name||"",O=D.match(/\.([^\.]+)$/);return O&&h0[O[1]]||F&&(O=(D=F).match(/[\.\\]([^\.\\])+$/),O&&h0[O[1]])?h0[O[1]]:"application/octet-stream"}function bP(R){for(var F=FO(R),D=[],O=0;O<F.length;O+=76)D.push(F.slice(O,O+76));return D.join(`\r
`)+`\r
`}function EP(R){var F=R.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(j){var K=j.charCodeAt(0).toString(16).toUpperCase();return"="+(K.length==1?"0"+K:K)});F=F.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),F.charAt(0)==`
`&&(F="=0D"+F.slice(1)),F=F.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var D=[],O=F.split(`\r
`),P=0;P<O.length;++P){var I=O[P];if(I.length==0){D.push("");continue}for(var z=0;z<I.length;){var Q=76,U=I.slice(z,z+Q);U.charAt(Q-1)=="="?Q--:U.charAt(Q-2)=="="?Q-=2:U.charAt(Q-3)=="="&&(Q-=3),U=I.slice(z,z+Q),z+=Q,z<I.length&&(U+="="),D.push(U)}}return D.join(`\r
`)}function _P(R){for(var F=[],D=0;D<R.length;++D){for(var O=R[D];D<=R.length&&O.charAt(O.length-1)=="=";)O=O.slice(0,O.length-1)+R[++D];F.push(O)}for(var P=0;P<F.length;++P)F[P]=F[P].replace(/[=][0-9A-Fa-f]{2}/g,function(I){return String.fromCharCode(parseInt(I.slice(1),16))});return Kc(F.join(`\r
`))}function TP(R,F,D){for(var O="",P="",I="",z,Q=0;Q<10;++Q){var U=F[Q];if(!U||U.match(/^\s*$/))break;var j=U.match(/^(.*?):\s*([^\s].*)$/);if(j)switch(j[1].toLowerCase()){case"content-location":O=j[2].trim();break;case"content-type":I=j[2].trim();break;case"content-transfer-encoding":P=j[2].trim();break}}switch(++Q,P.toLowerCase()){case"base64":z=Kc(PO(F.slice(Q).join("")));break;case"quoted-printable":z=_P(F.slice(Q));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+P)}var K=my(R,O.slice(D.length),z,{unsafe:!0});I&&(K.ctype=I)}function RP(R,F){if(et(R.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var D=F&&F.root||"",O=(hi&&Buffer.isBuffer(R)?R.toString("binary"):et(R)).split(`\r
`),P=0,I="";for(P=0;P<O.length;++P)if(I=O[P],!!/^Content-Location:/i.test(I)&&(I=I.slice(I.indexOf("file")),D||(D=I.slice(0,I.lastIndexOf("/")+1)),I.slice(0,D.length)!=D))for(;D.length>0&&(D=D.slice(0,D.length-1),D=D.slice(0,D.lastIndexOf("/")+1),I.slice(0,D.length)!=D););var z=(O[1]||"").match(/boundary="(.*?)"/);if(!z)throw new Error("MAD cannot find boundary");var Q="--"+(z[1]||""),U=[],j=[],K={FileIndex:U,FullPaths:j};E(K);var ae,de=0;for(P=0;P<O.length;++P){var Ae=O[P];Ae!==Q&&Ae!==Q+"--"||(de++&&TP(K,O.slice(ae,P),D),ae=P)}return K}function AP(R,F){var D=F||{},O=D.boundary||"SheetJS";O="------="+O;for(var P=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+O.slice(2)+'"',"","",""],I=R.FullPaths[0],z=I,Q=R.FileIndex[0],U=1;U<R.FullPaths.length;++U)if(z=R.FullPaths[U].slice(I.length),Q=R.FileIndex[U],!(!Q.size||!Q.content||z=="Sh33tJ5")){z=z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Qe){return"_x"+Qe.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Qe){return"_u"+Qe.charCodeAt(0).toString(16)+"_"});for(var j=Q.content,K=hi&&Buffer.isBuffer(j)?j.toString("binary"):et(j),ae=0,de=Math.min(1024,K.length),Ae=0,fe=0;fe<=de;++fe)(Ae=K.charCodeAt(fe))>=32&&Ae<128&&++ae;var se=ae>=de*4/5;P.push(O),P.push("Content-Location: "+(D.root||"file:///C:/SheetJS/")+z),P.push("Content-Transfer-Encoding: "+(se?"quoted-printable":"base64")),P.push("Content-Type: "+wP(Q,z)),P.push(""),P.push(se?EP(K):bP(K))}return P.push(O+`--\r
`),P.join(`\r
`)}function DP(R){var F={};return E(F,R),F}function my(R,F,D,O){var P=O&&O.unsafe;P||E(R);var I=!P&&Fo.find(R,F);if(!I){var z=R.FullPaths[0];F.slice(0,z.length)==z?z=F:(z.slice(-1)!="/"&&(z+="/"),z=(z+F).replace("//","/")),I={name:n(F),type:2},R.FileIndex.push(I),R.FullPaths.push(z),P||Fo.utils.cfb_gc(R)}return I.content=D,I.size=D?D.length:0,O&&(O.CLSID&&(I.clsid=O.CLSID),O.mt&&(I.mt=O.mt),O.ct&&(I.ct=O.ct)),I}function OP(R,F){E(R);var D=Fo.find(R,F);if(D){for(var O=0;O<R.FileIndex.length;++O)if(R.FileIndex[O]==D)return R.FileIndex.splice(O,1),R.FullPaths.splice(O,1),!0}return!1}function FP(R,F,D){E(R);var O=Fo.find(R,F);if(O){for(var P=0;P<R.FileIndex.length;++P)if(R.FileIndex[P]==O)return R.FileIndex[P].name=n(D),R.FullPaths[P]=D,!0}return!1}function PP(R){M(R,!0)}return e.find=W,e.read=A,e.parse=d,e.write=St,e.writeFile=Je,e.utils={cfb_new:DP,cfb_add:my,cfb_del:OP,cfb_mov:FP,cfb_gc:PP,ReadShift:i0,CheckField:OF,prep_blob:jc,bconcat:Up,use_zlib:jt,_deflateRaw:lf,_inflateRaw:WE,consts:Ke},e}(),e0;function WO(r){return typeof r=="string"?ny(r):Array.isArray(r)?AB(r):r}function gF(r,e,t){if(typeof e0<"u"&&e0.writeFileSync)return t?e0.writeFileSync(r,e,t):e0.writeFileSync(r,e);if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=ny(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var i=t=="utf8"?xF(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(i,r);if(typeof Blob<"u"){var n=new Blob([WO(i)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,r);if(typeof saveAs<"u")return saveAs(n,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:r,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=r,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}else if(typeof URL<"u"&&!URL.createObjectURL&&typeof chrome=="object"){var a="data:application/octet-stream;base64,"+TB(new Uint8Array(WO(i)));return chrome.downloads.download({url:a,filename:r,saveAs:!0})}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(r);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=RB(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+r)}function Xc(r){for(var e=Object.keys(r),t=[],i=0;i<e.length;++i)Object.prototype.hasOwnProperty.call(r,e[i])&&t.push(e[i]);return t}function tV(r){for(var e=[],t=Xc(r),i=0;i!==t.length;++i)e[r[t[i]]]=t[i];return e}function iV(r){for(var e=[],t=Xc(r),i=0;i!==t.length;++i)e[r[t[i]]]=parseInt(t[i],10);return e}function rV(r){for(var e=[],t=Xc(r),i=0;i!==t.length;++i)e[r[t[i]]]==null&&(e[r[t[i]]]=[]),e[r[t[i]]].push(t[i]);return e}var mF=Date.UTC(1899,11,30,0,0,0),nV=Date.UTC(1899,11,31,0,0,0),sV=Date.UTC(1904,0,1,0,0,0);function El(r,e){var t=r.getTime(),i=(t-mF)/(24*60*60*1e3);return e?(i-=1462,i<-1402?i-1:i):i<60?i-1:i}function oV(r){if(r>=60&&r<61)return r;var e=new Date;return e.setTime((r>60?r:r+1)*24*60*60*1e3+mF),e}var aV=/^(\d+):(\d+)(:\d+)?(\.\d+)?$/,lV=/^(\d+)-(\d+)-(\d+)$/,vF=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)?(\.\d+)?$/;function aE(r,e){if(r instanceof Date)return r;var t=r.match(aV);if(t)return new Date((e?sV:nV)+((parseInt(t[1],10)*60+parseInt(t[2],10))*60+(t[3]?parseInt(t[3].slice(1),10):0))*1e3+(t[4]?parseInt((t[4]+"000").slice(1,4),10):0));if(t=r.match(lV),t)return new Date(Date.UTC(+t[1],+t[2]-1,+t[3],0,0,0,0));if(t=r.match(vF),t)return new Date(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4],+t[5],t[6]&&parseInt(t[6].slice(1),10)||0,t[7]&&parseInt(t[7].slice(1),10)||0));var i=new Date(r);return i}function a0(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=a0(r[t]));return e}function Bn(r,e){for(var t="";t.length<e;)t+=r;return t}function UO(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,i=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(i))||(i=i.replace(/[(](.*)[)]/,function(n,s){return t=-t,s}),!isNaN(e=Number(i)))?e/t:e}var cV=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/,dV=/^([01]?\d|2[0-3])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))$/,uV=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)(\.\d+)?[Z]?$/,hV=new Date("6/9/69 00:00 UTC").valueOf()==-177984e5;function pV(r){return r[2]?r[3]?r[4]?new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),+r[2],+r[4],parseFloat(r[3])*1e3)):new Date(Date.UTC(1899,11,31,r[7]=="p"?12:0,+r[1],+r[2],parseFloat(r[3])*1e3)):r[5]?new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),+r[2],+r[5],r[6]?parseFloat(r[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),+r[2],0,0)):new Date(Date.UTC(1899,11,31,+r[1]%12+(r[7]=="p"?12:0),0,0,0))}function fV(r){return r[2]?r[3]?r[4]?new Date(Date.UTC(1899,11,31,+r[1],+r[2],+r[4],parseFloat(r[3])*1e3)):new Date(Date.UTC(1899,11,31,0,+r[1],+r[2],parseFloat(r[3])*1e3)):r[5]?new Date(Date.UTC(1899,11,31,+r[1],+r[2],+r[5],r[6]?parseFloat(r[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+r[1],+r[2],0,0)):new Date(Date.UTC(1899,11,31,+r[1],0,0,0))}var gV=["january","february","march","april","may","june","july","august","september","october","november","december"];function mV(r){if(uV.test(r))return r.indexOf("Z")==-1?sy(new Date(r)):new Date(r);var e=r.toLowerCase(),t=e.replace(/\s+/g," ").trim(),i=t.match(cV);if(i)return pV(i);if(i=t.match(dV),i)return fV(i);if(i=t.match(vF),i)return new Date(Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5],i[6]&&parseInt(i[6].slice(1),10)||0,i[7]&&parseInt(i[7].slice(1),10)||0));var n=new Date(hV&&r.indexOf("UTC")==-1?r+" UTC":r),s=new Date(NaN),o=n.getYear(),a=n.getMonth(),l=n.getDate();if(isNaN(l))return s;if(e.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(e=e.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),e.length>3&&gV.indexOf(e)==-1)return s}else if(e.replace(/[ap]m?/,"").match(/[a-z]/))return s;return o<0||o>8099||r.match(/[^-0-9:,\/\\\ ]/)?s:n}function vV(r){return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}function sy(r){return new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))}function Cr(r,e,t){if(r.FullPaths){if(typeof t=="string"){var i;return hi?i=Yc(t):i=DB(t),Fo.utils.cfb_add(r,e,i)}Fo.utils.cfb_add(r,e,t)}else r.file(e,t)}function CV(){return Fo.utils.cfb_new()}var Vn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`;var yV={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},CF=tV(yV);var yF=/[&<>'"]/g,xV=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function pi(r){var e=r+"";return e.replace(yF,function(t){return CF[t]}).replace(xV,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}var SV=/[\u0000-\u001f]/g;function zO(r){var e=r+"";return e.replace(yF,function(t){return CF[t]}).replace(/\n/g,"<br/>").replace(SV,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function rE(r){for(var e="",t=0,i=0,n=0,s=0,o=0,a=0;t<r.length;){if(i=r.charCodeAt(t++),i<128){e+=String.fromCharCode(i);continue}if(n=r.charCodeAt(t++),i>191&&i<224){o=(i&31)<<6,o|=n&63,e+=String.fromCharCode(o);continue}if(s=r.charCodeAt(t++),i<240){e+=String.fromCharCode((i&15)<<12|(n&63)<<6|s&63);continue}o=r.charCodeAt(t++),a=((i&7)<<18|(n&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function jO(r){var e=Yp(2*r.length),t,i,n=1,s=0,o=0,a;for(i=0;i<r.length;i+=n)n=1,(a=r.charCodeAt(i))<128?t=a:a<224?(t=(a&31)*64+(r.charCodeAt(i+1)&63),n=2):a<240?(t=(a&15)*4096+(r.charCodeAt(i+1)&63)*64+(r.charCodeAt(i+2)&63),n=3):(n=4,t=(a&7)*262144+(r.charCodeAt(i+1)&63)*4096+(r.charCodeAt(i+2)&63)*64+(r.charCodeAt(i+3)&63),t-=65536,o=55296+(t>>>10&1023),t=56320+(t&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function KO(r){return Yc(r,"binary").toString("utf8")}var KC="foo bar baz\xE2\x98\x83\xF0\x9F\x8D\xA3",wV=hi&&(KO(KC)==rE(KC)&&KO||jO(KC)==rE(KC)&&jO)||rE,xF=hi?function(r){return Yc(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,i=0,n=0;t<r.length;)switch(i=r.charCodeAt(t++),!0){case i<128:e.push(String.fromCharCode(i));break;case i<2048:e.push(String.fromCharCode(192+(i>>6))),e.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,n=r.charCodeAt(t++)-56320+(i<<10),e.push(String.fromCharCode(240+(n>>18&7))),e.push(String.fromCharCode(144+(n>>12&63))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)));break;default:e.push(String.fromCharCode(224+(i>>12))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)))}return e.join("")};var bV=function(){var r=[["nbsp"," "],["middot","\xB7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var i=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<r.length;++n)i=i.replace(r[n][0],r[n][1]);return i}}();var SF=/(^\s|\s$|\n)/;function Io(r,e){return"<"+r+(e.match(SF)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function wF(r){return Xc(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function Fe(r,e,t){return"<"+r+(t!=null?wF(t):"")+(e!=null?(e.match(SF)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function lE(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function EV(r,e){switch(typeof r){case"string":var t=Fe("vt:lpwstr",pi(r));return e&&(t=t.replace(/&quot;/g,"_x0022_")),t;case"number":return Fe((r|0)==r?"vt:i4":"vt:r8",pi(String(r)));case"boolean":return Fe("vt:bool",r?"true":"false")}if(r instanceof Date)return Fe("vt:filetime",lE(r));throw new Error("Unable to serialize "+r)}var xr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Xp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],$C={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function _V(r,e){for(var t=1-2*(r[e+7]>>>7),i=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),n=r[e+6]&15,s=5;s>=0;--s)n=n*256+r[e+s];return i==2047?n==0?t*(1/0):NaN:(i==0?i=-1022:(i-=1023,n+=Math.pow(2,52)),t*Math.pow(2,i-52)*n)}function TV(r,e,t){var i=(e<0||1/e==-1/0?1:0)<<7,n=0,s=0,o=i?-e:e;isFinite(o)?o==0?n=s=0:(n=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-n),n<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?n=-1022:(s-=Math.pow(2,52),n+=1023)):(n=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)r[t+a]=s&255;r[t+6]=(n&15)<<4|s&15,r[t+7]=n>>4|i}var $O=function(r){for(var e=[],t=10240,i=0;i<r[0].length;++i)if(r[0][i])for(var n=0,s=r[0][i].length;n<s;n+=t)e.push.apply(e,r[0][i].slice(n,n+t));return e},YO=hi?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:Yc(e)})):$O(r)}:$O,XO=function(r,e,t){for(var i=[],n=e;n<t;n+=2)i.push(String.fromCharCode(t0(r,n)));return i.join("").replace(Kp,"")},oy=hi?function(r,e,t){return!Buffer.isBuffer(r)||!QC?XO(r,e,t):r.toString("utf16le",e,t).replace(Kp,"")}:XO,qO=function(r,e,t){for(var i=[],n=e;n<e+t;++n)i.push(("0"+r[n].toString(16)).slice(-2));return i.join("")},bF=hi?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):qO(r,e,t)}:qO,ZO=function(r,e,t){for(var i=[],n=e;n<t;n++)i.push(String.fromCharCode(zp(r,n)));return i.join("")},qp=hi?function(e,t,i){return Buffer.isBuffer(e)?e.toString("utf8",t,i):ZO(e,t,i)}:ZO,EF=function(r,e){var t=yr(r,e);return t>0?qp(r,e+4,e+4+t-1):""},pE=EF,_F=function(r,e){var t=yr(r,e);return t>0?qp(r,e+4,e+4+t-1):""},fE=_F,TF=function(r,e){var t=2*yr(r,e);return t>0?qp(r,e+4,e+4+t-1):""},gE=TF,RF=function(e,t){var i=yr(e,t);return i>0?oy(e,t+4,t+4+i):""},mE=RF,AF=function(r,e){var t=yr(r,e);return t>0?qp(r,e+4,e+4+t):""},vE=AF,DF=function(r,e){return _V(r,e)},cE=DF,RV=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};hi&&(pE=function(e,t){if(!Buffer.isBuffer(e))return EF(e,t);var i=e.readUInt32LE(t);return i>0?e.toString("utf8",t+4,t+4+i-1):""},fE=function(e,t){if(!Buffer.isBuffer(e))return _F(e,t);var i=e.readUInt32LE(t);return i>0?e.toString("utf8",t+4,t+4+i-1):""},gE=function(e,t){if(!Buffer.isBuffer(e)||!QC)return TF(e,t);var i=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+i-1)},mE=function(e,t){if(!Buffer.isBuffer(e)||!QC)return RF(e,t);var i=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+i)},vE=function(e,t){if(!Buffer.isBuffer(e))return AF(e,t);var i=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+i)},cE=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):DF(e,t)},RV=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});function AV(){oy=function(r,e,t){return Hi.utils.decode(1200,r.slice(e,t)).replace(Kp,"")},qp=function(r,e,t){return Hi.utils.decode(65001,r.slice(e,t))},pE=function(r,e){var t=yr(r,e);return t>0?Hi.utils.decode(n0,r.slice(e+4,e+4+t-1)):""},fE=function(r,e){var t=yr(r,e);return t>0?Hi.utils.decode(r0,r.slice(e+4,e+4+t-1)):""},gE=function(r,e){var t=2*yr(r,e);return t>0?Hi.utils.decode(1200,r.slice(e+4,e+4+t-1)):""},mE=function(r,e){var t=yr(r,e);return t>0?Hi.utils.decode(1200,r.slice(e+4,e+4+t)):""},vE=function(r,e){var t=yr(r,e);return t>0?Hi.utils.decode(65001,r.slice(e+4,e+4+t)):""}}typeof Hi<"u"&&AV();var zp=function(r,e){return r[e]},t0=function(r,e){return r[e+1]*256+r[e]},DV=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},yr=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},jp=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},OV=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function i0(r,e){var t="",i,n,s=[],o,a,l,c;switch(e){case"dbcs":if(c=this.l,hi&&Buffer.isBuffer(this)&&QC)t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(l=0;l<r;++l)t+=String.fromCharCode(t0(this,c)),c+=2;r*=2;break;case"utf8":t=qp(this,this.l,this.l+r);break;case"utf16le":r*=2,t=oy(this,this.l,this.l+r);break;case"wstr":if(typeof Hi<"u")t=Hi.utils.decode(r0,this.slice(this.l,this.l+2*r));else return i0.call(this,r,"dbcs");r=2*r;break;case"lpstr-ansi":t=pE(this,this.l),r=4+yr(this,this.l);break;case"lpstr-cp":t=fE(this,this.l),r=4+yr(this,this.l);break;case"lpwstr":t=gE(this,this.l),r=4+2*yr(this,this.l);break;case"lpp4":r=4+yr(this,this.l),t=mE(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+yr(this,this.l),t=vE(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(o=zp(this,this.l+r++))!==0;)s.push(UC(o));t=s.join("");break;case"_wstr":for(r=0,t="";(o=t0(this,this.l+r))!==0;)s.push(UC(o)),r+=2;r+=2,t=s.join("");break;case"dbcs-cont":for(t="",c=this.l,l=0;l<r;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=zp(this,c),this.l=c+1,a=i0.call(this,r-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(UC(t0(this,c))),c+=2}t=s.join(""),r*=2;break;case"cpstr":if(typeof Hi<"u"){t=Hi.utils.decode(r0,this.slice(this.l,this.l+r));break}case"sbcs-cont":for(t="",c=this.l,l=0;l!=r;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=zp(this,c),this.l=c+1,a=i0.call(this,r-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(UC(zp(this,c))),c+=1}t=s.join("");break;default:switch(r){case 1:return i=zp(this,this.l),this.l++,i;case 2:return i=(e==="i"?DV:t0)(this,this.l),this.l+=2,i;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(i=(r>0?jp:OV)(this,this.l),this.l+=4,i):(n=yr(this,this.l),this.l+=4,n);case 8:case-8:if(e==="f")return r==8?n=cE(this,this.l):n=cE([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;r=8;case 16:t=bF(this,this.l,r);break}}return this.l+=r,t}var FV=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},PV=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},IV=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function MV(r,e,t){var i=0,n=0;if(t==="dbcs"){for(n=0;n!=e.length;++n)IV(this,e.charCodeAt(n),this.l+2*n);i=2*e.length}else if(t==="sbcs"||t=="cpstr")if(typeof Hi<"u"&&n0==874){for(n=0;n!=e.length;++n){var s=Hi.utils.encode(n0,e.charAt(n));this[this.l+n]=s[0]}i=e.length}else if(typeof Hi<"u"&&t=="cpstr"){if(s=Hi.utils.encode(r0,e),s.length==e.length)for(n=0;n<e.length;++n)s[n]==0&&e.charCodeAt(n)!=0&&(s[n]=95);if(s.length==2*e.length)for(n=0;n<e.length;++n)s[2*n]==0&&s[2*n+1]==0&&e.charCodeAt(n)!=0&&(s[2*n]=95);for(n=0;n<s.length;++n)this[this.l+n]=s[n];i=s.length}else{for(e=e.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=e.length;++n)this[this.l+n]=e.charCodeAt(n)&255;i=e.length}else if(t==="hex"){for(;n<r;++n)this[this.l++]=parseInt(e.slice(2*n,2*n+2),16)||0;return this}else if(t==="utf16le"){var o=Math.min(this.l+r,this.length);for(n=0;n<Math.min(e.length,r);++n){var a=e.charCodeAt(n);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(r){case 1:i=1,this[this.l]=e&255;break;case 2:i=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:i=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:i=4,FV(this,e,this.l);break;case 8:if(i=8,t==="f"){TV(this,e,this.l);break}case 16:break;case-4:i=4,PV(this,e,this.l);break}return this.l+=i,this}function OF(r,e){var t=bF(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function jc(r,e){r.l=e,r.read_shift=i0,r.chk=OF,r.write_shift=MV}function Oa(r){var e=Yp(r);return jc(e,0),e}function LV(r){return parseInt(NV(r),10)-1}function zs(r){return""+(r+1)}function NV(r){return r.replace(/\$(\d+)$/,"$1")}function kV(r){for(var e=GV(r),t=0,i=0;i!==e.length;++i)t=26*t+e.charCodeAt(i)-64;return t-1}function js(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function GV(r){return r.replace(/^\$([A-Z])/,"$1")}function BV(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Pa(r){for(var e=0,t=0,i=0;i<r.length;++i){var n=r.charCodeAt(i);n>=48&&n<=57?e=10*e+(n-48):n>=65&&n<=90&&(t=26*t+(n-64))}return{c:t-1,r:e-1}}function o0(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function Ku(r){var e=r.indexOf(":");return e==-1?{s:Pa(r),e:Pa(r)}:{s:Pa(r.slice(0,e)),e:Pa(r.slice(e+1))}}function Ks(r,e){return typeof e>"u"||typeof e=="number"?Ks(r.s,r.e):(typeof r!="string"&&(r=o0(r)),typeof e!="string"&&(e=o0(e)),r==e?r:r+":"+e)}function FF(r){var e=Ku(r);return"$"+js(e.s.c)+"$"+zs(e.s.r)+":$"+js(e.e.c)+"$"+zs(e.e.r)}function PF(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r.replace(/'/g,"''")+"'":r}function Ia(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,i=0,n=0,s=r.length;for(t=0;i<s&&!((n=r.charCodeAt(i)-64)<1||n>26);++i)t=26*t+n;for(e.s.c=--t,t=0;i<s&&!((n=r.charCodeAt(i)-48)<0||n>9);++i)t=10*t+n;if(e.s.r=--t,i===s||n!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++i,t=0;i!=s&&!((n=r.charCodeAt(i)-64)<1||n>26);++i)t=26*t+n;for(e.e.c=--t,t=0;i!=s&&!((n=r.charCodeAt(i)-48)<0||n>9);++i)t=10*t+n;return e.e.r=--t,e}function QO(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=s0(r.z,t?El(e):e)}catch{}try{return r.w=s0((r.XF||{}).numFmtId||(t?14:0),t?El(e):e)}catch{return""+e}}function l0(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?XC[r.v]||r.v:e==null?QO(r,r.v):QO(r,e))}function VV(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",i={};return i[t]=r,{SheetNames:[t],Sheets:i}}function IF(r,e,t){var i=t||{},n=r?r["!data"]!=null:i.dense;ZC!=null&&n==null&&(n=ZC);var s=r||{};n&&!s["!data"]&&(s["!data"]=[]);var o=0,a=0;if(s&&i.origin!=null){if(typeof i.origin=="number")o=i.origin;else{var l=typeof i.origin=="string"?Pa(i.origin):i.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Ia(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),o==-1&&(c.e.r=o=d.e.r+1)}for(var u=[],h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");var p=o+h,f=""+(p+1);n&&(s["!data"][p]||(s["!data"][p]=[]),u=s["!data"][p]);for(var g=0;g!=e[h].length;++g)if(!(typeof e[h][g]>"u")){var m={v:e[h][g]},v=a+g;if(c.s.r>p&&(c.s.r=p),c.s.c>v&&(c.s.c=v),c.e.r<p&&(c.e.r=p),c.e.c<v&&(c.e.c=v),e[h][g]&&typeof e[h][g]=="object"&&!Array.isArray(e[h][g])&&!(e[h][g]instanceof Date))m=e[h][g];else if(Array.isArray(m.v)&&(m.f=e[h][g][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(i.nullError)m.t="e",m.v=0;else if(i.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=i.dateNF||Mo[14],i.UTC||(m.v=sy(m.v)),i.cellDates?(m.t="d",m.w=s0(m.z,El(m.v,i.date1904))):(m.t="n",m.v=El(m.v,i.date1904),m.w=s0(m.z,m.v))):m.t="s";if(n)u[v]&&u[v].z&&(m.z=u[v].z),u[v]=m;else{var C=js(v)+f;s[C]&&s[C].z&&(m.z=s[C].z),s[C]=m}}}return c.s.c<1e7&&(s["!ref"]=Ks(c)),s}function HV(r,e){return IF(null,r,e)}var XC={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"};var WV={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},YC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function UV(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zV(r,e,t){var i=rV(WV),n=[],s;t||(n[n.length]=Vn,n[n.length]=Fe("Types",null,{xmlns:xr.CT,"xmlns:xsd":xr.xsd,"xmlns:xsi":xr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Fe("Default",null,{Extension:c[0],ContentType:c[1]})})));var o=function(c){r[c]&&r[c].length>0&&(s=r[c][0],n[n.length]=Fe("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:YC[c][e.bookType]||YC[c].xlsx}))},a=function(c){(r[c]||[]).forEach(function(d){n[n.length]=Fe("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:YC[c][e.bookType]||YC[c].xlsx})})},l=function(c){(r[c]||[]).forEach(function(d){n[n.length]=Fe("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:i[c][0]})})};return o("workbooks"),a("sheets"),a("charts"),l("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),a("metadata"),l("people"),!t&&n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Ji={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function jV(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function nE(r){var e=[Vn,Fe("Relationships",null,{xmlns:xr.RELS})];return Xc(r["!id"]).forEach(function(t){e[e.length]=Fe("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Qr(r,e,t,i,n,s){if(n||(n={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,n.Id="rId"+e,n.Type=i,n.Target=t,s?n.TargetMode=s:[Ji.HLINK,Ji.XPATH,Ji.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),r["!id"][n.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][n.Id]=n,r[("/"+n.Target).replace("//","/")]=n,e}var JO=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function sE(r,e,t,i,n){n[r]!=null||e==null||e===""||(n[r]=e,e=pi(e),i[i.length]=t?Fe(r,e,t):Io(r,e))}function KV(r,e){var t=e||{},i=[Vn,Fe("cp:coreProperties",null,{"xmlns:cp":xr.CORE_PROPS,"xmlns:dc":xr.dc,"xmlns:dcterms":xr.dcterms,"xmlns:dcmitype":xr.dcmitype,"xmlns:xsi":xr.xsi})],n={};if(!r&&!t.Props)return i.join("");r&&(r.CreatedDate!=null&&sE("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:lE(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},i,n),r.ModifiedDate!=null&&sE("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:lE(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},i,n));for(var s=0;s!=JO.length;++s){var o=JO[s],a=t.Props&&t.Props[o[1]]!=null?t.Props[o[1]]:r?r[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&sE(o[0],a,null,i,n)}return i.length>2&&(i[i.length]="</cp:coreProperties>",i[1]=i[1].replace("/>",">")),i.join("")}var $V=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function YV(r){var e=[],t=Fe;return r||(r={}),r.Application="SheetJS",e[e.length]=Vn,e[e.length]=Fe("Properties",null,{xmlns:xr.EXT_PROPS,"xmlns:vt":xr.vt}),$V.forEach(function(i){if(r[i[1]]!==void 0){var n;switch(i[2]){case"string":n=pi(String(r[i[1]]));break;case"bool":n=r[i[1]]?"true":"false";break}n!==void 0&&(e[e.length]=t(i[0],n))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(i){return"<vt:lpstr>"+pi(i)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function XV(r){var e=[Vn,Fe("Properties",null,{xmlns:xr.CUST_PROPS,"xmlns:vt":xr.vt})];if(!r)return e.join("");var t=1;return Xc(r).forEach(function(n){++t,e[e.length]=Fe("property",EV(r[n],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:pi(n)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var qV=/^\s|\s$|[\t\n\r]/;function ZV(r,e){if(!e.bookSST)return"";var t=[Vn];t[t.length]=Fe("sst",null,{xmlns:Xp[0],count:r.Count,uniqueCount:r.Unique});for(var i=0;i!=r.length;++i)if(r[i]!=null){var n=r[i],s="<si>";n.r?s+=n.r:(s+="<t",n.t||(n.t=""),typeof n.t!="string"&&(n.t=String(n.t)),n.t.match(qV)&&(s+=' xml:space="preserve"'),s+=">"+pi(n.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function QV(r){if(typeof Hi<"u")return Hi.utils.encode(n0,r);for(var e=[],t=r.split(""),i=0;i<t.length;++i)e[i]=t[i].charCodeAt(0);return e}function JV(r){var e=0,t,i=QV(r),n=i.length+1,s,o,a,l,c;for(t=Yp(n),t[0]=i.length,s=1;s!=n;++s)t[s]=i[s-1];for(s=n-1;s>=0;--s)o=t[s],a=e&16384?1:0,l=e<<1&32767,c=a|l,e=c^o;return e^52811}var e4=6;var iy=e4;function t4(r){return Math.floor((r-5)/iy*100+.5)/100}function i4(r){return Math.round((r*iy+5)/iy*256)/256}var r4=96,n4=r4;function eF(r){return r*96/n4}function s4(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var i=t[0];i<=t[1];++i)r[i]!=null&&(e[e.length]=Fe("numFmt",null,{numFmtId:i,formatCode:pi(r[i])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Fe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function o4(r){var e=[];return e[e.length]=Fe("cellXfs",null),r.forEach(function(t){e[e.length]=Fe("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Fe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function a4(r,e){var t=[Vn,Fe("styleSheet",null,{xmlns:Xp[0],"xmlns:vt":xr.vt})],i;return r.SSF&&(i=s4(r.SSF))!=null&&(t[t.length]=i),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(i=o4(e.cellXfs))&&(t[t.length]=i),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function l4(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[Vn];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',t[t.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',t[t.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',t[t.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',t[t.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',t[t.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',t[t.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function c4(){var r=[Vn];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function d4(r,e,t){var i=[21600,21600],n=["m0,0l0",i[1],i[0],i[1],i[0],"0xe"].join(","),s=[Fe("xml",null,{"xmlns:v":$C.v,"xmlns:o":$C.o,"xmlns:x":$C.x,"xmlns:mv":$C.mv}).replace(/\/>/,">"),Fe("o:shapelayout",Fe("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"})],o=65536*r,a=e||[];return a.length>0&&s.push(Fe("v:shapetype",[Fe("v:stroke",null,{joinstyle:"miter"}),Fe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:i.join(","),"o:spt":202,path:n})),a.forEach(function(l){++o,s.push(u4(l,o))}),s.push("</xml>"),s.join("")}function u4(r,e,t){var i=Pa(r[0]),n={color2:"#BEFF82",type:"gradient"};n.type=="gradient"&&(n.angle="-180");var s=n.type=="gradient"?Fe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,o=Fe("v:fill",s,n),a={on:"t",obscured:"t"};return["<v:shape"+wF({id:"_x0000_s"+e,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(r[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",o,Fe("v:shadow",null,a),Fe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Io("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Io("x:AutoFill","False"),Io("x:Row",String(i.r)),Io("x:Column",String(i.c)),r[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function h4(r){var e=[Vn,Fe("comments",null,{xmlns:Xp[0]})],t=[];return e.push("<authors>"),r.forEach(function(i){i[1].forEach(function(n){var s=pi(n.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),n.T&&n.ID&&t.indexOf("tc="+n.ID)==-1&&(t.push("tc="+n.ID),e.push("<author>tc="+n.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(i){var n=0,s=[],o=0;if(i[1][0]&&i[1][0].T&&i[1][0].ID&&(n=t.indexOf("tc="+i[1][0].ID)),i[1].forEach(function(c){c.a&&(n=t.indexOf(pi(c.a))),c.T&&++o,s.push(c.t==null?"":pi(c.t))}),o===0)i[1].forEach(function(c){e.push('<comment ref="'+i[0]+'" authorId="'+t.indexOf(pi(c.a))+'"><text>'),e.push(Io("t",c.t==null?"":pi(c.t))),e.push("</text></comment>")});else{i[1][0]&&i[1][0].T&&i[1][0].ID&&(n=t.indexOf("tc="+i[1][0].ID)),e.push('<comment ref="'+i[0]+'" authorId="'+n+'"><text>');for(var a=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)a+=`Reply:
    `+s[l]+`
`;e.push(Io("t",pi(a))),e.push("</text></comment>")}}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function p4(r,e,t){var i=[Vn,Fe("ThreadedComments",null,{xmlns:xr.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(n){var s="";(n[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),i.push(Fe("threadedComment",Io("text",o.t||""),l))})}),i.push("</ThreadedComments>"),i.join("")}function f4(r){var e=[Vn,Fe("personList",null,{xmlns:xr.TCMNT,"xmlns:x":Xp[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,i){e.push(Fe("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+i).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}var g4=["xlsb","xlsm","xlam","biff8","xla"];var qC=typeof Map<"u";function m4(r,e,t){var i=0,n=r.length;if(t){if(qC?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=qC?t.get(e):t[e];i<s.length;++i)if(r[s[i]].t===e)return r.Count++,s[i]}}else for(;i<n;++i)if(r[i].t===e)return r.Count++,i;return r[n]={t:e},r.Count++,r.Unique++,t&&(qC?(t.has(e)||t.set(e,[]),t.get(e).push(n)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(n))),n}function v4(r,e){var t={min:r+1,max:r+1},i=-1;return e.MDW&&(iy=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?i=t4(e.wpx):e.wch!=null&&(i=e.wch),i>-1?(t.width=i4(i),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function C4(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(t=[1,1,1,1,.5,.5]),r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function MF(r,e,t){var i=t.revssf[e.z!=null?e.z:"General"],n=60,s=r.length;if(i==null&&t.ssf){for(;n<392;++n)if(t.ssf[n]==null){eV(e.z,n),t.ssf[n]=e.z,t.revssf[e.z]=i=n;break}}for(n=0;n!=s;++n)if(r[n].numFmtId===i)return n;return r[s]={numFmtId:i,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function y4(r,e,t){if(r&&r["!ref"]){var i=Ia(r["!ref"]);if(i.e.c<i.s.c||i.e.r<i.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function x4(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+Ks(r[t])+'"/>';return e+"</mergeCells>"}function S4(r,e,t,i,n){var s=!1,o={},a=null;if(i.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,o.codeName=xF(pi(l))}if(r&&r["!outline"]){var c={summaryBelow:1,summaryRight:1};r["!outline"].above&&(c.summaryBelow=0),r["!outline"].left&&(c.summaryRight=0),a=(a||"")+Fe("outlinePr",null,c)}!s&&!a||(n[n.length]=Fe("sheetPr",a,o))}var w4=["objects","scenarios","selectLockedCells","selectUnlockedCells"],b4=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function E4(r){var e={sheet:1};return w4.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),b4.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=JV(r.password).toString(16).toUpperCase()),Fe("sheetProtection",null,e)}function _4(r){return C4(r),Fe("pageMargins",null,r)}function T4(r,e){for(var t=["<cols>"],i,n=0;n!=e.length;++n)(i=e[n])&&(t[t.length]=Fe("col",null,v4(n,i)));return t[t.length]="</cols>",t.join("")}function R4(r,e,t,i){var n=typeof r.ref=="string"?r.ref:Ks(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,o=Ku(n);o.s.r==o.e.r&&(o.e.r=Ku(e["!ref"]).e.r,n=Ks(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==i){l.Ref=PF(t.SheetNames[i])+"!"+FF(n);break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:"'"+t.SheetNames[i]+"'!"+n}),Fe("autoFilter",null,{ref:n})}function A4(r,e,t,i){var n={workbookViewId:"0"};return(((i||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=i.Workbook.Views[0].RTL?"1":"0"),Fe("sheetViews",Fe("sheetView",null,n),{})}function D4(r,e,t,i,n,s,o){if(r.c&&t["!comments"].push([e,r.c]),(r.v===void 0||r.t==="z"&&!(i||{}).sheetStubs)&&typeof r.f!="string"&&typeof r.z>"u")return"";var a="",l=r.t,c=r.v;if(r.t!=="z")switch(r.t){case"b":a=r.v?"1":"0";break;case"n":isNaN(r.v)?(r.t="e",a=XC[r.v=36]):isFinite(r.v)?a=""+r.v:(r.t="e",a=XC[r.v=7]);break;case"e":a=XC[r.v];break;case"d":if(i&&i.cellDates){var d=aE(r.v,o);a=d.toISOString(),d.getUTCFullYear()<1900&&(a=a.slice(a.indexOf("T")+1).replace("Z",""))}else r=a0(r),r.t="n",a=""+(r.v=El(aE(r.v,o),o));typeof r.z>"u"&&(r.z=Mo[14]);break;default:a=r.v;break}var u=r.t=="z"||r.v==null?"":Io("v",pi(a)),h={r:e},p=MF(i.cellXfs,r,i);switch(p!==0&&(h.s=p),r.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(i&&i.bookSST){u=Io("v",""+m4(i.Strings,r.v,i.revStrings)),h.t="s";break}else h.t="str";break}if(r.t!=l&&(r.t=l,r.v=c),typeof r.f=="string"&&r.f){var f=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;u=Fe("f",pi(r.f),f)+(r.v!=null?u:"")}return r.l&&(r.l.display=pi(a),t["!links"].push([e,r.l])),r.D&&(h.cm=1),Fe("c",u,h)}function O4(r,e,t,i){var n=[],s=[],o=Ia(r["!ref"]),a="",l,c="",d=[],u=0,h=0,p=r["!rows"],f=r["!data"]!=null,g={r:c},m,v=-1,C=(((i||{}).Workbook||{}).WBProps||{}).date1904;for(h=o.s.c;h<=o.e.c;++h)d[h]=js(h);for(u=o.s.r;u<=o.e.r;++u){for(s=[],c=zs(u),h=o.s.c;h<=o.e.c;++h){l=d[h]+c;var S=f?(r["!data"][u]||[])[h]:r[l];S!==void 0&&(a=D4(S,l,r,e,t,i,C))!=null&&s.push(a)}(s.length>0||p&&p[u])&&(g={r:c},p&&p[u]&&(m=p[u],m.hidden&&(g.hidden=1),v=-1,m.hpx?v=eF(m.hpx):m.hpt&&(v=m.hpt),v>-1&&(g.ht=v,g.customHeight=1),m.level&&(g.outlineLevel=m.level)),n[n.length]=Fe("row",s.join(""),g))}if(p)for(;u<p.length;++u)p&&p[u]&&(g={r:u+1},m=p[u],m.hidden&&(g.hidden=1),v=-1,m.hpx?v=eF(m.hpx):m.hpt&&(v=m.hpt),v>-1&&(g.ht=v,g.customHeight=1),m.level&&(g.outlineLevel=m.level),n[n.length]=Fe("row","",g));return n.join("")}function F4(r,e,t,i){var n=[Vn,Fe("worksheet",null,{xmlns:Xp[0],"xmlns:r":xr.r})],s=t.SheetNames[r],o=0,a="",l=t.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",d=Ia(c);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Ks(d)}i||(i={}),l["!comments"]=[];var u=[];S4(l,t,r,e,n),n[n.length]=Fe("dimension",null,{ref:c}),n[n.length]=A4(l,e,r,t),e.sheetFormat&&(n[n.length]=Fe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(n[n.length]=T4(l,l["!cols"])),n[o=n.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=O4(l,e,r,t,i),a.length>0&&(n[n.length]=a)),n.length>o+1&&(n[n.length]="</sheetData>",n[o]=n[o].replace("/>",">")),l["!protect"]&&(n[n.length]=E4(l["!protect"])),l["!autofilter"]!=null&&(n[n.length]=R4(l["!autofilter"],l,t,r)),l["!merges"]!=null&&l["!merges"].length>0&&(n[n.length]=x4(l["!merges"]));var h=-1,p,f=-1;return l["!links"].length>0&&(n[n.length]="<hyperlinks>",l["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(f=Qr(i,-1,pi(g[1].Target).replace(/#.*$/,""),Ji.HLINK),p["r:id"]="rId"+f),(h=g[1].Target.indexOf("#"))>-1&&(p.location=pi(g[1].Target.slice(h+1))),g[1].Tooltip&&(p.tooltip=pi(g[1].Tooltip)),p.display=g[1].display,n[n.length]=Fe("hyperlink",null,p))}),n[n.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(n[n.length]=_4(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(n[n.length]=Io("ignoredErrors",Fe("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(f=Qr(i,-1,"../drawings/drawing"+(r+1)+".xml",Ji.DRAW),n[n.length]=Fe("drawing",null,{"r:id":"rId"+f}),l["!drawing"]=u),l["!comments"].length>0&&(f=Qr(i,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Ji.VML),n[n.length]=Fe("legacyDrawing",null,{"r:id":"rId"+f}),l["!legacy"]=f),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}var P4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var I4=":][*?/\\".split("");function LF(r,e){try{if(r=="")throw new Error("Sheet name cannot be blank");if(r.length>31)throw new Error("Sheet name cannot exceed 31 chars");if(r.charCodeAt(0)==39||r.charCodeAt(r.length-1)==39)throw new Error("Sheet name cannot start or end with apostrophe (')");if(r.toLowerCase()=="history")throw new Error("Sheet name cannot be 'History'");I4.forEach(function(t){if(r.indexOf(t)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")})}catch(t){if(e)return!1;throw t}return!0}function M4(r,e,t){r.forEach(function(i,n){LF(i);for(var s=0;s<n;++s)if(i==r[s])throw new Error("Duplicate Sheet Name: "+i);if(t){var o=e&&e[n]&&e[n].CodeName||i;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function L4(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];M4(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)y4(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t);r.SheetNames.forEach(function(i,n){var s=r.Sheets[i];if(!(!s||!s["!autofilter"])){var o;r.Workbook||(r.Workbook={}),r.Workbook.Names||(r.Workbook.Names=[]),r.Workbook.Names.forEach(function(l){l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n&&(o=l)});var a=PF(i)+"!"+FF(s["!autofilter"].ref);o?o.Ref=a:r.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:a})}})}function N4(r){var e=[Vn];e[e.length]=Fe("workbook",null,{xmlns:Xp[0],"xmlns:r":xr.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,i={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(P4.forEach(function(a){r.Workbook.WBProps[a[0]]!=null&&r.Workbook.WBProps[a[0]]!=a[1]&&(i[a[0]]=r.Workbook.WBProps[a[0]])}),r.Workbook.WBProps.CodeName&&(i.codeName=r.Workbook.WBProps.CodeName,delete i.CodeName)),e[e.length]=Fe("workbookPr",null,i);var n=r.Workbook&&r.Workbook.Sheets||[],s=0;if(n&&n[0]&&n[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=r.SheetNames.length&&!(!n[s]||!n[s].Hidden);++s);s==r.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=r.SheetNames.length;++s){var o={name:pi(r.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),n[s])switch(n[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Fe("sheet",null,o)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=Fe("definedName",pi(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function k4(r,e,t,i){for(var n=r["!merges"]||[],s=[],o={},a=r["!data"]!=null,l=e.s.c;l<=e.e.c;++l){for(var c=0,d=0,u=0;u<n.length;++u)if(!(n[u].s.r>t||n[u].s.c>l)&&!(n[u].e.r<t||n[u].e.c<l)){if(n[u].s.r<t||n[u].s.c<l){c=-1;break}c=n[u].e.r-n[u].s.r+1,d=n[u].e.c-n[u].s.c+1;break}if(!(c<0)){var h=js(l)+zs(t),p=a?(r["!data"][t]||[])[l]:r[h],f=p&&p.v!=null&&(p.h||zO(p.w||(l0(p),p.w)||""))||"";o={},c>1&&(o.rowspan=c),d>1&&(o.colspan=d),i.editable?f='<span contenteditable="true">'+f+"</span>":p&&(o["data-t"]=p&&p.t||"z",p.v!=null&&(o["data-v"]=p.v instanceof Date?p.v.toISOString():p.v),p.z!=null&&(o["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+zO(p.l.Target)+'">'+f+"</a>")),o.id=(i.id||"sjs")+"-"+h,s.push(Fe("td",f,o))}}var g="<tr>";return g+s.join("")+"</tr>"}var G4='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',B4="</body></html>";function V4(r,e,t){var i=[];return i.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function H4(r,e){var t=e||{},i=t.header!=null?t.header:G4,n=t.footer!=null?t.footer:B4,s=[i],o=Ku(r["!ref"]);s.push(V4(r,o,t));for(var a=o.s.r;a<=o.e.r;++a)s.push(k4(r,o,a,t));return s.push("</table>"+n),s.join("")}function NF(r,e,t){var i=e.rows;if(!i)throw"Unsupported origin when "+e.tagName+" is not a TABLE";var n=t||{},s=r["!data"]!=null,o=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var l=typeof n.origin=="string"?Pa(n.origin):n.origin;o=l.r,a=l.c}var c=Math.min(n.sheetRows||1e7,i.length),d={s:{r:0,c:0},e:{r:o,c:a}};if(r["!ref"]){var u=Ku(r["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),o==-1&&(d.e.r=o=u.e.r+1)}var h=[],p=0,f=r["!rows"]||(r["!rows"]=[]),g=0,m=0,v=0,C=0,S=0,b=0;for(r["!cols"]||(r["!cols"]=[]);g<i.length&&m<c;++g){var T=i[g];if(tF(T)){if(n.display)continue;f[m]={hidden:!0}}var A=T.cells;for(v=C=0;v<A.length;++v){var E=A[v];if(!(n.display&&tF(E))){var N=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):bV(E.innerHTML),M=E.getAttribute("data-z")||E.getAttribute("z");for(p=0;p<h.length;++p){var k=h[p];k.s.c==C+a&&k.s.r<m+o&&m+o<=k.e.r&&(C=k.e.c+1-a,p=-1)}b=+E.getAttribute("colspan")||1,((S=+E.getAttribute("rowspan")||1)>1||b>1)&&h.push({s:{r:m+o,c:C+a},e:{r:m+o+(S||1)-1,c:C+a+(b||1)-1}});var W={t:"s",v:N},ee=E.getAttribute("data-t")||E.getAttribute("t")||"";N!=null&&(N.length==0?W.t=ee||"z":n.raw||N.trim().length==0||ee=="s"||(N==="TRUE"?W={t:"b",v:!0}:N==="FALSE"?W={t:"b",v:!1}:isNaN(UO(N))?isNaN(mV(N).getDate())||(W={t:"d",v:aE(N)},n.UTC&&(W.v=sy(W.v)),n.cellDates||(W={t:"n",v:El(W.v)}),W.z=n.dateNF||Mo[14]):W={t:"n",v:UO(N)})),W.z===void 0&&M!=null&&(W.z=M);var te="",le=E.getElementsByTagName("A");if(le&&le.length)for(var Ye=0;Ye<le.length&&!(le[Ye].hasAttribute("href")&&(te=le[Ye].getAttribute("href"),te.charAt(0)!="#"));++Ye);te&&te.charAt(0)!="#"&&te.slice(0,11).toLowerCase()!="javascript:"&&(W.l={Target:te}),s?(r["!data"][m+o]||(r["!data"][m+o]=[]),r["!data"][m+o][C+a]=W):r[o0({c:C+a,r:m+o})]=W,d.e.c<C+a&&(d.e.c=C+a),C+=b}}++m}return h.length&&(r["!merges"]=(r["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,m-1+o),r["!ref"]=Ks(d),m>=c&&(r["!fullref"]=Ks((d.e.r=i.length-g+m-1+o,d))),r}function kF(r,e){var t=e||{},i={};return t.dense&&(i["!data"]=[]),NF(i,r,e)}function W4(r,e){var t=VV(kF(r,e),e);return t}function tF(r){var e="",t=U4(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function U4(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var JCe=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function z4(r){return function(t){for(var i=0;i!=r.length;++i){var n=r[i];t[n[0]]===void 0&&(t[n[0]]=n[1]),n[2]==="n"&&(t[n[0]]=Number(t[n[0]]))}}}function j4(r){z4([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function K4(r,e){r&&!r.SSF&&(r.SSF=a0(Mo)),r&&r.SSF&&(QB(),ZB(r.SSF),e.revssf=iV(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,qC?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",i=g4.indexOf(e.bookType)>-1,n=UV();j4(e=e||{});var s=CV(),o="",a=0;if(e.cellXfs=[],MF(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",Cr(s,o,KV(r.Props,e)),n.coreprops.push(o),Qr(e.rels,2,o,Ji.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var l=[],c=0;c<r.SheetNames.length;++c)(r.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(r.SheetNames[c]);r.Props.SheetNames=l}r.Props.Worksheets=r.Props.SheetNames.length,Cr(s,o,YV(r.Props,e)),n.extprops.push(o),Qr(e.rels,3,o,Ji.EXT_PROPS),r.Custprops!==r.Props&&Xc(r.Custprops||{}).length>0&&(o="docProps/custom.xml",Cr(s,o,XV(r.Custprops,e)),n.custprops.push(o),Qr(e.rels,4,o,Ji.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,a=1;a<=r.SheetNames.length;++a){var u={"!id":{}},h=r.Sheets[r.SheetNames[a-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+a+"."+t,Cr(s,o,F4(a-1,e,r,u)),n.sheets.push(o),Qr(e.wbrels,-1,"worksheets/sheet"+a+"."+t,Ji.WS[0])}if(h){var f=h["!comments"],g=!1,m="";if(f&&f.length>0){var v=!1;f.forEach(function(C){C[1].forEach(function(S){S.T==!0&&(v=!0)})}),v&&(m="xl/threadedComments/threadedComment"+a+".xml",Cr(s,m,p4(f,d,e)),n.threadedcomments.push(m),Qr(u,-1,"../threadedComments/threadedComment"+a+".xml",Ji.TCMNT)),m="xl/comments"+a+"."+t,Cr(s,m,h4(f,e)),n.comments.push(m),Qr(u,-1,"../comments"+a+"."+t,Ji.CMNT),g=!0}h["!legacy"]&&g&&Cr(s,"xl/drawings/vmlDrawing"+a+".vml",d4(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Cr(s,jV(o),nE(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,Cr(s,o,ZV(e.Strings,e)),n.strs.push(o),Qr(e.wbrels,-1,"sharedStrings."+t,Ji.SST)),o="xl/workbook."+t,Cr(s,o,N4(r,e)),n.workbooks.push(o),Qr(e.rels,1,o,Ji.WB),o="xl/theme/theme1.xml",Cr(s,o,l4(r.Themes,e)),n.themes.push(o),Qr(e.wbrels,-1,"theme/theme1.xml",Ji.THEME),o="xl/styles."+t,Cr(s,o,a4(r,e)),n.styles.push(o),Qr(e.wbrels,-1,"styles."+t,Ji.STY),r.vbaraw&&i&&(o="xl/vbaProject.bin",Cr(s,o,r.vbaraw),n.vba.push(o),Qr(e.wbrels,-1,"vbaProject.bin",Ji.VBA)),o="xl/metadata."+t,Cr(s,o,c4()),n.metadata.push(o),Qr(e.wbrels,-1,"metadata."+t,Ji.XLMETA),d.length>1&&(o="xl/persons/person.xml",Cr(s,o,f4(d,e)),n.people.push(o),Qr(e.wbrels,-1,"persons/person.xml",Ji.PEOPLE)),Cr(s,"[Content_Types].xml",zV(n,e)),Cr(s,"_rels/.rels",nE(e.rels)),Cr(s,"xl/_rels/workbook."+t+".rels",nE(e.wbrels)),delete e.revssf,delete e.ssf,s}function $4(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return gF(e.file,Fo.write(r,{type:hi?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Fo.write(r,e)}function Y4(r,e){var t=a0(e||{}),i=K4(r,t);return X4(i,t)}function X4(r,e){var t={},i=hi?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=i;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=i;break;default:throw new Error("Unrecognized type "+e.type)}var n=r.FullPaths?Fo.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof n=="string"){if(e.type=="binary"||e.type=="base64")return n;n=new Uint8Array(ny(n))}return e.password&&typeof encrypt_agile<"u"?$4(encrypt_agile(n,e.password),e):e.type==="file"?gF(e.file,n):e.type=="string"?wV(n):n}function GF(r,e){_B(),L4(r);var t=a0(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var i=GF(r,t);return t.type="array",ny(i)}return Y4(r,t)}function q4(r){if(!r.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(r.bookType=t.slice(1)),r.bookType=e[r.bookType]||r.bookType}}function BF(r,e,t){var i=t||{};return i.type="file",i.file=e,q4(i),GF(r,i)}function Z4(r,e,t,i,n,s,o){var a=zs(t),l=o.defval,c=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,u=r["!data"]!=null,h=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:t,enumerable:!1})}catch{h.__rowNum__=t}else h.__rowNum__=t;if(!u||r["!data"][t])for(var p=e.s.c;p<=e.e.c;++p){var f=u?(r["!data"][t]||[])[p]:r[i[p]+a];if(f==null||f.t===void 0){if(l===void 0)continue;s[p]!=null&&(h[s[p]]=l);continue}var g=f.v;switch(f.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"b":case"n":if(!f.z||!hE(f.z)||(g=oV(g),typeof g=="number"))break;case"d":o&&o.UTC||(g=vV(g));break;default:throw new Error("unrecognized type "+f.t)}if(s[p]!=null){if(g==null)if(f.t=="e"&&g===null)h[s[p]]=null;else if(l!==void 0)h[s[p]]=l;else if(c&&g===null)h[s[p]]=null;else continue;else h[s[p]]=c&&(f.t!=="n"||f.t==="n"&&o.rawNumbers!==!1)?g:l0(f,g,o);g!=null&&(d=!1)}}return{row:h,isempty:d}}function iF(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},i=0,n=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},d=c.range!=null?c.range:r["!ref"];switch(c.header===1?i=1:c.header==="A"?i=2:Array.isArray(c.header)?i=3:c.header==null&&(i=0),typeof d){case"string":l=Ia(d);break;case"number":l=Ia(r["!ref"]),l.s.r=d;break;default:l=d}i>0&&(n=0);var u=zs(l.s.r),h=[],p=[],f=0,g=0,m=r["!data"]!=null,v=l.s.r,C=0,S={};m&&!r["!data"][v]&&(r["!data"][v]=[]);var b=c.skipHidden&&r["!cols"]||[],T=c.skipHidden&&r["!rows"]||[];for(C=l.s.c;C<=l.e.c;++C)if(!(b[C]||{}).hidden)switch(h[C]=js(C),t=m?r["!data"][v][C]:r[h[C]+u],i){case 1:s[C]=C-l.s.c;break;case 2:s[C]=h[C];break;case 3:s[C]=c.header[C-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),a=o=l0(t,null,c),g=S[o]||0,!g)S[o]=1;else{do a=o+"_"+g++;while(S[a]);S[o]=g,S[a]=1}s[C]=a}for(v=l.s.r+n;v<=l.e.r;++v)if(!(T[v]||{}).hidden){var A=Z4(r,l,v,h,i,s,c);(A.isempty===!1||(i===1?c.blankrows!==!1:c.blankrows))&&(p[f++]=A.row)}return p.length=f,p}var rF=/"/g;function Q4(r,e,t,i,n,s,o,a){for(var l=!0,c=[],d="",u=zs(t),h=r["!data"]!=null,p=h&&r["!data"][t]||[],f=e.s.c;f<=e.e.c;++f)if(i[f]){var g=h?p[f]:r[i[f]+u];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(a.rawNumbers&&g.t=="n"?g.v:l0(g,null,a));for(var m=0,v=0;m!==d.length;++m)if((v=d.charCodeAt(m))===n||v===s||v===34||a.forceQuotes){d='"'+d.replace(rF,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(rF,'""')+'"')):d="";c.push(d)}return a.blankrows===!1&&l?null:c.join(o)}function VF(r,e){var t=[],i=e??{};if(r==null||r["!ref"]==null)return"";for(var n=Ia(r["!ref"]),s=i.FS!==void 0?i.FS:",",o=s.charCodeAt(0),a=i.RS!==void 0?i.RS:`
`,l=a.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),d="",u=[],h=i.skipHidden&&r["!cols"]||[],p=i.skipHidden&&r["!rows"]||[],f=n.s.c;f<=n.e.c;++f)(h[f]||{}).hidden||(u[f]=js(f));for(var g=0,m=n.s.r;m<=n.e.r;++m)(p[m]||{}).hidden||(d=Q4(r,n,m,u,o,l,s,i),d!=null&&(i.strip&&(d=d.replace(c,"")),(d||i.blankrows!==!1)&&t.push((g++?a:"")+d)));return t.join("")}function J4(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=VF(r,e);if(typeof Hi>"u"||e.type=="string")return t;var i=Hi.utils.encode(1200,t,"str");return String.fromCharCode(255)+String.fromCharCode(254)+i}function eH(r){var e="",t,i="";if(r==null||r["!ref"]==null)return[];var n=Ia(r["!ref"]),s="",o=[],a,l=[],c=r["!data"]!=null;for(a=n.s.c;a<=n.e.c;++a)o[a]=js(a);for(var d=n.s.r;d<=n.e.r;++d)for(s=zs(d),a=n.s.c;a<=n.e.c;++a)if(e=o[a]+s,t=c?(r["!data"][d]||[])[a]:r[e],i="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;i=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)i=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)i=""+t.v;else if(t.t=="b")i=t.v?"TRUE":"FALSE";else if(t.w!==void 0)i="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?i="'"+t.v:i=""+t.v}}l[l.length]=e+"="+i}return l}function HF(r,e,t){var i=t||{},n=r?r["!data"]!=null:i.dense;ZC!=null&&n==null&&(n=ZC);var s=+!i.skipHeader,o=r||{};!r&&n&&(o["!data"]=[]);var a=0,l=0;if(o&&i.origin!=null)if(typeof i.origin=="number")a=i.origin;else{var c=typeof i.origin=="string"?Pa(i.origin):i.origin;a=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:a+e.length-1+s}};if(o["!ref"]){var u=Ia(o["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),a==-1&&(a=u.e.r+1,d.e.r=a+e.length-1+s)}else a==-1&&(a=0,d.e.r=e.length-1+s);var h=i.header||[],p=0,f=[];e.forEach(function(m,v){n&&!o["!data"][a+v+s]&&(o["!data"][a+v+s]=[]),n&&(f=o["!data"][a+v+s]),Xc(m).forEach(function(C){(p=h.indexOf(C))==-1&&(h[p=h.length]=C);var S=m[C],b="z",T="",A=n?"":js(l+p)+zs(a+v+s),E=n?f[l+p]:o[A];S&&typeof S=="object"&&!(S instanceof Date)?n?f[l+p]=S:o[A]=S:(typeof S=="number"?b="n":typeof S=="boolean"?b="b":typeof S=="string"?b="s":S instanceof Date?(b="d",i.UTC||(S=sy(S)),i.cellDates||(b="n",S=El(S)),T=E!=null&&E.z&&hE(E.z)?E.z:i.dateNF||Mo[14]):S===null&&i.nullError&&(b="e",S=0),E?(E.t=b,E.v=S,delete E.w,delete E.R,T&&(E.z=T)):n?f[l+p]=E={t:b,v:S}:o[A]=E={t:b,v:S},T&&(E.z=T))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=zs(a);if(n&&!o["!data"][a]&&(o["!data"][a]=[]),s)for(p=0;p<h.length;++p)n?o["!data"][a][p+l]={t:"s",v:h[p]}:o[js(p+l)+g]={t:"s",v:h[p]};return o["!ref"]=Ks(d),o}function tH(r,e){return HF(null,r,e)}function ry(r,e,t){if(typeof e=="string"){if(r["!data"]!=null){var i=Pa(e);return r["!data"][i.r]||(r["!data"][i.r]=[]),r["!data"][i.r][i.c]||(r["!data"][i.r][i.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?ry(r,o0(e)):ry(r,js(t||0)+zs(e))}function iH(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function rH(){return{SheetNames:[],Sheets:{}}}function nH(r,e,t,i){var n=1;if(!t)for(;n<=65535&&r.SheetNames.indexOf(t="Sheet"+n)!=-1;++n,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&r.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);n=s&&+s[2]||0;var o=s&&s[1]||t;for(++n;n<=65535&&r.SheetNames.indexOf(t=o+n)!=-1;++n);}if(LF(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function sH(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var i=iH(r,e);switch(r.Workbook.Sheets[i]||(r.Workbook.Sheets[i]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[i].Hidden=t}function oH(r,e){return r.z=e,r}function WF(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function aH(r,e,t){return WF(r,"#"+e,t)}function lH(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function cH(r,e,t,i){for(var n=typeof e!="string"?e:Ia(e),s=typeof e=="string"?e:Ks(e),o=n.s.r;o<=n.e.r;++o)for(var a=n.s.c;a<=n.e.c;++a){var l=ry(r,o,a);l.t="n",l.F=s,delete l.v,o==n.s.r&&a==n.s.c&&(l.f=t,i&&(l.D=!0))}var c=Ku(r["!ref"]);return c.s.r>n.s.r&&(c.s.r=n.s.r),c.s.c>n.s.c&&(c.s.c=n.s.c),c.e.r<n.e.r&&(c.e.r=n.e.r),c.e.c<n.e.c&&(c.e.c=n.e.c),r["!ref"]=Ks(c),r}var ay={encode_col:js,encode_row:zs,encode_cell:o0,encode_range:Ks,decode_col:kV,decode_row:LV,split_cell:BV,decode_cell:Pa,decode_range:Ku,format_cell:l0,sheet_add_aoa:IF,sheet_add_json:HF,sheet_add_dom:NF,aoa_to_sheet:HV,json_to_sheet:tH,table_to_sheet:kF,table_to_book:W4,sheet_to_csv:VF,sheet_to_txt:J4,sheet_to_json:iF,sheet_to_html:H4,sheet_to_formulae:eH,sheet_to_row_object_array:iF,sheet_get_cell:ry,book_new:rH,book_append_sheet:nH,book_set_sheet_visibility:sH,cell_set_number_format:oH,cell_set_hyperlink:WF,cell_set_internal_link:aH,cell_add_comment:lH,sheet_set_array_formula:cH,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};var eye=nF.version;var UF=(()=>{let e=class e{export(i,n){i.forEach(a=>{Object.keys(a).forEach(l=>{this.isValidExcelType(a[l])||(a[l]=JSON.stringify(a[l]))})});let s=ay.json_to_sheet(i),o=ay.book_new();ay.book_append_sheet(o,s,"Objects"),BF(o,`veracity-${n}s-export-${new Date(Date.now()).toISOString()}.xlsx`)}isValidExcelType(i){let n=typeof i=="string",s=typeof i=="number",o=typeof i=="boolean",a=i instanceof Date;return n||s||o||a}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var ly=class{constructor(e,t){this.key=e,this.valueParser=t}};var Zp=function(r){return r[r["50 Years"]=50]="50 Years",r[r["60 Years"]=60]="60 Years",r[r["120 Years"]=120]="120 Years",r}(Zp||{});var zF=[{name:"Afghanistan","alpha-2":"AF","alpha-3":"AFG","country-code":"004","iso_3166-2":"ISO 3166-2:AF",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"\xC5land Islands","alpha-2":"AX","alpha-3":"ALA","country-code":"248","iso_3166-2":"ISO 3166-2:AX",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Albania","alpha-2":"AL","alpha-3":"ALB","country-code":"008","iso_3166-2":"ISO 3166-2:AL",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Algeria","alpha-2":"DZ","alpha-3":"DZA","country-code":"012","iso_3166-2":"ISO 3166-2:DZ",region:"Africa","sub-region":"Northern Africa","intermediate-region":"","region-code":"002","sub-region-code":"015","intermediate-region-code":""},{name:"American Samoa","alpha-2":"AS","alpha-3":"ASM","country-code":"016","iso_3166-2":"ISO 3166-2:AS",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Andorra","alpha-2":"AD","alpha-3":"AND","country-code":"020","iso_3166-2":"ISO 3166-2:AD",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Angola","alpha-2":"AO","alpha-3":"AGO","country-code":"024","iso_3166-2":"ISO 3166-2:AO",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Anguilla","alpha-2":"AI","alpha-3":"AIA","country-code":"660","iso_3166-2":"ISO 3166-2:AI",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Antarctica","alpha-2":"AQ","alpha-3":"ATA","country-code":"010","iso_3166-2":"ISO 3166-2:AQ",region:"","sub-region":"","intermediate-region":"","region-code":"","sub-region-code":"","intermediate-region-code":""},{name:"Antigua and Barbuda","alpha-2":"AG","alpha-3":"ATG","country-code":"028","iso_3166-2":"ISO 3166-2:AG",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Argentina","alpha-2":"AR","alpha-3":"ARG","country-code":"032","iso_3166-2":"ISO 3166-2:AR",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Armenia","alpha-2":"AM","alpha-3":"ARM","country-code":"051","iso_3166-2":"ISO 3166-2:AM",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Aruba","alpha-2":"AW","alpha-3":"ABW","country-code":"533","iso_3166-2":"ISO 3166-2:AW",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Australia","alpha-2":"AU","alpha-3":"AUS","country-code":"036","iso_3166-2":"ISO 3166-2:AU",region:"Oceania","sub-region":"Australia and New Zealand","intermediate-region":"","region-code":"009","sub-region-code":"053","intermediate-region-code":""},{name:"Austria","alpha-2":"AT","alpha-3":"AUT","country-code":"040","iso_3166-2":"ISO 3166-2:AT",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"Azerbaijan","alpha-2":"AZ","alpha-3":"AZE","country-code":"031","iso_3166-2":"ISO 3166-2:AZ",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Bahamas","alpha-2":"BS","alpha-3":"BHS","country-code":"044","iso_3166-2":"ISO 3166-2:BS",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Bahrain","alpha-2":"BH","alpha-3":"BHR","country-code":"048","iso_3166-2":"ISO 3166-2:BH",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Bangladesh","alpha-2":"BD","alpha-3":"BGD","country-code":"050","iso_3166-2":"ISO 3166-2:BD",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Barbados","alpha-2":"BB","alpha-3":"BRB","country-code":"052","iso_3166-2":"ISO 3166-2:BB",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Belarus","alpha-2":"BY","alpha-3":"BLR","country-code":"112","iso_3166-2":"ISO 3166-2:BY",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Belgium","alpha-2":"BE","alpha-3":"BEL","country-code":"056","iso_3166-2":"ISO 3166-2:BE",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"Belize","alpha-2":"BZ","alpha-3":"BLZ","country-code":"084","iso_3166-2":"ISO 3166-2:BZ",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"Benin","alpha-2":"BJ","alpha-3":"BEN","country-code":"204","iso_3166-2":"ISO 3166-2:BJ",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Bermuda","alpha-2":"BM","alpha-3":"BMU","country-code":"060","iso_3166-2":"ISO 3166-2:BM",region:"Americas","sub-region":"Northern America","intermediate-region":"","region-code":"019","sub-region-code":"021","intermediate-region-code":""},{name:"Bhutan","alpha-2":"BT","alpha-3":"BTN","country-code":"064","iso_3166-2":"ISO 3166-2:BT",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Bolivia (Plurinational State of)","alpha-2":"BO","alpha-3":"BOL","country-code":"068","iso_3166-2":"ISO 3166-2:BO",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Bonaire, Sint Eustatius and Saba","alpha-2":"BQ","alpha-3":"BES","country-code":"535","iso_3166-2":"ISO 3166-2:BQ",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Bosnia and Herzegovina","alpha-2":"BA","alpha-3":"BIH","country-code":"070","iso_3166-2":"ISO 3166-2:BA",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Botswana","alpha-2":"BW","alpha-3":"BWA","country-code":"072","iso_3166-2":"ISO 3166-2:BW",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Southern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"018"},{name:"Bouvet Island","alpha-2":"BV","alpha-3":"BVT","country-code":"074","iso_3166-2":"ISO 3166-2:BV",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Brazil","alpha-2":"BR","alpha-3":"BRA","country-code":"076","iso_3166-2":"ISO 3166-2:BR",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"British Indian Ocean Territory","alpha-2":"IO","alpha-3":"IOT","country-code":"086","iso_3166-2":"ISO 3166-2:IO",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Brunei Darussalam","alpha-2":"BN","alpha-3":"BRN","country-code":"096","iso_3166-2":"ISO 3166-2:BN",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Bulgaria","alpha-2":"BG","alpha-3":"BGR","country-code":"100","iso_3166-2":"ISO 3166-2:BG",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Burkina Faso","alpha-2":"BF","alpha-3":"BFA","country-code":"854","iso_3166-2":"ISO 3166-2:BF",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Burundi","alpha-2":"BI","alpha-3":"BDI","country-code":"108","iso_3166-2":"ISO 3166-2:BI",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Cabo Verde","alpha-2":"CV","alpha-3":"CPV","country-code":"132","iso_3166-2":"ISO 3166-2:CV",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Cambodia","alpha-2":"KH","alpha-3":"KHM","country-code":"116","iso_3166-2":"ISO 3166-2:KH",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Cameroon","alpha-2":"CM","alpha-3":"CMR","country-code":"120","iso_3166-2":"ISO 3166-2:CM",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Canada","alpha-2":"CA","alpha-3":"CAN","country-code":"124","iso_3166-2":"ISO 3166-2:CA",region:"Americas","sub-region":"Northern America","intermediate-region":"","region-code":"019","sub-region-code":"021","intermediate-region-code":""},{name:"Cayman Islands","alpha-2":"KY","alpha-3":"CYM","country-code":"136","iso_3166-2":"ISO 3166-2:KY",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Central African Republic","alpha-2":"CF","alpha-3":"CAF","country-code":"140","iso_3166-2":"ISO 3166-2:CF",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Chad","alpha-2":"TD","alpha-3":"TCD","country-code":"148","iso_3166-2":"ISO 3166-2:TD",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Chile","alpha-2":"CL","alpha-3":"CHL","country-code":"152","iso_3166-2":"ISO 3166-2:CL",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"China","alpha-2":"CN","alpha-3":"CHN","country-code":"156","iso_3166-2":"ISO 3166-2:CN",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Christmas Island","alpha-2":"CX","alpha-3":"CXR","country-code":"162","iso_3166-2":"ISO 3166-2:CX",region:"Oceania","sub-region":"Australia and New Zealand","intermediate-region":"","region-code":"009","sub-region-code":"053","intermediate-region-code":""},{name:"Cocos (Keeling) Islands","alpha-2":"CC","alpha-3":"CCK","country-code":"166","iso_3166-2":"ISO 3166-2:CC",region:"Oceania","sub-region":"Australia and New Zealand","intermediate-region":"","region-code":"009","sub-region-code":"053","intermediate-region-code":""},{name:"Colombia","alpha-2":"CO","alpha-3":"COL","country-code":"170","iso_3166-2":"ISO 3166-2:CO",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Comoros","alpha-2":"KM","alpha-3":"COM","country-code":"174","iso_3166-2":"ISO 3166-2:KM",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Congo","alpha-2":"CG","alpha-3":"COG","country-code":"178","iso_3166-2":"ISO 3166-2:CG",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Congo, Democratic Republic of the","alpha-2":"CD","alpha-3":"COD","country-code":"180","iso_3166-2":"ISO 3166-2:CD",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Cook Islands","alpha-2":"CK","alpha-3":"COK","country-code":"184","iso_3166-2":"ISO 3166-2:CK",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Costa Rica","alpha-2":"CR","alpha-3":"CRI","country-code":"188","iso_3166-2":"ISO 3166-2:CR",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"C\xF4te d'Ivoire","alpha-2":"CI","alpha-3":"CIV","country-code":"384","iso_3166-2":"ISO 3166-2:CI",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Croatia","alpha-2":"HR","alpha-3":"HRV","country-code":"191","iso_3166-2":"ISO 3166-2:HR",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Cuba","alpha-2":"CU","alpha-3":"CUB","country-code":"192","iso_3166-2":"ISO 3166-2:CU",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Cura\xE7ao","alpha-2":"CW","alpha-3":"CUW","country-code":"531","iso_3166-2":"ISO 3166-2:CW",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Cyprus","alpha-2":"CY","alpha-3":"CYP","country-code":"196","iso_3166-2":"ISO 3166-2:CY",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Czechia","alpha-2":"CZ","alpha-3":"CZE","country-code":"203","iso_3166-2":"ISO 3166-2:CZ",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Denmark","alpha-2":"DK","alpha-3":"DNK","country-code":"208","iso_3166-2":"ISO 3166-2:DK",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Djibouti","alpha-2":"DJ","alpha-3":"DJI","country-code":"262","iso_3166-2":"ISO 3166-2:DJ",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Dominica","alpha-2":"DM","alpha-3":"DMA","country-code":"212","iso_3166-2":"ISO 3166-2:DM",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Dominican Republic","alpha-2":"DO","alpha-3":"DOM","country-code":"214","iso_3166-2":"ISO 3166-2:DO",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Ecuador","alpha-2":"EC","alpha-3":"ECU","country-code":"218","iso_3166-2":"ISO 3166-2:EC",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Egypt","alpha-2":"EG","alpha-3":"EGY","country-code":"818","iso_3166-2":"ISO 3166-2:EG",region:"Africa","sub-region":"Northern Africa","intermediate-region":"","region-code":"002","sub-region-code":"015","intermediate-region-code":""},{name:"El Salvador","alpha-2":"SV","alpha-3":"SLV","country-code":"222","iso_3166-2":"ISO 3166-2:SV",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"Equatorial Guinea","alpha-2":"GQ","alpha-3":"GNQ","country-code":"226","iso_3166-2":"ISO 3166-2:GQ",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Eritrea","alpha-2":"ER","alpha-3":"ERI","country-code":"232","iso_3166-2":"ISO 3166-2:ER",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Estonia","alpha-2":"EE","alpha-3":"EST","country-code":"233","iso_3166-2":"ISO 3166-2:EE",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Eswatini","alpha-2":"SZ","alpha-3":"SWZ","country-code":"748","iso_3166-2":"ISO 3166-2:SZ",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Southern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"018"},{name:"Ethiopia","alpha-2":"ET","alpha-3":"ETH","country-code":"231","iso_3166-2":"ISO 3166-2:ET",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Falkland Islands (Malvinas)","alpha-2":"FK","alpha-3":"FLK","country-code":"238","iso_3166-2":"ISO 3166-2:FK",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Faroe Islands","alpha-2":"FO","alpha-3":"FRO","country-code":"234","iso_3166-2":"ISO 3166-2:FO",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Fiji","alpha-2":"FJ","alpha-3":"FJI","country-code":"242","iso_3166-2":"ISO 3166-2:FJ",region:"Oceania","sub-region":"Melanesia","intermediate-region":"","region-code":"009","sub-region-code":"054","intermediate-region-code":""},{name:"Finland","alpha-2":"FI","alpha-3":"FIN","country-code":"246","iso_3166-2":"ISO 3166-2:FI",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"France","alpha-2":"FR","alpha-3":"FRA","country-code":"250","iso_3166-2":"ISO 3166-2:FR",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"French Guiana","alpha-2":"GF","alpha-3":"GUF","country-code":"254","iso_3166-2":"ISO 3166-2:GF",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"French Polynesia","alpha-2":"PF","alpha-3":"PYF","country-code":"258","iso_3166-2":"ISO 3166-2:PF",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"French Southern Territories","alpha-2":"TF","alpha-3":"ATF","country-code":"260","iso_3166-2":"ISO 3166-2:TF",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Gabon","alpha-2":"GA","alpha-3":"GAB","country-code":"266","iso_3166-2":"ISO 3166-2:GA",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Gambia","alpha-2":"GM","alpha-3":"GMB","country-code":"270","iso_3166-2":"ISO 3166-2:GM",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Georgia","alpha-2":"GE","alpha-3":"GEO","country-code":"268","iso_3166-2":"ISO 3166-2:GE",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Germany","alpha-2":"DE","alpha-3":"DEU","country-code":"276","iso_3166-2":"ISO 3166-2:DE",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"Ghana","alpha-2":"GH","alpha-3":"GHA","country-code":"288","iso_3166-2":"ISO 3166-2:GH",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Gibraltar","alpha-2":"GI","alpha-3":"GIB","country-code":"292","iso_3166-2":"ISO 3166-2:GI",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Greece","alpha-2":"GR","alpha-3":"GRC","country-code":"300","iso_3166-2":"ISO 3166-2:GR",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Greenland","alpha-2":"GL","alpha-3":"GRL","country-code":"304","iso_3166-2":"ISO 3166-2:GL",region:"Americas","sub-region":"Northern America","intermediate-region":"","region-code":"019","sub-region-code":"021","intermediate-region-code":""},{name:"Grenada","alpha-2":"GD","alpha-3":"GRD","country-code":"308","iso_3166-2":"ISO 3166-2:GD",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Guadeloupe","alpha-2":"GP","alpha-3":"GLP","country-code":"312","iso_3166-2":"ISO 3166-2:GP",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Guam","alpha-2":"GU","alpha-3":"GUM","country-code":"316","iso_3166-2":"ISO 3166-2:GU",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Guatemala","alpha-2":"GT","alpha-3":"GTM","country-code":"320","iso_3166-2":"ISO 3166-2:GT",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"Guernsey","alpha-2":"GG","alpha-3":"GGY","country-code":"831","iso_3166-2":"ISO 3166-2:GG",region:"Europe","sub-region":"Northern Europe","intermediate-region":"Channel Islands","region-code":"150","sub-region-code":"154","intermediate-region-code":"830"},{name:"Guinea","alpha-2":"GN","alpha-3":"GIN","country-code":"324","iso_3166-2":"ISO 3166-2:GN",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Guinea-Bissau","alpha-2":"GW","alpha-3":"GNB","country-code":"624","iso_3166-2":"ISO 3166-2:GW",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Guyana","alpha-2":"GY","alpha-3":"GUY","country-code":"328","iso_3166-2":"ISO 3166-2:GY",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Haiti","alpha-2":"HT","alpha-3":"HTI","country-code":"332","iso_3166-2":"ISO 3166-2:HT",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Heard Island and McDonald Islands","alpha-2":"HM","alpha-3":"HMD","country-code":"334","iso_3166-2":"ISO 3166-2:HM",region:"Oceania","sub-region":"Australia and New Zealand","intermediate-region":"","region-code":"009","sub-region-code":"053","intermediate-region-code":""},{name:"Holy See","alpha-2":"VA","alpha-3":"VAT","country-code":"336","iso_3166-2":"ISO 3166-2:VA",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Honduras","alpha-2":"HN","alpha-3":"HND","country-code":"340","iso_3166-2":"ISO 3166-2:HN",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"Hong Kong","alpha-2":"HK","alpha-3":"HKG","country-code":"344","iso_3166-2":"ISO 3166-2:HK",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Hungary","alpha-2":"HU","alpha-3":"HUN","country-code":"348","iso_3166-2":"ISO 3166-2:HU",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Iceland","alpha-2":"IS","alpha-3":"ISL","country-code":"352","iso_3166-2":"ISO 3166-2:IS",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"India","alpha-2":"IN","alpha-3":"IND","country-code":"356","iso_3166-2":"ISO 3166-2:IN",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Indonesia","alpha-2":"ID","alpha-3":"IDN","country-code":"360","iso_3166-2":"ISO 3166-2:ID",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Iran (Islamic Republic of)","alpha-2":"IR","alpha-3":"IRN","country-code":"364","iso_3166-2":"ISO 3166-2:IR",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Iraq","alpha-2":"IQ","alpha-3":"IRQ","country-code":"368","iso_3166-2":"ISO 3166-2:IQ",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Ireland","alpha-2":"IE","alpha-3":"IRL","country-code":"372","iso_3166-2":"ISO 3166-2:IE",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Isle of Man","alpha-2":"IM","alpha-3":"IMN","country-code":"833","iso_3166-2":"ISO 3166-2:IM",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Israel","alpha-2":"IL","alpha-3":"ISR","country-code":"376","iso_3166-2":"ISO 3166-2:IL",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Italy","alpha-2":"IT","alpha-3":"ITA","country-code":"380","iso_3166-2":"ISO 3166-2:IT",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Jamaica","alpha-2":"JM","alpha-3":"JAM","country-code":"388","iso_3166-2":"ISO 3166-2:JM",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Japan","alpha-2":"JP","alpha-3":"JPN","country-code":"392","iso_3166-2":"ISO 3166-2:JP",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Jersey","alpha-2":"JE","alpha-3":"JEY","country-code":"832","iso_3166-2":"ISO 3166-2:JE",region:"Europe","sub-region":"Northern Europe","intermediate-region":"Channel Islands","region-code":"150","sub-region-code":"154","intermediate-region-code":"830"},{name:"Jordan","alpha-2":"JO","alpha-3":"JOR","country-code":"400","iso_3166-2":"ISO 3166-2:JO",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Kazakhstan","alpha-2":"KZ","alpha-3":"KAZ","country-code":"398","iso_3166-2":"ISO 3166-2:KZ",region:"Asia","sub-region":"Central Asia","intermediate-region":"","region-code":"142","sub-region-code":"143","intermediate-region-code":""},{name:"Kenya","alpha-2":"KE","alpha-3":"KEN","country-code":"404","iso_3166-2":"ISO 3166-2:KE",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Kiribati","alpha-2":"KI","alpha-3":"KIR","country-code":"296","iso_3166-2":"ISO 3166-2:KI",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Korea (Democratic People's Republic of)","alpha-2":"KP","alpha-3":"PRK","country-code":"408","iso_3166-2":"ISO 3166-2:KP",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Korea, Republic of","alpha-2":"KR","alpha-3":"KOR","country-code":"410","iso_3166-2":"ISO 3166-2:KR",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Kuwait","alpha-2":"KW","alpha-3":"KWT","country-code":"414","iso_3166-2":"ISO 3166-2:KW",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Kyrgyzstan","alpha-2":"KG","alpha-3":"KGZ","country-code":"417","iso_3166-2":"ISO 3166-2:KG",region:"Asia","sub-region":"Central Asia","intermediate-region":"","region-code":"142","sub-region-code":"143","intermediate-region-code":""},{name:"Lao People's Democratic Republic","alpha-2":"LA","alpha-3":"LAO","country-code":"418","iso_3166-2":"ISO 3166-2:LA",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Latvia","alpha-2":"LV","alpha-3":"LVA","country-code":"428","iso_3166-2":"ISO 3166-2:LV",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Lebanon","alpha-2":"LB","alpha-3":"LBN","country-code":"422","iso_3166-2":"ISO 3166-2:LB",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Lesotho","alpha-2":"LS","alpha-3":"LSO","country-code":"426","iso_3166-2":"ISO 3166-2:LS",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Southern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"018"},{name:"Liberia","alpha-2":"LR","alpha-3":"LBR","country-code":"430","iso_3166-2":"ISO 3166-2:LR",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Libya","alpha-2":"LY","alpha-3":"LBY","country-code":"434","iso_3166-2":"ISO 3166-2:LY",region:"Africa","sub-region":"Northern Africa","intermediate-region":"","region-code":"002","sub-region-code":"015","intermediate-region-code":""},{name:"Liechtenstein","alpha-2":"LI","alpha-3":"LIE","country-code":"438","iso_3166-2":"ISO 3166-2:LI",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"Lithuania","alpha-2":"LT","alpha-3":"LTU","country-code":"440","iso_3166-2":"ISO 3166-2:LT",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Luxembourg","alpha-2":"LU","alpha-3":"LUX","country-code":"442","iso_3166-2":"ISO 3166-2:LU",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"Macao","alpha-2":"MO","alpha-3":"MAC","country-code":"446","iso_3166-2":"ISO 3166-2:MO",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Madagascar","alpha-2":"MG","alpha-3":"MDG","country-code":"450","iso_3166-2":"ISO 3166-2:MG",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Malawi","alpha-2":"MW","alpha-3":"MWI","country-code":"454","iso_3166-2":"ISO 3166-2:MW",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Malaysia","alpha-2":"MY","alpha-3":"MYS","country-code":"458","iso_3166-2":"ISO 3166-2:MY",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Maldives","alpha-2":"MV","alpha-3":"MDV","country-code":"462","iso_3166-2":"ISO 3166-2:MV",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Mali","alpha-2":"ML","alpha-3":"MLI","country-code":"466","iso_3166-2":"ISO 3166-2:ML",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Malta","alpha-2":"MT","alpha-3":"MLT","country-code":"470","iso_3166-2":"ISO 3166-2:MT",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Marshall Islands","alpha-2":"MH","alpha-3":"MHL","country-code":"584","iso_3166-2":"ISO 3166-2:MH",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Martinique","alpha-2":"MQ","alpha-3":"MTQ","country-code":"474","iso_3166-2":"ISO 3166-2:MQ",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Mauritania","alpha-2":"MR","alpha-3":"MRT","country-code":"478","iso_3166-2":"ISO 3166-2:MR",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Mauritius","alpha-2":"MU","alpha-3":"MUS","country-code":"480","iso_3166-2":"ISO 3166-2:MU",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Mayotte","alpha-2":"YT","alpha-3":"MYT","country-code":"175","iso_3166-2":"ISO 3166-2:YT",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Mexico","alpha-2":"MX","alpha-3":"MEX","country-code":"484","iso_3166-2":"ISO 3166-2:MX",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"Micronesia (Federated States of)","alpha-2":"FM","alpha-3":"FSM","country-code":"583","iso_3166-2":"ISO 3166-2:FM",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Moldova, Republic of","alpha-2":"MD","alpha-3":"MDA","country-code":"498","iso_3166-2":"ISO 3166-2:MD",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Monaco","alpha-2":"MC","alpha-3":"MCO","country-code":"492","iso_3166-2":"ISO 3166-2:MC",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"Mongolia","alpha-2":"MN","alpha-3":"MNG","country-code":"496","iso_3166-2":"ISO 3166-2:MN",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Montenegro","alpha-2":"ME","alpha-3":"MNE","country-code":"499","iso_3166-2":"ISO 3166-2:ME",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Montserrat","alpha-2":"MS","alpha-3":"MSR","country-code":"500","iso_3166-2":"ISO 3166-2:MS",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Morocco","alpha-2":"MA","alpha-3":"MAR","country-code":"504","iso_3166-2":"ISO 3166-2:MA",region:"Africa","sub-region":"Northern Africa","intermediate-region":"","region-code":"002","sub-region-code":"015","intermediate-region-code":""},{name:"Mozambique","alpha-2":"MZ","alpha-3":"MOZ","country-code":"508","iso_3166-2":"ISO 3166-2:MZ",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Myanmar","alpha-2":"MM","alpha-3":"MMR","country-code":"104","iso_3166-2":"ISO 3166-2:MM",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Namibia","alpha-2":"NA","alpha-3":"NAM","country-code":"516","iso_3166-2":"ISO 3166-2:NA",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Southern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"018"},{name:"Nauru","alpha-2":"NR","alpha-3":"NRU","country-code":"520","iso_3166-2":"ISO 3166-2:NR",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Nepal","alpha-2":"NP","alpha-3":"NPL","country-code":"524","iso_3166-2":"ISO 3166-2:NP",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Netherlands","alpha-2":"NL","alpha-3":"NLD","country-code":"528","iso_3166-2":"ISO 3166-2:NL",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"New Caledonia","alpha-2":"NC","alpha-3":"NCL","country-code":"540","iso_3166-2":"ISO 3166-2:NC",region:"Oceania","sub-region":"Melanesia","intermediate-region":"","region-code":"009","sub-region-code":"054","intermediate-region-code":""},{name:"New Zealand","alpha-2":"NZ","alpha-3":"NZL","country-code":"554","iso_3166-2":"ISO 3166-2:NZ",region:"Oceania","sub-region":"Australia and New Zealand","intermediate-region":"","region-code":"009","sub-region-code":"053","intermediate-region-code":""},{name:"Nicaragua","alpha-2":"NI","alpha-3":"NIC","country-code":"558","iso_3166-2":"ISO 3166-2:NI",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"Niger","alpha-2":"NE","alpha-3":"NER","country-code":"562","iso_3166-2":"ISO 3166-2:NE",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Nigeria","alpha-2":"NG","alpha-3":"NGA","country-code":"566","iso_3166-2":"ISO 3166-2:NG",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Niue","alpha-2":"NU","alpha-3":"NIU","country-code":"570","iso_3166-2":"ISO 3166-2:NU",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Norfolk Island","alpha-2":"NF","alpha-3":"NFK","country-code":"574","iso_3166-2":"ISO 3166-2:NF",region:"Oceania","sub-region":"Australia and New Zealand","intermediate-region":"","region-code":"009","sub-region-code":"053","intermediate-region-code":""},{name:"North Macedonia","alpha-2":"MK","alpha-3":"MKD","country-code":"807","iso_3166-2":"ISO 3166-2:MK",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Northern Mariana Islands","alpha-2":"MP","alpha-3":"MNP","country-code":"580","iso_3166-2":"ISO 3166-2:MP",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Norway","alpha-2":"NO","alpha-3":"NOR","country-code":"578","iso_3166-2":"ISO 3166-2:NO",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Oman","alpha-2":"OM","alpha-3":"OMN","country-code":"512","iso_3166-2":"ISO 3166-2:OM",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Pakistan","alpha-2":"PK","alpha-3":"PAK","country-code":"586","iso_3166-2":"ISO 3166-2:PK",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Palau","alpha-2":"PW","alpha-3":"PLW","country-code":"585","iso_3166-2":"ISO 3166-2:PW",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Palestine, State of","alpha-2":"PS","alpha-3":"PSE","country-code":"275","iso_3166-2":"ISO 3166-2:PS",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Panama","alpha-2":"PA","alpha-3":"PAN","country-code":"591","iso_3166-2":"ISO 3166-2:PA",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Central America","region-code":"019","sub-region-code":"419","intermediate-region-code":"013"},{name:"Papua New Guinea","alpha-2":"PG","alpha-3":"PNG","country-code":"598","iso_3166-2":"ISO 3166-2:PG",region:"Oceania","sub-region":"Melanesia","intermediate-region":"","region-code":"009","sub-region-code":"054","intermediate-region-code":""},{name:"Paraguay","alpha-2":"PY","alpha-3":"PRY","country-code":"600","iso_3166-2":"ISO 3166-2:PY",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Peru","alpha-2":"PE","alpha-3":"PER","country-code":"604","iso_3166-2":"ISO 3166-2:PE",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Philippines","alpha-2":"PH","alpha-3":"PHL","country-code":"608","iso_3166-2":"ISO 3166-2:PH",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Pitcairn","alpha-2":"PN","alpha-3":"PCN","country-code":"612","iso_3166-2":"ISO 3166-2:PN",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Poland","alpha-2":"PL","alpha-3":"POL","country-code":"616","iso_3166-2":"ISO 3166-2:PL",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Portugal","alpha-2":"PT","alpha-3":"PRT","country-code":"620","iso_3166-2":"ISO 3166-2:PT",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Puerto Rico","alpha-2":"PR","alpha-3":"PRI","country-code":"630","iso_3166-2":"ISO 3166-2:PR",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Qatar","alpha-2":"QA","alpha-3":"QAT","country-code":"634","iso_3166-2":"ISO 3166-2:QA",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"R\xE9union","alpha-2":"RE","alpha-3":"REU","country-code":"638","iso_3166-2":"ISO 3166-2:RE",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Romania","alpha-2":"RO","alpha-3":"ROU","country-code":"642","iso_3166-2":"ISO 3166-2:RO",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Russian Federation","alpha-2":"RU","alpha-3":"RUS","country-code":"643","iso_3166-2":"ISO 3166-2:RU",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Rwanda","alpha-2":"RW","alpha-3":"RWA","country-code":"646","iso_3166-2":"ISO 3166-2:RW",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Saint Barth\xE9lemy","alpha-2":"BL","alpha-3":"BLM","country-code":"652","iso_3166-2":"ISO 3166-2:BL",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Saint Helena, Ascension and Tristan da Cunha","alpha-2":"SH","alpha-3":"SHN","country-code":"654","iso_3166-2":"ISO 3166-2:SH",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Saint Kitts and Nevis","alpha-2":"KN","alpha-3":"KNA","country-code":"659","iso_3166-2":"ISO 3166-2:KN",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Saint Lucia","alpha-2":"LC","alpha-3":"LCA","country-code":"662","iso_3166-2":"ISO 3166-2:LC",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Saint Martin (French part)","alpha-2":"MF","alpha-3":"MAF","country-code":"663","iso_3166-2":"ISO 3166-2:MF",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Saint Pierre and Miquelon","alpha-2":"PM","alpha-3":"SPM","country-code":"666","iso_3166-2":"ISO 3166-2:PM",region:"Americas","sub-region":"Northern America","intermediate-region":"","region-code":"019","sub-region-code":"021","intermediate-region-code":""},{name:"Saint Vincent and the Grenadines","alpha-2":"VC","alpha-3":"VCT","country-code":"670","iso_3166-2":"ISO 3166-2:VC",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Samoa","alpha-2":"WS","alpha-3":"WSM","country-code":"882","iso_3166-2":"ISO 3166-2:WS",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"San Marino","alpha-2":"SM","alpha-3":"SMR","country-code":"674","iso_3166-2":"ISO 3166-2:SM",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Sao Tome and Principe","alpha-2":"ST","alpha-3":"STP","country-code":"678","iso_3166-2":"ISO 3166-2:ST",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Middle Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"017"},{name:"Saudi Arabia","alpha-2":"SA","alpha-3":"SAU","country-code":"682","iso_3166-2":"ISO 3166-2:SA",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Senegal","alpha-2":"SN","alpha-3":"SEN","country-code":"686","iso_3166-2":"ISO 3166-2:SN",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Serbia","alpha-2":"RS","alpha-3":"SRB","country-code":"688","iso_3166-2":"ISO 3166-2:RS",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Seychelles","alpha-2":"SC","alpha-3":"SYC","country-code":"690","iso_3166-2":"ISO 3166-2:SC",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Sierra Leone","alpha-2":"SL","alpha-3":"SLE","country-code":"694","iso_3166-2":"ISO 3166-2:SL",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Singapore","alpha-2":"SG","alpha-3":"SGP","country-code":"702","iso_3166-2":"ISO 3166-2:SG",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Sint Maarten (Dutch part)","alpha-2":"SX","alpha-3":"SXM","country-code":"534","iso_3166-2":"ISO 3166-2:SX",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Slovakia","alpha-2":"SK","alpha-3":"SVK","country-code":"703","iso_3166-2":"ISO 3166-2:SK",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"Slovenia","alpha-2":"SI","alpha-3":"SVN","country-code":"705","iso_3166-2":"ISO 3166-2:SI",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Solomon Islands","alpha-2":"SB","alpha-3":"SLB","country-code":"090","iso_3166-2":"ISO 3166-2:SB",region:"Oceania","sub-region":"Melanesia","intermediate-region":"","region-code":"009","sub-region-code":"054","intermediate-region-code":""},{name:"Somalia","alpha-2":"SO","alpha-3":"SOM","country-code":"706","iso_3166-2":"ISO 3166-2:SO",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"South Africa","alpha-2":"ZA","alpha-3":"ZAF","country-code":"710","iso_3166-2":"ISO 3166-2:ZA",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Southern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"018"},{name:"South Georgia and the South Sandwich Islands","alpha-2":"GS","alpha-3":"SGS","country-code":"239","iso_3166-2":"ISO 3166-2:GS",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"South Sudan","alpha-2":"SS","alpha-3":"SSD","country-code":"728","iso_3166-2":"ISO 3166-2:SS",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Spain","alpha-2":"ES","alpha-3":"ESP","country-code":"724","iso_3166-2":"ISO 3166-2:ES",region:"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{name:"Sri Lanka","alpha-2":"LK","alpha-3":"LKA","country-code":"144","iso_3166-2":"ISO 3166-2:LK",region:"Asia","sub-region":"Southern Asia","intermediate-region":"","region-code":"142","sub-region-code":"034","intermediate-region-code":""},{name:"Sudan","alpha-2":"SD","alpha-3":"SDN","country-code":"729","iso_3166-2":"ISO 3166-2:SD",region:"Africa","sub-region":"Northern Africa","intermediate-region":"","region-code":"002","sub-region-code":"015","intermediate-region-code":""},{name:"Suriname","alpha-2":"SR","alpha-3":"SUR","country-code":"740","iso_3166-2":"ISO 3166-2:SR",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Svalbard and Jan Mayen","alpha-2":"SJ","alpha-3":"SJM","country-code":"744","iso_3166-2":"ISO 3166-2:SJ",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Sweden","alpha-2":"SE","alpha-3":"SWE","country-code":"752","iso_3166-2":"ISO 3166-2:SE",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"Switzerland","alpha-2":"CH","alpha-3":"CHE","country-code":"756","iso_3166-2":"ISO 3166-2:CH",region:"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{name:"Syrian Arab Republic","alpha-2":"SY","alpha-3":"SYR","country-code":"760","iso_3166-2":"ISO 3166-2:SY",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Taiwan, Province of China","alpha-2":"TW","alpha-3":"TWN","country-code":"158","iso_3166-2":"ISO 3166-2:TW",region:"Asia","sub-region":"Eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"030","intermediate-region-code":""},{name:"Tajikistan","alpha-2":"TJ","alpha-3":"TJK","country-code":"762","iso_3166-2":"ISO 3166-2:TJ",region:"Asia","sub-region":"Central Asia","intermediate-region":"","region-code":"142","sub-region-code":"143","intermediate-region-code":""},{name:"Tanzania, United Republic of","alpha-2":"TZ","alpha-3":"TZA","country-code":"834","iso_3166-2":"ISO 3166-2:TZ",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Thailand","alpha-2":"TH","alpha-3":"THA","country-code":"764","iso_3166-2":"ISO 3166-2:TH",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Timor-Leste","alpha-2":"TL","alpha-3":"TLS","country-code":"626","iso_3166-2":"ISO 3166-2:TL",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Togo","alpha-2":"TG","alpha-3":"TGO","country-code":"768","iso_3166-2":"ISO 3166-2:TG",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Western Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"011"},{name:"Tokelau","alpha-2":"TK","alpha-3":"TKL","country-code":"772","iso_3166-2":"ISO 3166-2:TK",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Tonga","alpha-2":"TO","alpha-3":"TON","country-code":"776","iso_3166-2":"ISO 3166-2:TO",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Trinidad and Tobago","alpha-2":"TT","alpha-3":"TTO","country-code":"780","iso_3166-2":"ISO 3166-2:TT",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Tunisia","alpha-2":"TN","alpha-3":"TUN","country-code":"788","iso_3166-2":"ISO 3166-2:TN",region:"Africa","sub-region":"Northern Africa","intermediate-region":"","region-code":"002","sub-region-code":"015","intermediate-region-code":""},{name:"Turkey","alpha-2":"TR","alpha-3":"TUR","country-code":"792","iso_3166-2":"ISO 3166-2:TR",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Turkmenistan","alpha-2":"TM","alpha-3":"TKM","country-code":"795","iso_3166-2":"ISO 3166-2:TM",region:"Asia","sub-region":"Central Asia","intermediate-region":"","region-code":"142","sub-region-code":"143","intermediate-region-code":""},{name:"Turks and Caicos Islands","alpha-2":"TC","alpha-3":"TCA","country-code":"796","iso_3166-2":"ISO 3166-2:TC",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Tuvalu","alpha-2":"TV","alpha-3":"TUV","country-code":"798","iso_3166-2":"ISO 3166-2:TV",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Uganda","alpha-2":"UG","alpha-3":"UGA","country-code":"800","iso_3166-2":"ISO 3166-2:UG",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Ukraine","alpha-2":"UA","alpha-3":"UKR","country-code":"804","iso_3166-2":"ISO 3166-2:UA",region:"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{name:"United Arab Emirates","alpha-2":"AE","alpha-3":"ARE","country-code":"784","iso_3166-2":"ISO 3166-2:AE",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"United Kingdom of Great Britain and Northern Ireland","alpha-2":"GB","alpha-3":"GBR","country-code":"826","iso_3166-2":"ISO 3166-2:GB",region:"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{name:"United States of America","alpha-2":"US","alpha-3":"USA","country-code":"840","iso_3166-2":"ISO 3166-2:US",region:"Americas","sub-region":"Northern America","intermediate-region":"","region-code":"019","sub-region-code":"021","intermediate-region-code":""},{name:"United States Minor Outlying Islands","alpha-2":"UM","alpha-3":"UMI","country-code":"581","iso_3166-2":"ISO 3166-2:UM",region:"Oceania","sub-region":"Micronesia","intermediate-region":"","region-code":"009","sub-region-code":"057","intermediate-region-code":""},{name:"Uruguay","alpha-2":"UY","alpha-3":"URY","country-code":"858","iso_3166-2":"ISO 3166-2:UY",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Uzbekistan","alpha-2":"UZ","alpha-3":"UZB","country-code":"860","iso_3166-2":"ISO 3166-2:UZ",region:"Asia","sub-region":"Central Asia","intermediate-region":"","region-code":"142","sub-region-code":"143","intermediate-region-code":""},{name:"Vanuatu","alpha-2":"VU","alpha-3":"VUT","country-code":"548","iso_3166-2":"ISO 3166-2:VU",region:"Oceania","sub-region":"Melanesia","intermediate-region":"","region-code":"009","sub-region-code":"054","intermediate-region-code":""},{name:"Venezuela (Bolivarian Republic of)","alpha-2":"VE","alpha-3":"VEN","country-code":"862","iso_3166-2":"ISO 3166-2:VE",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"South America","region-code":"019","sub-region-code":"419","intermediate-region-code":"005"},{name:"Viet Nam","alpha-2":"VN","alpha-3":"VNM","country-code":"704","iso_3166-2":"ISO 3166-2:VN",region:"Asia","sub-region":"South-eastern Asia","intermediate-region":"","region-code":"142","sub-region-code":"035","intermediate-region-code":""},{name:"Virgin Islands (British)","alpha-2":"VG","alpha-3":"VGB","country-code":"092","iso_3166-2":"ISO 3166-2:VG",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Virgin Islands (U.S.)","alpha-2":"VI","alpha-3":"VIR","country-code":"850","iso_3166-2":"ISO 3166-2:VI",region:"Americas","sub-region":"Latin America and the Caribbean","intermediate-region":"Caribbean","region-code":"019","sub-region-code":"419","intermediate-region-code":"029"},{name:"Wallis and Futuna","alpha-2":"WF","alpha-3":"WLF","country-code":"876","iso_3166-2":"ISO 3166-2:WF",region:"Oceania","sub-region":"Polynesia","intermediate-region":"","region-code":"009","sub-region-code":"061","intermediate-region-code":""},{name:"Western Sahara","alpha-2":"EH","alpha-3":"ESH","country-code":"732","iso_3166-2":"ISO 3166-2:EH",region:"Africa","sub-region":"Northern Africa","intermediate-region":"","region-code":"002","sub-region-code":"015","intermediate-region-code":""},{name:"Yemen","alpha-2":"YE","alpha-3":"YEM","country-code":"887","iso_3166-2":"ISO 3166-2:YE",region:"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{name:"Zambia","alpha-2":"ZM","alpha-3":"ZMB","country-code":"894","iso_3166-2":"ISO 3166-2:ZM",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"},{name:"Zimbabwe","alpha-2":"ZW","alpha-3":"ZWE","country-code":"716","iso_3166-2":"ISO 3166-2:ZW",region:"Africa","sub-region":"Sub-Saharan Africa","intermediate-region":"Eastern Africa","region-code":"002","sub-region-code":"202","intermediate-region-code":"014"}];var $u=[{name:"Global","alpha-2":"global","alpha-3":"global","country-code":"global","iso_3166-2":"global",region:"global","region-code":"","sub-region":"","sub-region-code":"","intermediate-region":"","intermediate-region-code":""},...zF];var jF=jE(P1());var CE={CarbonFactorsControl:new ly("carbon-factors-control",r=>{let e=JSON.parse(r),{isoCode:t,referancePeriod:i}=e,n=(0,jF.default)(e.validOn),s=JSON.stringify(t);if(!n.isValid())throw new Error("cannot validOn carbon factors value");if(!$u.some(o=>JSON.stringify(o)===s))throw new Error("isoCode not found");if(i===null)throw new Error("referancePeriod not found");if(!Object.values(Zp).includes(i))throw new Error("referancePeriod not found");return Ue(Te({},e),{validOn:n})})},KF=(()=>{let e=class e{constructor(){this.localStorage=ce(o1).defaultView?.localStorage}get(i){let n=this.localStorage?.getItem(i.key)??null;if(n===null)return null;let s=i.valueParser??JSON.parse;try{return s(n)}catch{return this.localStorage?.removeItem(i.key),null}}set(i,n){let s=JSON.stringify(n);this.localStorage?.setItem(i.key,s)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var _l=new gn("DEFAULT_GRID_OPTIONS",{providedIn:"root",factory:()=>({rowModelType:"infinite",rowSelection:"multiple",rowMultiSelectWithClick:!0,suppressRowClickSelection:!0,cacheBlockSize:ce(A0).api.veracity.pageSize,maxBlocksInCache:0,maxConcurrentDatasourceRequests:1,defaultColDef:{hide:!1,lockVisible:!1,flex:1,resizable:!0,editable:!1,minWidth:70},enableCellTextSelection:!0,alwaysShowHorizontalScroll:!0})});var Qp=new gn("OBJECT_CHUNK_SIZE",{providedIn:"root",factory:()=>3});var $F=jE(P1());var YF=new gn("DEFAULT_CARBON_FACTORS_VALUE",{providedIn:"root",factory:()=>({isoCode:$u.find(r=>r["alpha-3"]==="GBR"),validOn:(0,$F.default)(new Date(Date.now())),referancePeriod:60})});var ys=function(r){return r.KGCO2E_KG="kgCO2e/kg",r.KGCO2E_M2="kgCO2e/m2",r.KG_M3="kg/m3",r.KG="kg",r.PERCENTAGE="%",r.KGCO2E="kgCO2e",r.ABSOLUTE="absolute",r}(ys||{}),yE=function(r){return r.KGCO2E_KG="kgCO2e/kg",r.KGCO2E_M2="kgCO2e/m2",r.KG_M3="kg/m3",r.KG="kg",r.PERCENTAGE="%",r.KGCO2E="kgCO2e",r}(yE||{});function Yu(r){return r.children!==void 0}function c0(r){return r.field!==void 0&&!Yu(r)}var Tl=({value:r})=>r?new Date(r).toLocaleString():"";function pn(){return r=>r.pipe(fi(e=>e==="light"?"ag-theme-balham":"ag-theme-balham-dark"))}function XF(){return r=>r.pipe(fi(e=>e==="light"?"ag-sheets":"ag-sheets-dark"))}var qF=(()=>{let e=class e{constructor(){this.chunkSize=ce(Qp),this.ngZone=ce(ah),this.snackBar=ce(kl),this.objectService=ce(zc),this.gridTheme$=ce(Gr).select(({theme:i})=>i).pipe(pn(),Kt()),this.data=ce(xs)}onGridReady(i){i.api?.setRowData(this.data.rows),i.api?.sizeColumnsToFit()}oncellEditRequest(i){let{colDef:n,newValue:s,oldValue:o,data:a,node:l,api:c}=i;if(c0(n)&&n.field==="ancestors"){if(s.length===0){this.snackBar.open("Ancestors cannot be empty","Close");return}if(JSON.stringify(s)===JSON.stringify(o))return;this.objectService.putAncestors(a.id,s).pipe(en(),Wo(()=>{this.snackBar.open("Ancestors updated","Close"),i.node.setData(Ue(Te({},a),{ancestors:s})),i.api.refreshCells({columns:[n.field],rowNodes:[l]})},d=>{this.snackBar.open(d.error.detail,"Close")})).subscribe()}else if(c0(n)&&n.field==="properties"){if(s.length===0){this.snackBar.open("Properties cannot be empty","Close");return}let d={location:this.data.location};for(let u of s){let h=u.type.toLowerCase().replaceAll(" ","_").replaceAll("-","_").replaceAll("waste_rate","wastage"),p={value:u.value??0,units:u.units??ys.KG,source:u.source??"",replacement_cycle:u.replacement_cycle,comment:u.comment??""};d=Ue(Te({},d),{[h]:p})}this.objectService.putProperties(a.id,d).pipe(en(),Wo(()=>{this.snackBar.open("Properties updated","Close"),i.node.setData(Ue(Te({},a),{properties:s})),i.api.refreshCells({columns:[n.field],rowNodes:[l]})},u=>{this.snackBar.open(u.error.detail,"Close")})).subscribe()}else{if(s===o)return;this.objectService.patchObject(this.data.type,a.id,{[n.field]:s}).pipe(en(),Wo(d=>{this.ngZone.runOutsideAngular(()=>{c.getRowNode(String(a.id))?.updateData(Te(Te({},a),d)),c.refreshCells({columns:[n.field],rowNodes:[l]})})},d=>{this.snackBar.open(d.error.detail,"Close")})).subscribe()}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-object-edit-modal"]],decls:6,vars:6,consts:[["align","end"],["mat-dialog-close",""],["slot","icon"],[3,"gridOptions","modules","gridReady","cellEditRequest"]],template:function(n,s){n&1&&(J(0,"mat-dialog-actions",0)(1,"arc-icon-button",1),xe(2,"ph-icon-x",2),q()(),J(3,"mat-dialog-content")(4,"ag-grid-angular",3),Re("gridReady",function(a){return s.onGridReady(a)})("cellEditRequest",function(a){return s.oncellEditRequest(a)}),ze(5,"async"),q()()),n&2&&(re(4),mi(tt(5,4,s.gridTheme$)),ie("gridOptions",s.data.gridOptions)("modules",s.data.modules))},dependencies:[Nl,Cn,yn,gr,Jt],styles:["[_nghost-%COMP%]{display:grid;height:100%;grid-template-rows:auto 1fr}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0});let r=e;return r})();var xE,qc=xE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${xE.svg}
      </svg>
    `}};qc.tag="ph-icon-trash";qc.styles=Pt;qc.svg=Rt`<path d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"/>`;ye([Ie({type:String}),Le("design:type",String)],qc.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],qc.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],qc.prototype,"rotation",void 0);qc=xE=ye([Dt("ph-icon-trash")],qc);var SE,Zc=SE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${SE.svg}
      </svg>
    `}};Zc.tag="ph-icon-plus";Zc.styles=Pt;Zc.svg=Rt`<path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/>`;ye([Ie({type:String}),Le("design:type",String)],Zc.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],Zc.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],Zc.prototype,"rotation",void 0);Zc=SE=ye([Dt("ph-icon-plus")],Zc);var hH={selectedRows:!1},ZF=(()=>{let e=class e extends ph{constructor(){super(hH),this.snackBar=ce(kl),this.objectService=ce(zc),this.dialogRef=ce(Ll),this.chunkSize=ce(Qp),this.gridTheme$=ce(Gr).select(({theme:i})=>i).pipe(pn(),Kt()),this.data=ce(xs),this.selectedRows$=this.select(({selectedRows:i})=>i)}get allNodes(){let i=[];return this.data.gridOptions.api?.forEachNode(n=>i.push(n)),i}onGridReady(i){i.api.setRowData([Te({},this.data.defaultObject)]),i.api.sizeColumnsToFit(),i.api.startEditingCell({rowIndex:0,colKey:"title"})}onSelectionChanged(){let i=this.data.gridOptions.api?.getSelectedRows()??[];this.patchState({selectedRows:i.length>0})}onNew(){this.data.gridOptions.api?.stopEditing(),this.data.gridOptions.api?.applyTransaction({addIndex:this.allNodes.length,add:[Te({},this.data.defaultObject)]}),this.data.gridOptions.api?.startEditingCell({rowIndex:this.allNodes.length-1,colKey:"title"})}onRemove(){this.data.gridOptions.api?.stopEditing();let i=this.data.gridOptions.api?.getSelectedNodes()??[],n=this.allNodes.filter(o=>!i.includes(o)),s=[];n.forEach(o=>{o.data&&s.push(o.data)}),this.data.gridOptions.api?.setRowData(s)}onCancel(){this.dialogRef.close(!1)}onSave(){this.data.gridOptions.api?.stopEditing(),this.data.gridOptions.api?.deselectAll(),this.data.gridOptions.api?.showLoadingOverlay();let i=[];if(this.allNodes.forEach(n=>{if(n.data){let s=Te({},n.data);if(s.type!==Bt.Assembly){let o={location:this.data.location};for(let a of s.properties){let l=a.type.toLowerCase().replaceAll(" ","_").replaceAll("-","_").replaceAll("waste_rate","wastage"),c={value:a.value??0,units:a.units??ys.KG,source:a.source??"",replacement_cycle:a.replacement_cycle,comment:a.comment??""};o=Ue(Te({},o),{[l]:c})}s.properties=o}i.push(s)}}),i.length===0){this.dialogRef.close(!1);return}Qu(i).pipe(th(this.chunkSize),Ju(n=>n.map(s=>this.objectService.postObject(s).pipe(en(),Wo(()=>{this.data.gridOptions.api?.applyTransaction({remove:[s]})},o=>{this.data.gridOptions.api?.hideOverlay(),this.snackBar.open(o.error.detail,"Close",{duration:5e3})})))),ih(n=>eh(n)),Ga(this.destroy$),Wo(()=>{this.data.gridOptions.api?.hideOverlay(),this.dialogRef.close(!0)},()=>(this.data.gridOptions.api?.hideOverlay(),this.snackBar.open("An error occurred","Close"),Dl))).subscribe()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-object-add-modal"]],features:[ir],decls:12,vars:9,consts:[["align","end"],[3,"disabled","click"],["slot","icon"],[3,"click"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-dialog-content","",3,"gridOptions","modules","gridReady","selectionChanged"]],template:function(n,s){n&1&&(J(0,"mat-dialog-actions",0)(1,"arc-icon-button",1),Re("click",function(){return s.onRemove()}),ze(2,"async"),xe(3,"ph-icon-trash",2),q(),J(4,"arc-icon-button",3),Re("click",function(){return s.onNew()}),xe(5,"ph-icon-plus",2),q(),J(6,"button",4),Re("click",function(){return s.onCancel()}),pe(7,"Cancel"),q(),J(8,"button",5),Re("click",function(){return s.onSave()}),pe(9,"Save"),q()(),J(10,"ag-grid-angular",6),Re("gridReady",function(a){return s.onGridReady(a)})("selectionChanged",function(){return s.onSelectionChanged()}),ze(11,"async"),q()),n&2&&(re(1),ie("disabled",tt(2,5,s.selectedRows$)===!1),re(9),mi(tt(11,7,s.gridTheme$)),ie("gridOptions",s.data.gridOptions)("modules",s.data.modules))},dependencies:[nr,Cn,yn,gr,Jt],styles:["[_nghost-%COMP%]{display:grid;height:100%;grid-template-rows:auto 1fr}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--arc-spacing-x-small)}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0});let r=e;return r})();var QF=function(r){return{colDef:r}};function pH(r,e){if(r&1&&xe(0,"ng-conntainer",6),r&2){let t=e.$implicit;ve();let i=ot(7);ie("ngTemplateOutlet",i)("ngTemplateOutletContext",jn(2,QF,t))}}function fH(r,e){if(r&1){let t=Lr();J(0,"mat-checkbox",10),Re("change",function(n){Vt(t);let s=ve().colDef,o=ve();return Ht(o.onToggleColumn(n,s))}),pe(1),q()}if(r&2){let t=ve().colDef,i=ve();ie("checked",i.colDefIsVisible(t))("disabled",!i.canToggleColDefVisiblity(t)),re(1),Ui(" ",t.headerName," ")}}function gH(r,e){if(r&1&&ai(0,6),r&2){let t=e.$implicit;ve(3);let i=ot(7);ie("ngTemplateOutlet",i)("ngTemplateOutletContext",jn(2,QF,t))}}function mH(r,e){if(r&1){let t=Lr();J(0,"mat-checkbox",10),Re("change",function(n){Vt(t);let s=ve().colDef,o=ve();return Ht(o.onToggleColumn(n,s))}),pe(1),q(),Ee(2,gH,1,4,"ng-container",4)}if(r&2){let t=ve().colDef,i=ve();ie("checked",i.colDefIsVisible(t))("disabled",!i.canToggleColDefVisiblity(t)),re(1),Ui(" ",t.headerName," "),re(1),ie("ngForOf",t.children.slice(1))}}function vH(r,e){if(r&1&&(J(0,"mat-list-item",7),Ee(1,fH,2,3,"mat-checkbox",8),Ee(2,mH,3,4,"ng-template",null,9,Nt),q(),xe(4,"mat-divider")),r&2){let t=e.colDef,i=ot(3);re(1),ie("ngIf",t.children===void 0)("ngIfElse",i)}}var JF=(()=>{let e=class e{constructor(i,n){this.dialogRef=i,this.data=n}onToggleColumn(i,n){let{checked:s}=i;if(Yu(n))n.children.forEach(o=>this.onToggleColumn(i,o));else{if(n.lockVisible===!0)return;n.hide=!s}}canToggleColDefVisiblity(i){return Yu(i)?i.children.some(n=>this.canToggleColDefVisiblity(n)):i.lockVisible!==!0}colDefIsVisible(i){return Yu(i)?i.children.some(n=>this.colDefIsVisible(n)):i.hide!==!0}onClose(){this.dialogRef.close([...this.data])}};e.\u0275fac=function(n){return new(n||e)(Xs(Ll),Xs(xs))},e.\u0275cmp=Ve({type:e,selectors:[["veracity-view-options-modal"]],decls:8,vars:1,consts:[["align","end"],[3,"click"],["slot","icon"],["role","list","area-label","View options"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["colDefTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","listitem","area-label","View option"],[3,"checked","disabled","change",4,"ngIf","ngIfElse"],["groupTemplate",""],[3,"checked","disabled","change"]],template:function(n,s){n&1&&(J(0,"mat-dialog-actions",0)(1,"arc-icon-button",1),Re("click",function(){return s.onClose()}),xe(2,"ph-icon-x",2),q()(),J(3,"mat-dialog-content")(4,"mat-list",3),Ee(5,pH,1,4,"ng-conntainer",4),q()(),Ee(6,vH,5,2,"ng-template",null,5,Nt)),n&2&&(re(5),ie("ngForOf",s.data))},dependencies:[Bo,Qt,Vo,T1,Cn,yn,R1,A1,F1],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.mat-mdc-dialog-content[_ngcontent-%COMP%]{overflow-y:auto}"],changeDetection:0});let r=e;return r})();var eP=new gn("DEFAULT_CHART_OPTIONS",{providedIn:"root",factory:()=>({autoSize:!0,padding:{top:10,right:10,bottom:10,left:10},tooltip:{enabled:!0},background:{visible:!1}})});function Ma(r){return r.toString().toLowerCase().replace("_"," - ").replace("-"," - ").replace(/(^\w{1})|(\s+\w{1})/g,e=>e.toUpperCase())}var tP=(()=>{let e=class e{constructor(){this.ref=ce(Nr),this.data=ce(xs),this.gridTheme$=ce(Gr).select(({theme:i})=>i).pipe(pn(),Kt()),this.chartTheme$=ce(Gr).select(({theme:i})=>i).pipe(XF(),Kt()),this.modules=[Oo],this.gridOptions={rowModelType:"clientSide",context:{componentParent:this.data?.componentParent}},this.defaultChartOptions=ce(eP),this.chartOptions=Ue(Te({},this.defaultChartOptions),{data:[],series:[],legend:{position:"bottom",maxHeight:40,maxWidth:800},axes:[{type:"category",position:"bottom",gridLine:{enabled:!0}},{type:"number",position:"left",gridLine:{enabled:!0},label:{formatter:i=>`${parseFloat(i.value).toLocaleString()} kgCO2e`}}]})}onGridReady(i){let n=this.data?.columnDefs??[],s=this.data?.objects??[];n.forEach(o=>this.setColDefOptions(o)),i.api.setColumnDefs(n),i.api.setRowData(s),i.api.sizeColumnsToFit(),this.updateChart(s,this.data?.columnDefs??[])}setColDefOptions(i){c0(i)?(i.sortable=!0,i.checkboxSelection=!1):Yu(i)&&(i.groupId==="carbon"&&i.children.forEach(n=>{let s=n.field?.toLowerCase();switch(this.data?.componentParent.objectType){case"assembly":n.hide=!Object.keys(Jb).map(o=>o.toLowerCase()).includes(s);break;case"product":n.hide=!Object.keys(Wu).map(o=>o.toLowerCase()).includes(s);break;case"material":n.hide=!Object.keys(Hu).map(o=>o.toLowerCase()).includes(s);break}}),i.children.forEach(n=>this.setColDefOptions(n)))}updateChart(i,n=[]){let s="ag-sheets";this.chartTheme$.pipe(en()).subscribe(c=>s=c);let a=n?.filter(c=>c.groupId==="carbon")[0]?.children.filter(c=>c.hide!==!0&&c.field!==void 0).map(c=>c.field?.toLowerCase()),l=Ue(Te({},this.chartOptions),{theme:s,series:i.map(c=>({type:"bar",xKey:"param",yKey:String(c.id),yName:`${c.title} ${c.subtitle.length>1?"("+c.subtitle+")":""}`})),data:Object.keys(ti).filter(c=>a.includes(c.toLowerCase())).map(c=>Te({param:Ma(c)},i.reduce((d,u)=>Ue(Te({},d),{[String(u.id)]:u[c]!==void 0&&u[c].value!==void 0?Number(u[c].value):0}),{})))});this.chartOptions=l,this.ref.markForCheck()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-object-comparison-modal"]],decls:10,vars:10,consts:[["align","end"],["mat-dialog-close",""],["slot","icon"],["mat-dialog-title",""],[3,"modules","gridOptions","gridReady"],[3,"options"]],template:function(n,s){n&1&&(J(0,"mat-dialog-actions",0)(1,"arc-icon-button",1),xe(2,"ph-icon-x",2),q()(),J(3,"mat-dialog-content")(4,"h2",3),pe(5),ze(6,"titlecase"),q(),J(7,"ag-grid-angular",4),Re("gridReady",function(a){return s.onGridReady(a)}),ze(8,"async"),q(),xe(9,"ag-charts-angular",5),q()),n&2&&(re(5),Ui(" ",tt(6,6,s.data==null||s.data.componentParent==null?null:s.data.componentParent.objectType)," Comparison "),re(2),mi(tt(8,8,s.gridTheme$)),ie("modules",s.modules)("gridOptions",s.gridOptions),re(2),ie("options",s.chartOptions))},dependencies:[Nl,_1,Cn,yn,gr,vO,Jt,lh],styles:["[_nghost-%COMP%]{display:grid;height:100%;grid-template-rows:auto 1fr}mat-dialog-content[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto auto 1fr 1fr;gap:var(--arc-spacing-small);height:100%}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:420px}ag-charts-angular[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0});let r=e;return r})();var wE,Jc=wE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${wE.svg}
      </svg>
    `}};Jc.tag="ph-icon-arrow-left";Jc.styles=Pt;Jc.svg=Rt`<path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"/>`;ye([Ie({type:String}),Le("design:type",String)],Jc.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],Jc.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],Jc.prototype,"rotation",void 0);Jc=wE=ye([Dt("ph-icon-arrow-left")],Jc);var bE,ed=bE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${bE.svg}
      </svg>
    `}};ed.tag="ph-icon-caret-down";ed.styles=Pt;ed.svg=Rt`<path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"/>`;ye([Ie({type:String}),Le("design:type",String)],ed.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],ed.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],ed.prototype,"rotation",void 0);ed=bE=ye([Dt("ph-icon-caret-down")],ed);var EE,td=EE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${EE.svg}
      </svg>
    `}};td.tag="ph-icon-caret-right";td.styles=Pt;td.svg=Rt`<path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"/>`;ye([Ie({type:String}),Le("design:type",String)],td.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],td.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],td.prototype,"rotation",void 0);td=EE=ye([Dt("ph-icon-caret-right")],td);function CH(r,e){if(r&1&&(J(0,"span",6),pe(1),q()),r&2){let t=ve();re(1),Ii(t.tag)}}function yH(r,e){r&1&&xe(0,"ph-icon-caret-down",7)}function xH(r,e){r&1&&xe(0,"ph-icon-caret-right",7)}var SH=[[["","headerIcon",""]],"*"],wH=["[headerIcon]","*"],iP=(()=>{let e=class e{constructor(){this.ref=ce(Nr),this.open=!0,this.disabled=!1,this.heading=""}onToggleOpen(){this.open=!this.open,this.ref.detectChanges()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-expansion-panel"]],inputs:{open:"open",disabled:"disabled",heading:"heading",tag:"tag"},ngContentSelectors:wH,decls:11,vars:9,consts:[[1,"header"],[1,"title"],["class","tag",4,"ngIf"],[3,"disabled","click"],["slot","icon",4,"ngIf"],[1,"content"],[1,"tag"],["slot","icon"]],template:function(n,s){n&1&&(i1(SH),J(0,"div",0)(1,"div",1)(2,"span"),pe(3),q(),Ee(4,CH,2,1,"span",2),q(),yy(5),J(6,"arc-icon-button",3),Re("click",function(){return s.onToggleOpen()}),Ee(7,yH,1,0,"ph-icon-caret-down",4),Ee(8,xH,1,0,"ph-icon-caret-right",4),q()(),J(9,"div",5),yy(10,1),q()),n&2&&(re(3),Ii(s.heading),re(1),ie("ngIf",s.tag),re(2),ie("disabled",s.disabled),t1("aria-expanded",s.open)("aria-label",s.open?"Hide content":"Show content"),re(1),ie("ngIf",s.open),re(1),ie("ngIf",!s.open),re(1),gf("open",s.open))},dependencies:[Qt],styles:["[_nghost-%COMP%]{--padding: var(--arc-spacing-small);--header-background: rgb(var(--arc-blue-070));--header-color: rgb(var(--arc-white-000));--tag-background: rgb(var(--arc-white-000));--tag-color: rgb(var(--arc-blue-070));display:grid;gap:var(--arc-spacing-small)}*[_ngcontent-%COMP%]{--icon-color: var(--header-color)}div.header[_ngcontent-%COMP%]{display:flex;gap:var(--arc-spacing-small);align-items:center;background:var(--header-background);color:var(--header-color);padding:calc(var(--padding) / 2) var(--padding);border-radius:var(--arc-border-radius-small)}div.header[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;justify-content:start;align-items:center;gap:var(--padding);width:100%}div.header[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-weight:700}div.header[_ngcontent-%COMP%]   span.tag[_ngcontent-%COMP%]{background:var(--tag-background);color:var(--tag-color);padding:calc(var(--padding) / 3) calc(var(--padding) / 2);border-radius:var(--arc-border-radius-medium)}div.content[_ngcontent-%COMP%]{display:none;padding:var(--padding);transition:height .3s ease-in-out}div.content.open[_ngcontent-%COMP%]{display:block}"],changeDetection:0});let r=e;return r})();function EH(r,e){if(r&1&&pe(0),r&2){let t=ve();Ii(t.text)}}var rP=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-tooltip"]],inputs:{text:"text",template:"template"},decls:5,vars:1,consts:[[1,"tooltip-conatiner"],[3,"ngTemplateOutlet"],["simpleText",""]],template:function(n,s){if(n&1&&(J(0,"div")(1,"div",0),ai(2,1),Ee(3,EH,1,1,"ng-template",null,2,Nt),q()()),n&2){let o=ot(4);re(2),ie("ngTemplateOutlet",s.template||o)}},dependencies:[Vo],styles:["[_nghost-%COMP%]{display:grid;background:rgb(var(--arc-container-color));color:rgb(var(--arc-black-100));border-radius:var(--arc-border-radius-small);padding:var(--arc-spacing-x-small);box-shadow:var(--elevation-shadow-card-rest)}[_nghost-%COMP%]     *{color:rgb(var(--arc-black-100))}"]});let r=e;return r})();var cy=(()=>{let e=class e{constructor(){this.overlay=ce(v1),this.overlayPositionBuilder=ce(m1),this.elementRef=ce(sh),this.showToolTip=!0,this.delay=500}ngOnInit(){if(!this.showToolTip)return;let i=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:5}]);this.overlayRef=this.overlay.create({positionStrategy:i})}show(){let i=new g1(rP),n=this.overlayRef.attach(i);n.instance.text=this.text,n.instance.template=this.template}hide(){this.closeToolTip()}ngOnDestroy(){this.closeToolTip()}closeToolTip(){this.overlayRef&&this.overlayRef.detach()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=JE({type:e,selectors:[["","tooltip",""]],hostBindings:function(n,s){n&1&&Re("mouseenter",function(){return s.show()})("mouseleave",function(){return s.hide()})},inputs:{showToolTip:"showToolTip",text:["tooltip","text"],template:"template",delay:"delay"}});let r=e;return r})();var sP=(()=>{let e=class e{transform(i){let n=[];return Object.keys(ti).forEach(s=>{let o=ti[s],a=i?.find(l=>{let c=l?.type?.toLowerCase();return c===s.toLowerCase()||c===o.toLowerCase()});a&&n.push(a)}),n}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Fl({name:"propertiesOrder",type:e,pure:!0});let r=e;return r})();var oP=(()=>{let e=class e{transform(i,n){let s=[];for(let o of i||[])o.ancestor.type.toLowerCase()===n.toLowerCase()&&s.push(o);return s}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Fl({name:"ancestorsSplit",type:e,pure:!0});let r=e;return r})();var RH={assembly:["subtitle","reference_unit","comment","reference_multiplier","mapping_variable","update_notes","created_by","date_created","updated_by","date_updated"],material:["subtitle","reference_unit","comment","reference_multiplier","update_notes","created_by","date_created","updated_by","date_updated"],product:["subtitle","reference_unit","comment","reference_multiplier","update_notes","created_by","date_created","updated_by","date_updated"],attributes:void 0,ancestor:["subtitle","update_notes","created_by","date_created","updated_by","date_updated","reviewed_by"],property:["source","comment","replacement_cycle","location","created_by","date_created","updated_by","date_updated","reviewed_by"]},aP=(()=>{let e=class e{transform(i,n,s=!1){let o={},a=RH[s?"ancestor":n];if(a===void 0)return i;for(let l of a)i[l]!==void 0&&(o[l]=i[l]);return o}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Fl({name:"objectDetailsKeys",type:e,pure:!0});let r=e;return r})();var lP=(()=>{let e=class e{transform(i){let n=[];for(let s of i??[]){let o=s.location,a=n.find(l=>l.location===o);a?a.properties.push(s):n.push({location:o,properties:[s]})}return n}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Fl({name:"propertiesLocationGroup",type:e,pure:!0});let r=e;return r})();function OH(r,e){r&1&&(J(0,"arc-icon-button",12),xe(1,"ph-icon-x",13),q())}function FH(r,e){r&1&&(J(0,"span",14)(1,"arc-icon-button",12),xe(2,"ph-icon-arrow-left",13),q(),J(3,"p"),pe(4,"Go back to previous page"),q()())}var cP=function(r){return{key:"properties",value:r}},d0=function(r){return{data:r}};function PH(r,e){if(r&1&&(J(0,"veracity-expansion-panel",15),ai(1,5),q()),r&2){let t=ve(),i=ot(21);ie("tag",t.data.object.properties==null||t.data.object.properties.length==null?null:t.data.object.properties.length.toString())("open",!0)("disabled",(t.data.object.properties==null?null:t.data.object.properties.length)===0),re(1),ie("ngTemplateOutlet",i)("ngTemplateOutletContext",jn(7,d0,jn(5,cP,t.data.object.properties)))}}function IH(r,e){if(r&1&&(J(0,"veracity-expansion-panel",16),ai(1,5),q()),r&2){let t=ve(),i=ot(19),n,s;ie("tag",(n=t.data.object.ancestors==null||t.data.object.ancestors.length==null?null:t.data.object.ancestors.length.toString())!==null&&n!==void 0?n:"0")("disabled",((s=t.data.object.ancestors==null?null:t.data.object.ancestors.length)!==null&&s!==void 0?s:0)===0)("open",!0),re(1),ie("ngTemplateOutlet",i)("ngTemplateOutletContext",jn(5,d0,t.data.object.ancestors))}}function MH(r,e){if(r&1&&(J(0,"div",25)(1,"span",26),pe(2),ze(3,"titlecase"),q(),ai(4,5),q()),r&2){let t=ve().$implicit;ve();let i=ot(12),n=ot(14),s=ot(8),o=ot(10),a=ot(6),l=ve();re(2),Ii(tt(3,3,l.formatKey(t.key))),re(2),ie("ngTemplateOutlet",l.isPersonKey(t.key)?i:l.isAttributesKey(t.key)?n:l.isDateKey(t.key)?s:l.isReferanceMultiplierKey(t.key)?o:a)("ngTemplateOutletContext",jn(5,d0,t))}}function LH(r,e){if(r&1&&(mn(0),ai(1,5),Ee(2,MH,5,7,"ng-template",null,24,Nt),vn()),r&2){let t=e.$implicit,i=ot(3),n=ve(2),s=ot(21);re(1),ie("ngTemplateOutlet",n.isPropertiesKey(t.key)?s:i)("ngTemplateOutletContext",jn(2,d0,t))}}function NH(r,e){if(r&1&&(J(0,"span",27),pe(1),q()),r&2){let t=e.data;re(1),Ii(t.value)}}function kH(r,e){if(r&1&&(J(0,"span",27),pe(1),ze(2,"date"),q()),r&2){let t=e.data;re(1),Ui(" ",oh(2,1,t.value,"medium")," ")}}function GH(r,e){if(r&1&&(J(0,"span",27),pe(1),ze(2,"number"),q()),r&2){let t=e.data;re(1),Ii(tt(2,1,t.value))}}function BH(r,e){if(r&1&&xe(0,"mgt-person",28),r&2){let t=e.data;ie("personQuery",t.value)}}function VH(r,e){if(r&1&&(J(0,"span",27),pe(1),ze(2,"keyvalue"),q()),r&2){let t=e.data,i;re(1),Ui(" ",(i=tt(2,1,t.value))==null?null:i.length," ")}}function HH(r,e){if(r&1&&(J(0,"div",17),ze(1,"async"),Ee(2,LH,4,4,"ng-container",18),ze(3,"keyvalue"),ze(4,"objectDetailsKeys"),q(),Ee(5,NH,2,1,"ng-template",null,19,Nt),Ee(7,kH,3,4,"ng-template",null,20,Nt),Ee(9,GH,3,3,"ng-template",null,21,Nt),Ee(11,BH,1,1,"ng-template",null,22,Nt),Ee(13,VH,3,3,"ng-template",null,23,Nt)),r&2){let t=e.data,i=e.type,n=e.ancestor,s=ve();mi(i),gf("mobile",tt(1,5,s.isMobile$)),re(2),ie("ngForOf",oh(3,7,n1(4,10,t,i,n),s.originalOrder))}}var WH=function(r,e){return{data:r,type:e,ancestor:!0}};function UH(r,e){if(r&1){let t=Lr();J(0,"veracity-expansion-panel",32),ze(1,"titlecase"),ze(2,"titlecase"),ze(3,"number"),J(4,"button",33),Re("click",function(){let s=Vt(t).$implicit,o=ve(3);return Ht(o.openObjectAncestorDetailsModal(s.ancestor))}),pe(5," Open Detail "),q(),J(6,"div",34),ai(7,5),J(8,"div",35),ai(9,5),q()()()}if(r&2){let t=e.$implicit,i=e.index,n=ve().type;ve(2);let s=ot(17),o=ot(21);ie("heading",tt(1,6,n)+" - "+tt(2,8,t.ancestor.title)+" ("+oh(3,10,t.quantity,"1.2-2")+" "+t.ancestor.reference_unit+")")("open",i===0),re(7),ie("ngTemplateOutlet",s)("ngTemplateOutletContext",mf(13,WH,t.ancestor,t.ancestor.type)),re(2),ie("ngTemplateOutlet",o)("ngTemplateOutletContext",jn(18,d0,jn(16,cP,t.ancestor.properties)))}}function zH(r,e){if(r&1&&(Ee(0,UH,10,20,"veracity-expansion-panel",31),ze(1,"ancestorsSplit")),r&2){let t=e.data,i=e.type;ie("ngForOf",oh(1,1,t,i))}}var _E=function(r,e){return{data:r,type:e}};function jH(r,e){if(r&1&&(J(0,"div",29),Ee(1,zH,2,4,"ng-template",null,30,Nt),ai(3,5)(4,5),q()),r&2){let t=e.data,i=ot(2),n=ve();re(3),ie("ngTemplateOutlet",i)("ngTemplateOutletContext",mf(4,_E,t,n.objectType.Material)),re(1),ie("ngTemplateOutlet",i)("ngTemplateOutletContext",mf(7,_E,t,n.objectType.Product))}}var KH=function(r){return{data:r,type:"property"}};function $H(r,e){if(r&1&&(J(0,"div",41),ai(1,5),q()),r&2){let t=ve().$implicit;ve(3);let i=ot(17);re(1),ie("ngTemplateOutlet",i)("ngTemplateOutletContext",jn(2,KH,t))}}function YH(r,e){if(r&1&&(J(0,"div",25)(1,"span",26),pe(2),q(),J(3,"span",39),pe(4),ze(5,"number"),q(),Ee(6,$H,2,4,"ng-template",null,40,Nt),q()),r&2){let t=e.$implicit,i=ot(7),n=ve(3);re(2),Ui(" ",n.humanizeCarbonPropertyType(t.type)," "),re(1),ie("template",i),re(1),g0(" ",oh(5,4,t.value,"1.2-2")," ",t.units," ")}}function XH(r,e){if(r&1&&(J(0,"div")(1,"span",36),pe(2),q(),J(3,"div",37),ze(4,"async"),Ee(5,YH,8,7,"div",38),ze(6,"propertiesOrder"),q()()),r&2){let t=e.$implicit,i=ve(2);re(2),Ii(t.location),re(1),gf("mobile",tt(4,4,i.isMobile$)),re(2),ie("ngForOf",tt(6,6,t.properties))}}function qH(r,e){if(r&1&&(Ee(0,XH,7,8,"div",18),ze(1,"propertiesLocationGroup")),r&2){let t=e.data;ie("ngForOf",tt(1,1,t.value))}}var ZH=function(r){return{data:r,type:"attributes"}},dy=(()=>{let e=class e{constructor(){this.modalService=ce(Da),this.dialogRef=ce(Ll),this.humanizeCarbonPropertyType=Ma,this.isMobile$=ce(v0).observe(C0.Handset).pipe(fi(i=>i.matches)),this.data=ce(xs),this.originalOrder=()=>0,this.objectType=Bt}formatKey(i){return i.replace(/_/g," ")}isPersonKey(i){return typeof i!="string"?!1:i==="created_by"||i==="updated_by"}isPropertiesKey(i){return typeof i!="string"?!1:i==="properties"}isAttributesKey(i){return typeof i!="string"?!1:i==="attributes"}isDateKey(i){return typeof i!="string"?!1:i==="date_created"||i==="date_updated"}isReferanceMultiplierKey(i){return typeof i!="string"?!1:i==="reference_multiplier"}openObjectAncestorDetailsModal(i){this.modalService.open(e,{data:{object:i,isoCode:this.data.isoCode,referancePeriod:this.data.referancePeriod,validOn:this.data.validOn,previousDialogRef:this.dialogRef}})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-object-details-modal"]],decls:22,vars:22,consts:[["align","end"],[3,"ngTemplateOutlet"],["closeButton",""],["backButton",""],[3,"heading"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["heading","Attributes",3,"tag","disabled","open"],["heading","Carbon Properties",3,"tag","open","disabled",4,"ngIf"],["heading","Materials & Products",3,"tag","disabled","open",4,"ngIf"],["object",""],["ancestors",""],["properties",""],["mat-dialog-close",""],["slot","icon"],[1,"back"],["heading","Carbon Properties",3,"tag","open","disabled"],["heading","Materials & Products",3,"tag","disabled","open"],[1,"details"],[4,"ngFor","ngForOf"],["value",""],["date",""],["referanceMultipler",""],["mgtPerson",""],["attributes",""],["detail",""],[1,"detail"],[1,"key"],[1,"value"],["view","oneLine",3,"personQuery"],[1,"ancestors"],["at",""],[3,"heading","open",4,"ngFor","ngForOf"],[3,"heading","open"],["headerIcon","",3,"click"],[1,"ancestor"],[1,"ancestor-details"],[1,"location"],[1,"details","properties"],["class","detail",4,"ngFor","ngForOf"],["tooltip","",1,"value",3,"template"],["t",""],[1,"tooltip"]],template:function(n,s){if(n&1&&(J(0,"mat-dialog-actions",0),ai(1,1),Ee(2,OH,2,0,"ng-template",null,2,Nt),Ee(4,FH,5,0,"ng-template",null,3,Nt),q(),J(6,"mat-dialog-content")(7,"veracity-expansion-panel",4),ze(8,"titlecase"),ai(9,5),q(),J(10,"veracity-expansion-panel",6),ze(11,"keyvalue"),ze(12,"keyvalue"),ai(13,5),q(),Ee(14,PH,2,9,"veracity-expansion-panel",7),Ee(15,IH,2,7,"veracity-expansion-panel",8),q(),Ee(16,HH,15,14,"ng-template",null,9,Nt),Ee(18,jH,5,10,"ng-template",null,10,Nt),Ee(20,qH,2,3,"ng-template",null,11,Nt)),n&2){let o=ot(3),a=ot(5),l=ot(17),c,d;re(1),ie("ngTemplateOutlet",s.data.previousDialogRef!==void 0?a:o),re(6),ie("heading",tt(8,11,s.data.object.title)+" ("+s.data.object.id+")"),re(2),ie("ngTemplateOutlet",l)("ngTemplateOutletContext",mf(17,_E,s.data.object,s.data.object.type)),re(1),ie("tag",(c=tt(11,13,s.data.object.attributes))==null||c.length==null?null:c.length.toString())("disabled",((d=tt(12,15,s.data.object.attributes))==null?null:d.length)===0)("open",!0),re(3),ie("ngTemplateOutlet",l)("ngTemplateOutletContext",jn(20,ZH,s.data.object.attributes)),re(1),ie("ngIf",s.data.object.type===s.objectType.Material||s.data.object.type===s.objectType.Product),re(1),ie("ngIf",s.data.object.type!==s.objectType.Material)}},dependencies:[Bo,Qt,Vo,Nl,Cn,yn,iP,cy,Jt,c1,lh,a1,l1,sP,oP,aP,lP],styles:["[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%}span.back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--arc-spacing-x-small)}.mat-mdc-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--arc-spacing-x-small);max-height:100%}.location[_ngcontent-%COMP%]{font-size:var(--arc-font-size-medium);font-weight:var(--arc-font-weight-bold);margin-bottom:var(--arc-spacing-x-small)}.details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:var(--arc-spacing-medium);grid-row-gap:var(--arc-spacing-x-small)}.details.mobile[_ngcontent-%COMP%], .details.mobile[_ngcontent-%COMP%]   div.detail[_ngcontent-%COMP%]{grid-template-columns:1fr}.details.mobile[_ngcontent-%COMP%]   div.detail[_ngcontent-%COMP%]   span.value[_ngcontent-%COMP%]{text-align:start}.details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{display:grid;gap:var(--arc-spacing-small);grid-template-columns:1fr auto}.details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   span.key[_ngcontent-%COMP%]{font-weight:700}.details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   span.value[_ngcontent-%COMP%]{text-align:end;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   mgt-person[_ngcontent-%COMP%]{--person-line1-font-weight: var(--arc-font-weight-normal);justify-self:end}veracity-expansion-panel[_ngcontent-%COMP%]   veracity-expansion-panel[_ngcontent-%COMP%]{--padding: var(--arc-spacing-x-small);--header-background: rgb(var(--arc-blue-050));--header-color: rgb(var(--arc-white-000))}.ancestors[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:var(--arc-spacing-x-small)}.ancestor[_ngcontent-%COMP%]{display:grid;gap:var(--arc-spacing-x-small)}.ancestor[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:var(--arc-font-size-medium);font-weight:var(--arc-font-weight-bold);border-bottom:1px solid rgb(var(--arc-black-100));margin-bottom:var(--arc-spacing-x-small)}.ancestor[_ngcontent-%COMP%]   .ancestor-details[_ngcontent-%COMP%]{display:grid;gap:var(--arc-spacing-x-small);background:rgb(var(--arc-background-color));color:rgb(var(--arc-black-100));padding:var(--arc-spacing-small);border-radius:var(--arc-border-radius-small)}.ancestor[_ngcontent-%COMP%]   .ancestor-details[_ngcontent-%COMP%]   mgt-person[_ngcontent-%COMP%]{--person-line1-text-color: rgb(var(--arc-black-100))}.ancestor[_ngcontent-%COMP%]   .ancestor-details[_ngcontent-%COMP%]   veracity-expansion-panel[_ngcontent-%COMP%]{grid-column:1/3;--header-background: rgb(var(--arc-grey-070));--header-color: rgb(var(--arc-white-000));--icon-color: rgb(var(--arc-white-000));--padding: var(--arc-spacing-x-small)}.tooltip[_ngcontent-%COMP%]{width:550px;color:rgb(var(--arc-black-100))}.tooltip[_ngcontent-%COMP%]   mgt-person[_ngcontent-%COMP%]{--person-line1-text-color: rgb(var(--arc-black-100))}button[headerIcon][_ngcontent-%COMP%]{background:rgb(var(--arc-white-000));color:rgb(var(--arc-black-100));padding:calc(var(--arc-spacing-x-small) / 2) var(--arc-spacing-x-small);border:none;border-radius:2px;width:150px}button[headerIcon][_ngcontent-%COMP%]:hover{cursor:pointer;background:rgb(var(--arc-grey-000))}"],changeDetection:0});let r=e;return r})();var TE,id=TE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${TE.svg}
      </svg>
    `}};id.tag="ph-icon-pencil";id.styles=Pt;id.svg=Rt`<path d="M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"/>`;ye([Ie({type:String}),Le("design:type",String)],id.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],id.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],id.prototype,"rotation",void 0);id=TE=ye([Dt("ph-icon-pencil")],id);var RE,rd=RE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${RE.svg}
      </svg>
    `}};rd.tag="ph-icon-git-diff";rd.styles=Pt;rd.svg=Rt`<path d="M112,152a8,8,0,0,0-8,8v28.69L75.72,160.4A39.71,39.71,0,0,1,64,132.12V95a32,32,0,1,0-16,0v37.13a55.67,55.67,0,0,0,16.4,39.6L92.69,200H64a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,112,152ZM40,64A16,16,0,1,1,56,80,16,16,0,0,1,40,64Zm168,97V123.88a55.67,55.67,0,0,0-16.4-39.6L163.31,56H192a8,8,0,0,0,0-16H144a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31L180.28,95.6A39.71,39.71,0,0,1,192,123.88V161a32,32,0,1,0,16,0Zm-8,47a16,16,0,1,1,16-16A16,16,0,0,1,200,208Z"/>`;ye([Ie({type:String}),Le("design:type",String)],rd.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],rd.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],rd.prototype,"rotation",void 0);rd=RE=ye([Dt("ph-icon-git-diff")],rd);var AE,nd=AE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${AE.svg}
      </svg>
    `}};nd.tag="ph-icon-download";nd.styles=Pt;nd.svg=Rt`<path d="M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H72a8,8,0,0,1,0,16H32v64H224V136H184a8,8,0,0,1,0-16h40A16,16,0,0,1,240,136Zm-117.66-2.34a8,8,0,0,0,11.32,0l48-48a8,8,0,0,0-11.32-11.32L136,108.69V24a8,8,0,0,0-16,0v84.69L85.66,74.34A8,8,0,0,0,74.34,85.66ZM200,168a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"/>`;ye([Ie({type:String}),Le("design:type",String)],nd.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],nd.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],nd.prototype,"rotation",void 0);nd=AE=ye([Dt("ph-icon-download")],nd);var DE,sd=DE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${DE.svg}
      </svg>
    `}};sd.tag="ph-icon-faders-horizontal";sd.styles=Pt;sd.svg=Rt`<path d="M32,80a8,8,0,0,1,8-8H72a8,8,0,0,1,0,16H40A8,8,0,0,1,32,80Zm184,88H176V152a8,8,0,0,0-16,0v48a8,8,0,0,0,16,0V184h40a8,8,0,0,0,0-16Zm-80,0H40a8,8,0,0,0,0,16h96a8,8,0,0,0,0-16Zm-32-56a8,8,0,0,0,8-8V88H216a8,8,0,0,0,0-16H112V56a8,8,0,0,0-16,0v48A8,8,0,0,0,104,112Z"/>`;ye([Ie({type:String}),Le("design:type",String)],sd.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],sd.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],sd.prototype,"rotation",void 0);sd=DE=ye([Dt("ph-icon-faders-horizontal")],sd);var QH={selectedRows:!1,exporting:!1},od=class extends ph{constructor(){super(QH),this.chunkSize=ce(Qp),this.defaultGridOptions=ce(_l),this.carbonFactorsValue=ce(YF),this.modalService=ce(Da),this.snackbarService=ce(OO),this.localStorage=ce(KF),this.xlsxService=ce(UF),this.router=ce(ch),this.routerService=ce(WC),this.activeRoute=ce(m0),this.objectService=ce(zc),this.destoryReqests$=new $E,this.filters=new Mi(null),this.carbonFactors=new Mi(null),this.filters$=this.filters.valueChanges.pipe(Kt()),this.carbonFactors$=this.carbonFactors.valueChanges.pipe(Kt()),this.modules=[Zm],this.vm$=hf([this.state$,ce(DO).userCanManageObjects$,ce(Gr).select(({theme:e})=>e).pipe(pn(),Kt())]).pipe(fi(([{selectedRows:e,exporting:t},i,n])=>({canEdit:i&&e,canAdd:i&&!e,canCompare:e,gridTheme:n,exporting:t})))}onGridReady(e){let t={getRows:i=>{let s=e.api.getRowNode(String(i.startRow-1))?.data?.id,o=this.filters.value??{};this.objectService.getObjects(this.objectType,i.endRow-i.startRow,s,o).pipe(en(),Ga(this.destroy$),fi(a=>(a.items=a.items.map(l=>Ue(Te({},l),{fullObject:!1,caulculatedCarbonFactors:!1})),a)),pf(()=>(this.snackbarService.open(`Error loading ${this.objectType}s`,"Okay"),Dl))).subscribe(a=>{let{items:l,next:c}=a;i.successCallback([...l],c!==null?i.endRow+1:i.startRow+l.length),e.api.hideOverlay();let d=[...l.map(({id:u})=>u)];this.getCarbon(d),this.getObject(d)})}};this.setDefaultFilters(),this.setDefaultCarbonFactors(),this.filters$.subscribe(i=>{this.destoryReqests$.next();let n=i??{};this.router.navigate([],{relativeTo:this.activeRoute,queryParams:n,queryParamsHandling:"merge"}),this.refreshGrid()}),this.carbonFactors$.subscribe(i=>{this.destoryReqests$.next(),this.localStorage.set(CE.CarbonFactorsControl,i);let n=this.allNodes.map(s=>s.data.id);this.getCarbon(n),this.getObject(n)}),e.api.setDatasource(t),e.api.showLoadingOverlay()}onAdd(){this.modalService.open(ZF,{data:{modules:[Oo],gridOptions:this.addGridOptions,defaultObject:this.defaultObject,type:this.objectType,location:this.carbonFactors.value?.isoCode["alpha-3"]??"global"}}).afterClosed().pipe(en()).subscribe(e=>{e&&this.refreshGrid()})}onEdit(){let e=this.gridOptions.api?.getSelectedRows()??[];this.modalService.open(qF,{data:{modules:[Oo],gridOptions:this.editGridOptions,type:this.objectType,rows:e,location:this.carbonFactors.value?.isoCode["alpha-3"]??"global"}}).afterClosed().pipe(en()).subscribe(()=>{this.refreshGrid()})}onViewOptions(){this.modalService.open(JF,{data:this.colDefs,width:"auto"}).afterClosed().subscribe(e=>{e&&(this.gridOptions.api?.setColumnDefs(e),this.gridOptions.api?.refreshHeader())})}onCompare(){let e=this.gridOptions.columnDefs??[],t=this.gridOptions.api?.getSelectedNodes()??[],i=[];t.forEach(({data:n})=>{n&&i.push(n)}),this.modalService.open(tP,{disableClose:!1,data:{objects:i,columnDefs:e,componentParent:this}})}onExport(){let e=this.gridOptions.api?.getSelectedNodes()??[];if(e.length>0){let t=e.map(i=>i.data);this.xlsxService.export(t,this.objectType)}else{this.patchState({exporting:!0});let t=this.gridOptions.cacheBlockSize??0,i=this.filters.getRawValue()??{},n=this.routerService.createQueryParams(i),s=this.carbonFactors.getRawValue(),{isoCode:o,referancePeriod:a,validOn:l}=s??{},c=d=>{let u=d?+d.split("offset=")[1].split("&")[0]:0;return this.objectService.getObjects(this.objectType,t,u,n).pipe(ff(h=>Qu(h.items).pipe(th(this.chunkSize),Ju(p=>p.map(f=>hf([this.objectService.getObject(f.id,o["alpha-3"],a,l.toDate()),this.objectService.getCarbon(f.id,o["alpha-3"],l.toDate(),this.objectType===Bt.Assembly?a:void 0)]).pipe(fi(([g,m])=>Te(Te(Te({},f),g),m))))),ih(p=>eh(p)),fi(p=>Ue(Te({},h),{items:p})))))};this.snackbarService.open(`Exporting all ${this.objectType}s, please wait...`,"Okay").afterOpened().pipe(ff(()=>c()),qE(d=>d.next?c(d.next):Dl),XE((d,u)=>[...d,...u.items],[]),en(),Ga(this.destroy$),pf(()=>(this.snackbarService.open(`Error exporting ${this.objectType}s`,"Okay"),Dl))).subscribe(d=>{this.xlsxService.export(d,this.objectType),this.patchState({exporting:!1})})}}onSelectionChanged(){let t=(this.gridOptions.api?.getSelectedNodes()??[]).length>0;this.setState(i=>Ue(Te({},i),{selectedRows:t}))}onObjectSelection(e){let t=this.carbonFactors.getRawValue(),{isoCode:i,referancePeriod:n,validOn:s}=t??{};if(i&&n&&s){let o=this.allNodes.find(a=>a.data?.id===e)?.data;o&&this.modalService.open(dy,{disableClose:!1,data:{object:o,isoCode:i,referancePeriod:n,validOn:s.toDate()}})}}get allNodes(){let e=[];return this.gridOptions.api?.forEachNode(t=>{t.data&&e.push(t)}),e}get colDefs(){let e=[];return(this.gridOptions.api?.getColumnDefs()??[]).forEach(i=>e.push(Te({},i))),e}refreshGrid(){this.gridOptions.api?.deselectAll(),this.gridOptions.api?.ensureIndexVisible(0),this.gridOptions.api?.showLoadingOverlay(),this.gridOptions.api?.refreshInfiniteCache()}setDefaultFilters(){let{queryParams:e}=this.activeRoute.snapshot,t=this.routerService.parseQueryParams(e);this.filters.setValue(t,{emitEvent:!1,onlySelf:!0})}setDefaultCarbonFactors(){let e=this.localStorage.get(CE.CarbonFactorsControl)??this.carbonFactorsValue;this.carbonFactors.patchValue(e,{emitEvent:!1,onlySelf:!0})}getObject(e){let t=this.carbonFactors.getRawValue(),{isoCode:i,referancePeriod:n,validOn:s}=t??{};Qu(e).pipe(th(this.chunkSize),Ju(o=>o.map(a=>Cy(a).pipe(ff(l=>(this.gridOptions.api?.forEachNode(c=>{c.data?.id===l&&(c.setData(Ue(Te({},c.data),{fullObject:!1})),this.gridOptions.api?.redrawRows({rowNodes:[c]}))}),this.objectService.getObject(l,i["alpha-3"],n,s.toDate()))),Wo(l=>{this.gridOptions.api?.forEachNode(c=>{c.data?.id===a&&(c.setData(Ue(Te(Te({},c.data),l),{fullObject:!0})),this.gridOptions.api?.redrawRows({rowNodes:[c]}))})},()=>{this.gridOptions.api?.forEachNode(l=>{if(l.data?.id===a){let c=Te({},l.data);delete c.properties,delete c.ancestors,l.setData(Ue(Te({},c),{fullObject:!1})),this.gridOptions.api?.redrawRows({rowNodes:[l]})}})})))),ih(o=>eh(o)),Ga(this.destroy$),Ga(this.destoryReqests$)).subscribe()}getCarbon(e){let t=this.carbonFactors.getRawValue(),{isoCode:i,referancePeriod:n,validOn:s}=t??{};Qu(e).pipe(th(this.chunkSize),Ju(o=>o.map(a=>Cy(a).pipe(ff(l=>(this.gridOptions.api?.forEachNode(c=>{c.data?.id===l&&(c.setData(Ue(Te({},c.data),{calculatedCarbonFactors:!1})),this.gridOptions.api?.redrawRows({rowNodes:[c]}))}),this.objectService.getCarbon(l,i["alpha-3"],s.toDate(),this.objectType===Bt.Assembly?n:void 0))),Wo(l=>{this.gridOptions.api?.forEachNode(c=>{c.data?.id===a&&(c.setData(Ue(Te(Te({},c.data),l),{calculatedCarbonFactors:!0})),this.gridOptions.api?.redrawRows({rowNodes:[c]}))})},()=>{this.gridOptions.api?.forEachNode(l=>{if(l.data?.id===a){let c=Te({},l.data);Object.keys(ti).forEach(d=>delete c[d]),l.setData(Ue(Te({},c),{calculatedCarbonFactors:!1})),this.gridOptions.api?.redrawRows({rowNodes:[l]})}})})))),ih(o=>eh(o)),Ga(this.destroy$),Ga(this.destoryReqests$)).subscribe()}};var OE,ad=OE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${OE.svg}
      </svg>
    `}};ad.tag="ph-icon-folder";ad.styles=Pt;ad.svg=Rt`<path d="M216,72H131.31L104,44.69A15.86,15.86,0,0,0,92.69,40H40A16,16,0,0,0,24,56V200.62A15.4,15.4,0,0,0,39.38,216H216.89A15.13,15.13,0,0,0,232,200.89V88A16,16,0,0,0,216,72ZM40,56H92.69l16,16H40ZM216,200H40V88H216Z"/>`;ye([Ie({type:String}),Le("design:type",String)],ad.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],ad.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],ad.prototype,"rotation",void 0);ad=OE=ye([Dt("ph-icon-folder")],ad);var FE,ld=FE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${FE.svg}
      </svg>
    `}};ld.tag="ph-icon-file";ld.styles=Pt;ld.svg=Rt`<path d="M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"/>`;ye([Ie({type:String}),Le("design:type",String)],ld.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],ld.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],ld.prototype,"rotation",void 0);ld=FE=ye([Dt("ph-icon-file")],ld);function JH(r,e){if(r&1&&ai(0,0),r&2){let t=ve(2),i=ot(4),n=ot(6);ie("ngTemplateOutlet",(t.params==null||t.params.data==null?null:t.params.data.type)==="assembly"?i:n)}}function e6(r,e){if(r&1&&ai(0,0),r&2){ve(2);let t=ot(8);ie("ngTemplateOutlet",t)}}function t6(r,e){if(r&1&&(Ee(0,JH,1,1,"ng-container",5),ze(1,"async"),ze(2,"async"),Ee(3,e6,1,1,"ng-container",5),ze(4,"async"),J(5,"span"),pe(6),q()),r&2){let t=ve();ie("ngIf",tt(1,3,t.isHovered$)===!0&&tt(2,5,t.loading$)===!1),re(3),ie("ngIf",tt(4,7,t.loading$)),re(3),Ii(t.params==null?null:t.params.value)}}function i6(r,e){if(r&1){let t=Lr();J(0,"ph-icon-folder",6),Re("click",function(){Vt(t);let n=ve();return Ht(n.onClick())}),q()}}function r6(r,e){if(r&1){let t=Lr();J(0,"ph-icon-file",6),Re("click",function(){Vt(t);let n=ve();return Ht(n.onClick())}),q()}}function n6(r,e){r&1&&xe(0,"arc-spinner")}var s6={isHovered:!1,loading:!1},cd=(()=>{let e=class e extends ph{constructor(){super(s6),this.loading$=this.select(({loading:i})=>i),this.isHovered$=this.select(({isHovered:i})=>i)}agInit(i){this.params=i,this.patchState({loading:i.data?.fullObject===!1||i.data?.calculatedCarbonFactors===!1})}refresh(i){return this.params=i,this.patchState({loading:i.data?.fullObject===!1||i.data?.calculatedCarbonFactors===!1}),!0}onMouseEnter(){this.params?.data?.fullObject!==!1&&this.patchState({isHovered:!0})}onMouseLeave(){this.params?.data?.fullObject!==!1&&this.patchState({isHovered:!1})}onClick(){if(this.params!==void 0){let{data:i}=this.params;if(i!==void 0&&i.fullObject===!0){let{id:n}=i;this.params.context?.componentParent?.onObjectSelection(n)}}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-title-cell"]],hostBindings:function(n,s){n&1&&Re("mouseenter",function(a){return s.onMouseEnter(a)})("mouseleave",function(a){return s.onMouseLeave(a)})},features:[ir],decls:9,vars:1,consts:[[3,"ngTemplateOutlet"],["title",""],["folderIcon",""],["fileIcon",""],["loading",""],[3,"ngTemplateOutlet",4,"ngIf"],["tooltip","Open details",1,"open-icon",3,"click"]],template:function(n,s){if(n&1&&(ai(0,0),Ee(1,t6,7,9,"ng-template",null,1,Nt),Ee(3,i6,1,0,"ng-template",null,2,Nt),Ee(5,r6,1,0,"ng-template",null,3,Nt),Ee(7,n6,1,0,"ng-template",null,4,Nt)),n&2){let o=ot(2),a=ot(8);ie("ngTemplateOutlet",s.params!=null&&s.params.value?o:a)}},dependencies:[Qt,Vo,cy,Jt],styles:["[_nghost-%COMP%]{display:grid;align-items:center;gap:var(--arc-spacing-small);grid-template-columns:auto 1fr}.open-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--arc-text-color)}"],changeDetection:0});let r=e;return r})();var PE,dd=PE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${PE.svg}
      </svg>
    `}};dd.tag="ph-icon-caret-left";dd.styles=Pt;dd.svg=Rt`<path d="M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"/>`;ye([Ie({type:String}),Le("design:type",String)],dd.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],dd.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],dd.prototype,"rotation",void 0);dd=PE=ye([Dt("ph-icon-caret-left")],dd);function o6(r,e){r&1&&xe(0,"ph-icon-caret-right",6)}function a6(r,e){r&1&&xe(0,"ph-icon-caret-left",6)}function l6(r,e){r&1&&pe(0,"Carbon Factors")}function c6(r,e){r&1&&pe(0,"Carbon Properties")}var Jp=(()=>{let e=class e{constructor(){this.ref=ce(Nr),this.expanded=!0}agInit(i){this.params=i,this.params.columnGroup.getProvidedColumnGroup().addEventListener("expandedChanged",this.syncExpanded.bind(this)),this.syncExpanded(),this.ref.detectChanges()}refresh(i){return this.params=i,this.params.columnGroup.getProvidedColumnGroup().addEventListener("expandedChanged",this.syncExpanded.bind(this)),this.syncExpanded(),this.ref.detectChanges(),!0}onToggleExpanded(){let i=this.params?.columnGroup.getProvidedColumnGroup().isExpanded();this.params?.setExpanded(!i),this.ref.detectChanges()}syncExpanded(){this.expanded=this.params?.columnGroup.isExpanded()??!0,this.ref.detectChanges()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-carbon-parameter-header"]],decls:11,vars:2,consts:[["area-label","Toggle Expanded",3,"click"],[3,"ngTemplateOutlet"],["caretRight",""],["caretLeft",""],["carbonFactors",""],["carbonParameters",""],["slot","icon"]],template:function(n,s){if(n&1&&(J(0,"arc-icon-button",0),Re("click",function(){return s.onToggleExpanded()}),ai(1,1),Ee(2,o6,1,0,"ng-template",null,2,Nt),Ee(4,a6,1,0,"ng-template",null,3,Nt),q(),ai(6,1),Ee(7,l6,1,0,"ng-template",null,4,Nt),Ee(9,c6,1,0,"ng-template",null,5,Nt)),n&2){let o=ot(3),a=ot(5),l=ot(8),c=ot(10);re(1),ie("ngTemplateOutlet",s.expanded?a:o),re(5),ie("ngTemplateOutlet",(s.params==null||s.params.context==null||s.params.context.componentParent==null?null:s.params.context.componentParent.objectType)==="assembly"?l:c)}},dependencies:[Vo],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:var(--arc-spacing-x-small);align-items:center}arc-icon-button[_ngcontent-%COMP%]{transform:scale(.6)}"],changeDetection:0});let r=e;return r})();function d6(r,e){if(r&1&&(mn(0),pe(1),vn()),r&2){let t=ve();re(1),Ui(" ",t.cellValueString,`
`)}}var Lo=(()=>{let e=class e{constructor(){this.ref=ce(Nr)}get cellValueString(){let{attributes:i}=this.params?.data??{};return Object.entries(i??{}).map(([o,a])=>`${o}: ${a}`).join(" | ")}agInit(i){this.params=i}refresh(i){return this.params=i,this.ref.markForCheck(),!0}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-attributes-cell"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,s){n&1&&Ee(0,d6,2,1,"ng-container",0),n&2&&ie("ngIf",s.cellValueString)},dependencies:[Qt],changeDetection:0});let r=e;return r})();function u6(r,e){if(r&1&&(J(0,"div",1),pe(1),q()),r&2){let t=ve();re(1),Ui(" ",t.tooltipString(),`
`)}}var No=(()=>{let e=class e{agInit(i){this.params=i}tooltipString(){return this.params?.valueFormatter(this.params)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-cell-tooltip"]],decls:1,vars:1,consts:[["class","cell-tooltip",4,"ngIf"],[1,"cell-tooltip"]],template:function(n,s){n&1&&Ee(0,u6,2,1,"div",0),n&2&&ie("ngIf",s.params)},dependencies:[Qt],styles:["[_nghost-%COMP%]{position:absolute;pointer-events:none}.ag-tooltip-hiding[_nghost-%COMP%]{opacity:0}.cell-tooltip[_ngcontent-%COMP%]{background:rgb(var(--arc-font-color));color:rgb(var(--arc-background-color));padding:var(--arc-spacing-small)}"],changeDetection:0});let r=e;return r})();var uy=(()=>{let e=class e{constructor(){this.ref=ce(Nr)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}writeValue(i){i?this.control.setValue(i,{emitEvent:!1}):this.control.reset(),this.ref.detectChanges()}setDisabledState(i){i?this.control.disable():this.control.enable(),this.ref.detectChanges()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Wi({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function f6(r,e){if(r&1&&(J(0,"mat-option",4),pe(1),q()),r&2){let t=e.$implicit,i=ve();ie("value",t),re(1),Ui(" ",i.formatOption(t)," ")}}var hy=(()=>{let e=class e extends uy{constructor(){super(...arguments),this.label="",this.placeholder="",this.options=[],this.control=new Mi(null),this.value$=this.control.valueChanges.pipe(Kt())}formatOption(i){return JSON.stringify(i)}ngOnInit(){this.value$.subscribe(i=>{this.onChange?.(i)})}onClear(i){i.stopPropagation(),this.control.reset()}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275cmp=Ve({type:e,selectors:[["veracity-clearable-select-control"]],inputs:{label:"label",placeholder:"placeholder",options:"options",formatOption:"formatOption"},features:[Go([{provide:Pl,useExisting:Ol(()=>e),multi:!0}]),ir],decls:7,vars:5,consts:[[3,"placeholder","formControl"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","aria-label","Clear selection",3,"disabled","click"],["slot","icon"],[3,"value"]],template:function(n,s){n&1&&(J(0,"mat-form-field")(1,"mat-label"),pe(2),q(),J(3,"mat-select",0),Ee(4,f6,2,2,"mat-option",1),q(),J(5,"arc-icon-button",2),Re("click",function(a){return s.onClear(a)}),xe(6,"ph-icon-x",3),q()()),n&2&&(re(2),Ii(s.label),re(1),ie("placeholder",s.placeholder)("formControl",s.control),re(1),ie("ngForOf",s.options),re(1),ie("disabled",s.control.disabled))},dependencies:[Bo,y0,Ml,Il,uh,R0,rr,kr],changeDetection:0});let r=e;return r})();var py=(()=>{let e=class e extends uy{constructor(){super(...arguments),this.label="",this.control=new Mi(null),this.value$=this.control.valueChanges.pipe(Kt())}ngOnInit(){this.value$.subscribe(i=>{this.onChange?.(i)})}onClear(i){i.stopPropagation(),this.control.reset()}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275cmp=Ve({type:e,selectors:[["veracity-clearable-input-control"]],inputs:{label:"label"},features:[Go([{provide:Pl,useExisting:Ol(()=>e),multi:!0}]),ir],decls:6,vars:3,consts:[["matInput","",3,"formControl"],["matSuffix","","aria-label","Clear selection",3,"disabled","click"],["slot","icon"]],template:function(n,s){n&1&&(J(0,"mat-form-field")(1,"mat-label"),pe(2),q(),xe(3,"input",0),J(4,"arc-icon-button",1),Re("click",function(a){return s.onClear(a)}),xe(5,"ph-icon-x",2),q()()),n&2&&(re(2),Ii(s.label),re(1),ie("formControl",s.control),re(1),ie("disabled",s.control.disabled))},dependencies:[hh,Ml,Il,uh,dh,rr,kr],changeDetection:0});let r=e;return r})();var pP=(()=>{let e=class e{constructor(){this.defaultGridOptions=ce(_l),this.objectService=ce(zc),this.snackBar=ce(kl),this.modalService=ce(Da),this.routerService=ce(WC),this.dialogRef=ce(Ll),this.gridTheme$=ce(Gr).select(({theme:i})=>i).pipe(pn(),Kt()),this.dialogData=ce(xs),this.filter=new Mi(null),this.objectTypes=[Bt.Material,Bt.Product],this.formatOption=i=>String(i),this.ancesstor=new Mi(Bt.Material),this.modules=[Zm],this.gridOptions=Ue(Te({},this.defaultGridOptions),{context:{componentParent:this},defaultColDef:{hide:!1},columnDefs:[{headerName:"Title",field:"title",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",cellRenderer:cd,cellEditor:"agTextCellEditor",checkboxSelection:!0,showDisabledCheckboxes:!0},{headerName:"Subtitle",field:"subtitle"},{headerName:"Attributes",field:"attributes",tooltipField:"attributes",cellRenderer:Lo,tooltipComponent:No,tooltipComponentParams:{valueFormatter:i=>i?.data?.attributes?Object.entries(i.data.attributes).map(([n,s])=>`${n}: ${s}`).reduce((n,s)=>`${n} | ${s}`):""}},{headerName:"Comment",field:"comment"}]})}onGridReady(i){let n={getRows:s=>{let a=i.api.getRowNode(String(s.startRow-1))?.data?.id,l={text:this.filter.value};this.objectService.getObjects(this.ancesstor.value??Bt.Material,s.endRow-s.startRow,a,this.routerService.parseQueryParams(l)).pipe(en(),pf(()=>(this.snackBar.open(`Failed to load ${this.ancesstor.value}s`,"OK"),Dl))).subscribe(c=>{s.successCallback([...c.items],c.next!==null?s.endRow+1:s.startRow+c.items.length),i.api.hideOverlay()})}};i.api.setDatasource(n),i.api.showLoadingOverlay(),i.api.sizeColumnsToFit()}refreshGrid(){this.filter.markAsPristine(),this.ancesstor.markAsPristine(),this.gridOptions.api?.deselectAll(),this.gridOptions.api?.ensureIndexVisible(0),this.gridOptions.api?.showLoadingOverlay(),this.gridOptions.api?.refreshInfiniteCache()}handleCancel(){this.dialogRef.close()}handleAdd(){this.dialogRef.close(this.gridOptions.api?.getSelectedRows()??[])}get allNodes(){let i=[];return this.gridOptions.api?.forEachNode(n=>{n.data&&i.push(n)}),i}onObjectSelection(i){let n=this.allNodes.find(s=>s.data?.id===i)?.data;n&&this.modalService.open(dy,{disableClose:!1,data:{previousDialogRef:this.dialogRef,object:n,isoCode:this.dialogData.isoCode,referancePeriod:this.dialogData.referancePeriod,validOn:this.dialogData.validOn}})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-ancestors-selection-modal"]],decls:13,vars:10,consts:[["mat-dialog-actions","","align","end"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"filters"],["label","Ancestor Object Type",3,"formControl","options","formatOption"],["label","Search",3,"formControl"],["mat-button","","color","accent",3,"click"],[3,"gridOptions","modules","gridReady"]],template:function(n,s){n&1&&(J(0,"div",0)(1,"button",1),Re("click",function(){return s.handleCancel()}),pe(2,"Cancel"),q(),J(3,"button",2),Re("click",function(){return s.handleAdd()}),pe(4,"Attach"),q()(),J(5,"mat-dialog-content")(6,"div",3),xe(7,"veracity-clearable-select-control",4)(8,"veracity-clearable-input-control",5),J(9,"button",6),Re("click",function(){return s.refreshGrid()}),pe(10,"Search"),q()(),J(11,"ag-grid-angular",7),Re("gridReady",function(a){return s.onGridReady(a)}),ze(12,"async"),q()()),n&2&&(re(7),ie("formControl",s.ancesstor)("options",s.objectTypes)("formatOption",s.formatOption),re(1),ie("formControl",s.filter),re(3),mi(tt(12,8,s.gridTheme$)),ie("gridOptions",s.gridOptions)("modules",s.modules))},dependencies:[nr,Cn,yn,gr,rr,kr,hy,py,Jt],styles:["[_nghost-%COMP%]{display:grid;height:100%;grid-template-rows:auto 1fr}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;gap:var(--arc-spacing-small)}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}div.filters[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--arc-spacing-small);align-items:baseline}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0});let r=e;return r})();var ef=(()=>{let e=class e{constructor(){this.applied=!1,this.defaultGridOptions=ce(_l),this.modalService=ce(Da),this.gridTheme$=ce(Gr).select(({theme:i})=>i).pipe(pn(),Kt()),this.modules=[Oo],this.gridOptions=Ue(Te({},this.defaultGridOptions),{rowModelType:"clientSide",readOnlyEdit:!1,columnDefs:[{field:"ancestor",headerName:"Type",cellDataType:"string",lockPosition:"left",pinned:"left",checkboxSelection:!0,valueGetter:({data:i})=>i?.ancestor?.type},{field:"ancestor",headerName:"Title",cellDataType:"string",lockPosition:"left",editable:!1,valueGetter:({data:i})=>i?.ancestor?.title},{field:"ancestor",headerName:"Subtitle",cellDataType:"string",lockPosition:"left",editable:!1,valueGetter:({data:i})=>i?.ancestor?.subtitle},{headerName:"Attributes",field:"ancestor",tooltipField:"ancestor",valueGetter:({data:i})=>i?.ancestor?.attributes,cellRenderer:Lo,tooltipComponent:No,tooltipComponentParams:{valueFormatter:i=>i?.data?.ancestor?.attributes?Object.entries(i.data.ancestor.attributes).map(([n,s])=>`${n}: ${s}`).reduce((n,s)=>`${n} | ${s}`):""},editable:!1},{field:"quantity",headerName:"Quantity",cellDataType:"number",editable:!0,cellEditor:"agNumericCellEditor",valueFormatter:({value:i,data:n})=>i!==void 0?i!==null&&n!==void 0?`${i.toFixed(3)}`:"-":""}]})}agInit(i){this.params=i}getValue(){let i=[];return this.gridOptions.api?.forEachNode(s=>{s.data&&i.push(s.data)}),i.map(({ancestor_id:s,quantity:o})=>({ancestor_id:s,quantity:o}))}isCancelAfterEnd(){return!this.applied}isPopup(){return!0}onGridReady(i){let n=this.params?.value?.map(s=>({ancestor:s.ancestor,quantity:s.quantity,ancestor_id:s.ancestor_id}))??[];i.api?.setRowData(n),i.api?.sizeColumnsToFit()}handleAddAncestor(){if(this.params){let i=this.params.context.objectGridComponent.carbonFactors.value,n=i?.isoCode,s=i?.referancePeriod,o=i?.validOn;n&&s&&o&&this.modalService.open(pP,{data:{isoCode:n,referancePeriod:s,validOn:o.toDate()}}).afterClosed().pipe(p0(1)).subscribe(a=>{if(a){this.gridOptions.api?.applyTransaction({add:a.map(c=>({ancestor_id:c.id,ancestor:c,quantity:1}))});let l=(this.gridOptions.api?.getRenderedNodes().length??0)-a.length;this.gridOptions.api?.ensureIndexVisible(l),this.gridOptions.api?.setFocusedCell(l,"quantity")}})}}handleCancel(){this.params?.stopEditing()}handleApply(){this.applied=!0,this.params?.stopEditing()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-ancestors-editor"]],decls:10,vars:6,consts:[["align","end"],[3,"click"],["slot","icon"],["mat-button","",3,"click"],["mat-button","","color","primary",3,"click"],["mat-card-body","",3,"gridOptions","modules","gridReady"]],template:function(n,s){n&1&&(J(0,"mat-card")(1,"mat-card-actions",0)(2,"arc-icon-button",1),Re("click",function(){return s.handleAddAncestor()}),xe(3,"ph-icon-plus",2),q(),J(4,"button",3),Re("click",function(){return s.handleCancel()}),pe(5,"Cancel"),q(),J(6,"button",4),Re("click",function(){return s.handleApply()}),pe(7,"Apply"),q()(),J(8,"ag-grid-angular",5),Re("gridReady",function(a){return s.onGridReady(a)}),ze(9,"async"),q()()),n&2&&(re(8),mi(tt(9,4,s.gridTheme$)),ie("gridOptions",s.gridOptions)("modules",s.modules))},dependencies:[nr,_0,T0,gr,Jt],styles:["mat-card[_ngcontent-%COMP%]{padding:var(--arc-spacing-small);width:40vw;height:40vh;display:flex;flex-direction:column;gap:var(--arc-spacing-small)}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%;min-height:200px}"],changeDetection:0});let r=e;return r})();function m6(r,e){if(r&1&&(mn(0),pe(1),vn()),r&2){let t=ve();re(1),Ui(" ",t.cellValueString,`
`)}}var tf=(()=>{let e=class e{constructor(){this.ref=ce(Nr)}get cellValueString(){return this.params?.value&&this.params?.data?.properties!==void 0&&this.params.data.properties.length===0?`${this.params.value.length} ${this.params?.colDef?.headerName}`:null}agInit(i){this.params=i}refresh(i){return this.params=i,this.ref.detectChanges(),!0}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-ancestors-cell"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,s){n&1&&Ee(0,m6,2,1,"ng-container",0),n&2&&ie("ngIf",s.cellValueString)},dependencies:[Qt],changeDetection:0});let r=e;return r})();var rf=class{registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}writeValue(e){e?this.form.patchValue(e,{emitEvent:!1,onlySelf:!0}):this.form.reset()}setDisabledState(e){e?this.form.disable():this.form.enable()}};var fy={"Building Envelope":[lt.Facade,lt.RoofFinishes],"Electrical Services":[lt.Electrical,lt.Telecomms,lt.Lighting,lt.Renewables,lt.VerticalTransport,lt.Security],"Mechanical Services":[lt.Heating,lt.Cooling,lt.Ventilation,lt.Process],"Public Halth & Hydraulics":[lt.HotWater,lt.ColdWater,lt.WasteWater,lt.Fire,lt.Fuel,lt.Specialist],"Space Plan":[lt.Partitions,lt.FloorFinishes,lt.CeilingFinishes,lt.WallFinishes,lt.RoofFinishes,lt.ArchitecturalMetalwork],Substructure:[lt.BasementFrame,lt.Foundation,lt.BasementPerimeter],Superstructure:[lt.Floorplate,lt.VerticalStructure,lt.Stability,lt.Roof,lt.Stairs]};var v6=["objectType",""];function C6(r,e){if(r&1&&xe(0,"veracity-clearable-select-control",5),r&2){let t=ve();ie("formControl",t.systemControl)("options",t.systems)("formatOption",t.formatOption)}}var y6=function(){return[]};function x6(r,e){if(r&1&&(J(0,"veracity-clearable-select-control",6),ze(1,"async"),pe(2,"> "),q()),r&2){let t=ve(),i;ie("options",(i=tt(1,2,t.subsystems$))!==null&&i!==void 0?i:r1(4,y6))("formatOption",t.formatOption)}}var nf=(()=>{let e=class e extends rf{constructor(){super(...arguments),this.ref=ce(Nr),this.formatOption=i=>i,this.systemControl=new Mi(null),this.form=new w0({text:new Mi(null),subsystem:new Mi(null)}),this.value$=this.form.valueChanges.pipe(Kt()),this.systemValue$=this.systemControl.valueChanges.pipe(Kt()),this.subsystems$=this.systemValue$.pipe(Kt(),fi(i=>i?fy[i]:[]))}get systems(){return Object.keys(fy)}ngOnInit(){this.systemValue$.subscribe(()=>{this.form.controls.subsystem.value&&this.form.controls.subsystem.patchValue(null,{emitEvent:!1})})}onApply(){let i=this.form.value;this.form.markAsPristine(),this.onChange?.(i)}writeValue(i){if(i!==null){let{subsystem:n}=i;if(n!==null||n!==void 0){let s=Object.entries(fy).find(([o,a])=>a.includes(i.subsystem))?.[0];s&&this.systemControl.patchValue(s)}this.form.patchValue(i,{emitEvent:!1,onlySelf:!0}),this.form.markAsPristine()}this.ref.detectChanges()}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275cmp=Ve({type:e,selectors:[["veracity-filters-control","objectType",""]],inputs:{objectType:"objectType"},features:[Go([{provide:Pl,useExisting:Ol(()=>e),multi:!0}]),ir],attrs:v6,decls:6,vars:4,consts:[[3,"formGroup"],["label","Search","formControlName","text","matTooltip","Search by keyword within object title and subtitle",3,"keydown.enter"],["label","System","matTooltip","Systems generally correspond to discipline; select a system to populate corresponding subsystem filter options",3,"formControl","options","formatOption",4,"ngIf"],["label","Subsystem","formControlName","subsystem","matTooltip","Systems are be broken down into subsystems; select a system before selecting a subsystem filter",3,"options","formatOption",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["label","System","matTooltip","Systems generally correspond to discipline; select a system to populate corresponding subsystem filter options",3,"formControl","options","formatOption"],["label","Subsystem","formControlName","subsystem","matTooltip","Systems are be broken down into subsystems; select a system before selecting a subsystem filter",3,"options","formatOption"]],template:function(n,s){n&1&&(J(0,"div",0)(1,"veracity-clearable-input-control",1),Re("keydown.enter",function(){return s.onApply()}),q(),Ee(2,C6,1,3,"veracity-clearable-select-control",2),Ee(3,x6,3,5,"veracity-clearable-select-control",3),J(4,"button",4),Re("click",function(){return s.onApply()}),pe(5," Apply Filters "),q()()),n&2&&(ie("formGroup",s.form),re(2),ie("ngIf",s.objectType==="assembly"),re(1),ie("ngIf",s.objectType==="assembly"),re(1),ie("disabled",s.systemControl.value===null?!1:s.form.controls.subsystem.value===null))},dependencies:[Qt,nr,Ho,rr,S0,kr,b0,E0,hy,py,Jt],styles:["div[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--arc-spacing-small);align-items:baseline}mat-form-field[_ngcontent-%COMP%]{minwdith:400px}"],changeDetection:0});let r=e;return r})();var LE,hd=LE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${LE.svg}
      </svg>
    `}};hd.tag="ph-icon-calendar";hd.styles=Pt;hd.svg=Rt`<path d="M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm59.16,30.45L152,176h16a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136,23.76,23.76,0,0,1,171.16,150.45Z"/>`;ye([Ie({type:String}),Le("design:type",String)],hd.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],hd.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],hd.prototype,"rotation",void 0);hd=LE=ye([Dt("ph-icon-calendar")],hd);var S6=["objectType",""];function w6(r,e){if(r&1&&(J(0,"mat-option",9),pe(1),q()),r&2){let t=e.$implicit;ie("value",t),re(1),g0(" ",t["alpha-3"]," - ",t.name," ")}}function b6(r,e){if(r&1&&(J(0,"mat-option",9),pe(1),q()),r&2){let t=e.$implicit;ie("value",t),re(1),Ui(" ",t," ")}}function E6(r,e){if(r&1&&(J(0,"mat-form-field")(1,"mat-label"),pe(2,"Reference Period"),q(),J(3,"mat-select",10),Ee(4,b6,2,2,"mat-option",2),q()()),r&2){let t=ve();re(4),ie("ngForOf",t.referancePeriods)}}var sf=(()=>{let e=class e extends rf{constructor(){super(...arguments),this.isoCodes=$u,this.referancePeriods=Object.keys(Zp).filter(i=>isNaN(Number(i))).map(i=>Zp[i]),this.form=new w0({isoCode:new Mi(null,[x0.required]),validOn:new Mi(null,[x0.required]),referancePeriod:new Mi(null,[x0.required])}),this.value$=this.form.valueChanges.pipe(Kt())}onCalculate(){this.onChange?.(this.form.value)}writeValue(i){let{isoCode:n,referancePeriod:s,validOn:o}=i??{};if(n){let a=$u.find(l=>l["alpha-3"]===n["alpha-3"]);this.form.controls.isoCode.setValue(a??null,{emitEvent:!1})}this.form.controls.validOn.setValue(o??null,{emitEvent:!1}),this.form.controls.referancePeriod.setValue(s??null,{emitEvent:!1})}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275cmp=Ve({type:e,selectors:[["veracity-carbon-factors-control","objectType",""]],inputs:{objectType:"objectType"},features:[Go([{provide:Pl,useExisting:Ol(()=>e),multi:!0}]),ir],attrs:S6,decls:17,vars:5,consts:[[3,"formGroup"],["formControlName","isoCode","matTooltip","The country which the carbon factors are valid for"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","validOn","matTooltip","The date which the carbon factors are valid for, i.e. the CFs which are valid and 'current' on the date specified",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matDatepickerToggleIcon",""],["dp",""],[4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","Adjust carbon factors for the specified location (country ISO code) and date (valid on date)",3,"click"],[3,"value"],["formControlName","referancePeriod"]],template:function(n,s){if(n&1&&(J(0,"form",0)(1,"mat-form-field")(2,"mat-label"),pe(3,"Country ISO Code"),q(),J(4,"mat-select",1),Ee(5,w6,2,3,"mat-option",2),q()(),J(6,"mat-form-field")(7,"mat-label"),pe(8,"Valid On Date"),q(),xe(9,"input",3),J(10,"mat-datepicker-toggle",4),xe(11,"ph-icon-calendar",5),q(),xe(12,"mat-datepicker",null,6),q(),Ee(14,E6,5,1,"mat-form-field",7),J(15,"button",8),Re("click",function(){return s.onCalculate()}),pe(16," Calculate "),q()()),n&2){let o=ot(13);ie("formGroup",s.form),re(5),ie("ngForOf",s.isoCodes),re(4),ie("matDatepicker",o),re(1),ie("for",o),re(4),ie("ngIf",s.objectType==="assembly")}},dependencies:[Bo,Qt,y0,nr,x1,S1,b1,w1,hh,Ml,Il,uh,R0,Ho,C1,dh,rr,S0,b0,E0],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--arc-spacing-small);align-items:baseline}[_nghost-%COMP%]     .mdc-icon-button{display:grid!important;justify-content:center;align-content:center}"],changeDetection:0});let r=e;return r})();function _6(r,e){if(r&1){let t=Lr();mn(0),xe(1,"veracity-filters-control",1),J(2,"div",2)(3,"arc-icon-button",3),Re("click",function(){Vt(t);let n=ve();return Ht(n.onCompare())}),xe(4,"ph-icon-git-diff",4),q(),J(5,"arc-icon-button",5),Re("click",function(){Vt(t);let n=ve();return Ht(n.onExport())}),xe(6,"ph-icon-download",4),q(),xe(7,"veracity-carbon-factors-control",1),J(8,"button",6),Re("click",function(){Vt(t);let n=ve();return Ht(n.onViewOptions())}),xe(9,"ph-icon-faders-horizontal"),pe(10," View Options "),q()(),J(11,"ag-grid-angular",7),Re("gridReady",function(n){Vt(t);let s=ve();return Ht(s.onGridReady(n))})("selectionChanged",function(){Vt(t);let n=ve();return Ht(n.onSelectionChanged())}),q(),vn()}if(r&2){let t=e.ngIf,i=ve();re(1),ie("objectType",i.objectType)("formControl",i.filters),re(2),ie("matTooltip","Compare selected "+i.objectType+"(s)")("disabled",!t.canCompare),re(2),ie("matTooltip","Export "+i.objectType+"(s)")("disabled",t.exporting)("loading",t.exporting),re(2),ie("objectType",i.objectType)("formControl",i.carbonFactors),re(4),mi(t.gridTheme),ie("gridOptions",i.gridOptions)("modules",i.modules)}}var fP=(()=>{let e=class e extends od{constructor(){super(...arguments),this.objectType=Bt.Assembly,this.defaultObject={type:Bt.Assembly,title:"New Assembly",subtitle:"",comment:"",asset_function:Qb.General,subsystem:lt.Facade,mapping_variable:qm.Absolute,reference_multiplier:1,reference_unit:"Unit",attributes:{},ancestors:[]},this.gridOptions=Ue(Te({},this.defaultGridOptions),{context:{componentParent:this},columnDefs:[{headerName:"ID",field:"id",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",width:40},{headerName:"Title",field:"title",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",showDisabledCheckboxes:!0,cellRenderer:cd,checkboxSelection:({data:i})=>i!==void 0&&i.fullObject===!0&&i.calculatedCarbonFactors===!0},{headerName:"Attributes",field:"attributes",hide:!1,lockPosition:"left",pinned:"left",tooltipField:"attributes",cellRenderer:Lo,tooltipComponent:No,tooltipComponentParams:{valueFormatter:i=>i?.data?.attributes?Object.entries(i.data.attributes).map(([n,s])=>`${n}: ${s}`).reduce((n,s)=>`${n} | ${s}`):""}},{headerName:"Subsystem",field:"subsystem",hide:!1,lockPosition:"left",pinned:"left"},{headerName:"Subtitle",field:"subtitle",hide:!0,lockPosition:"left",pinned:"left"},{openByDefault:!0,hide:!1,headerName:"Carbon Factors",groupId:"carbon",headerGroupComponent:Jp,children:[{columnGroupShow:"closed"},...Object.keys(ti).map(i=>({headerName:Ma(i),field:i.toLowerCase(),cellDataType:"number",columnGroupShow:"open",hide:!1,wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:70,tooltipValueGetter:({data:n})=>n!==void 0&&n[i]!==void 0?`${Math.round(n[i].value*100)/100} ${n[i].units} (Calculated Value)`:n!==void 0&&Object.keys(ti).some(s=>n[s]!==void 0)?null:void 0,valueGetter:({data:n})=>n!==void 0&&n[i]!==void 0?n[i].value:n!==void 0&&Object.keys(ti).some(s=>n[s]!==void 0)?null:void 0,valueFormatter:({value:n,data:s})=>n!==void 0?n!==null&&s!==void 0?`${n.toFixed(2)}`:"-":void 0}))]},{headerName:"Comment",field:"comment",hide:!0},{headerName:"Created By",field:"created_by",hide:!0},{headerName:"Created At",field:"date_created",hide:!0,valueFormatter:Tl},{headerName:"Updated By",field:"updated_by",hide:!0},{headerName:"Updated At",field:"date_updated",hide:!0,valueFormatter:Tl},{headerName:"Mapping Variable",field:"mapping_variable",hide:!1,wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:100},{headerName:"Reference Unit",field:"reference_unit",hide:!0},{headerName:"Reference Multiplier",field:"reference_multiplier",hide:!0,cellDataType:"number"},{headerName:"Materials & Products",field:"ancestors",hide:!0,cellRenderer:tf}]}),this.addGridOptions=Ue(Te({},this.defaultGridOptions),{rowModelType:"clientSide",rowSelection:void 0,rowMultiSelectWithClick:!1,readOnlyEdit:!1,defaultColDef:{editable:!0,hide:!1},columnDefs:[{headerName:"Title",field:"title",lockVisible:!0,lockPosition:"left",pinned:"left",cellEditor:"agTextCellEditor",checkboxSelection:!0},{headerName:"Subtitle",field:"subtitle",cellEditor:"agTextCellEditor"},{headerName:"Comment",field:"comment",cellEditor:"agLargeTextCellEditor"},{headerName:"Subsystem",field:"subsystem",cellEditor:"agSelectCellEditor",cellEditorParams:{values:Object.values(lt)}},{headerName:"Mapping Variable",field:"mapping_variable",cellEditor:"agSelectCellEditor",cellEditorParams:{values:Object.values(qm)}},{headerName:"Reference Unit",field:"reference_unit",cellEditor:"agSelectCellEditor",cellEditorParams:{values:Object.values(ys)}},{headerName:"Reference Multiplier",field:"reference_multiplier",cellDataType:"number",cellEditor:"agNumberCellEditor"},{headerName:"Materials & Products",field:"ancestors",cellRenderer:tf,cellEditor:ef,cellEditorParams:{context:{objectGridComponent:this}}}]})}get editGridOptions(){return Ue(Te({},this.gridOptions),{context:{componentParent:this},rowModelType:"clientSide",getRowId:i=>i.data.id.toString(),rowSelection:void 0,rowMultiSelectWithClick:!1,readOnlyEdit:!0,defaultColDef:Ue(Te({},this.gridOptions.defaultColDef),{editable:!0}),columnDefs:[{headerName:"ID",field:"id",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",width:40,editable:!1},{headerName:"Title",field:"title",lockVisible:!0,lockPosition:"left",pinned:"left",editable:!1},{headerName:"Attributes",field:"attributes",hide:!1,lockPosition:"left",pinned:"left",tooltipField:"attributes",cellRenderer:Lo,tooltipComponent:No,tooltipComponentParams:{valueFormatter:i=>i?.data?.attributes?Object.entries(i.data.attributes).map(([n,s])=>`${n}: ${s}`).reduce((n,s)=>`${n} | ${s}`):""},editable:!1},{headerName:"Subsystem",field:"subsystem",lockPosition:"left",pinned:"left",editable:!1},{headerName:"Subtitle",field:"subtitle",cellEditor:"agTextCellEditor"},{headerName:"Comment",field:"comment",cellEditor:"agLargeTextCellEditor"},{headerName:"Mapping Variable",field:"mapping_variable",cellEditor:"agSelectCellEditor",cellEditorParams:{values:Object.values(qm)}},{headerName:"Reference Unit",field:"reference_unit",cellEditor:"agTextCellEditor"},{headerName:"Reference Multiplier",field:"reference_multiplier",cellDataType:"number",cellEditor:"agNumberCellEditor"},{headerName:"Materials & Products",field:"ancestors",cellRenderer:tf,cellEditor:ef,cellEditorParams:{context:{objectGridComponent:this}},editable:({data:i})=>i?.ancestors.length!==0}]})}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275cmp=Ve({type:e,selectors:[["veracity-assembly"]],features:[ir],decls:2,vars:3,consts:[[4,"ngIf"],[3,"objectType","formControl"],[1,"object-grid-controls"],[3,"matTooltip","disabled","click"],["slot","icon"],[3,"matTooltip","disabled","loading","click"],["mat-stroked-button","","color","primary",3,"click"],[3,"gridOptions","modules","gridReady","selectionChanged"]],template:function(n,s){n&1&&(Ee(0,_6,12,13,"ng-container",0),ze(1,"async")),n&2&&ie("ngIf",tt(1,1,s.vm$))},dependencies:[Qt,nr,Ho,gr,rr,kr,nf,sf,Jt],styles:["[_nghost-%COMP%]{--grid-border: inherit;display:flex;flex-direction:column;gap:var(--arc-spacing-small);height:100%;position:relative}div.object-grid-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--arc-spacing-small);align-items:baseline}div.object-grid-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:auto}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%;border:var(--grid-border)}ag-grid-angular[_ngcontent-%COMP%]   .ag-header-cell-label[_ngcontent-%COMP%]{justify-content:center;height:100%}"],changeDetection:0});let r=e;return r})();var kE,pd=kE=class extends At{constructor(){super(...arguments),this.size=Ft.medium,this.rotation=0}render(){return Tt`
      <svg
        id="main"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
        role=${Me(this.label?"img":void 0)}
        aria-label=${Me(this.label||void 0)}
        aria-hidden=${Me(this.label?void 0:"true")}
        style=${Ot({transform:this.rotation?`rotate(${this.rotation}deg)`:null,height:`var(--arc-font-size-${this.size})`,width:`var(--arc-font-size-${this.size})`})}
      >
        ${kE.svg}
      </svg>
    `}};pd.tag="ph-icon-warning-diamond";pd.styles=Pt;pd.svg=Rt`<path d="M128,72a8,8,0,0,1,8,8v56a8,8,0,0,1-16,0V80A8,8,0,0,1,128,72ZM116,172a12,12,0,1,0,12-12A12,12,0,0,0,116,172Zm124-44a15.85,15.85,0,0,1-4.67,11.28l-96.05,96.06a16,16,0,0,1-22.56,0h0l-96-96.06a16,16,0,0,1,0-22.56l96.05-96.06a16,16,0,0,1,22.56,0l96.05,96.06A15.85,15.85,0,0,1,240,128Zm-16,0L128,32,32,128,128,224h0Z"/>`;ye([Ie({type:String}),Le("design:type",String)],pd.prototype,"label",void 0);ye([Ie({type:String,reflect:!0}),Le("design:type",String)],pd.prototype,"size",void 0);ye([Ie({type:Number}),Le("design:type",Number)],pd.prototype,"rotation",void 0);pd=kE=ye([Dt("ph-icon-warning-diamond")],pd);function T6(r,e){if(r&1&&(mn(0),J(1,"mat-form-field")(2,"mat-label"),pe(3,"Replacement Cycle"),q(),xe(4,"input",5),q(),J(5,"div",6),xe(6,"ph-icon-warning-diamond",7),J(7,"span"),pe(8," The following values should be used in \u2018Products\u2019 to calculate the B stages to ensure that any Assemblies that reference products are calculated correctly. The required values for the \u2018Reference Study Period (RSP)\u2019 and the \u2018Number of Replacement Cycles (n_sys)\u2019 will be incorporated at Assembly level for the high-level (L1) assessments. "),xe(9,"br"),J(10,"strong"),pe(11,"B1"),q(),xe(12,"br"),pe(13," When calculating the B1 value for a Product, a reference study period (RSP) should be set to a value of 1. "),xe(14,"br")(15,"br"),J(16,"strong"),pe(17,"B2"),q(),xe(18,"br"),pe(19," When calculating the B3 value for a Product, the number of replacement cycles (n_sys) should be set to a value of 0. "),xe(20,"br")(21,"br"),J(22,"strong"),pe(23,"B4"),q(),xe(24,"br"),pe(25," When calculating the B4 value for a Product, the number of replacement cycles (n_sys) should be set to a value of 1. "),q()(),vn()),r&2){let t=ve();re(4),ie("formControl",t.replacementCycleInput)}}var of=(()=>{let e=class e{constructor(){this.applied=!1,this.ref=ce(Nr),this.defaultGridOptions=ce(_l),this.location="global",this.replacementCycleInput=new Mi(0,{nonNullable:!0}),this.gridTheme$=ce(Gr).select(({theme:i})=>i).pipe(pn(),Kt()),this.modules=[Oo],this.gridOptions=Ue(Te({},this.defaultGridOptions),{rowModelType:"clientSide",readOnlyEdit:!1,columnDefs:[{field:"type",headerName:"Property Type",cellDataType:"string",editable:!1,lockPosition:"left"},{field:"value",headerName:"Value",cellDataType:"number",editable:!0,cellEditor:"agNumberCellEditor"},{field:"units",headerName:"Unit",cellDataType:"string",editable:!0,cellEditor:"agSelectCellEditor",cellEditorParams:{values:Object.values(yE)}},{field:"source",headerName:"Source",cellDataType:"string",editable:!0,cellEditor:"agTextCellEditor"},{field:"comment",headerName:"Comment",cellDataType:"string",editable:!0,cellEditor:"agLargeTextCellEditor"}]})}agInit(i){this.params=i,this.location=i?.context.componentParent.carbonFactors.value?.isoCode?.["alpha-3"]??"global",this.ref.markForCheck()}getValue(){let i=[];return this.gridOptions.api?.forEachNode(n=>{i.push(n.data)}),i}isCancelAfterEnd(){return!this.applied}isPopup(){return!0}onGridReady(i){let n=this.params?.node?.data?.type,s=[];if(n==null)throw new Error;let o={[Bt.Assembly]:[],[Bt.Material]:Object.entries(Hu),[Bt.Product]:Object.entries(Wu)};for(let[l,c]of o[n]){let d=(this.params?.value??[]).find(h=>h.type===c&&h.location===this.location)??this.params.data[l],u=d!==void 0?{type:c,replacement_cycle:d.replacement_cycle,value:d.value,units:d.units,source:d.source,comment:d.comment}:{type:c,replacement_cycle:0,value:0,units:this.params?.data.type===Bt.Material?ys.KGCO2E_KG:ys.KGCO2E,source:"",comment:""};s.push(u)}let a=s[0]?.replacement_cycle??0;this.replacementCycleInput.setValue(a),this.replacementCycleInput.valueChanges.pipe().subscribe(l=>{i.api?.forEachNode(c=>{c.data&&c.setData(Ue(Te({},c.data),{replacement_cycle:l}))})}),i.api?.setRowData(s),i.api?.sizeColumnsToFit()}handleApply(){this.applied=!0,this.params?.stopEditing()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ve({type:e,selectors:[["veracity-properties-editor"]],decls:9,vars:8,consts:[["align","end"],["mat-flat-button","","color","primary",3,"click"],[1,"location"],[4,"ngIf"],["mat-card-body","",3,"gridOptions","modules","gridReady"],["matInput","",3,"formControl"],[1,"product-property-warning"],["size","x-large"]],template:function(n,s){n&1&&(J(0,"mat-card")(1,"mat-card-actions",0)(2,"button",1),Re("click",function(){return s.handleApply()}),pe(3," Apply "),q()(),J(4,"span",2),pe(5),q(),Ee(6,T6,26,1,"ng-container",3),J(7,"ag-grid-angular",4),Re("gridReady",function(a){return s.onGridReady(a)}),ze(8,"async"),q()()),n&2&&(re(5),Ii(s.location),re(1),ie("ngIf",(s.params==null||s.params.node==null||s.params.node.data==null?null:s.params.node.data.type)==="product"),re(1),mi(tt(8,6,s.gridTheme$)),ie("gridOptions",s.gridOptions)("modules",s.modules))},dependencies:[Qt,nr,_0,T0,hh,Ml,Il,gr,dh,rr,kr,Jt],styles:["mat-card[_ngcontent-%COMP%]{padding:var(--arc-spacing-small);height:50vh;display:flex;flex-direction:column;gap:var(--arc-spacing-small);overflow-y:scroll}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%;min-height:200px;min-width:600px}ph-icon-warning-diamond[_ngcontent-%COMP%]{font-size:var(--arc-font-size-large)}span.location[_ngcontent-%COMP%]{font-size:var(--arc-font-size-medium);font-weight:var(--arc-font-weight-bold)}div.product-property-warning[_ngcontent-%COMP%]{display:grid;gap:var(--arc-spacing-small);color:rgb(var(--arc-color-warning))}div.product-property-warning[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:var(--arc-font-weight-bold)}"],changeDetection:0});let r=e;return r})();function R6(r,e){if(r&1){let t=Lr();mn(0),xe(1,"veracity-filters-control",1),J(2,"div",2)(3,"arc-icon-button",3),Re("click",function(){Vt(t);let n=ve();return Ht(n.onCompare())}),xe(4,"ph-icon-git-diff",4),q(),J(5,"arc-icon-button",5),Re("click",function(){Vt(t);let n=ve();return Ht(n.onExport())}),xe(6,"ph-icon-download",4),q(),xe(7,"veracity-carbon-factors-control",1),J(8,"button",6),Re("click",function(){Vt(t);let n=ve();return Ht(n.onViewOptions())}),xe(9,"ph-icon-faders-horizontal"),pe(10," View Options "),q()(),J(11,"ag-grid-angular",7),Re("gridReady",function(n){Vt(t);let s=ve();return Ht(s.onGridReady(n))})("selectionChanged",function(){Vt(t);let n=ve();return Ht(n.onSelectionChanged())}),q(),vn()}if(r&2){let t=e.ngIf,i=ve();re(1),ie("objectType",i.objectType)("formControl",i.filters),re(2),ie("matTooltip","Compare selected "+i.objectType+"(s)")("disabled",!t.canCompare),re(2),ie("matTooltip","Export "+i.objectType+"(s)")("disabled",t.exporting)("loading",t.exporting),re(2),ie("objectType",i.objectType)("formControl",i.carbonFactors),re(4),mi(t.gridTheme),ie("gridOptions",i.gridOptions)("modules",i.modules)}}var gP=(()=>{let e=class e extends od{constructor(){super(...arguments),this.objectType=Bt.Material,this.defaultObject={type:Bt.Material,title:"New Material",subtitle:"",comment:"",reference_unit:ys.KG,properties:[],attributes:{disposal_scenario:"locally",manufacture_scenario:"locally"}},this.gridOptions=Ue(Te({},this.defaultGridOptions),{context:{componentParent:this},columnDefs:[{headerName:"ID",field:"id",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",width:40},{headerName:"Title",field:"title",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",showDisabledCheckboxes:!0,cellRenderer:cd,checkboxSelection:({data:i})=>i!==void 0&&i.ancestors!==void 0&&i.properties!==void 0&&Object.keys(ti).some(n=>i[n]!==void 0)&&i.fullObject===!0&&i.calculatedCarbonFactors===!0},{headerName:"Subtitle",field:"subtitle",hide:!1,lockPosition:"left",pinned:"left"},{headerName:"Attributes",field:"attributes",hide:!1,lockPosition:"left",pinned:"left",tooltipField:"attributes",cellRenderer:Lo,tooltipComponent:No,tooltipComponentParams:{valueFormatter:i=>i?.data?.attributes?Object.entries(i.data.attributes).map(([n,s])=>`${n}: ${s}`).reduce((n,s)=>`${n} | ${s}`):""}},{headerName:"Density",cellDataType:"number",columnGroupShow:"open",hide:!1,lockPosition:"left",pinned:"left",tooltipField:"attributes",minWidth:80,tooltipValueGetter:({data:i})=>{let{properties:n}=i??{},s=n?.find(({type:o})=>o==="density");return s!==void 0?`${Math.round(s.value*100)/100} ${s.units}`:void 0},valueGetter:({data:i})=>{let{properties:n}=i??{};return n?.find(({type:o})=>o==="density")?.value},valueFormatter:({value:i,data:n})=>i!==void 0&&n!==void 0?`${i.toFixed(2)}`:"-",width:80},{openByDefault:!0,hide:!1,headerGroupComponent:Jp,headerName:"Carbon Properties",groupId:"carbon",children:[{columnGroupShow:"closed"},...Object.keys(ti).map(i=>({headerName:Ma(i),field:i.toLowerCase(),cellDataType:"number",columnGroupShow:"open",hide:!1,wrapHeaderText:!0,autoHeaderHeight:!0,minWidth:100,tooltipValueGetter:({data:n})=>n!==void 0&&n[i]!==void 0?`${Math.round(n[i].value*100)/100} ${n[i].units}${Object.keys(Hu).includes(i)?"":" - (Not Editable - Calculated Value)"}`:n!==void 0&&Object.keys(ti).some(s=>n[s]!==void 0)?null:void 0,valueGetter:({data:n})=>n!==void 0&&n[i]!==void 0?n[i].value:n!==void 0&&Object.keys(ti).some(s=>n[s]!==void 0)?null:void 0,valueFormatter:({value:n,data:s})=>n!==void 0?n!==null&&s!==void 0?`${n.toFixed(2)}`:"-":void 0}))]},{headerName:"Comment",field:"comment",hide:!0},{headerName:"Created By",field:"created_by",hide:!0},{headerName:"Created At",field:"date_created",hide:!0,valueFormatter:Tl},{headerName:"Updated By",field:"updated_by",hide:!0},{headerName:"Updated At",field:"date_updated",hide:!0,valueFormatter:Tl}]}),this.addGridOptions=Ue(Te({},this.defaultGridOptions),{context:{componentParent:this},rowModelType:"clientSide",rowSelection:void 0,rowMultiSelectWithClick:!1,readOnlyEdit:!1,defaultColDef:{editable:!0,hide:!1},columnDefs:[{headerName:"Title",field:"title",lockVisible:!0,lockPosition:"left",pinned:"left",cellEditor:"agTextCellEditor",checkboxSelection:!0},{headerName:"Subtitle",field:"subtitle",cellEditor:"agTextCellEditor"},{headerName:"Comment",field:"comment",cellEditor:"agLargeTextCellEditor"},{headerName:"Carbon Properties",field:"properties",cellEditor:of,cellEditorParams:{context:{objectGridComponent:this}},valueFormatter:({data:i})=>Object.keys(i?.properties??{}).length===0?"Create carbon properties":"Edit carbon properties"}]}),this.editGridOptions=Ue(Te({},this.gridOptions),{context:{componentParent:this},rowModelType:"clientSide",getRowId:i=>i.data.id.toString(),rowSelection:void 0,rowMultiSelectWithClick:!1,readOnlyEdit:!0,defaultColDef:Ue(Te({},this.gridOptions.defaultColDef),{editable:!0}),columnDefs:[{headerName:"ID",field:"id",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",width:40,editable:!1},{headerName:"Title",field:"title",lockVisible:!0,lockPosition:"left",pinned:"left",editable:!1},{headerName:"Subtitle",field:"subtitle",cellEditor:"agTextCellEditor"},{headerName:"Comment",field:"comment",cellEditor:"agLargeTextCellEditor"},{headerName:"Unit",field:"reference_unit",cellEditor:"agSelectCellEditor",cellEditorParams:{values:Object.values(ys)}},{headerName:"Carbon Properties",field:"properties",cellEditor:of,cellEditorParams:{context:{objectGridComponent:this}},valueFormatter:({data:i})=>`${Object.keys(ti).filter(n=>i!==void 0&&i[n]!==void 0).length} Carbon Properties`}]})}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275cmp=Ve({type:e,selectors:[["veracity-material"]],features:[ir],decls:2,vars:3,consts:[[4,"ngIf"],[3,"objectType","formControl"],[1,"object-grid-controls"],[3,"matTooltip","disabled","click"],["slot","icon"],[3,"matTooltip","disabled","loading","click"],["mat-stroked-button","","color","primary",3,"click"],[3,"gridOptions","modules","gridReady","selectionChanged"]],template:function(n,s){n&1&&(Ee(0,R6,12,13,"ng-container",0),ze(1,"async")),n&2&&ie("ngIf",tt(1,1,s.vm$))},dependencies:[Qt,nr,Ho,gr,rr,kr,nf,sf,Jt],styles:["[_nghost-%COMP%]{--grid-border: inherit;display:flex;flex-direction:column;gap:var(--arc-spacing-small);height:100%;position:relative}div.object-grid-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--arc-spacing-small);align-items:baseline}div.object-grid-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:auto}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%;border:var(--grid-border)}ag-grid-angular[_ngcontent-%COMP%]   .ag-header-cell-label[_ngcontent-%COMP%]{justify-content:center;height:100%}"],changeDetection:0});let r=e;return r})();function A6(r,e){if(r&1){let t=Lr();mn(0),xe(1,"veracity-filters-control",1),J(2,"div",2)(3,"arc-icon-button",3),Re("click",function(){Vt(t);let n=ve();return Ht(n.onCompare())}),xe(4,"ph-icon-git-diff",4),q(),J(5,"arc-icon-button",5),Re("click",function(){Vt(t);let n=ve();return Ht(n.onExport())}),xe(6,"ph-icon-download",4),q(),xe(7,"veracity-carbon-factors-control",1),J(8,"button",6),Re("click",function(){Vt(t);let n=ve();return Ht(n.onViewOptions())}),xe(9,"ph-icon-faders-horizontal"),pe(10," View Options "),q()(),J(11,"ag-grid-angular",7),Re("gridReady",function(n){Vt(t);let s=ve();return Ht(s.onGridReady(n))})("selectionChanged",function(){Vt(t);let n=ve();return Ht(n.onSelectionChanged())}),q(),vn()}if(r&2){let t=e.ngIf,i=ve();re(1),ie("objectType",i.objectType)("formControl",i.filters),re(2),ie("matTooltip","Compare selected "+i.objectType+"(s)")("disabled",!t.canCompare),re(2),ie("matTooltip","Export "+i.objectType+"(s)")("disabled",t.exporting)("loading",t.exporting),re(2),ie("objectType",i.objectType)("formControl",i.carbonFactors),re(4),mi(t.gridTheme),ie("gridOptions",i.gridOptions)("modules",i.modules)}}var mP=(()=>{let e=class e extends od{constructor(){super(...arguments),this.objectType=Bt.Product,this.defaultObject={type:Bt.Product,title:"New Product",subtitle:"",comment:"",attributes:{},properties:[]},this.gridOptions=Ue(Te({},this.defaultGridOptions),{context:{componentParent:this},columnDefs:[{headerName:"ID",field:"id",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",width:40},{headerName:"Title",field:"title",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",showDisabledCheckboxes:!0,cellRenderer:cd,checkboxSelection:({data:i})=>i!==void 0&&i.ancestors!==void 0&&i.properties!==void 0&&Object.keys(ti).some(n=>i[n]!==void 0)&&i.fullObject===!0&&i.calculatedCarbonFactors===!0},{headerName:"Subtitle",field:"subtitle",hide:!1,lockPosition:"left",pinned:"left"},{headerName:"Attributes",field:"attributes",hide:!0,tooltipField:"attributes",cellRenderer:Lo,tooltipComponent:No,tooltipComponentParams:{valueFormatter:i=>i?.data?.attributes?Object.entries(i.data.attributes).map(([n,s])=>`${n}: ${s}`).reduce((n,s)=>`${n} | ${s}`):""}},{headerName:"Mass",cellDataType:"number",columnGroupShow:"open",hide:!1,lockPosition:"left",pinned:"left",tooltipField:"attributes",minWidth:80,tooltipValueGetter:({data:i})=>{let{properties:n}=i??{},s=n?.find(({type:o})=>o==="mass");return s!==void 0?`${Math.round(s.value*100)/100} ${s.units}`:void 0},valueGetter:({data:i})=>{let{properties:n}=i??{};return n?.find(({type:o})=>o==="mass")?.value},valueFormatter:({value:i,data:n})=>i!==void 0&&n!==void 0?`${i.toFixed(2)}`:"-",width:80},{openByDefault:!0,hide:!1,headerGroupComponent:Jp,headerName:"Carbon Properties",groupId:"carbon",children:[{columnGroupShow:"closed"},...Object.keys(ti).map(i=>({headerName:Ma(i),field:i.toLowerCase(),cellDataType:"number",columnGroupShow:"open",hide:!1,minWidth:100,tooltipValueGetter:({data:n})=>n!==void 0&&n[i]!==void 0?`${Math.round(n[i].value*100)/100} ${n[i].units}${Object.keys(Wu).includes(i)?"":" - (Not Editable - Calculated Value)"}`:n!==void 0&&Object.keys(ti).some(s=>n[s]!==void 0)?null:void 0,valueGetter:({data:n})=>n!==void 0&&n[i]!==void 0?n[i].value:n!==void 0&&Object.keys(ti).some(s=>n[s]!==void 0)?null:void 0,valueFormatter:({value:n,data:s})=>n!==void 0?n!==null&&s!==void 0?`${n.toFixed(2)}`:"-":void 0}))]},{headerName:"Comment",field:"comment",cellEditor:"agLargeTextCellEditor",hide:!0},{headerName:"Created By",field:"created_by",hide:!0},{headerName:"Created At",field:"date_created",hide:!0,valueFormatter:Tl},{headerName:"Updated By",field:"updated_by",hide:!0},{headerName:"Updated At",field:"date_updated",hide:!0,valueFormatter:Tl}]}),this.addGridOptions=Ue(Te({},this.defaultGridOptions),{context:{componentParent:this},rowModelType:"clientSide",rowSelection:void 0,rowMultiSelectWithClick:!1,readOnlyEdit:!1,defaultColDef:{editable:!0,hide:!1},columnDefs:[{headerName:"Title",field:"title",lockVisible:!0,lockPosition:"left",pinned:"left",editable:!1},{headerName:"Subtitle",field:"subtitle",cellEditor:"agTextCellEditor"},{headerName:"Comment",field:"comment",cellEditor:"agLargeTextCellEditor"},{headerName:"Carbon Properties",field:"properties",cellEditor:of,cellEditorParams:{context:{objectGridComponent:this}},valueFormatter:({data:i})=>Object.keys(i?.properties??{}).length===0?"Create carbon properties":"Edit carbon properties"},{headerName:"Materials & Products",field:"ancestors",cellEditor:ef,valueFormatter:({data:i})=>(i?.ancestors??[]).length===0?"Attach materials and products":"Edit attached materials and products"}]}),this.editGridOptions=Ue(Te({},this.gridOptions),{context:{componentParent:this},rowModelType:"clientSide",getRowId:i=>i.data.id.toString(),rowSelection:void 0,rowMultiSelectWithClick:!1,readOnlyEdit:!0,defaultColDef:Ue(Te({},this.gridOptions.defaultColDef),{editable:!0}),columnDefs:[{headerName:"ID",field:"id",lockVisible:!0,hide:!1,lockPosition:"left",pinned:"left",width:40,editable:!1},{headerName:"Title",field:"title",lockVisible:!0,lockPosition:"left",pinned:"left",editable:!1},{headerName:"Subtitle",field:"subtitle",cellEditor:"agTextCellEditor"},{headerName:"Comment",field:"comment",cellEditor:"agLargeTextCellEditor"},{headerName:"Carbon Properties",field:"properties",cellEditor:of,cellEditorParams:{context:{objectGridComponent:this}},editable:({data:i})=>i?.properties.length!==0,valueFormatter:({data:i})=>`${Object.keys(ti).filter(n=>i!==void 0&&i[n]!==void 0).length} Carbon Properties`},{headerName:"Materials & Products",field:"ancestors",cellRenderer:tf,cellEditor:ef,editable:({data:i})=>i?.ancestors.length!==0}]})}};e.\u0275fac=function(){let i;return function(s){return(i||(i=gi(e)))(s||e)}}(),e.\u0275cmp=Ve({type:e,selectors:[["veracity-product"]],features:[ir],decls:2,vars:3,consts:[[4,"ngIf"],[3,"objectType","formControl"],[1,"object-grid-controls"],[3,"matTooltip","disabled","click"],["slot","icon"],[3,"matTooltip","disabled","loading","click"],["mat-stroked-button","","color","primary",3,"click"],[3,"gridOptions","modules","gridReady","selectionChanged"]],template:function(n,s){n&1&&(Ee(0,A6,12,13,"ng-container",0),ze(1,"async")),n&2&&ie("ngIf",tt(1,1,s.vm$))},dependencies:[Qt,nr,Ho,gr,rr,kr,nf,sf,Jt],styles:["[_nghost-%COMP%]{--grid-border: inherit;display:flex;flex-direction:column;gap:var(--arc-spacing-small);height:100%;position:relative}div.object-grid-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--arc-spacing-small);align-items:baseline}div.object-grid-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:auto}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:100%;border:var(--grid-border)}ag-grid-angular[_ngcontent-%COMP%]   .ag-header-cell-label[_ngcontent-%COMP%]{justify-content:center;height:100%}"],changeDetection:0});let r=e;return r})();var vP=[{path:"",component:SO,children:[{path:"assembly",component:fP},{path:"material",component:gP},{path:"product",component:mP}]}];var VRe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=nh({type:e}),e.\u0275inj=rh({imports:[d1,I1,f1.forChild(vP),Q_,CO,y1]});let r=e;return r})();export{VRe as LibraryModule};
